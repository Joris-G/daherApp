"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2080],{9172:(U,v,i)=>{i.d(v,{b:()=>c});var t=i(655),e=i(5e3),p=i(9928);let c=(()=>{class n{constructor(s){this.loadingController=s}startLoading(s="Chargement ..."){this.loadingController.create({spinner:"lines",cssClass:"my-custom-class",message:s}).then(_=>{_.present()})}stopLoading(){return(0,t.mG)(this,void 0,void 0,function*(){setTimeout(()=>{this.loadingController.dismiss()},100)})}}return n.\u0275fac=function(s){return new(s||n)(e.LFG(p.HT))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})()},8627:(U,v,i)=>{i.d(v,{W:()=>c});var t=i(2340),e=i(5e3),p=i(8219);let c=(()=>{class n{constructor(s){this.requestService=s}getPrograms(){return this.requestService.createGetRequest(`${t.N.usineApi}programme_avions`)}getIri(s){return"string"==typeof s?s:`/api/programme_avions/${s.id}`}}return n.\u0275fac=function(s){return new(s||n)(e.LFG(p.s))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})()},181:(U,v,i)=>{i.d(v,{N:()=>n});var t=i(2340),e=i(5e3),p=i(8219);let n=(()=>{class d{constructor(_){this.requestService=_}getRoles(){return this.requestService.createGetRequest(`${t.N.usineApi}postes`)}getIri(_){return"string"==typeof _?_:`/api/postes/${_.id}`}}return d.\u0275fac=function(_){return new(_||d)(e.LFG(p.s))},d.\u0275prov=e.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"}),d})()},4337:(U,v,i)=>{i.d(v,{z:()=>c});var t=i(2340),e=i(5e3),p=i(8219);let c=(()=>{class n{constructor(s){this.requestService=s}getServices(){return this.requestService.createGetRequest(`${t.N.usineApi}services`)}getIri(s){return"string"==typeof s?s:`/api/services/${s.id}`}}return n.\u0275fac=function(s){return new(s||n)(e.LFG(p.s))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})()},7847:(U,v,i)=>{i.d(v,{W:()=>c});var t=i(2340),e=i(5e3),p=i(8219);let c=(()=>{class n{constructor(s){this.requestService=s}getUnites(){return this.requestService.createGetRequest(`${t.N.usineApi}divisions`)}getIri(s){return"string"==typeof s?s:`/api/services/${s.id}`}}return n.\u0275fac=function(s){return new(s||n)(e.LFG(p.s))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})()},1377:(U,v,i)=>{i.d(v,{f:()=>a});var t=i(655),e=i(2340),p=i(5e3),c=i(8219),n=i(181),d=i(4337),s=i(8627),_=i(7847);let h=(()=>{class o{constructor(){}getIri(r){return"string"==typeof r?r:`/api/services/${r.id}`}}return o.\u0275fac=function(r){return new(r||o)},o.\u0275prov=p.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})(),a=(()=>{class o{constructor(r,S,P,E,l,f){this.requestService=r,this.roleService=S,this.serviceService=P,this.programService=E,this.uniteService=l,this.usineService=f}getUserById(r){return this.requestService.createGetRequest(e.N.usineApi+`users/${r}`)}getUsers(r){return this.requestService.createGetRequest(e.N.usineApi+"users")}registerUser(r){return this.requestService.createPostRequest(e.N.usineApi+"users",r)}getIri(r){return"string"==typeof r?r:`/api/users/${r.id}`}getGroups(){return this.requestService.createGetRequest(`${e.N.usineApi}groupe_affectations`)}createGroup(r){return this.requestService.createPostRequest(`${e.N.usineApi}groupe_affectations`,r)}updateUser(r){const S={matricule:r.matricule,nom:r.nom,prenom:r.prenom,poste:this.roleService.getIri(r.poste),service:this.serviceService.getIri(r.service),programmeAvion:r.programmeAvion.map(P=>this.programService.getIri(P)),unite:this.uniteService.getIri(r.unite),site:this.usineService.getIri(r.site),tel:r.tel};return this.requestService.createPatchRequest(`${e.N.usineApi}users/${r.id}`,S)}addUserToGroup(r){return new Promise((S,P)=>(0,t.mG)(this,void 0,void 0,function*(){for(const E of r.groupeAffectations){const l={libelle:E.libelle,population:E.population.map(f=>this.getIri(f))};l.population.push(this.getIri(r)),yield this.requestService.createPatchRequest(`${e.N.usineApi}groupe_affectations/$${E.id}/addUsers`,{population:l.population}).subscribe(f=>{r.groupeAffectations=f})}S(r)}))}getUsersByService(r){return this.requestService.createGetRequest(`${e.N.usineApi}services/${r}`)}deleteUser(r){return this.requestService.createDeleteRequest(`${e.N.usineApi}users/${r}`)}confirmUser(r,S){return this.requestService.createPatchRequest(`${e.N.usineApi}users/${r}`,{isActive:S})}}return o.\u0275fac=function(r){return new(r||o)(p.LFG(c.s),p.LFG(n.N),p.LFG(d.z),p.LFG(s.W),p.LFG(_.W),p.LFG(h))},o.\u0275prov=p.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})()},5681:(U,v,i)=>{i.d(v,{Q:()=>_});var t=i(4147),e=i(5e3),p=i(7704),c=i(9928),n=i(2361);const d=["menu"];function s(h,u){if(1&h){const a=e.EpF();e.TgZ(0,"ion-content")(1,"ion-list")(2,"ion-item",15),e.NdJ("click",function(){e.CHM(a);const g=e.oxw();return g.isUserOpen=!0,g.isPopoverOpen=!g.isPopoverOpen,e.KtG(g.log(g.isUserOpen))}),e.TgZ(3,"ion-label"),e._uU(4,"Profil"),e.qZA()(),e.TgZ(5,"ion-item")(6,"ion-label"),e._uU(7,"Pr\xe9f\xe9rences"),e.qZA(),e._UZ(8,"ion-icon",16),e.qZA(),e.TgZ(9,"ion-item",17),e.NdJ("click",function(){e.CHM(a);const g=e.oxw();return e.KtG(g.navigate("admin"))}),e.TgZ(10,"ion-label"),e._uU(11,"Administration"),e.qZA(),e._UZ(12,"ion-icon",18),e.qZA(),e.TgZ(13,"ion-item",19),e.NdJ("click",function(){e.CHM(a);const g=e.oxw();return e.KtG(g.logoutClick())}),e._UZ(14,"ion-icon",20),e.TgZ(15,"ion-label"),e._uU(16,"D\xe9connexion"),e.qZA()(),e.TgZ(17,"ion-item")(18,"ion-label"),e._uU(19),e.qZA()()()()}if(2&h){const a=e.oxw();e.xp6(19),e.hij(" Version : ",a.version," ")}}let _=(()=>{class h{constructor(a,o){this.authService=a,this.navCtrl=o,this.isPopoverOpen=!1,this.isUserOpen=!1,this.version=t.i8}log(a){console.log(a)}ngOnChanges(a){this.user=this.authService.authUser}ngOnInit(){(0,e.X6Q)()&&(this.envMode="DEV")}logoutClick(){this.authService.logout().subscribe(()=>{this.navCtrl.navigateBack("/login")})}navigate(a){this.navCtrl.navigateRoot(a)}}return h.\u0275fac=function(a){return new(a||h)(e.Y36(p.e),e.Y36(c.SH))},h.\u0275cmp=e.Xpm({type:h,selectors:[["app-shared-user-header"]],viewQuery:function(a,o){if(1&a&&e.Gf(d,5),2&a){let g;e.iGM(g=e.CRH())&&(o.menu=g.first)}},inputs:{pageTitle:"pageTitle"},features:[e.TTD],decls:21,vars:7,consts:[[3,"translucent"],["color","primary"],["slot","start"],["autoHide","false","color","light"],["src","assets/images/logoDaherFondBleu.png",1,"ion-hide-sm-down","logo",3,"click"],[1,"ion-text-uppercase","ion-text-center"],["slot","end",1,"dev"],["id","button-profil","color","light","slot","end","outline","",1,"ion-margin-end",3,"click"],["name","person-circle-outline"],["color","light"],["slot","end","trigger","button-profil","alignment","end","side","bottom",3,"isOpen"],["slot","end","color","danger",1,"ion-hide-sm-down","margin",3,"click"],["slot","end","name","log-out-outline"],[1,"ion-hide-md-down"],[3,"user","userState","stateChangeEv"],["button","","id","trigger-button",3,"click"],["name","settings-outline","slot","start"],["button","",3,"click"],["name","construct-outline","slot","start"],["color","danger",1,"ion-hide-sm-up",3,"click"],["slot","start","name","log-out-outline"]],template:function(a,o){1&a&&(e.TgZ(0,"ion-header",0)(1,"ion-toolbar",1)(2,"ion-buttons",2),e._UZ(3,"ion-menu-button",3),e.TgZ(4,"ion-img",4),e.NdJ("click",function(){return o.navigate("home")}),e.qZA()(),e.TgZ(5,"ion-title",5),e._uU(6),e.qZA(),e.TgZ(7,"ion-label",6),e._uU(8),e.qZA(),e.TgZ(9,"ion-chip",7),e.NdJ("click",function(){return o.isPopoverOpen=!o.isPopoverOpen}),e._UZ(10,"ion-icon",8),e.TgZ(11,"ion-label",9),e._uU(12),e.qZA()(),e.TgZ(13,"ion-popover",10),e.YNc(14,s,20,1,"ng-template"),e.qZA(),e.TgZ(15,"ion-button",11),e.NdJ("click",function(){return o.logoutClick()}),e._UZ(16,"ion-icon",12),e.TgZ(17,"ion-label",13),e._uU(18,"D\xe9connexion"),e.qZA()()()(),e.TgZ(19,"ion-content")(20,"app-user-sheet",14),e.NdJ("stateChangeEv",function(r){return o.isUserOpen=r}),e.qZA()()),2&a&&(e.Q6J("translucent",!0),e.xp6(6),e.Oqu(o.pageTitle),e.xp6(2),e.Oqu(o.envMode),e.xp6(4),e.Oqu(null==o.user?null:o.user.username),e.xp6(1),e.Q6J("isOpen",o.isPopoverOpen),e.xp6(7),e.Q6J("user",o.user)("userState",o.isUserOpen))},dependencies:[c.YG,c.Sm,c.hM,c.W2,c.Gu,c.gu,c.Xz,c.Ie,c.Q$,c.q_,c.fG,c.d8,c.sr,c.wd,n.A],styles:[".margin[_ngcontent-%COMP%]{margin-right:10px}.logo[_ngcontent-%COMP%]{width:100px}@media print{[_nghost-%COMP%]{display:none}}.dev[_ngcontent-%COMP%]{color:red;text-transform:uppercase;font-size:large;font-weight:700;padding-right:100px}"]}),h})()},2361:(U,v,i)=>{i.d(v,{A:()=>s});var t=i(5e3),e=i(9172),p=i(2853),c=i(1377),n=i(9928);function d(_,h){if(1&_){const u=t.EpF();t.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),t._uU(3),t.qZA(),t.TgZ(4,"ion-icon",1),t.NdJ("click",function(){t.CHM(u);const o=t.oxw();return t.KtG(o.userState=!1)}),t.qZA()()(),t.TgZ(5,"ion-content")(6,"ion-item")(7,"ion-label"),t._uU(8,"Nom"),t.qZA(),t._UZ(9,"ion-input",2),t.qZA(),t.TgZ(10,"ion-item")(11,"ion-label"),t._uU(12,"Pr\xe9nom"),t.qZA(),t._UZ(13,"ion-input",2),t.qZA(),t.TgZ(14,"ion-item")(15,"ion-label"),t._uU(16,"Matricule"),t.qZA(),t._UZ(17,"ion-input",3)(18,"ion-icon",4),t.qZA(),t.TgZ(19,"ion-item")(20,"ion-label"),t._uU(21,"E-Mail"),t.qZA(),t._UZ(22,"ion-input",3)(23,"ion-icon",4),t.qZA(),t.TgZ(24,"ion-item")(25,"ion-label"),t._uU(26,"T\xe9l\xe9phone"),t.qZA(),t._UZ(27,"ion-input",2),t.qZA()(),t.TgZ(28,"ion-footer")(29,"ion-toolbar")(30,"ion-buttons")(31,"ion-button",5),t.NdJ("click",function(){t.CHM(u);const o=t.oxw();return t.KtG(o.updateUserClick())}),t.TgZ(32,"label"),t._uU(33,"Enregistrer"),t.qZA(),t._UZ(34,"ion-icon",6),t.qZA(),t.TgZ(35,"ion-button",5),t.NdJ("click",function(){t.CHM(u);const o=t.oxw();return t.KtG(o.deleteUserClick())}),t._UZ(36,"ion-icon",7),t.qZA()()()()}if(2&_){const u=t.oxw();t.xp6(3),t.AsE(" Fiche utilisateur : ",u.user.nom," ",u.user.prenom,""),t.xp6(6),t.Q6J("value",u.user.nom),t.xp6(4),t.Q6J("value",u.user.prenom),t.xp6(4),t.Q6J("value",u.user.matricule),t.xp6(5),t.Q6J("value",u.user.mail),t.xp6(5),t.Q6J("value",u.user.tel)}}let s=(()=>{class _{constructor(u,a,o){this.loadingService=u,this.alertService=a,this.userService=o,this.userState=!1,this.stateChangeEv=new t.vpe}updateUserClick(){this.loadingService.startLoading("Mise \xe0 jour de l'utilisateur"),this.userService.updateUser(this.user).subscribe(u=>{console.log(u),this.loadingService.stopLoading()},u=>{console.error(u),this.loadingService.stopLoading(),this.alertService.simpleAlert("Erreur serveur","Probl\xe8me lors de la mise \xe0 jour","L'utilisateur n'a pas \xe9t\xe9 modifi\xe9. Veuillez recommencer.")})}deleteUserClick(){this.loadingService.startLoading("Suppression de l'utilisateur"),this.userService.deleteUser(this.user.id).subscribe(()=>{this.loadingService.stopLoading()},u=>{this.alertService.simpleAlert("Erreur","Suppression d'un utilisateur","Une erreur est survenue pendant la suppression de l'utilisateur. "+u.message),this.loadingService.stopLoading()})}}return _.\u0275fac=function(u){return new(u||_)(t.Y36(e.b),t.Y36(p.c),t.Y36(c.f))},_.\u0275cmp=t.Xpm({type:_,selectors:[["app-user-sheet"]],inputs:{user:"user",userState:"userState"},outputs:{stateChangeEv:"stateChangeEv"},decls:2,vars:1,consts:[["trigger","trigger-button",3,"isOpen","ionModalDidDismiss"],["button","","slot","end","name","close-outline","size","large",3,"click"],["type","text",3,"value"],["disabled","true","type","text",3,"value"],["slot","end","name","lock-closed-outline"],["slot","end","size","small",3,"click"],["slot","start","name","sync-outline"],["slot","icon-only","name","trash-outline"]],template:function(u,a){1&u&&(t.TgZ(0,"ion-modal",0),t.NdJ("ionModalDidDismiss",function(){return a.userState=!1,a.stateChangeEv.emit(!1)}),t.YNc(1,d,37,7,"ng-template"),t.qZA()),2&u&&t.Q6J("isOpen",a.userState)},dependencies:[n.YG,n.Sm,n.W2,n.fr,n.Gu,n.gu,n.pK,n.Ie,n.Q$,n.ki,n.sr,n.wd,n.j9],styles:["ion-content[_ngcontent-%COMP%]{height:50%}"]}),_})()},2080:(U,v,i)=>{i.r(v),i.d(v,{HomePageModule:()=>E});var t=i(9808),e=i(9928),p=i(4182),c=i(4406),n=i(5e3),d=i(7704),s=i(5681);function _(l,f){1&l&&n._UZ(0,"ion-icon",6)}function h(l,f){1&l&&(n.TgZ(0,"ion-card-content")(1,"ion-item",7)(2,"ion-label"),n._uU(3,"Id Moulage"),n.qZA(),n._UZ(4,"ion-input",8,9),n.TgZ(6,"ion-note",10),n._uU(7,"Entrer un num\xe9ro d'ID ou scanner le code barre de la feuille de moulage"),n.qZA()()())}function u(l,f){if(1&l&&(n.TgZ(0,"ion-card",3)(1,"ion-card-header")(2,"ion-card-title"),n.YNc(3,_,1,0,"ion-icon",4),n._uU(4),n.qZA()(),n.YNc(5,h,8,0,"ion-card-content",5),n.qZA()),2&l){const m=f.$implicit;n.Q6J("button","button"===m.type)("routerLink","button"===m.type?m.path:""),n.xp6(3),n.Q6J("ngIf",null==m.options?null:m.options.qualityOnly),n.xp6(1),n.hij(" ",m.title," "),n.xp6(1),n.Q6J("ngIf",null==m.options?null:m.options.input)}}const a=[{title:"Moulage",path:"/molding",type:"button"},{title:"Outillage",path:"/tooling",type:"button"}],g=[{path:"",component:(()=>{class l{constructor(m,T,A){this.router=m,this.navCtrl=T,this.authService=A}ionViewWillEnter(){this.page={pageTitle:"ACCUEIL",menuItems:a,contentId:"home-content"}}ngOnInit(){this.page={pageTitle:"ACCUEIL",menuItems:a,contentId:"home-content"}}}return l.\u0275fac=function(m){return new(m||l)(n.Y36(c.F0),n.Y36(e.SH),n.Y36(d.e))},l.\u0275cmp=n.Xpm({type:l,selectors:[["app-home"]],decls:3,vars:3,consts:[[3,"pageTitle"],["color","medium",3,"fullscreen"],["class","menu-item-card","routerDirection","root",3,"button","routerLink",4,"ngFor","ngForOf"],["routerDirection","root",1,"menu-item-card",3,"button","routerLink"],["name","shield-half-outline",4,"ngIf"],[4,"ngIf"],["name","shield-half-outline"],["shape","round"],["type","text","placeholder",""],["inputIdMolding",""],["slot","helper"]],template:function(m,T){1&m&&(n._UZ(0,"app-shared-user-header",0),n.TgZ(1,"ion-content",1),n.YNc(2,u,6,5,"ion-card",2),n.qZA()),2&m&&(n.Q6J("pageTitle",T.page.pageTitle),n.xp6(1),n.Q6J("fullscreen",!1),n.xp6(1),n.Q6J("ngForOf",T.page.menuItems))},dependencies:[t.sg,t.O5,e.PM,e.FN,e.Zi,e.Dq,e.W2,e.gu,e.pK,e.Ie,e.Q$,e.uN,e.j9,e.YI,c.rH,s.Q],styles:[".menu-item-card[_ngcontent-%COMP%]{width:auto}"]}),l})()}];let r=(()=>{class l{constructor(){}}return l.\u0275fac=function(m){return new(m||l)},l.\u0275mod=n.oAB({type:l}),l.\u0275inj=n.cJS({imports:[c.Bz.forChild(g),c.Bz]}),l})();var S=i(8890),P=i(6091);let E=(()=>{class l{}return l.\u0275fac=function(m){return new(m||l)},l.\u0275mod=n.oAB({type:l}),l.\u0275inj=n.cJS({imports:[t.ez,p.u5,e.Pc,r,S.A,P.$]}),l})()},4147:U=>{U.exports={i8:"1.5.2"}}}]);