"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2080],{9172:(S,m,r)=>{r.d(m,{b:()=>d});var t=r(655),o=r(5e3),e=r(9928);let d=(()=>{class n{constructor(a){this.loadingController=a}startLoading(a="Chargement ..."){this.loadingController.create({spinner:"lines",cssClass:"my-custom-class",message:a}).then(g=>{g.present()})}stopLoading(){return(0,t.mG)(this,void 0,void 0,function*(){setTimeout(()=>{this.loadingController.dismiss()},100)})}}return n.\u0275fac=function(a){return new(a||n)(o.LFG(e.HT))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})()},8627:(S,m,r)=>{r.d(m,{W:()=>d});var t=r(2340),o=r(5e3),e=r(3222);let d=(()=>{class n{constructor(a){this.requestService=a}getPrograms(){return this.requestService.createGetRequest(`${t.N.usineApi}programme_avions`)}getIri(a){return"string"==typeof a?a:`/api/programme_avions/${a.id}`}}return n.\u0275fac=function(a){return new(a||n)(o.LFG(e.s))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})()},181:(S,m,r)=>{r.d(m,{N:()=>n});var t=r(2340),o=r(5e3),e=r(3222);let n=(()=>{class _{constructor(g){this.requestService=g}getRoles(){return this.requestService.createGetRequest(`${t.N.usineApi}postes`)}getIri(g){return"string"==typeof g?g:`/api/postes/${g.id}`}}return _.\u0275fac=function(g){return new(g||_)(o.LFG(e.s))},_.\u0275prov=o.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"}),_})()},4337:(S,m,r)=>{r.d(m,{z:()=>d});var t=r(2340),o=r(5e3),e=r(3222);let d=(()=>{class n{constructor(a){this.requestService=a}getServices(){return this.requestService.createGetRequest(`${t.N.usineApi}services`)}getIri(a){return"string"==typeof a?a:`/api/services/${a.id}`}}return n.\u0275fac=function(a){return new(a||n)(o.LFG(e.s))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})()},7847:(S,m,r)=>{r.d(m,{W:()=>d});var t=r(2340),o=r(5e3),e=r(3222);let d=(()=>{class n{constructor(a){this.requestService=a}getUnites(){return this.requestService.createGetRequest(`${t.N.usineApi}divisions`)}getIri(a){return"string"==typeof a?a:`/api/services/${a.id}`}}return n.\u0275fac=function(a){return new(a||n)(o.LFG(e.s))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})()},1377:(S,m,r)=>{r.d(m,{f:()=>c});var t=r(655),o=r(2340),e=r(5e3),d=r(3222),n=r(181),_=r(4337),a=r(8627),g=r(7847);let f=(()=>{class s{constructor(){}getIri(i){return"string"==typeof i?i:`/api/services/${i.id}`}}return s.\u0275fac=function(i){return new(i||s)},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),c=(()=>{class s{constructor(i,U,A,E,l,v){this.requestService=i,this.roleService=U,this.serviceService=A,this.programService=E,this.uniteService=l,this.usineService=v,console.log("construct userService")}getUserById(i){return this.requestService.createGetRequest(o.N.usineApi+`users/${i}`)}getUsers(i){return this.requestService.createGetRequest(o.N.usineApi+"users")}registerUser(i){return this.requestService.createPostRequest(o.N.usineApi+"users",i)}getIri(i){return"string"==typeof i?i:`/api/users/${i.id}`}getGroups(){return this.requestService.createGetRequest(`${o.N.usineApi}groupe_affectations`)}createGroup(i){return this.requestService.createPostRequest(`${o.N.usineApi}groupe_affectations`,i)}updateUser(i){const U={matricule:i.matricule,nom:i.nom,prenom:i.prenom,poste:this.roleService.getIri(i.poste),service:this.serviceService.getIri(i.service),programmeAvion:i.programmeAvion.map(A=>this.programService.getIri(A)),unite:this.uniteService.getIri(i.unite),site:this.usineService.getIri(i.site),tel:i.tel};return this.requestService.createPatchRequest(`${o.N.usineApi}users/${i.id}`,U)}addUserToGroup(i){return new Promise((U,A)=>(0,t.mG)(this,void 0,void 0,function*(){for(const E of i.groupeAffectations){const l={libelle:E.libelle,population:E.population.map(v=>this.getIri(v))};l.population.push(this.getIri(i)),yield this.requestService.createPatchRequest(`${o.N.usineApi}groupe_affectations/$${E.id}/addUsers`,{population:l.population}).subscribe(v=>{i.groupeAffectations=v})}U(i)}))}getUsersByService(i){return this.requestService.createGetRequest(`${o.N.usineApi}services/${i}`)}deleteUser(i){return this.requestService.createDeleteRequest(`${o.N.usineApi}users/${i}`)}confirmUser(i,U){return this.requestService.createPatchRequest(`${o.N.usineApi}users/${i}`,{isActive:U})}}return s.\u0275fac=function(i){return new(i||s)(e.LFG(d.s),e.LFG(n.N),e.LFG(_.z),e.LFG(a.W),e.LFG(g.W),e.LFG(f))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})()},5681:(S,m,r)=>{r.d(m,{Q:()=>f});var t=r(4147),o=r(2340),e=r(5e3),d=r(7704),n=r(9928),_=r(2361);const a=["menu"];function g(h,c){if(1&h){const s=e.EpF();e.TgZ(0,"ion-content")(1,"ion-list")(2,"ion-item",15),e.NdJ("click",function(){e.CHM(s);const i=e.oxw();return e.KtG(i.isUserOpen=!0)}),e.TgZ(3,"ion-label"),e._uU(4,"Profil"),e.qZA()(),e.TgZ(5,"ion-item")(6,"ion-label"),e._uU(7,"Pr\xe9f\xe9rences"),e.qZA(),e._UZ(8,"ion-icon",16),e.qZA(),e.TgZ(9,"ion-item",17),e.NdJ("click",function(){e.CHM(s);const i=e.oxw();return e.KtG(i.navigate("admin"))}),e.TgZ(10,"ion-label"),e._uU(11,"Administration"),e.qZA(),e._UZ(12,"ion-icon",18),e.qZA(),e.TgZ(13,"ion-item",19),e.NdJ("click",function(){e.CHM(s);const i=e.oxw();return e.KtG(i.logoutClick())}),e._UZ(14,"ion-icon",20),e.TgZ(15,"ion-label"),e._uU(16,"D\xe9connexion"),e.qZA()(),e.TgZ(17,"ion-item")(18,"ion-label"),e._uU(19),e.qZA()()()()}if(2&h){const s=e.oxw();e.xp6(19),e.hij(" Version : ",s.version," ")}}let f=(()=>{class h{constructor(s,u){this.authService=s,this.navCtrl=u,this.isUserOpen=!1,this.version=t.i8}ngOnChanges(s){this.user=this.authService.authUser}ngOnInit(){this.envMode=o.N.name}logoutClick(){this.authService.logout().subscribe(()=>{this.navCtrl.navigateBack("/login")})}navigate(s){this.navCtrl.navigateRoot(s)}}return h.\u0275fac=function(s){return new(s||h)(e.Y36(d.e),e.Y36(n.SH))},h.\u0275cmp=e.Xpm({type:h,selectors:[["app-shared-user-header"]],viewQuery:function(s,u){if(1&s&&e.Gf(a,5),2&s){let i;e.iGM(i=e.CRH())&&(u.menu=i.first)}},inputs:{pageTitle:"pageTitle"},features:[e.TTD],decls:21,vars:6,consts:[[3,"translucent"],["color","primary"],["slot","start"],["autoHide","false","color","light"],["src","assets/images/logoDaherFondBleu.png",1,"ion-hide-sm-down","logo",3,"click"],[1,"ion-text-uppercase","ion-text-center"],["slot","end",1,"dev"],["id","button-profil","color","light","slot","end","outline","",1,"ion-margin-end"],["name","person-circle-outline"],["color","light"],["slot","end","trigger","button-profil","alignment","end","side","bottom","dismissOnSelect","true"],["slot","end","color","danger",1,"ion-hide-sm-down","margin",3,"click"],["slot","end","name","log-out-outline"],[1,"ion-hide-md-down"],[3,"user","userState","stateChangeEv"],["button","","id","trigger-button",3,"click"],["name","settings-outline","slot","start"],["button","",3,"click"],["name","construct-outline","slot","start"],["color","danger",1,"ion-hide-sm-up",3,"click"],["slot","start","name","log-out-outline"]],template:function(s,u){1&s&&(e.TgZ(0,"ion-header",0)(1,"ion-toolbar",1)(2,"ion-buttons",2),e._UZ(3,"ion-menu-button",3),e.TgZ(4,"ion-img",4),e.NdJ("click",function(){return u.navigate("home")}),e.qZA()(),e.TgZ(5,"ion-title",5),e._uU(6),e.qZA(),e.TgZ(7,"ion-label",6),e._uU(8),e.qZA(),e.TgZ(9,"ion-chip",7),e._UZ(10,"ion-icon",8),e.TgZ(11,"ion-label",9),e._uU(12),e.qZA()(),e.TgZ(13,"ion-popover",10),e.YNc(14,g,20,1,"ng-template"),e.qZA(),e.TgZ(15,"ion-button",11),e.NdJ("click",function(){return u.logoutClick()}),e._UZ(16,"ion-icon",12),e.TgZ(17,"ion-label",13),e._uU(18,"D\xe9connexion"),e.qZA()()()(),e.TgZ(19,"ion-content")(20,"app-user-sheet",14),e.NdJ("stateChangeEv",function(U){return u.isUserOpen=U}),e.qZA()()),2&s&&(e.Q6J("translucent",!0),e.xp6(6),e.Oqu(u.pageTitle),e.xp6(2),e.Oqu(u.envMode),e.xp6(4),e.Oqu(null==u.user?null:u.user.username),e.xp6(8),e.Q6J("user",u.user)("userState",u.isUserOpen))},dependencies:[n.YG,n.Sm,n.hM,n.W2,n.Gu,n.gu,n.Xz,n.Ie,n.Q$,n.q_,n.fG,n.d8,n.sr,n.wd,_.A],styles:[".margin[_ngcontent-%COMP%]{margin-right:10px}.logo[_ngcontent-%COMP%]{width:100px}@media print{[_nghost-%COMP%]{display:none}}.dev[_ngcontent-%COMP%]{color:red;text-transform:uppercase;font-size:large;font-weight:700;padding-right:100px}"]}),h})()},2361:(S,m,r)=>{r.d(m,{A:()=>g});var t=r(5e3),o=r(9172),e=r(2853),d=r(1377),n=r(9928),_=r(9808);function a(f,h){if(1&f){const c=t.EpF();t.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),t._uU(3),t.qZA(),t.TgZ(4,"ion-icon",1),t.NdJ("click",function(){t.CHM(c);const u=t.oxw();return t.KtG(u.userState=!1)}),t.qZA()()(),t.TgZ(5,"ion-content")(6,"ion-item")(7,"ion-label"),t._uU(8,"Nom"),t.qZA(),t._UZ(9,"ion-input",2),t.qZA(),t.TgZ(10,"ion-item")(11,"ion-label"),t._uU(12,"Pr\xe9nom"),t.qZA(),t._UZ(13,"ion-input",2),t.qZA(),t.TgZ(14,"ion-item")(15,"ion-label"),t._uU(16,"Matricule"),t.qZA(),t._UZ(17,"ion-input",3)(18,"ion-icon",4),t.qZA(),t.TgZ(19,"ion-item")(20,"ion-label"),t._uU(21,"E-Mail"),t.qZA(),t._UZ(22,"ion-input",3)(23,"ion-icon",4),t.qZA(),t.TgZ(24,"ion-item")(25,"ion-label"),t._uU(26,"T\xe9l\xe9phone"),t.qZA(),t._UZ(27,"ion-input",2),t.qZA(),t.TgZ(28,"ion-item")(29,"ion-label"),t._uU(30,"Date de cr\xe9ation"),t.qZA(),t._UZ(31,"ion-input",3),t.ALo(32,"date"),t._UZ(33,"ion-icon",4),t.qZA()(),t.TgZ(34,"ion-footer")(35,"ion-toolbar")(36,"ion-buttons")(37,"ion-button",5),t.NdJ("click",function(){t.CHM(c);const u=t.oxw();return t.KtG(u.updateUserClick())}),t.TgZ(38,"label"),t._uU(39,"Enregistrer"),t.qZA(),t._UZ(40,"ion-icon",6),t.qZA(),t.TgZ(41,"ion-button",5),t.NdJ("click",function(){t.CHM(c);const u=t.oxw();return t.KtG(u.deleteUserClick())}),t._UZ(42,"ion-icon",7),t.qZA()()()()}if(2&f){const c=t.oxw();t.xp6(3),t.AsE(" Fiche utilisateur : ",c.user.nom," ",c.user.prenom,""),t.xp6(6),t.Q6J("value",c.user.nom),t.xp6(4),t.Q6J("value",c.user.prenom),t.xp6(4),t.Q6J("value",c.user.matricule),t.xp6(5),t.Q6J("value",c.user.mail),t.xp6(5),t.Q6J("value",c.user.tel),t.xp6(4),t.Q6J("value",t.lcZ(32,8,c.user.createdAt))}}let g=(()=>{class f{constructor(c,s,u){this.loadingService=c,this.alertService=s,this.userService=u,this.userState=!1,this.stateChangeEv=new t.vpe}updateUserClick(){this.loadingService.startLoading("Mise \xe0 jour de l'utilisateur"),this.userService.updateUser(this.user).subscribe(c=>{console.log(c),this.loadingService.stopLoading()},c=>{console.error(c),this.loadingService.stopLoading(),this.alertService.simpleAlert("Erreur serveur","Probl\xe8me lors de la mise \xe0 jour","L'utilisateur n'a pas \xe9t\xe9 modifi\xe9. Veuillez recommencer.")})}deleteUserClick(){this.loadingService.startLoading("Suppression de l'utilisateur"),this.userService.deleteUser(this.user.id).subscribe(()=>{this.loadingService.stopLoading()},c=>{this.alertService.simpleAlert("Erreur","Suppression d'un utilisateur","Une erreur est survenue pendant la suppression de l'utilisateur. "+c.message),this.loadingService.stopLoading()})}}return f.\u0275fac=function(c){return new(c||f)(t.Y36(o.b),t.Y36(e.c),t.Y36(d.f))},f.\u0275cmp=t.Xpm({type:f,selectors:[["app-user-sheet"]],inputs:{user:"user",userState:"userState"},outputs:{stateChangeEv:"stateChangeEv"},decls:2,vars:1,consts:[["trigger","trigger-button",3,"isOpen","ionModalDidDismiss"],["button","","slot","end","name","close-outline","size","large",3,"click"],["type","text",3,"value"],["disabled","true","type","text",3,"value"],["slot","end","name","lock-closed-outline"],["slot","end","size","small",3,"click"],["slot","start","name","sync-outline"],["slot","icon-only","name","trash-outline"]],template:function(c,s){1&c&&(t.TgZ(0,"ion-modal",0),t.NdJ("ionModalDidDismiss",function(){return s.userState=!1,s.stateChangeEv.emit(!1)}),t.YNc(1,a,43,10,"ng-template"),t.qZA()),2&c&&t.Q6J("isOpen",s.userState)},dependencies:[n.YG,n.Sm,n.W2,n.fr,n.Gu,n.gu,n.pK,n.Ie,n.Q$,n.ki,n.sr,n.wd,n.j9,_.uU],styles:["ion-content[_ngcontent-%COMP%]{height:50%}"]}),f})()},2080:(S,m,r)=>{r.r(m),r.d(m,{HomePageModule:()=>E});var t=r(9808),o=r(9928),e=r(4182),d=r(4406),n=r(5e3),_=r(7704),a=r(5681);function g(l,v){1&l&&n._UZ(0,"ion-icon",6)}function f(l,v){1&l&&(n.TgZ(0,"ion-card-content")(1,"ion-item",7)(2,"ion-label"),n._uU(3,"Id Moulage"),n.qZA(),n._UZ(4,"ion-input",8,9),n.TgZ(6,"ion-note",10),n._uU(7,"Entrer un num\xe9ro d'ID ou scanner le code barre de la feuille de moulage"),n.qZA()()())}function h(l,v){if(1&l&&(n.TgZ(0,"ion-card",3)(1,"ion-card-header")(2,"ion-card-title"),n.YNc(3,g,1,0,"ion-icon",4),n._uU(4),n.qZA()(),n.YNc(5,f,8,0,"ion-card-content",5),n.qZA()),2&l){const p=v.$implicit;n.Q6J("button","button"===p.type)("routerLink","button"===p.type?p.path:""),n.xp6(3),n.Q6J("ngIf",null==p.options?null:p.options.qualityOnly),n.xp6(1),n.hij(" ",p.title," "),n.xp6(1),n.Q6J("ngIf",null==p.options?null:p.options.input)}}const c=[{title:"Moulage",path:"/molding",type:"button"},{title:"Outillage",path:"/tooling",type:"button"}],u=[{path:"",component:(()=>{class l{constructor(p,T,C){this.router=p,this.navCtrl=T,this.authService=C}ionViewWillEnter(){this.page={pageTitle:"ACCUEIL",menuItems:c,contentId:"home-content"}}ngOnInit(){this.page={pageTitle:"ACCUEIL",menuItems:c,contentId:"home-content"}}}return l.\u0275fac=function(p){return new(p||l)(n.Y36(d.F0),n.Y36(o.SH),n.Y36(_.e))},l.\u0275cmp=n.Xpm({type:l,selectors:[["app-home"]],decls:3,vars:3,consts:[[3,"pageTitle"],["color","medium",3,"fullscreen"],["class","menu-item-card","routerDirection","root",3,"button","routerLink",4,"ngFor","ngForOf"],["routerDirection","root",1,"menu-item-card",3,"button","routerLink"],["name","shield-half-outline",4,"ngIf"],[4,"ngIf"],["name","shield-half-outline"],["shape","round"],["type","text","placeholder",""],["inputIdMolding",""],["slot","helper"]],template:function(p,T){1&p&&(n._UZ(0,"app-shared-user-header",0),n.TgZ(1,"ion-content",1),n.YNc(2,h,6,5,"ion-card",2),n.qZA()),2&p&&(n.Q6J("pageTitle",T.page.pageTitle),n.xp6(1),n.Q6J("fullscreen",!1),n.xp6(1),n.Q6J("ngForOf",T.page.menuItems))},dependencies:[t.sg,t.O5,o.PM,o.FN,o.Zi,o.Dq,o.W2,o.gu,o.pK,o.Ie,o.Q$,o.uN,o.j9,o.YI,d.rH,a.Q],styles:[".menu-item-card[_ngcontent-%COMP%]{width:auto}"]}),l})()}];let i=(()=>{class l{constructor(){}}return l.\u0275fac=function(p){return new(p||l)},l.\u0275mod=n.oAB({type:l}),l.\u0275inj=n.cJS({imports:[d.Bz.forChild(u),d.Bz]}),l})();var U=r(8890),A=r(6091);let E=(()=>{class l{}return l.\u0275fac=function(p){return new(p||l)},l.\u0275mod=n.oAB({type:l}),l.\u0275inj=n.cJS({imports:[t.ez,e.u5,o.Pc,i,U.A,A.$]}),l})()},4147:S=>{S.exports={i8:"1.5.5"}}}]);