"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8592],{4833:(C,E,s)=>{s.d(E,{c:()=>m});var f=s(7205),e=s(7683),g=s(3139);const m=(u,r)=>{let o,t;const l=(v,M,_)=>{if("undefined"==typeof document)return;const w=document.elementFromPoint(v,M);w&&r(w)?w!==o&&(c(),n(w,_)):c()},n=(v,M)=>{o=v,t||(t=o);const _=o;(0,f.c)(()=>_.classList.add("ion-activated")),M()},c=(v=!1)=>{if(!o)return;const M=o;(0,f.c)(()=>M.classList.remove("ion-activated")),v&&t!==o&&o.click(),o=void 0};return(0,g.createGesture)({el:u,gestureName:"buttonActiveDrag",threshold:0,onStart:v=>l(v.currentX,v.currentY,e.a),onMove:v=>l(v.currentX,v.currentY,e.b),onEnd:()=>{c(!0),(0,e.h)(),t=void 0}})}},8685:(C,E,s)=>{s.d(E,{g:()=>f});const f=(r,o,t,l,n)=>g(r[1],o[1],t[1],l[1],n).map(c=>e(r[0],o[0],t[0],l[0],c)),e=(r,o,t,l,n)=>n*(3*o*Math.pow(n-1,2)+n*(-3*t*n+3*t+l*n))-r*Math.pow(n-1,3),g=(r,o,t,l,n)=>u((l-=n)-3*(t-=n)+3*(o-=n)-(r-=n),3*t-6*o+3*r,3*o-3*r,r).filter(v=>v>=0&&v<=1),u=(r,o,t,l)=>{if(0===r)return((r,o,t)=>{const l=o*o-4*r*t;return l<0?[]:[(-o+Math.sqrt(l))/(2*r),(-o-Math.sqrt(l))/(2*r)]})(o,t,l);const n=(3*(t/=r)-(o/=r)*o)/3,c=(2*o*o*o-9*o*t+27*(l/=r))/27;if(0===n)return[Math.pow(-c,1/3)];if(0===c)return[Math.sqrt(-n),-Math.sqrt(-n)];const v=Math.pow(c/2,2)+Math.pow(n/3,3);if(0===v)return[Math.pow(c/2,.5)-o/3];if(v>0)return[Math.pow(-c/2+Math.sqrt(v),1/3)-Math.pow(c/2+Math.sqrt(v),1/3)-o/3];const M=Math.sqrt(Math.pow(-n/3,3)),_=Math.acos(-c/(2*Math.sqrt(Math.pow(-n/3,3)))),w=2*Math.pow(M,1/3);return[w*Math.cos(_/3)-o/3,w*Math.cos((_+2*Math.PI)/3)-o/3,w*Math.cos((_+4*Math.PI)/3)-o/3]}},5062:(C,E,s)=>{s.d(E,{i:()=>f});const f=e=>e&&""!==e.dir?"rtl"===e.dir.toLowerCase():"rtl"===(null==document?void 0:document.dir.toLowerCase())},1112:(C,E,s)=>{s.r(E),s.d(E,{startFocusVisible:()=>m});const f="ion-focused",g=["Tab","ArrowDown","Space","Escape"," ","Shift","Enter","ArrowLeft","ArrowRight","ArrowUp","Home","End"],m=u=>{let r=[],o=!0;const t=u?u.shadowRoot:document,l=u||document.body,n=S=>{r.forEach(h=>h.classList.remove(f)),S.forEach(h=>h.classList.add(f)),r=S},c=()=>{o=!1,n([])},v=S=>{o=g.includes(S.key),o||n([])},M=S=>{if(o&&S.composedPath){const h=S.composedPath().filter(p=>!!p.classList&&p.classList.contains("ion-focusable"));n(h)}},_=()=>{t.activeElement===l&&n([])};return t.addEventListener("keydown",v),t.addEventListener("focusin",M),t.addEventListener("focusout",_),t.addEventListener("touchstart",c),t.addEventListener("mousedown",c),{destroy:()=>{t.removeEventListener("keydown",v),t.removeEventListener("focusin",M),t.removeEventListener("focusout",_),t.removeEventListener("touchstart",c),t.removeEventListener("mousedown",c)},setFocus:n}}},2983:(C,E,s)=>{s.d(E,{C:()=>u,a:()=>g,d:()=>m});var f=s(5861),e=s(3756);const g=function(){var r=(0,f.Z)(function*(o,t,l,n,c,v){var M;if(o)return o.attachViewToDom(t,l,c,n);if(!(v||"string"==typeof l||l instanceof HTMLElement))throw new Error("framework delegate is missing");const _="string"==typeof l?null===(M=t.ownerDocument)||void 0===M?void 0:M.createElement(l):l;return n&&n.forEach(w=>_.classList.add(w)),c&&Object.assign(_,c),t.appendChild(_),yield new Promise(w=>(0,e.c)(_,w)),_});return function(t,l,n,c,v,M){return r.apply(this,arguments)}}(),m=(r,o)=>{if(o){if(r)return r.removeViewFromDom(o.parentElement,o);o.remove()}return Promise.resolve()},u=()=>{let r,o;return{attachViewToDom:function(){var n=(0,f.Z)(function*(c,v,M={},_=[]){var w,S;if(r=c,v){const p="string"==typeof v?null===(w=r.ownerDocument)||void 0===w?void 0:w.createElement(v):v;_.forEach(i=>p.classList.add(i)),Object.assign(p,M),r.appendChild(p),yield new Promise(i=>(0,e.c)(p,i))}else if(r.children.length>0){const p=null===(S=r.ownerDocument)||void 0===S?void 0:S.createElement("div");_.forEach(i=>p.classList.add(i)),p.append(...r.children),r.appendChild(p)}const h=document.querySelector("ion-app")||document.body;return o=document.createComment("ionic teleport"),r.parentNode.insertBefore(o,r),h.appendChild(r),r});return function(v,M){return n.apply(this,arguments)}}(),removeViewFromDom:()=>(r&&o&&(o.parentNode.insertBefore(r,o),o.remove()),Promise.resolve())}}},7683:(C,E,s)=>{s.d(E,{a:()=>g,b:()=>m,c:()=>e,d:()=>r,h:()=>u});const f={getEngine(){var o;const t=window;return t.TapticEngine||(null===(o=t.Capacitor)||void 0===o?void 0:o.isPluginAvailable("Haptics"))&&t.Capacitor.Plugins.Haptics},available(){return!!this.getEngine()},isCordova:()=>!!window.TapticEngine,isCapacitor:()=>!!window.Capacitor,impact(o){const t=this.getEngine();if(!t)return;const l=this.isCapacitor()?o.style.toUpperCase():o.style;t.impact({style:l})},notification(o){const t=this.getEngine();if(!t)return;const l=this.isCapacitor()?o.style.toUpperCase():o.style;t.notification({style:l})},selection(){this.impact({style:"light"})},selectionStart(){const o=this.getEngine();!o||(this.isCapacitor()?o.selectionStart():o.gestureSelectionStart())},selectionChanged(){const o=this.getEngine();!o||(this.isCapacitor()?o.selectionChanged():o.gestureSelectionChanged())},selectionEnd(){const o=this.getEngine();!o||(this.isCapacitor()?o.selectionEnd():o.gestureSelectionEnd())}},e=()=>{f.selection()},g=()=>{f.selectionStart()},m=()=>{f.selectionChanged()},u=()=>{f.selectionEnd()},r=o=>{f.impact(o)}},6465:(C,E,s)=>{s.d(E,{I:()=>u,a:()=>n,b:()=>r,c:()=>M,d:()=>w,f:()=>c,g:()=>l,i:()=>t,p:()=>_,r:()=>S,s:()=>v});var f=s(5861),e=s(3756),g=s(7208);const u="ion-content",r=".ion-content-scroll-host",o=`${u}, ${r}`,t=h=>h&&"ION-CONTENT"===h.tagName,l=function(){var h=(0,f.Z)(function*(p){return t(p)?(yield new Promise(i=>(0,e.c)(p,i)),p.getScrollElement()):p});return function(i){return h.apply(this,arguments)}}(),n=h=>h.querySelector(r)||h.querySelector(o),c=h=>h.closest(o),v=(h,p)=>t(h)?h.scrollToTop(p):Promise.resolve(h.scrollTo({top:0,left:0,behavior:p>0?"smooth":"auto"})),M=(h,p,i,a)=>t(h)?h.scrollByPoint(p,i,a):Promise.resolve(h.scrollBy({top:i,left:p,behavior:a>0?"smooth":"auto"})),_=h=>(0,g.a)(h,u),w=h=>{if(t(h)){const i=h.scrollY;return h.scrollY=!1,i}return h.style.setProperty("overflow","hidden"),!0},S=(h,p)=>{t(h)?h.scrollY=p:h.style.removeProperty("overflow")}},7208:(C,E,s)=>{s.d(E,{a:()=>g,b:()=>e,p:()=>f});const f=m=>console.warn(`[Ionic Warning]: ${m}`),e=(m,...u)=>console.error(`[Ionic Error]: ${m}`,...u),g=(m,...u)=>console.error(`<${m.tagName.toLowerCase()}> must be used inside ${u.join(" or ")}.`)},3230:(C,E,s)=>{s.d(E,{a:()=>f,b:()=>c,c:()=>r,d:()=>v,e:()=>i,f:()=>g,g:()=>e,h:()=>h,i:()=>o,j:()=>l,k:()=>M,l:()=>t,m:()=>u,n:()=>m,o:()=>n,p:()=>_,q:()=>w,r:()=>S,s:()=>p});const f="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><title>Arrow Back</title><path stroke-linecap='square' stroke-miterlimit='10' stroke-width='48' d='M244 400L100 256l144-144M120 256h292' class='ionicon-fill-none'/></svg>",e="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><title>Arrow Down</title><path stroke-linecap='round' stroke-linejoin='round' stroke-width='48' d='M112 268l144 144 144-144M256 392V100' class='ionicon-fill-none'/></svg>",g="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><title>Caret Back</title><path d='M368 64L144 256l224 192V64z'/></svg>",m="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><title>Caret Down</title><path d='M64 144l192 224 192-224H64z'/></svg>",u="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><title>Caret Up</title><path d='M448 368L256 144 64 368h384z'/></svg>",r="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><title>Chevron Back</title><path stroke-linecap='round' stroke-linejoin='round' stroke-width='48' d='M328 112L184 256l144 144' class='ionicon-fill-none'/></svg>",o="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><title>Chevron Down</title><path stroke-linecap='round' stroke-linejoin='round' stroke-width='48' d='M112 184l144 144 144-144' class='ionicon-fill-none'/></svg>",t="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><title>Chevron Forward</title><path stroke-linecap='round' stroke-linejoin='round' stroke-width='48' d='M184 112l144 144-144 144' class='ionicon-fill-none'/></svg>",l="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><title>Chevron Forward</title><path stroke-linecap='round' stroke-linejoin='round' stroke-width='48' d='M184 112l144 144-144 144' class='ionicon-fill-none'/></svg>",n="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><title>Close</title><path d='M289.94 256l95-95A24 24 0 00351 127l-95 95-95-95a24 24 0 00-34 34l95 95-95 95a24 24 0 1034 34l95-95 95 95a24 24 0 0034-34z'/></svg>",c="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><title>Close Circle</title><path d='M256 48C141.31 48 48 141.31 48 256s93.31 208 208 208 208-93.31 208-208S370.69 48 256 48zm75.31 260.69a16 16 0 11-22.62 22.62L256 278.63l-52.69 52.68a16 16 0 01-22.62-22.62L233.37 256l-52.68-52.69a16 16 0 0122.62-22.62L256 233.37l52.69-52.68a16 16 0 0122.62 22.62L278.63 256z'/></svg>",v="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><title>Close</title><path d='M400 145.49L366.51 112 256 222.51 145.49 112 112 145.49 222.51 256 112 366.51 145.49 400 256 289.49 366.51 400 400 366.51 289.49 256 400 145.49z'/></svg>",M="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><title>Ellipsis Horizontal</title><circle cx='256' cy='256' r='48'/><circle cx='416' cy='256' r='48'/><circle cx='96' cy='256' r='48'/></svg>",_="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><title>Menu</title><path stroke-linecap='round' stroke-miterlimit='10' d='M80 160h352M80 256h352M80 352h352' class='ionicon-fill-none ionicon-stroke-width'/></svg>",w="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><title>Menu</title><path d='M64 384h384v-42.67H64zm0-106.67h384v-42.66H64zM64 128v42.67h384V128z'/></svg>",S="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><title>Reorder Three</title><path stroke-linecap='round' stroke-linejoin='round' d='M96 256h320M96 176h320M96 336h320' class='ionicon-fill-none ionicon-stroke-width'/></svg>",h="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><title>Reorder Two</title><path stroke-linecap='square' stroke-linejoin='round' stroke-width='44' d='M118 304h276M118 208h276' class='ionicon-fill-none'/></svg>",p="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><title>Search</title><path d='M221.09 64a157.09 157.09 0 10157.09 157.09A157.1 157.1 0 00221.09 64z' stroke-miterlimit='10' class='ionicon-fill-none ionicon-stroke-width'/><path stroke-linecap='round' stroke-miterlimit='10' d='M338.29 338.29L448 448' class='ionicon-fill-none ionicon-stroke-width'/></svg>",i="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><title>Search</title><path d='M464 428L339.92 303.9a160.48 160.48 0 0030.72-94.58C370.64 120.37 298.27 48 209.32 48S48 120.37 48 209.32s72.37 161.32 161.32 161.32a160.48 160.48 0 0094.58-30.72L428 464zM209.32 319.69a110.38 110.38 0 11110.37-110.37 110.5 110.5 0 01-110.37 110.37z'/></svg>"},8439:(C,E,s)=>{s.d(E,{s:()=>f});const f=t=>{try{if(t instanceof class o{constructor(l){this.value=l}})return t.value;if(!m()||"string"!=typeof t||""===t)return t;const l=document.createDocumentFragment(),n=document.createElement("div");l.appendChild(n),n.innerHTML=t,r.forEach(_=>{const w=l.querySelectorAll(_);for(let S=w.length-1;S>=0;S--){const h=w[S];h.parentNode?h.parentNode.removeChild(h):l.removeChild(h);const p=g(h);for(let i=0;i<p.length;i++)e(p[i])}});const c=g(l);for(let _=0;_<c.length;_++)e(c[_]);const v=document.createElement("div");v.appendChild(l);const M=v.querySelector("div");return null!==M?M.innerHTML:v.innerHTML}catch(l){return console.error(l),""}},e=t=>{if(t.nodeType&&1!==t.nodeType)return;for(let n=t.attributes.length-1;n>=0;n--){const c=t.attributes.item(n),v=c.name;if(!u.includes(v.toLowerCase())){t.removeAttribute(v);continue}const M=c.value;null!=M&&M.toLowerCase().includes("javascript:")&&t.removeAttribute(v)}const l=g(t);for(let n=0;n<l.length;n++)e(l[n])},g=t=>null!=t.children?t.children:t.childNodes,m=()=>{var t;const l=window,n=null===(t=null==l?void 0:l.Ionic)||void 0===t?void 0:t.config;return!n||(n.get?n.get("sanitizerEnabled",!0):!0===n.sanitizerEnabled||void 0===n.sanitizerEnabled)},u=["class","id","href","src","name","slot"],r=["script","style","iframe","meta","link","object","embed"]},1316:(C,E,s)=>{s.r(E),s.d(E,{KEYBOARD_DID_CLOSE:()=>e,KEYBOARD_DID_OPEN:()=>f,copyVisualViewport:()=>p,keyboardDidClose:()=>_,keyboardDidOpen:()=>v,keyboardDidResize:()=>M,resetKeyboardAssist:()=>o,setKeyboardClose:()=>c,setKeyboardOpen:()=>n,startKeyboardAssist:()=>t,trackViewportChanges:()=>h});const f="ionKeyboardDidShow",e="ionKeyboardDidHide";let m={},u={},r=!1;const o=()=>{m={},u={},r=!1},t=i=>{l(i),i.visualViewport&&(u=p(i.visualViewport),i.visualViewport.onresize=()=>{h(i),v()||M(i)?n(i):_(i)&&c(i)})},l=i=>{i.addEventListener("keyboardDidShow",a=>n(i,a)),i.addEventListener("keyboardDidHide",()=>c(i))},n=(i,a)=>{w(i,a),r=!0},c=i=>{S(i),r=!1},v=()=>!r&&m.width===u.width&&(m.height-u.height)*u.scale>150,M=i=>r&&!_(i),_=i=>r&&u.height===i.innerHeight,w=(i,a)=>{const y=new CustomEvent(f,{detail:{keyboardHeight:a?a.keyboardHeight:i.innerHeight-u.height}});i.dispatchEvent(y)},S=i=>{const a=new CustomEvent(e);i.dispatchEvent(a)},h=i=>{m=Object.assign({},u),u=p(i.visualViewport)},p=i=>({width:Math.round(i.width),height:Math.round(i.height),offsetTop:i.offsetTop,offsetLeft:i.offsetLeft,pageTop:i.pageTop,pageLeft:i.pageLeft,scale:i.scale})},7741:(C,E,s)=>{s.d(E,{S:()=>e});const e={bubbles:{dur:1e3,circles:9,fn:(g,m,u)=>{const r=g*m/u-g+"ms",o=2*Math.PI*m/u;return{r:5,style:{top:9*Math.sin(o)+"px",left:9*Math.cos(o)+"px","animation-delay":r}}}},circles:{dur:1e3,circles:8,fn:(g,m,u)=>{const r=m/u,o=g*r-g+"ms",t=2*Math.PI*r;return{r:5,style:{top:9*Math.sin(t)+"px",left:9*Math.cos(t)+"px","animation-delay":o}}}},circular:{dur:1400,elmDuration:!0,circles:1,fn:()=>({r:20,cx:48,cy:48,fill:"none",viewBox:"24 24 48 48",transform:"translate(0,0)",style:{}})},crescent:{dur:750,circles:1,fn:()=>({r:26,style:{}})},dots:{dur:750,circles:3,fn:(g,m)=>({r:6,style:{left:9-9*m+"px","animation-delay":-110*m+"ms"}})},lines:{dur:1e3,lines:8,fn:(g,m,u)=>({y1:14,y2:26,style:{transform:`rotate(${360/u*m+(m<u/2?180:-180)}deg)`,"animation-delay":g*m/u-g+"ms"}})},"lines-small":{dur:1e3,lines:8,fn:(g,m,u)=>({y1:12,y2:20,style:{transform:`rotate(${360/u*m+(m<u/2?180:-180)}deg)`,"animation-delay":g*m/u-g+"ms"}})},"lines-sharp":{dur:1e3,lines:12,fn:(g,m,u)=>({y1:17,y2:29,style:{transform:`rotate(${30*m+(m<6?180:-180)}deg)`,"animation-delay":g*m/u-g+"ms"}})},"lines-sharp-small":{dur:1e3,lines:12,fn:(g,m,u)=>({y1:12,y2:20,style:{transform:`rotate(${30*m+(m<6?180:-180)}deg)`,"animation-delay":g*m/u-g+"ms"}})}}},6546:(C,E,s)=>{s.r(E),s.d(E,{createSwipeBackGesture:()=>u});var f=s(3756),e=s(5062),g=s(3139);s(3509);const u=(r,o,t,l,n)=>{const c=r.ownerDocument.defaultView,v=(0,e.i)(r),_=i=>v?-i.deltaX:i.deltaX;return(0,g.createGesture)({el:r,gestureName:"goback-swipe",gesturePriority:40,threshold:10,canStart:i=>(i=>{const{startX:d}=i;return v?d>=c.innerWidth-50:d<=50})(i)&&o(),onStart:t,onMove:i=>{const d=_(i)/c.innerWidth;l(d)},onEnd:i=>{const a=_(i),d=c.innerWidth,y=a/d,L=(i=>v?-i.velocityX:i.velocityX)(i),O=L>=0&&(L>.2||a>d/2),D=(O?1-y:y)*d;let P=0;if(D>5){const I=D/Math.abs(L);P=Math.min(I,540)}n(O,y<=0?.01:(0,f.l)(0,y,.9999),P)}})}},2854:(C,E,s)=>{s.d(E,{c:()=>g,g:()=>u,h:()=>e,o:()=>o});var f=s(5861);const e=(t,l)=>null!==l.closest(t),g=(t,l)=>"string"==typeof t&&t.length>0?Object.assign({"ion-color":!0,[`ion-color-${t}`]:!0},l):l,u=t=>{const l={};return(t=>void 0!==t?(Array.isArray(t)?t:t.split(" ")).filter(n=>null!=n).map(n=>n.trim()).filter(n=>""!==n):[])(t).forEach(n=>l[n]=!0),l},r=/^[a-z][a-z0-9+\-.]*:/,o=function(){var t=(0,f.Z)(function*(l,n,c,v){if(null!=l&&"#"!==l[0]&&!r.test(l)){const M=document.querySelector("ion-router");if(M)return null!=n&&n.preventDefault(),M.push(l,c,v)}return!1});return function(n,c,v,M){return t.apply(this,arguments)}}()},175:(C,E,s)=>{s.r(E),s.d(E,{LoginPage:()=>S});var f=s(3075),e=s(5e3),g=s(2340),m=s(4147),u=s(3919),r=s(4501),o=s(1086),t=s(512);let l=(()=>{class h{constructor(i,a){this.authService=i,this.alertService=a,this.tableUpdates=[{id:1,dateUpdate:new Date(2022,4,9),description:"Pour associer un outillage \xe0 un moulage il suffit de scanner le num\xe9ro d'OT dans l'OF.Vous devez le scanner comme un kit",title:"Module Moulage"},{id:2,dateUpdate:new Date(2022,4,9),description:"Le module outillage est ouvert pour test",title:"Module Outillage"}]}showUpdates(){this.getUpdatesToShow().subscribe(i=>{i&&i.forEach(a=>{this.alertService.simpleAlert("Info sur la mise \xe0 jours",a.title,a.description)})})}getUpdates(i){const a=this.tableUpdates.filter(d=>d.dateUpdate>=new Date(i));return a.length>0?a:null}getUpdatesToShow(){return(0,o.of)(this.getUpdates(this.authService.authUser.lastCon))}}return h.\u0275fac=function(i){return new(i||h)(e.LFG(u.e),e.LFG(t.c))},h.\u0275prov=e.Yz7({token:h,factory:h.\u0275fac,providedIn:"root"}),h})();var n=s(9928),c=s(8088),v=s(1661);const M=["userName"],_=["password"],w=function(){return["/register"]};let S=(()=>{class h{constructor(i,a,d,y,L,A,O){this.authService=i,this.formBuilder=a,this.loadingService=d,this.updateService=y,this.navControler=L,this.alertService=A,this.noticeService=O,this.version=m.i8,this.reRouteOpts=[{roles:["ROLE_MOULEUR","\tROLE_RESP_MOULAGE","ROLE_CE_MOULAGE"],route:"molding"},{roles:["ROLE_RESP_OUTIL","ROLE_CE_OUTIL","ROLE_OUTILLEUR"],route:"tooling"},{roles:["ROLE_ADMIN","ROLE_USER","ROLE_METHODES"],route:"home"}]}showNotice(){this.noticeService.presentModal()}ionViewWillEnter(){(0,e.X6Q)()&&this.loginForm.setValue({userName:g.N.username,password:g.N.password})}ngOnInit(){this.loginForm=this.formBuilder.group({userName:["",f.kI.required],password:[""]})}onSubmit(){this.loadingService.startLoading("Patienter pendant la connexion");const i=this.loginForm.get("userName").value.replace(/^0+/,""),a=this.loginForm.get("password").value||i;this.authService.authenticate(i,a).subscribe(()=>{this.afterLoginActions()},d=>{this.logginError(d)})}afterLoginActions(){this.loadingService.stopLoading().then(()=>{this.loginForm.reset(),this.reRouteUser(),this.updateService.showUpdates()})}reRouteUser(){const i=this.reRouteOpts.find(a=>this.authService.authUser.roles.some(d=>a.roles.find(y=>y===d)));console.log(i),this.navControler.navigateRoot(void 0===i?"home":i.route)}logginError(i){console.error(i),this.alertService.simpleAlert("Erreur d'authentification","","Le nom d'utilisateur ou votre mot de passe n'est pas correct"),this.loadingService.stopLoading()}}return h.\u0275fac=function(i){return new(i||h)(e.Y36(u.e),e.Y36(f.qu),e.Y36(r.b),e.Y36(l),e.Y36(n.SH),e.Y36(t.c),e.Y36(c.L))},h.\u0275cmp=e.Xpm({type:h,selectors:[["app-login"]],viewQuery:function(i,a){if(1&i&&(e.Gf(M,5),e.Gf(_,5)),2&i){let d;e.iGM(d=e.CRH())&&(a.userName=d.first),e.iGM(d=e.CRH())&&(a.password=d.first)}},decls:34,vars:6,consts:[[3,"fullscreen"],[1,"full-height",3,"formGroup","ngSubmit","keyup.enter"],[1,"inputs","ion-padding"],["position","floating"],["color","danger"],["autocapitalize","on","required","","formControlName","userName","type","text","autocomplete","off","autofocus","true","inputmode","numeric","value","204292"],["userName",""],["formControlName","password","type","password","value",""],["password",""],[1,"ion-justify-content-center","ion-padding"],[1,"buttons"],["block","","color","primary","type","submit","fill","solid",3,"disabled"],["color","primary",3,"routerLink"],["disabled","true","color","secondary","fill","solid","type","submit"],["slot","start","name","accessibility-outline"],["vertical","top","horizontal","end","slot","fixed"],["size","small","color","light",3,"click"],["name","information-circle-outline"],["slot","end",1,"ion-padding"]],template:function(i,a){1&i&&(e.TgZ(0,"ion-content",0)(1,"form",1),e.NdJ("ngSubmit",function(){return a.onSubmit()})("keyup.enter",function(){return a.onSubmit()}),e.TgZ(2,"div")(3,"div",2)(4,"ion-item")(5,"ion-label",3),e._uU(6,"Nom d'utilisateur "),e.TgZ(7,"ion-text",4),e._uU(8,"*"),e.qZA()(),e._UZ(9,"ion-input",5,6),e.TgZ(11,"ion-note"),e._uU(12," Le nom d'utilisateur est le num\xe9ro de matricule pr\xe9sent sur le badge "),e.qZA()(),e.TgZ(13,"ion-item")(14,"ion-label",3),e._uU(15,"Mot de passe "),e.qZA(),e._UZ(16,"ion-input",7,8),e.qZA()(),e.TgZ(18,"div",9)(19,"ion-buttons",10)(20,"ion-button",11),e._uU(21," Se connecter "),e.qZA(),e.TgZ(22,"ion-button",12),e._uU(23," Cr\xe9er un compte "),e.qZA(),e.TgZ(24,"ion-button",13),e._UZ(25,"ion-icon",14),e._uU(26," Visiteur "),e.qZA()()()()(),e.TgZ(27,"ion-fab",15)(28,"ion-fab-button",16),e.NdJ("click",function(){return a.showNotice()}),e._UZ(29,"ion-icon",17),e.qZA()()(),e.TgZ(30,"ion-footer")(31,"ion-toolbar")(32,"div",18),e._uU(33),e.qZA()()()),2&i&&(e.Q6J("fullscreen",!0),e.xp6(1),e.Q6J("formGroup",a.loginForm),e.xp6(19),e.Q6J("disabled",a.loginForm.invalid),e.xp6(2),e.Q6J("routerLink",e.DdM(5,w)),e.xp6(11),e.hij(" Version : ",a.version," "))},dependencies:[n.YG,n.Sm,n.W2,n.IJ,n.W4,n.fr,n.gu,n.pK,n.Ie,n.Q$,n.uN,n.yW,n.sr,n.j9,n.YI,v.rH,f._Y,f.JJ,f.JL,f.Q7,f.sg,f.u],styles:[".full-height[_ngcontent-%COMP%]{height:100%;width:100%;display:flex;justify-content:center;align-items:center}.inputs[_ngcontent-%COMP%]{display:flex;flex-direction:column}.inputs[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{width:100%}.buttons[_ngcontent-%COMP%]{display:flex;flex-direction:row}@media (max-width: 768px){.buttons[_ngcontent-%COMP%]{flex-direction:column}.buttons[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{width:100%}}"]}),h})()},8088:(C,E,s)=>{s.d(E,{L:()=>u});var f=s(655),e=s(5e3),g=s(9928);let m=(()=>{class r{constructor(t){this.noticeService=t}ngOnInit(){}backClick(){this.noticeService.closeModal()}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(u))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-login-notice"]],decls:42,vars:0,consts:[["slot","start"],["slot","start",3,"click"],["slot","icon-only","name","arrow-back-outline"],["fullscreen","true"],[1,"ion-margin","ion-padding",2,"background-color","red"],["color","light",1,"ion-margin","ion-padding",2,"background-color","red"],[1,"ion-margin","ion-padding"]],template:function(t,l){1&t&&(e.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0)(3,"ion-button",1),e.NdJ("click",function(){return l.backClick()}),e._UZ(4,"ion-icon",2),e.qZA()(),e.TgZ(5,"ion-title"),e._uU(6,"Notice page Login"),e.qZA()()(),e.TgZ(7,"ion-content",3)(8,"section",4)(9,"ion-title"),e._uU(10,"Connexion"),e.qZA(),e.TgZ(11,"ion-card")(12,"ion-card-header")(13,"ion-card-title"),e._uU(14,"Sans mot de passe"),e.qZA()(),e.TgZ(15,"ion-card-content")(16,"p"),e._uU(17,"Votre r\xf4le est : COMPAGNON, USER ... votre nom d'utilisateur est le num\xe9ro de matricule (avec ou sans les z\xe9ros de la gauche)"),e.qZA(),e.TgZ(18,"p"),e._uU(19,"Vous pouvez soit scanner le qr-code soit le taper directement"),e.qZA()()(),e.TgZ(20,"ion-card")(21,"ion-card-header")(22,"ion-card-title"),e._uU(23,"Avec mot de passe"),e.qZA()(),e.TgZ(24,"ion-card-content")(25,"p"),e._uU(26,'Taper votre matricule en nom d\'utilisateur. Taper votre mot de passe puis cliquer sur "SE CONNECTER"'),e.qZA()()()(),e.TgZ(27,"section",5)(28,"ion-title"),e._uU(29,"Vous n'avez pas de compte"),e.qZA(),e.TgZ(30,"ion-card")(31,"ion-card-header")(32,"ion-card-title"),e._uU(33,"Cr\xe9er un compte"),e.qZA()(),e.TgZ(34,"ion-card-content")(35,"p"),e._uU(36,'Si vous voulez vous cr\xe9er un compte cliquer sur "CREER UN COMPTE"'),e.qZA()()()(),e.TgZ(37,"section",6)(38,"ion-title"),e._uU(39,"Questions fr\xe9quentes"),e.qZA(),e.TgZ(40,"p"),e._uU(41,"Vous tapez votre nom d'utilisateur mais impossible de vous connecter : v\xe9rifiez si vous avez cr\xe9er un comte."),e.qZA()()())},dependencies:[g.YG,g.Sm,g.PM,g.FN,g.Zi,g.Dq,g.W2,g.Gu,g.gu,g.sr,g.wd]}),r})(),u=(()=>{class r{constructor(t){this.modalController=t}presentModal(){return(0,f.mG)(this,void 0,void 0,function*(){this.modal=yield this.modalController.create({component:m,cssClass:"fullscreen"}),yield this.modal.present()})}closeModal(){return(0,f.mG)(this,void 0,void 0,function*(){yield this.modal.dismiss()})}}return r.\u0275fac=function(t){return new(t||r)(e.LFG(g.IN))},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})()},2961:(C,E,s)=>{s.d(E,{p:()=>g});var f=s(1086),e=s(5e3);let g=(()=>{class m{getCoreByBatchNumber(r){let o=r.substring(5).split("~");return o={partNumber:o[0],batch1:o[1],batch2:o[2]},(0,f.of)({idCore:1,batchNumber:o})}getIri(r){return`/api/additional_materials/${r.id}`}}return m.\u0275fac=function(r){return new(r||m)},m.\u0275prov=e.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"}),m})()},6015:(C,E,s)=>{s.d(E,{e:()=>o});var f=s(2340),e=s(1086),g=s(4850),m=s(5e3),u=s(6322),r=s(512);let o=(()=>{class t{constructor(n,c){this.requestService=n,this.alertService=c}getKitById(n){return this.requestService.createGetRequest(`${f.N.moldingApi}datas_kits?page=1&idMM=${n}`).pipe((0,g.U)(c=>{if(0===c.length)throw this.alertService.simpleAlert("Erreur","Kit non trouv\xe9","Veuillez r\xe9-essayer"),new Error(`aucun kit ne correspond au num\xe9ro : ${n}`);return{id:c[0].id,aCuirAv:c[0].ACuirAv,aDrapAv:c[0].ADrapAv,createdAt:c[0].createdAt,decongel:c[0].Decongel,designationSAP:c[0].DesignationSAP,idMM:c[0].idMM,lotSAP:c[0].LotSAP,peremptionMoins18:c[0].PeremptionMoins18,referenceSAP:c[0].ReferenceSAP,status:c[0].status,tackLife:c[0].TackLife,timeOut:c[0].TimeOut,updateAt:c[0].updateAt}}))}isPerim(n,c){return new Date(n)<new Date(c)}kitIsInKits(n,c){return c.some(v=>v.idMM===n.idMM)}getIri(n){return`/api/datas_kits/${n.id}`}handleError(n,c="error"){return this.alertService.simpleAlert("Erreur Kit","Kit non conforme","Il semble y avoir un probl\xe8me avec le kit scann\xe9. V\xe9rifier le kit et essayer de nouveau."),(0,e.of)()}}return t.\u0275fac=function(n){return new(n||t)(m.LFG(u.s),m.LFG(r.c))},t.\u0275prov=m.Yz7({token:t,factory:t.\u0275fac}),t})()},388:(C,E,s)=>{s.d(E,{s:()=>h});var f=s(8929),e=s(5254),g=s(567),m=s(1086),u=s(4850);class r{constructor(){this.kits=[],this.moldingDay=new Date,this.materialSupplementary=[]}getIri(){return`api/moldings/${this.id}`}}var o=s(2340),t=s(5e3),l=s(6015),n=s(6702),c=s(2644),v=s(6322),M=s(2961),_=s(512),w=s(9928),S=s(4501);let h=(()=>{class p{constructor(a,d,y,L,A,O,T,D){this.kitService=a,this.matService=d,this.toolService=y,this.requestService=L,this.coreService=A,this.alertService=O,this.navCtrl=T,this.loadingService=D,this.molding$=new f.xQ,this.moldingStatus=new f.xQ,this.molding=new r,this.updateMoldings()}getMoldingStatus(){return(0,e.D)(this.moldingStatus)}saveMolding(a){this.moldingStatus.subscribe(d=>{console.log(d),this.saveOtherMaterials().subscribe(y=>{console.log(y),this.molding.materialSupplementary=y,this.moldingIri=this.toIri(),(this.molding.id?this.patchMolding():this.postMolding()).subscribe(A=>{a&&this.printMolding()})})},d=>{this.alertService.simpleAlert("La v\xe9rification du moulage a \xe9chou\xe9",d.title,d.message)})}loadMolding(a){this.loadingService.startLoading("Patienter pendant le chargement du moulage"),this.getMoldingById(a).subscribe(d=>{this.molding=d,this.updateMoldings(),this.loadingService.stopLoading()},d=>{console.error(d),this.loadingService.stopLoading(),this.alertService.simpleAlert("Erreur moulage","Erreur de r\xe9cup\xe9ration du moulage",`Le moulage ${a} n'existe pas`)})}checkMoldingDatas(){void 0===this.molding.OT?this.alertService.presentAlertConfirm("OUTILLAGE MANQUANT","Voulez-vous continuer sans outillage ?").then(d=>{this.moldingStatus.next(!!d)},d=>{this.moldingStatus.error(new Error("Il n'y a pas eu de r\xe9ponse de l'utilisateur"))}):0===this.molding.kits.length?this.moldingStatus.error(new Error("Pour ins\xe9rer un kit mati\xe8re munissez vous d'une fiche de vie et scannez le code barre.\n            Si besoin d'aide compl\xe9mentaire appelez le 06.87.89.24.25")):this.moldingStatus.next(!0)}updateDates(){this.molding.aCuireAv=null,this.molding.aDraperAv=null,this.molding.matPolym=this.molding.kits.reduce((d,y)=>d.aCuirAv>y.aCuirAv?y:d),this.molding.matDrap=this.molding.kits.reduce((d,y)=>d.aDrapAv>y.aDrapAv?y:d);const a=this.molding.kits.reduce((d,y)=>d.peremptionMoins18>y.peremptionMoins18?y:d);this.molding.aCuireAv=this.molding.matPolym.aCuirAv<a.peremptionMoins18?this.molding.matPolym.aCuirAv:a.peremptionMoins18,this.molding.aDraperAv=this.molding.matDrap.aDrapAv<a.peremptionMoins18?this.molding.matDrap.aDrapAv:a.peremptionMoins18}getMoldingById(a){return this.requestService.createGetRequest(`${o.N.moldingApi}moldings/${a}`).pipe((0,u.U)(d=>(d.kits=this.moldingServerToMoldingObject(d),d)))}getMoldings(){return this.requestService.createGetRequest(`${o.N.moldingApi}moldings`)}addKit(a){this.kitService.kitIsInKits(a,this.molding.kits)?(this.alertService.presentToast("Le kit a d\xe9j\xe0 \xe9t\xe9 scann\xe9"),console.error("kit en doublon")):(this.molding.kits.push(a),this.updateDates(),this.updateMoldings())}addNida(a){this.molding.materialSupplementary.push(a),this.updateMoldings()}addTool(a){this.molding.OT=a,this.alertService.presentToast("Outillage associ\xe9 !"),this.updateMoldings()}saveOtherMaterials(){return(0,g.D)(this.molding.materialSupplementary.map(a=>this.matService.addOne(a)))}postMolding(){const a=this.toIri();return this.requestService.createPostRequest(`${o.N.moldingApi}moldings`,a,!0)}patchMolding(){const a=this.toIri();return this.requestService.createPatchRequest(`${o.N.moldingApi}moldings/${a.id}`,a)}updateMoldings(){this.molding$.next(this.molding)}toIri(){const a=this.molding;return{id:a.id,kits:a.kits.map(d=>this.kitService.getIri(d)),materialSupplementary:a.materialSupplementary.map(d=>this.coreService.getIri(d)),moldingDay:a.moldingDay,outillage:a.OT?this.toolService.getIri(a.OT):null,aCuireAv:a.aCuireAv,aDraperAv:a.aDraperAv,matPolym:this.kitService.getIri(a.matPolym),matDrap:this.kitService.getIri(a.matDrap)}}moldingServerToMoldingObject(a){return a.kits.map(d=>({aCuirAv:d.ACuirAv,aDrapAv:d.ADrapAv,createdAt:d.createdAt,decongel:d.Decongel,designationSAP:d.DesignationSAP,id:d.id,idMM:d.idMM,lotSAP:d.LotSAP,peremptionMoins18:d.PeremptionMoins18,referenceSAP:d.ReferenceSAP,status:d.status,tackLife:d.TackLife,timeOut:d.TimeOut}))}printMolding(){return(0,m.of)(this.navCtrl.navigateForward(["molding/print-molding-sheet",this.molding.id]))}}return p.\u0275fac=function(a){return new(a||p)(t.LFG(l.e),t.LFG(n.N),t.LFG(c.o),t.LFG(v.s),t.LFG(M.p),t.LFG(_.c),t.LFG(w.SH),t.LFG(S.b))},p.\u0275prov=t.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"}),p})()},6702:(C,E,s)=>{s.d(E,{N:()=>m});var f=s(2340),e=s(5e3),g=s(6322);let m=(()=>{class u{constructor(o){this.requestService=o}addOne(o){return this.requestService.createPostRequest(`${f.N.moldingApi}additional_materials`,o)}}return u.\u0275fac=function(o){return new(o||u)(e.LFG(g.s))},u.\u0275prov=e.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"}),u})()}}]);