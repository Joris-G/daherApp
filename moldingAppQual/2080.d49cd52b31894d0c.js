"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2080],{9172:(U,m,r)=>{r.d(m,{b:()=>d});var n=r(655),o=r(5e3),e=r(9928);let d=(()=>{class t{constructor(a){this.loadingController=a}startLoading(a="Chargement ..."){this.loadingController.create({spinner:"lines",cssClass:"my-custom-class",message:a}).then(p=>{p.present()})}stopLoading(){return(0,n.mG)(this,void 0,void 0,function*(){setTimeout(()=>{this.loadingController.dismiss()},100)})}}return t.\u0275fac=function(a){return new(a||t)(o.LFG(e.HT))},t.\u0275prov=o.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},8627:(U,m,r)=>{r.d(m,{W:()=>d});var n=r(2340),o=r(5e3),e=r(8219);let d=(()=>{class t{constructor(a){this.requestService=a}getPrograms(){return this.requestService.createGetRequest(`${n.N.usineApi}programme_avions`)}getIri(a){return"string"==typeof a?a:`/api/programme_avions/${a.id}`}}return t.\u0275fac=function(a){return new(a||t)(o.LFG(e.s))},t.\u0275prov=o.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},181:(U,m,r)=>{r.d(m,{N:()=>t});var n=r(2340),o=r(5e3),e=r(8219);let t=(()=>{class _{constructor(p){this.requestService=p}getRoles(){return this.requestService.createGetRequest(`${n.N.usineApi}postes`)}getIri(p){return"string"==typeof p?p:`/api/postes/${p.id}`}}return _.\u0275fac=function(p){return new(p||_)(o.LFG(e.s))},_.\u0275prov=o.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"}),_})()},4337:(U,m,r)=>{r.d(m,{z:()=>d});var n=r(2340),o=r(5e3),e=r(8219);let d=(()=>{class t{constructor(a){this.requestService=a}getServices(){return this.requestService.createGetRequest(`${n.N.usineApi}services`)}getIri(a){return"string"==typeof a?a:`/api/services/${a.id}`}}return t.\u0275fac=function(a){return new(a||t)(o.LFG(e.s))},t.\u0275prov=o.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},7847:(U,m,r)=>{r.d(m,{W:()=>d});var n=r(2340),o=r(5e3),e=r(8219);let d=(()=>{class t{constructor(a){this.requestService=a}getUnites(){return this.requestService.createGetRequest(`${n.N.usineApi}divisions`)}getIri(a){return"string"==typeof a?a:`/api/services/${a.id}`}}return t.\u0275fac=function(a){return new(a||t)(o.LFG(e.s))},t.\u0275prov=o.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},1377:(U,m,r)=>{r.d(m,{f:()=>v});var n=r(655),o=r(2340),e=r(5e3),d=r(8219),t=r(181),_=r(4337),a=r(8627),p=r(7847);let S=(()=>{class s{constructor(){}getIri(i){return"string"==typeof i?i:`/api/services/${i.id}`}}return s.\u0275fac=function(i){return new(i||s)},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),v=(()=>{class s{constructor(i,f,P,E,u,h){this.requestService=i,this.roleService=f,this.serviceService=P,this.programService=E,this.uniteService=u,this.usineService=h}getUserById(i){return this.requestService.createGetRequest(o.N.usineApi+`users/${i}`)}getUsers(i){return this.requestService.createGetRequest(o.N.usineApi+"users")}registerUser(i){return this.requestService.createPostRequest(o.N.usineApi+"users",i)}getIri(i){return"string"==typeof i?i:`/api/users/${i.id}`}getGroups(){return this.requestService.createGetRequest(`${o.N.usineApi}groupe_affectations`)}createGroup(i){return this.requestService.createPostRequest(`${o.N.usineApi}groupe_affectations`,i)}updateUser(i){const f={matricule:i.matricule,nom:i.nom,prenom:i.prenom,poste:this.roleService.getIri(i.poste),service:this.serviceService.getIri(i.service),programmeAvion:i.programmeAvion.map(P=>this.programService.getIri(P)),unite:this.uniteService.getIri(i.unite),site:this.usineService.getIri(i.site),tel:i.tel};return this.requestService.createPatchRequest(`${o.N.usineApi}users/${i.id}`,f)}addUserToGroup(i){return new Promise((f,P)=>(0,n.mG)(this,void 0,void 0,function*(){for(const E of i.groupeAffectations){const u={libelle:E.libelle,population:E.population.map(h=>this.getIri(h))};u.population.push(this.getIri(i)),yield this.requestService.createPatchRequest(`${o.N.usineApi}groupe_affectations/$${E.id}/addUsers`,{population:u.population}).subscribe(h=>{i.groupeAffectations=h})}f(i)}))}getUsersByService(i){return this.requestService.createGetRequest(`${o.N.usineApi}services/${i}`)}deleteUser(i){return this.requestService.createDeleteRequest(`${o.N.usineApi}users/${i}`)}confirmUser(i,f){return this.requestService.createPatchRequest(`${o.N.usineApi}users/${i}`,{isActive:f})}}return s.\u0275fac=function(i){return new(i||s)(e.LFG(d.s),e.LFG(t.N),e.LFG(_.z),e.LFG(a.W),e.LFG(p.W),e.LFG(S))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})()},5681:(U,m,r)=>{r.d(m,{Q:()=>S});var n=r(4147),o=r(2340),e=r(5e3),d=r(7704),t=r(9928),_=r(2361);const a=["menu"];function p(c,v){if(1&c){const s=e.EpF();e.TgZ(0,"ion-content")(1,"ion-list")(2,"ion-item",15),e.NdJ("click",function(){e.CHM(s);const i=e.oxw();return i.isUserOpen=!0,i.isPopoverOpen=!i.isPopoverOpen,e.KtG(i.log(i.isUserOpen))}),e.TgZ(3,"ion-label"),e._uU(4,"Profil"),e.qZA()(),e.TgZ(5,"ion-item")(6,"ion-label"),e._uU(7,"Pr\xe9f\xe9rences"),e.qZA(),e._UZ(8,"ion-icon",16),e.qZA(),e.TgZ(9,"ion-item",17),e.NdJ("click",function(){e.CHM(s);const i=e.oxw();return e.KtG(i.navigate("admin"))}),e.TgZ(10,"ion-label"),e._uU(11,"Administration"),e.qZA(),e._UZ(12,"ion-icon",18),e.qZA(),e.TgZ(13,"ion-item",19),e.NdJ("click",function(){e.CHM(s);const i=e.oxw();return e.KtG(i.logoutClick())}),e._UZ(14,"ion-icon",20),e.TgZ(15,"ion-label"),e._uU(16,"D\xe9connexion"),e.qZA()(),e.TgZ(17,"ion-item")(18,"ion-label"),e._uU(19),e.qZA()()()()}if(2&c){const s=e.oxw();e.xp6(19),e.hij(" Version : ",s.version," ")}}let S=(()=>{class c{constructor(s,l){this.authService=s,this.navCtrl=l,this.isPopoverOpen=!1,this.isUserOpen=!1,this.version=n.i8}log(s){console.log(s)}ngOnChanges(s){this.user=this.authService.authUser}ngOnInit(){this.envMode=o.N.name}logoutClick(){this.authService.logout().subscribe(()=>{this.navCtrl.navigateBack("/login")})}navigate(s){this.navCtrl.navigateRoot(s)}}return c.\u0275fac=function(s){return new(s||c)(e.Y36(d.e),e.Y36(t.SH))},c.\u0275cmp=e.Xpm({type:c,selectors:[["app-shared-user-header"]],viewQuery:function(s,l){if(1&s&&e.Gf(a,5),2&s){let i;e.iGM(i=e.CRH())&&(l.menu=i.first)}},inputs:{pageTitle:"pageTitle"},features:[e.TTD],decls:21,vars:7,consts:[[3,"translucent"],["color","primary"],["slot","start"],["autoHide","false","color","light"],["src","assets/images/logoDaherFondBleu.png",1,"ion-hide-sm-down","logo",3,"click"],[1,"ion-text-uppercase","ion-text-center"],["slot","end",1,"dev"],["id","button-profil","color","light","slot","end","outline","",1,"ion-margin-end",3,"click"],["name","person-circle-outline"],["color","light"],["slot","end","trigger","button-profil","alignment","end","side","bottom",3,"isOpen"],["slot","end","color","danger",1,"ion-hide-sm-down","margin",3,"click"],["slot","end","name","log-out-outline"],[1,"ion-hide-md-down"],[3,"user","userState","stateChangeEv"],["button","","id","trigger-button",3,"click"],["name","settings-outline","slot","start"],["button","",3,"click"],["name","construct-outline","slot","start"],["color","danger",1,"ion-hide-sm-up",3,"click"],["slot","start","name","log-out-outline"]],template:function(s,l){1&s&&(e.TgZ(0,"ion-header",0)(1,"ion-toolbar",1)(2,"ion-buttons",2),e._UZ(3,"ion-menu-button",3),e.TgZ(4,"ion-img",4),e.NdJ("click",function(){return l.navigate("home")}),e.qZA()(),e.TgZ(5,"ion-title",5),e._uU(6),e.qZA(),e.TgZ(7,"ion-label",6),e._uU(8),e.qZA(),e.TgZ(9,"ion-chip",7),e.NdJ("click",function(){return l.isPopoverOpen=!l.isPopoverOpen}),e._UZ(10,"ion-icon",8),e.TgZ(11,"ion-label",9),e._uU(12),e.qZA()(),e.TgZ(13,"ion-popover",10),e.YNc(14,p,20,1,"ng-template"),e.qZA(),e.TgZ(15,"ion-button",11),e.NdJ("click",function(){return l.logoutClick()}),e._UZ(16,"ion-icon",12),e.TgZ(17,"ion-label",13),e._uU(18,"D\xe9connexion"),e.qZA()()()(),e.TgZ(19,"ion-content")(20,"app-user-sheet",14),e.NdJ("stateChangeEv",function(f){return l.isUserOpen=f}),e.qZA()()),2&s&&(e.Q6J("translucent",!0),e.xp6(6),e.Oqu(l.pageTitle),e.xp6(2),e.Oqu(l.envMode),e.xp6(4),e.Oqu(null==l.user?null:l.user.username),e.xp6(1),e.Q6J("isOpen",l.isPopoverOpen),e.xp6(7),e.Q6J("user",l.user)("userState",l.isUserOpen))},dependencies:[t.YG,t.Sm,t.hM,t.W2,t.Gu,t.gu,t.Xz,t.Ie,t.Q$,t.q_,t.fG,t.d8,t.sr,t.wd,_.A],styles:[".margin[_ngcontent-%COMP%]{margin-right:10px}.logo[_ngcontent-%COMP%]{width:100px}@media print{[_nghost-%COMP%]{display:none}}.dev[_ngcontent-%COMP%]{color:red;text-transform:uppercase;font-size:large;font-weight:700;padding-right:100px}"]}),c})()},2361:(U,m,r)=>{r.d(m,{A:()=>a});var n=r(5e3),o=r(9172),e=r(2853),d=r(1377),t=r(9928);function _(p,S){if(1&p){const c=n.EpF();n.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),n._uU(3),n.qZA(),n.TgZ(4,"ion-icon",1),n.NdJ("click",function(){n.CHM(c);const s=n.oxw();return n.KtG(s.userState=!1)}),n.qZA()()(),n.TgZ(5,"ion-content")(6,"ion-item")(7,"ion-label"),n._uU(8,"Nom"),n.qZA(),n._UZ(9,"ion-input",2),n.qZA(),n.TgZ(10,"ion-item")(11,"ion-label"),n._uU(12,"Pr\xe9nom"),n.qZA(),n._UZ(13,"ion-input",2),n.qZA(),n.TgZ(14,"ion-item")(15,"ion-label"),n._uU(16,"Matricule"),n.qZA(),n._UZ(17,"ion-input",3)(18,"ion-icon",4),n.qZA(),n.TgZ(19,"ion-item")(20,"ion-label"),n._uU(21,"E-Mail"),n.qZA(),n._UZ(22,"ion-input",3)(23,"ion-icon",4),n.qZA(),n.TgZ(24,"ion-item")(25,"ion-label"),n._uU(26,"T\xe9l\xe9phone"),n.qZA(),n._UZ(27,"ion-input",2),n.qZA()(),n.TgZ(28,"ion-footer")(29,"ion-toolbar")(30,"ion-buttons")(31,"ion-button",5),n.NdJ("click",function(){n.CHM(c);const s=n.oxw();return n.KtG(s.updateUserClick())}),n.TgZ(32,"label"),n._uU(33,"Enregistrer"),n.qZA(),n._UZ(34,"ion-icon",6),n.qZA(),n.TgZ(35,"ion-button",5),n.NdJ("click",function(){n.CHM(c);const s=n.oxw();return n.KtG(s.deleteUserClick())}),n._UZ(36,"ion-icon",7),n.qZA()()()()}if(2&p){const c=n.oxw();n.xp6(3),n.AsE(" Fiche utilisateur : ",c.user.nom," ",c.user.prenom,""),n.xp6(6),n.Q6J("value",c.user.nom),n.xp6(4),n.Q6J("value",c.user.prenom),n.xp6(4),n.Q6J("value",c.user.matricule),n.xp6(5),n.Q6J("value",c.user.mail),n.xp6(5),n.Q6J("value",c.user.tel)}}let a=(()=>{class p{constructor(c,v,s){this.loadingService=c,this.alertService=v,this.userService=s,this.userState=!1,this.stateChangeEv=new n.vpe}updateUserClick(){this.loadingService.startLoading("Mise \xe0 jour de l'utilisateur"),this.userService.updateUser(this.user).subscribe(c=>{console.log(c),this.loadingService.stopLoading()},c=>{console.error(c),this.loadingService.stopLoading(),this.alertService.simpleAlert("Erreur serveur","Probl\xe8me lors de la mise \xe0 jour","L'utilisateur n'a pas \xe9t\xe9 modifi\xe9. Veuillez recommencer.")})}deleteUserClick(){this.loadingService.startLoading("Suppression de l'utilisateur"),this.userService.deleteUser(this.user.id).subscribe(()=>{this.loadingService.stopLoading()},c=>{this.alertService.simpleAlert("Erreur","Suppression d'un utilisateur","Une erreur est survenue pendant la suppression de l'utilisateur. "+c.message),this.loadingService.stopLoading()})}}return p.\u0275fac=function(c){return new(c||p)(n.Y36(o.b),n.Y36(e.c),n.Y36(d.f))},p.\u0275cmp=n.Xpm({type:p,selectors:[["app-user-sheet"]],inputs:{user:"user",userState:"userState"},outputs:{stateChangeEv:"stateChangeEv"},decls:2,vars:1,consts:[["trigger","trigger-button",3,"isOpen","ionModalDidDismiss"],["button","","slot","end","name","close-outline","size","large",3,"click"],["type","text",3,"value"],["disabled","true","type","text",3,"value"],["slot","end","name","lock-closed-outline"],["slot","end","size","small",3,"click"],["slot","start","name","sync-outline"],["slot","icon-only","name","trash-outline"]],template:function(c,v){1&c&&(n.TgZ(0,"ion-modal",0),n.NdJ("ionModalDidDismiss",function(){return v.userState=!1,v.stateChangeEv.emit(!1)}),n.YNc(1,_,37,7,"ng-template"),n.qZA()),2&c&&n.Q6J("isOpen",v.userState)},dependencies:[t.YG,t.Sm,t.W2,t.fr,t.Gu,t.gu,t.pK,t.Ie,t.Q$,t.ki,t.sr,t.wd,t.j9],styles:["ion-content[_ngcontent-%COMP%]{height:50%}"]}),p})()},2080:(U,m,r)=>{r.r(m),r.d(m,{HomePageModule:()=>E});var n=r(9808),o=r(9928),e=r(4182),d=r(4406),t=r(5e3),_=r(7704),a=r(5681);function p(u,h){1&u&&t._UZ(0,"ion-icon",6)}function S(u,h){1&u&&(t.TgZ(0,"ion-card-content")(1,"ion-item",7)(2,"ion-label"),t._uU(3,"Id Moulage"),t.qZA(),t._UZ(4,"ion-input",8,9),t.TgZ(6,"ion-note",10),t._uU(7,"Entrer un num\xe9ro d'ID ou scanner le code barre de la feuille de moulage"),t.qZA()()())}function c(u,h){if(1&u&&(t.TgZ(0,"ion-card",3)(1,"ion-card-header")(2,"ion-card-title"),t.YNc(3,p,1,0,"ion-icon",4),t._uU(4),t.qZA()(),t.YNc(5,S,8,0,"ion-card-content",5),t.qZA()),2&u){const g=h.$implicit;t.Q6J("button","button"===g.type)("routerLink","button"===g.type?g.path:""),t.xp6(3),t.Q6J("ngIf",null==g.options?null:g.options.qualityOnly),t.xp6(1),t.hij(" ",g.title," "),t.xp6(1),t.Q6J("ngIf",null==g.options?null:g.options.input)}}const v=[{title:"Moulage",path:"/molding",type:"button"},{title:"Outillage",path:"/tooling",type:"button"}],l=[{path:"",component:(()=>{class u{constructor(g,T,A){this.router=g,this.navCtrl=T,this.authService=A}ionViewWillEnter(){this.page={pageTitle:"ACCUEIL",menuItems:v,contentId:"home-content"}}ngOnInit(){this.page={pageTitle:"ACCUEIL",menuItems:v,contentId:"home-content"}}}return u.\u0275fac=function(g){return new(g||u)(t.Y36(d.F0),t.Y36(o.SH),t.Y36(_.e))},u.\u0275cmp=t.Xpm({type:u,selectors:[["app-home"]],decls:3,vars:3,consts:[[3,"pageTitle"],["color","medium",3,"fullscreen"],["class","menu-item-card","routerDirection","root",3,"button","routerLink",4,"ngFor","ngForOf"],["routerDirection","root",1,"menu-item-card",3,"button","routerLink"],["name","shield-half-outline",4,"ngIf"],[4,"ngIf"],["name","shield-half-outline"],["shape","round"],["type","text","placeholder",""],["inputIdMolding",""],["slot","helper"]],template:function(g,T){1&g&&(t._UZ(0,"app-shared-user-header",0),t.TgZ(1,"ion-content",1),t.YNc(2,c,6,5,"ion-card",2),t.qZA()),2&g&&(t.Q6J("pageTitle",T.page.pageTitle),t.xp6(1),t.Q6J("fullscreen",!1),t.xp6(1),t.Q6J("ngForOf",T.page.menuItems))},dependencies:[n.sg,n.O5,o.PM,o.FN,o.Zi,o.Dq,o.W2,o.gu,o.pK,o.Ie,o.Q$,o.uN,o.j9,o.YI,d.rH,a.Q],styles:[".menu-item-card[_ngcontent-%COMP%]{width:auto}"]}),u})()}];let i=(()=>{class u{constructor(){}}return u.\u0275fac=function(g){return new(g||u)},u.\u0275mod=t.oAB({type:u}),u.\u0275inj=t.cJS({imports:[d.Bz.forChild(l),d.Bz]}),u})();var f=r(8890),P=r(6091);let E=(()=>{class u{}return u.\u0275fac=function(g){return new(g||u)},u.\u0275mod=t.oAB({type:u}),u.\u0275inj=t.cJS({imports:[n.ez,e.u5,o.Pc,i,f.A,P.$]}),u})()},4147:U=>{U.exports={i8:"1.5.3"}}}]);