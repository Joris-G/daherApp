<form class="main-form" [formGroup]="maintForm">
  <ion-grid>
    <ion-row>
      <ion-col size="6">
        <!-- ******************************* -->
        <!-- *******   L'OUTILLAGE   ******* -->
        <!-- ******************************* -->
        <ion-card>
          <ion-card-header color=light>
            <ion-card-title class="ion-text-uppercase">L'outillage</ion-card-title>
          </ion-card-header>
          <ion-card-content>
            <ion-list lines="none">
              <ion-list-header>
                <ion-label>Avec n°OT</ion-label>
              </ion-list-header>
              <app-tool-input formControlName="outillage">
              </app-tool-input>
              <ng-container *ngIf="!maintForm.controls.outillage.value" formGroupName="outillNoRefSAP">
                <ion-list-header>
                  <ion-label>Sans n°OT</ion-label>
                </ion-list-header>
                <ion-item>
                  <ion-label>Programme avion</ion-label>
                  <ion-input formControlName="identification" type="text" placeholder="Renseigner le programme">
                  </ion-input>
                </ion-item>
                <ion-item>
                  <ion-label>Description outillage (texte libre)</ion-label>
                  <ion-input formControlName="description" type="text" placeholder="Description de l'outillage">
                  </ion-input>
                </ion-item>
                <ion-item>
                  <ion-label>Localisation (texte libre)</ion-label>
                  <ion-input formControlName="localisation" type="text" placeholder="Description de l'outillage">
                  </ion-input>
                </ion-item>
              </ng-container>
            </ion-list>
            <ion-item>
              <ion-label>Bloquant Prod</ion-label>
              <ion-toggle formControlName="bloquantProd" slot="end"></ion-toggle>
            </ion-item>
          </ion-card-content>
        </ion-card>
        <!-- ************************************ -->
        <!-- ****   LISTE DES MAINTENANCES   **** -->
        <!-- ************************************ -->
        <ion-card color="light" class="maintenance-list">
          <ion-card-header class="flex-row" color=light>
            <ion-card-title class="ion-text-uppercase">La maintenance</ion-card-title>
            <!-- ****   BOUTONS   **** -->
            <ion-button (click)="addMaintenanceItemClick()" size=small>
              <ion-icon slot="start" name="add"></ion-icon>
              Ajouter maintenance
            </ion-button>
          </ion-card-header>
          <ion-card-content>
            <!-- ****   LISTE   **** -->
            <ion-list>
              <ion-list-header>
                <ion-label>Liste des maitenances</ion-label>
              </ion-list-header>
              <!-- TODO Ajouter une directive pour hilight hover -->
              <ng-container *ngIf="maintForm.controls.itemActionCorrective">

                <ion-item button lines="full"
                  *ngFor="let maintenanceItem of maintForm.controls.itemActionCorrective.value.reverse()"
                  (click)="selectedItem = maintenanceItem">
                  <ion-label>{{maintenanceItem.rep}}</ion-label>
                </ion-item>
              </ng-container>
            </ion-list>
            <!-- <app-maintenance-item *ngFor="let maintenanceItem of maintRepForm.value.itemActionCorrective?.reverse()"
            [maintenanceItem]="maintenanceItem" (evValidateItem)="onValidateItem($event,maintenanceItem)"
            (evRemoveItem)="onRemoveItem($event,maintenanceItem)" [canUpdate]="canUpDate"></app-maintenance-item> -->
          </ion-card-content>
        </ion-card>
      </ion-col>

      <ion-col size="6">
        <ng-container *ngIf="selectedItem" class="righSide">
          <!-- ************************************ -->
          <!-- ****   MAINTENANCE ITEM   **** -->
          <!-- ************************************ -->
          <ion-card color="light">
            <ion-card-header class="flex-row" color=light>
              <ion-card-title class="ion-text-uppercase">DETAIL MAINTENANCE</ion-card-title>
              <!-- ****   BOUTONS   **** -->
            </ion-card-header>
            <ion-card-content>

              <app-maintenance-item [maintenanceItem]="selectedItem" (evRemoveItem)="onRemoveItem($event,selectedItem)"
                [canUpdate]="requestState.canUpdate"></app-maintenance-item>
            </ion-card-content>
          </ion-card>
        </ng-container>
      </ion-col>
    </ion-row>
  </ion-grid>
</form>