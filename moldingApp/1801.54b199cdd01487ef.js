"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1801],{1801:(Ze,Z,a)=>{a.r(Z),a.d(Z,{AdminModule:()=>Te});var h=a(8576),f=a(714),_=a(8),m=a(1661),v=a(5786),e=a(5e3),i=a(9928),y=a(3919),C=a(520),U=a(8393);let x=(()=>{class n{constructor(t,o){this.socket=t,this.http=o,this.httpHeaders=(new C.WM).append("Access-Control-Allow-Origin","*"),Notification.requestPermission().then(r=>{console.log(r),"granted"===r&&(this.socket.on("connect_failed",()=>{}),this.socket.on("notification",l=>{new Notification("Notification depuis le serveur",{body:l.message,icon:"assets/icons/icon-72x72.png"})}))})}newNotif(){this.http.post("http://localhost:3000/send-notification",{message:"testmessage"},{headers:this.httpHeaders}).subscribe(t=>{})}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(U.sk),e.LFG(C.eN))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),S=(()=>{class n{constructor(t,o,r,l){this.authService=t,this.router=o,this.notificationsService=r,this.socket=l}ngOnDestroy(){this.socket.disconnect()}ionViewDidLeave(){console.log("view did leave"),this.socket.disconnect()}ngOnInit(){this.user=this.authService.authUser}logoutClick(){this.authService.logout().subscribe(()=>{this.router.navigate(["/login"])})}navigateHome(){this.router.navigate(["/home"])}notifyClick(){console.log("notify click"),this.notificationsService.newNotif()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(y.e),e.Y36(m.F0),e.Y36(x),e.Y36(U.sk))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-shared-admin-header"]],decls:17,vars:2,consts:[[3,"translucent"],["color","primary"],["slot","start"],["color","light","menu","admin-menu","autoHide","false"],["src","assets/images/logoDaherFondBleu.png",1,"ion-hide-sm-down","logo",3,"click"],[1,"ion-text-uppercase","ion-text-center"],["id","button-profil","color","light","slot","end","outline","",1,"ion-margin-end"],["name","person-circle-outline"],["color","light"],["slot","end","color","danger",1,"ion-hide-sm-down",3,"click"],["slot","end","name","log-out-outline"],[1,"ion-hide-md-down"],["slot","end",3,"click"]],template:function(t,o){1&t&&(e.TgZ(0,"ion-header",0)(1,"ion-toolbar",1)(2,"ion-buttons",2),e._UZ(3,"ion-menu-button",3),e.TgZ(4,"ion-img",4),e.NdJ("click",function(){return o.navigateHome()}),e.qZA()(),e.TgZ(5,"ion-title",5),e._uU(6,"Administration"),e.qZA(),e.TgZ(7,"ion-chip",6),e._UZ(8,"ion-icon",7),e.TgZ(9,"ion-label",8),e._uU(10),e.qZA()(),e.TgZ(11,"ion-button",9),e.NdJ("click",function(){return o.logoutClick()}),e._UZ(12,"ion-icon",10),e.TgZ(13,"ion-label",11),e._uU(14,"D\xe9connexion"),e.qZA()(),e.TgZ(15,"ion-button",12),e.NdJ("click",function(){return o.notifyClick()}),e._uU(16," Notify "),e.qZA()()()),2&t&&(e.Q6J("translucent",!1),e.xp6(10),e.Oqu(null==o.user?null:o.user.username))},dependencies:[i.YG,i.Sm,i.hM,i.Gu,i.gu,i.Xz,i.Q$,i.fG,i.sr,i.wd],styles:[".logo[_ngcontent-%COMP%]{width:100px}"]}),n})();const w=["menuAdmin"];let N=(()=>{class n{constructor(t){this.navCtrl=t}ionViewWillEnter(){this.menuAdmin.open()}navigate(t){this.navCtrl.navigateForward(t)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(i.SH))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-admin"]],viewQuery:function(t,o){if(1&t&&e.Gf(w,5),2&t){let r;e.iGM(r=e.CRH())&&(o.menuAdmin=r.first)}},decls:24,vars:1,consts:[["color","medium",3,"fullscreen"],["menuId","admin-menu","side","start","type","push","contentId","admin-content","open","true"],["menuAdmin",""],["color","danger"],["auto-hide","true"],["button","",3,"click"],["slot","end"],["button",""],["id","admin-content"]],template:function(t,o){1&t&&(e._UZ(0,"app-shared-admin-header"),e.TgZ(1,"ion-content",0)(2,"ion-menu",1,2)(4,"ion-header")(5,"ion-toolbar",3)(6,"ion-title"),e._uU(7,"Menu de l'admnistration"),e.qZA()()(),e.TgZ(8,"ion-content")(9,"ion-list")(10,"ion-menu-toggle",4)(11,"ion-item",5),e.NdJ("click",function(){return o.navigate("admin/admin-user")}),e.TgZ(12,"ion-label"),e._uU(13,"Utilisateurs"),e.qZA(),e.TgZ(14,"ion-badge",6),e._uU(15,"11"),e.qZA()()(),e.TgZ(16,"ion-item",7),e._uU(17,"Outillages"),e.qZA(),e.TgZ(18,"ion-menu-toggle",4)(19,"ion-item",5),e.NdJ("click",function(){return o.navigate("admin/admin-molding")}),e._uU(20,"Moulages"),e.qZA()(),e.TgZ(21,"ion-item",7),e._uU(22,"Kits"),e.qZA()()()(),e._UZ(23,"ion-router-outlet",8),e.qZA()),2&t&&(e.xp6(1),e.Q6J("fullscreen",!1))},dependencies:[i.yp,i.W2,i.Gu,i.Ie,i.Q$,i.q_,i.z0,i.zc,i.sr,i.wd,i.jP,S]}),n})();var b=a(388),A=a(591),O=a(8117),F=a(2340),k=a(6322);let T=(()=>{class n{constructor(t){this.requestService=t,this.filteredMoldings$=new A.X([]),this.page=new A.X(1),this.uniqueTools$=new A.X([]),this.moldings=[],this.moldingsFilters={tools:[],username:[]},this.page.asObservable().subscribe(o=>{this.getMoldings(o).subscribe(r=>{this.moldings.push(...r),this.filteredMoldings=this.moldings,this.filteredMoldings$.next(this.filteredMoldings),this.uniqueTools$.next(this.moldings.filter((l,c)=>this.filteredMoldings.find(p=>p.outillage===l.outillage).id===l.id).map(l=>l.OT))})})}getMoldings(t=1,o=5){return this.requestService.createGetRequest(`${F.N.moldingApi}moldings?page=${t}&itemsPerPage=${o}`).pipe((0,O.B)())}getNextPage(){}resetFilters(){this.moldingsFilters={tools:[],username:[]},this.filteredMoldings$.next(this.moldings)}applyUserFilter(t){this.moldingsFilters.username.push(t),this.applyFilters()}applyToolFilter(t){this.moldingsFilters.tools=Array.from(t),this.applyFilters()}applyFilters(){const t=this.filteredMoldings.filter((o,r)=>{const l=this.isToolFilter(o),c=this.isUserFilter(o);return l&&c});this.filteredMoldings$.next(t)}isToolFilter(t){return this.moldingsFilters.tools.length<=0||this.moldingsFilters.tools.some(o=>t.OT.sapToolNumber.toString().includes(o))}isUserFilter(t){return this.moldingsFilters.username.length<=0||this.moldingsFilters.username.some(o=>t.userCreat.username.includes(o))}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(k.s))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var u=a(9808);function q(n,s){if(1&n&&(e.TgZ(0,"ion-select-option",9),e._uU(1),e.qZA()),2&n){const t=s.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t.designation," ")}}let D=(()=>{class n{constructor(t){this.moldingListService=t,this.uniqueTools=this.moldingListService.uniqueTools$.asObservable()}ngOnInit(){}filterToolNameChange(t){console.log(t.value),this.moldingListService.applyToolFilter(t.value)}filterToolChange(t){const r=t.detail.value.map(l=>l.sapToolNumber.toString());this.moldingListService.applyToolFilter(r)}filterCreateByChange(t){const o=t.toString();console.log(o),this.moldingListService.applyUserFilter(o)}resetFiltersClick(){this.moldingListService.resetFilters()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(T))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-moldings-filters"]],decls:29,vars:4,consts:[[1,"filters-container"],["type","text","placeholder","Nom d'utilisateur",3,"ionInput"],["inputUsername",""],["color","dark","display-format","DD.MM.YYYY","presentation","date","preferWheel","false",3,"firstDayOfWeek"],["type","text","placeholder","Num\xe9ro d'OT",3,"ionInput"],["inputTool",""],["multiple","true","placeholder","Selectionner outillage",3,"ionChange"],[3,"value",4,"ngFor","ngForOf"],["expand","block","fill","outline","shape","round",3,"click"],[3,"value"]],template:function(t,o){if(1&t){const r=e.EpF();e.TgZ(0,"div",0)(1,"ion-item")(2,"ion-label"),e._uU(3,"Cr\xe9\xe9e par"),e.qZA(),e.TgZ(4,"ion-input",1,2),e.NdJ("ionInput",function(){e.CHM(r);const c=e.MAs(5);return e.KtG(o.filterCreateByChange(c.value))}),e.qZA()(),e.TgZ(6,"ion-item")(7,"ion-label"),e._uU(8,"Date de cr\xe9ation"),e.qZA(),e._UZ(9,"ion-datetime",3),e.qZA(),e.TgZ(10,"ion-item")(11,"ion-label"),e._uU(12,"Salle de moulage"),e.qZA()(),e.TgZ(13,"ion-item")(14,"ion-label"),e._uU(15,"Programme avion"),e.qZA()(),e.TgZ(16,"ion-item")(17,"ion-label"),e._uU(18,"N\xb0OT"),e.qZA(),e.TgZ(19,"ion-input",4,5),e.NdJ("ionInput",function(){e.CHM(r);const c=e.MAs(20);return e.KtG(o.filterToolNameChange(c.value))}),e.qZA()(),e.TgZ(21,"ion-item")(22,"ion-label"),e._uU(23,"Outillage"),e.qZA(),e.TgZ(24,"ion-select",6),e.NdJ("ionChange",function(c){return o.filterToolChange(c)}),e.YNc(25,q,2,2,"ion-select-option",7),e.ALo(26,"async"),e.qZA()(),e.TgZ(27,"ion-button",8),e.NdJ("click",function(){return o.resetFiltersClick()}),e._uU(28," Restaurer "),e.qZA()()}2&t&&(e.xp6(9),e.Q6J("firstDayOfWeek",1),e.xp6(16),e.Q6J("ngForOf",e.lcZ(26,2,o.uniqueTools)))},dependencies:[u.sg,i.YG,i.x4,i.pK,i.Ie,i.Q$,i.t9,i.n0,i.QI,i.j9,u.Ov],styles:[".filters-container[_ngcontent-%COMP%]{padding:.5rem;background-color:var(--ion-color-light)}"]}),n})();var L=a(5625);function P(n,s){1&n&&e._UZ(0,"ion-spinner",13)}function Y(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"ion-row",14),e.NdJ("click",function(){e.CHM(t);const r=e.MAs(2),l=e.oxw();return e.KtG(l.toggleOptions(r))}),e.TgZ(1,"ion-item-sliding",15,16)(3,"ion-item",17)(4,"ion-col",8)(5,"ion-chip",18)(6,"ion-label"),e._uU(7),e.qZA()()(),e.TgZ(8,"ion-col")(9,"ion-text"),e._uU(10),e.ALo(11,"DateHeure"),e.qZA()(),e.TgZ(12,"ion-col")(13,"ion-text"),e._uU(14),e.qZA()(),e.TgZ(15,"ion-col")(16,"ion-text"),e._uU(17),e.qZA()()(),e.TgZ(18,"ion-item-options")(19,"ion-item-option",19),e._uU(20,"OUVRIR"),e.qZA()()()()}if(2&n){const t=s.$implicit;e.xp6(1),e.Q6J("disabled",!0),e.xp6(4),e.Q6J("color",t.isActive?"success":"danger"),e.xp6(2),e.Oqu(t.id),e.xp6(3),e.hij(" ",e.lcZ(11,8,t.moldingDay)," "),e.xp6(4),e.hij(" ",t.userCreat.username," "),e.xp6(3),e.AsE(" ",t.OT.sapToolNumber," - ",t.OT.designation,""),e.xp6(2),e.Q6J("routerLink","/molding/create-molding/"+t.id)}}let I=(()=>{class n{constructor(t){this.moldingListService=t,this.filteredMoldings=[],this.moldingListLoading=!1}nextPage(){this.moldingListService.page.next(this.moldingListService.page.value+1)}ngOnInit(){this.moldingListLoading=!0,this.filteredMoldings$=this.moldingListService.filteredMoldings$.asObservable(),this.filteredMoldings$.subscribe(t=>{this.moldingListLoading=!1,this.filteredMoldings=t})}ngOnChanges(t){}openMoldingClick(t){}toggleOptions(t){t.open("end"),setTimeout(()=>{t.close()},3e3)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(T))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-admin-molding-list"]],features:[e.TTD],decls:30,vars:4,consts:[[1,"molding-list-content",3,"fullscreen"],["slot","end","name","circles",4,"ngIf"],["contentId","filters-content","menuId","filters-menu"],["color","light"],[1,"ion-padding"],["id","filters-content",3,"fullscreen"],[2,"width","100%"],["color","medium",1,"ion-padding"],["size","1"],["menu","filters-menu","autoHide","false"],["name","filter-outline"],[3,"click",4,"ngFor","ngForOf"],["expand","block","fill","clear","shape","round",3,"click"],["slot","end","name","circles"],[3,"click"],[3,"disabled"],["slidingItem",""],["button","","lines","full",1,"ion-text-left"],["mode","ios","outline","true",3,"color"],[3,"routerLink"]],template:function(t,o){1&t&&(e.TgZ(0,"ion-content",0)(1,"ion-header")(2,"ion-toolbar")(3,"ion-title"),e._uU(4,"Liste des moulages"),e.qZA(),e.YNc(5,P,1,0,"ion-spinner",1),e.qZA()(),e.TgZ(6,"ion-menu",2)(7,"ion-header")(8,"ion-toolbar",3)(9,"ion-title"),e._uU(10,"Recherche avanc\xe9e"),e.qZA()()(),e.TgZ(11,"ion-content",4),e._UZ(12,"app-moldings-filters"),e.qZA()(),e.TgZ(13,"ion-content",5)(14,"ion-grid",6)(15,"ion-row",7)(16,"ion-col",8)(17,"ion-menu-button",9),e._UZ(18,"ion-icon",10),e.qZA()(),e.TgZ(19,"ion-col"),e._uU(20,"Date de cr\xe9ation"),e.qZA(),e.TgZ(21,"ion-col"),e._uU(22,"Cr\xe9\xe9 par"),e.qZA(),e.TgZ(23,"ion-col"),e._uU(24,"Outillage de moulage"),e.qZA()(),e.YNc(25,Y,21,10,"ion-row",11),e.qZA()(),e.TgZ(26,"ion-footer")(27,"ion-toolbar")(28,"ion-button",12),e.NdJ("click",function(){return o.nextPage()}),e._uU(29," Charger plus "),e.qZA()()()()),2&t&&(e.Q6J("fullscreen",!0),e.xp6(5),e.Q6J("ngIf",o.moldingListLoading),e.xp6(8),e.Q6J("fullscreen",!0),e.xp6(12),e.Q6J("ngForOf",o.filteredMoldings))},dependencies:[u.sg,u.O5,i.YG,i.hM,i.wI,i.W2,i.fr,i.jY,i.Gu,i.gu,i.Ie,i.u8,i.IK,i.td,i.Q$,i.z0,i.fG,i.Nd,i.PQ,i.yW,i.sr,i.wd,i.YI,m.rH,D,L.B],styles:["ion-grid[_ngcontent-%COMP%]{height:100%;overflow:hidden;overflow-y:scroll}.molding-list-content[_ngcontent-%COMP%]{height:100%}"]}),n})(),E=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-admin-molding-dashboard"]],decls:17,vars:0,template:function(t,o){1&t&&(e.TgZ(0,"ion-card")(1,"ion-card-header")(2,"ion-card-title"),e._uU(3,"Tableau de bord"),e.qZA()(),e.TgZ(4,"ion-card-content")(5,"ion-card")(6,"ion-card-header")(7,"ion-card-subtitle"),e._uU(8,"Nouveaux moulages"),e.qZA()(),e.TgZ(9,"ion-card-content"),e._uU(10," GRAPHIQUE ICI "),e.qZA()(),e.TgZ(11,"ion-card")(12,"ion-card-header")(13,"ion-card-subtitle"),e._uU(14,"Nombre de connexions par jour"),e.qZA()(),e.TgZ(15,"ion-card-content"),e._uU(16," GRAPHIQUE ICI "),e.qZA()()()())},dependencies:[i.PM,i.FN,i.Zi,i.tO,i.Dq]}),n})(),Q=(()=>{class n{constructor(t,o){this.moldingService=t,this.moldingListService=o,this.moldingsError=!1}ngOnInit(){this.moldings$=this.moldingListService.getMoldings()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(b.s),e.Y36(T))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-admin-molding"]],features:[e._Bn([b.s])],decls:11,vars:1,consts:[["color","dark"],["color","light",3,"fullscreen"],["fixed","",1,"grid-content"],["size","9",1,"ion-no-padding"],["size","3"]],template:function(t,o){1&t&&(e.TgZ(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-title"),e._uU(3,"Administration des moulages"),e.qZA()()(),e.TgZ(4,"ion-content",1)(5,"ion-grid",2)(6,"ion-row")(7,"ion-col",3),e._UZ(8,"app-admin-molding-list"),e.qZA(),e.TgZ(9,"ion-col",4),e._UZ(10,"app-admin-molding-dashboard"),e.qZA()()()()),2&t&&(e.xp6(4),e.Q6J("fullscreen",!1))},dependencies:[i.wI,i.W2,i.jY,i.Gu,i.Nd,i.sr,i.wd,I,E],styles:[".grid-content[_ngcontent-%COMP%]{width:100%;height:100%;overflow:hidden}.grid-content[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]{height:100%}"]}),n})();var H=a(9356),M=a(4501),R=a(4850),J=a(512),d=a(8402),$=a(6862);function B(n,s){1&n&&(e.TgZ(0,"th",15),e._uU(1," Id "),e.qZA())}function G(n,s){if(1&n&&(e.TgZ(0,"td",16),e._uU(1),e.qZA()),2&n){const t=s.$implicit;e.xp6(1),e.hij(" ",t.id," ")}}function j(n,s){1&n&&(e.TgZ(0,"th",15),e._uU(1," UserName "),e.qZA())}function W(n,s){if(1&n&&(e.TgZ(0,"td",16),e._uU(1),e.qZA()),2&n){const t=s.$implicit;e.xp6(1),e.hij(" ",t.username," ")}}function z(n,s){1&n&&(e.TgZ(0,"th",15),e._uU(1," Nom "),e.qZA())}function X(n,s){if(1&n&&(e.TgZ(0,"td",16),e._uU(1),e.qZA()),2&n){const t=s.$implicit;e.xp6(1),e.hij(" ",t.nom," ")}}function K(n,s){1&n&&(e.TgZ(0,"th",15),e._uU(1," Pr\xe9nom "),e.qZA())}function V(n,s){if(1&n&&(e.TgZ(0,"td",16),e._uU(1),e.qZA()),2&n){const t=s.$implicit;e.xp6(1),e.hij(" ",t.prenom," ")}}function ee(n,s){1&n&&(e.TgZ(0,"th",15),e._uU(1," Matricule "),e.qZA())}function te(n,s){if(1&n&&(e.TgZ(0,"td",16),e._uU(1),e.qZA()),2&n){const t=s.$implicit;e.xp6(1),e.hij(" ",t.matricule," ")}}function ne(n,s){1&n&&(e.TgZ(0,"th",15),e._uU(1," Mail "),e.qZA())}function ie(n,s){if(1&n&&(e.TgZ(0,"td",16),e._uU(1),e.qZA()),2&n){const t=s.$implicit;e.xp6(1),e.hij(" ",t.mail," ")}}function oe(n,s){1&n&&(e.TgZ(0,"th",15),e._uU(1," Roles "),e.qZA())}function se(n,s){if(1&n&&(e.TgZ(0,"td",16),e._uU(1),e.qZA()),2&n){const t=s.$implicit;e.xp6(1),e.hij(" ",t.roles," ")}}function re(n,s){1&n&&e._UZ(0,"th",15)}function le(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"td",17)(1,"ion-segment",18),e.NdJ("ionChange",function(r){const c=e.CHM(t).$implicit,g=e.oxw();return e.KtG(g.statusChanged(r,c))}),e.TgZ(2,"ion-segment-button",19),e._UZ(3,"ion-icon",20),e.qZA(),e.TgZ(4,"ion-segment-button",21),e._UZ(5,"ion-icon",22),e.qZA()()()}if(2&n){const t=s.$implicit;e.xp6(1),e.Q6J("value",t.isActive)}}function ae(n,s){1&n&&e._UZ(0,"tr",23)}function ce(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"tr",24),e.NdJ("click",function(){const l=e.CHM(t).$implicit,c=e.oxw();return e.KtG(c.onSelectUser(l))}),e.qZA()}}const de={ROLE_USER:"Utilisateur",ROLE_METHODES:"Pr\xe9parateur",ROLE_CE_OUTIL:"Chef d'\xe9quipe outillage",ROLE_MOULEUR:"Mouleur",ROLE_ADMIN:"Administrateur"};let me=(()=>{class n{constructor(t,o,r){this.userService=t,this.loadingService=o,this.alertService=r,this.isUserSelected=!1,this.displayedUserColumns=["id","username","nom","prenom","matricule","roles","commands"]}ngOnInit(){this.users$=this.userService.getUsers().pipe((0,R.U)(t=>t.map(o=>(o.roles=o.roles.map(r=>{const l=(n=>de[n])(r);return l||r}),o))))}statusChanged(t,o){this.confirmUser(o,t.detail.value)}onSelectUser(t){console.log(t),this.isUserSelected=!0,this.selectedUser=t}confirmUser(t,o){this.loadingService.startLoading("Mise \xe0 jour de l'utilisateur"),this.userService.confirmUser(t.id,o).subscribe(r=>{this.loadingService.stopLoading()},r=>{this.loadingService.stopLoading(),this.alertService.simpleAlert("Erreur","Le serveur \xe0 renvoy\xe9 une erreur",`${r}`)})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(_.f),e.Y36(M.b),e.Y36(J.c))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-admin-user-table"]],decls:29,vars:7,consts:[["mat-table","",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","username"],["matColumnDef","nom"],["matColumnDef","prenom"],["matColumnDef","matricule"],["matColumnDef","mail"],["matColumnDef","roles"],["matColumnDef","commands"],["mat-cell","","class","commands",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",3,"click",4,"matRowDef","matRowDefColumns"],[3,"user","stateChangeEv"],["mat-header-cell",""],["mat-cell",""],["mat-cell","",1,"commands"],[3,"value","ionChange"],["value","true"],["color","success","name","checkmark-outline"],["value","false"],["color","danger","name","close-outline"],["mat-header-row",""],["mat-row","",3,"click"]],template:function(t,o){1&t&&(e.TgZ(0,"table",0),e.ALo(1,"async"),e.ynx(2,1),e.YNc(3,B,2,0,"th",2),e.YNc(4,G,2,1,"td",3),e.BQk(),e.ynx(5,4),e.YNc(6,j,2,0,"th",2),e.YNc(7,W,2,1,"td",3),e.BQk(),e.ynx(8,5),e.YNc(9,z,2,0,"th",2),e.YNc(10,X,2,1,"td",3),e.BQk(),e.ynx(11,6),e.YNc(12,K,2,0,"th",2),e.YNc(13,V,2,1,"td",3),e.BQk(),e.ynx(14,7),e.YNc(15,ee,2,0,"th",2),e.YNc(16,te,2,1,"td",3),e.BQk(),e.ynx(17,8),e.YNc(18,ne,2,0,"th",2),e.YNc(19,ie,2,1,"td",3),e.BQk(),e.ynx(20,9),e.YNc(21,oe,2,0,"th",2),e.YNc(22,se,2,1,"td",3),e.BQk(),e.ynx(23,10),e.YNc(24,re,1,0,"th",2),e.YNc(25,le,6,1,"td",11),e.BQk(),e.YNc(26,ae,1,0,"tr",12),e.YNc(27,ce,1,0,"tr",13),e.qZA(),e.TgZ(28,"app-user-sheet",14),e.NdJ("stateChangeEv",function(l){return o.isUserSelected=l}),e.qZA()),2&t&&(e.Q6J("dataSource",e.lcZ(1,5,o.users$)),e.xp6(26),e.Q6J("matHeaderRowDef",o.displayedUserColumns)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",o.displayedUserColumns),e.xp6(1),e.Q6J("user",o.selectedUser))},dependencies:[i.gu,i.cJ,i.GO,i.QI,d.BZ,d.fO,d.as,d.w1,d.Dz,d.nj,d.ge,d.ev,d.XQ,d.Gk,$.A,u.Ov]}),n})();const ge=["newUsers"],pe=[{path:"",component:N,children:[{path:"admin-user",component:(()=>{class n{constructor(t,o,r){this.datePipe=t,this.loadingService=o,this.serviceService=r,this.weeklyLabels=[],this.weeklyUsers=[]}ngOnInit(){this.users=[],this.loadingService.startLoading(),this.serviceService.getServices().subscribe(t=>{t.forEach(o=>{o.users.forEach(r=>this.users.push(r))}),this.weeklyLabels=this.createWeeklyLabel(),this.weeklyUsers=this.createWeeklyUserData(),this.lineChart=new H.Z(this.newUsersCanvas.nativeElement,{type:"line",data:{labels:this.weeklyLabels,datasets:[{label:"Evolution du nombre d'inscription",fill:!1,backgroundColor:"rgba(75,192,192,0.4)",borderColor:"rgba(75,192,192,1)",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",pointBorderColor:"rgba(75,192,192,1)",pointBackgroundColor:"#fff",pointBorderWidth:1,pointHoverRadius:5,pointHoverBackgroundColor:"rgba(75,192,192,1)",pointHoverBorderColor:"rgba(220,220,220,1)",pointHoverBorderWidth:2,pointRadius:1,pointHitRadius:10,data:this.weeklyUsers,spanGaps:!1}]}}),this.lineChart.update(),this.loadingService.stopLoading()})}createWeeklyLabel(){const t=new Date,o=new Date(2022,0,1),r=[];for(;o<t;)r.push(this.datePipe.transform(o,"dd/MM")),o.setDate(o.getDate()+7);return r}createWeeklyUserData(){const t=new Date;let o=new Date(2022,0,1);const r=[];for(;o<t;){const l=new Date(o);l.setDate(l.getDate()+7);const g=this.users.filter(p=>new Date(p.createdAt)>o&&new Date(p.createdAt)<=l).length;r.push(g),o=l}return r}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(u.uU),e.Y36(M.b),e.Y36(f.z))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-admin-user"]],viewQuery:function(t,o){if(1&t&&e.Gf(ge,5),2&t){let r;e.iGM(r=e.CRH())&&(o.newUsersCanvas=r.first)}},features:[e._Bn([_.f,f.z])],decls:30,vars:0,consts:[["color","light"],["false",""],["size","8"],[1,"table-card-content"],["size","4"],["newUsers",""]],template:function(t,o){1&t&&(e.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),e._uU(3,"Administration des utilisateurs"),e.qZA()()(),e.TgZ(4,"ion-content",0)(5,"ion-grid",1)(6,"ion-row")(7,"ion-col",2)(8,"ion-card")(9,"ion-card-content",3),e._UZ(10,"app-admin-user-table"),e.qZA()()(),e.TgZ(11,"ion-col",4)(12,"ion-card")(13,"ion-card-header")(14,"ion-card-title"),e._uU(15,"Tableau de bord"),e.qZA()(),e.TgZ(16,"ion-card-content")(17,"ion-card")(18,"ion-card-header")(19,"ion-card-subtitle"),e._uU(20,"Nouveaux inscrits"),e.qZA()(),e.TgZ(21,"ion-card-content"),e._UZ(22,"canvas",null,5),e.qZA()(),e.TgZ(24,"ion-card")(25,"ion-card-header")(26,"ion-card-subtitle"),e._uU(27,"Nombre de connexions par jour"),e.qZA()(),e.TgZ(28,"ion-card-content"),e._uU(29," GRAPHIQUE ICI "),e.qZA()()()()()()()())},dependencies:[i.PM,i.FN,i.Zi,i.tO,i.Dq,i.wI,i.W2,i.jY,i.Gu,i.Nd,i.sr,i.wd,me],styles:["mat-cell[_ngcontent-%COMP%]{padding:100px!important}table[_ngcontent-%COMP%]{width:100%}.commands[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-around}ion-card[_ngcontent-%COMP%]{max-height:100%;flex-grow:1}.table-card-content[_ngcontent-%COMP%]{width:100%;height:100%;overflow:auto}.table-card-content[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%}"]}),n})(),canActivate:[v.p],data:{expectedRole:["ROLE_ADMIN"]}},{path:"admin-molding",canActivate:[v.p],data:{expectedRole:["ROLE_ADMIN"]},component:Q}]}];let he=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[m.Bz.forChild(pe),m.Bz]}),n})();var fe=a(6015),_e=a(4446);let Ae=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({providers:[fe.e],imports:[h.o,_e.d]}),n})(),Te=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({providers:[_.f,f.z],imports:[Ae,he,h.o,h.o]}),n})()}}]);