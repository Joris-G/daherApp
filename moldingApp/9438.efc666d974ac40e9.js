"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9438],{9438:(b,u,r)=>{r.r(u),r.d(u,{IndicatorsPageModule:()=>A});var d=r(6019),l=r(9133),i=r(1704),p=r(4382),t=r(3668),g=r(3580);let m=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-indicator-number"]],inputs:{indicator:"indicator"},decls:7,vars:2,consts:[["color","primary"]],template:function(e,a){1&e&&(t.TgZ(0,"ion-card",0),t.TgZ(1,"ion-card-header"),t.TgZ(2,"ion-card-subtitle"),t._uU(3),t.qZA(),t.qZA(),t.TgZ(4,"ion-card-content"),t.TgZ(5,"ion-text"),t._uU(6),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(3),t.Oqu(a.indicator.name),t.xp6(3),t.hij(" ",a.indicator.value," "))},directives:[i.PM,i.Zi,i.tO,i.FN,i.yW],styles:["ion-text[_ngcontent-%COMP%]{font-size:500%;color:var(--ion-color-primary-contrast)}ion-card-content[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}"]}),n})();var h=r(720);const f=["canvas"];let C=(()=>{class n{constructor(){}ngAfterViewInit(){console.log(this.indicator),this.pieChart=new h.Z(this.canvas.nativeElement,{type:"pie",data:{labels:Object.entries(this.indicator.repartitionObj).map(e=>e[0]),datasets:[{label:this.indicator.name,backgroundColor:["red","yellow"],borderColor:"rgba(75,192,192,1)",borderJoinStyle:"miter",data:Object.entries(this.indicator.repartitionObj).map(e=>e[1])}]}}),this.pieChart.update()}ngOnInit(){console.log("init",this.indicator)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-indicator-graph"]],viewQuery:function(e,a){if(1&e&&t.Gf(f,5),2&e){let c;t.iGM(c=t.CRH())&&(a.canvas=c.first)}},inputs:{indicator:"indicator"},decls:7,vars:1,consts:[["color","primary"],["canvas",""]],template:function(e,a){1&e&&(t.TgZ(0,"ion-card",0),t.TgZ(1,"ion-card-header"),t.TgZ(2,"ion-card-subtitle"),t._uU(3),t.qZA(),t.qZA(),t.TgZ(4,"ion-card-content"),t._UZ(5,"canvas",null,1),t.qZA(),t.qZA()),2&e&&(t.xp6(3),t.hij(" ",a.indicator.name," "))},directives:[i.PM,i.Zi,i.tO,i.FN],styles:[""]}),n})();const Z=["repartitionDemandesCanvas"],v=function(n){return{name:"R\xe9partition",repartitionObj:n}};function y(n,o){if(1&n&&t._UZ(0,"app-indicator-graph",3),2&n){const e=t.oxw();t.Q6J("indicator",t.VKq(1,v,e.requestTypeDistribution))}}const I=function(n){return{name:"En cours",value:n}},T=function(n){return{name:"Ouvertes",value:n}},q=[{path:"",component:(()=>{class n{constructor(e){this.toolRequestService=e,this.openRequestCount=0,this.onGoingRequestCount=0}ngOnInit(){}ionViewWillEnter(){this.toolRequestService.getToolRequests().then(e=>{const a=(new Date).getTime();e.forEach(s=>{console.log(s),"CLOTUREE"!==s.statut&&(this.openRequestCount=this.openRequestCount+1),"EN COURS DE REALISATION"!==s.statut&&(this.onGoingRequestCount=this.onGoingRequestCount+1)}),this.requestTypeDistribution={controle:e.filter(s=>"Controle"===s.type).length,maintenance:e.filter(s=>"Maintenance"===s.type).length};const c=(new Date).getTime();console.log(this.openRequestCount,this.onGoingRequestCount,c-a+"ms"),console.log(this.requestTypeDistribution)})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(g.C))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-indicators"]],viewQuery:function(e,a){if(1&e&&t.Gf(Z,5),2&e){let c;t.iGM(c=t.CRH())&&(a.repartitionDemandesCanvas=c.first)}},decls:9,vars:8,consts:[["color","light",3,"fullscreen"],[1,"graph"],[3,"indicator",4,"ngIf"],[3,"indicator"]],template:function(e,a){1&e&&(t.TgZ(0,"ion-header"),t.TgZ(1,"ion-toolbar"),t.TgZ(2,"ion-title"),t._uU(3,"Indicateurs"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(4,"ion-content",0),t.TgZ(5,"div",1),t.YNc(6,y,1,3,"app-indicator-graph",2),t._UZ(7,"app-indicator-number",3),t._UZ(8,"app-indicator-number",3),t.qZA(),t.qZA()),2&e&&(t.xp6(4),t.Q6J("fullscreen",!0),t.xp6(2),t.Q6J("ngIf",a.requestTypeDistribution),t.xp6(1),t.Q6J("indicator",t.VKq(4,I,a.onGoingRequestCount)),t.xp6(1),t.Q6J("indicator",t.VKq(6,T,a.openRequestCount)))},directives:[i.Gu,i.sr,i.wd,i.W2,d.O5,m,C],styles:[".graph[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:nowrap;overflow:hidden}.graph[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{min-width:25%;max-width:50%;max-height:50%;min-height:1/3}"]}),n})()}];let P=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[p.Bz.forChild(q)],p.Bz]}),n})();var O=r(5297);let A=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[d.ez,l.u5,i.Pc,P,O.D]]}),n})()}}]);