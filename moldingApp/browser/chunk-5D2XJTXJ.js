import{c as Ve,d as ni}from"./chunk-PBLCNUC2.js";import{a as ei,b as ti,c as ii}from"./chunk-6A4FWNE2.js";import{a as Zt}from"./chunk-NHMY2DF4.js";import{a as Ue,e as qe,f as Gt}from"./chunk-4JAIPXOG.js";import{$a as Te,Ad as I,Bd as Z,Cb as Ie,Cd as Pt,Da as s,Db as Et,Dd as Mt,Ea as a,Ed as ee,Fa as y,G as be,Ga as vt,Ha as bt,Hd as Dt,Ib as St,Id as Ft,J as we,Ja as U,Jb as Ct,Jd as Ut,K as mt,Kd as W,L as v,La as _,Ld as qt,Ma as Ee,N as gt,Nd as Me,Od as De,Pd as Vt,Qa as Se,Ra as Ce,Rb as xt,S as yt,Sa as xe,T as x,Ta as ce,U as k,Ua as l,Ub as kt,Ud as $,Va as ke,Vb as Tt,Wa as A,Xa as wt,Xd as Ht,Yc as At,Yd as Wt,Zd as $t,_d as jt,ab as b,ae as O,ca as _t,ce as R,d as ve,de as Kt,eb as Q,fb as J,fe as Yt,ia as p,id as It,ja as g,jd as Ot,je as zt,l as pt,le as w,md as Rt,me as Fe,nd as G,ne as Qt,od as Lt,oe as Jt,pd as Oe,pe as Xt,qd as Re,rd as Le,sa as F,sd as Be,td as Ne,ud as Pe,va as m,vd as q,wd as V,xd as Bt,yb as X,yd as Nt,z as ft,zb as Ae,zd as H}from"./chunk-U2GCEKKH.js";import"./chunk-XOPHGSMQ.js";import"./chunk-QUJFQN2Y.js";import"./chunk-7KG7SC73.js";import"./chunk-UINM2UFW.js";import"./chunk-MIBXNQ3H.js";import"./chunk-W7C3YL7V.js";import"./chunk-Z5EWWMJI.js";import"./chunk-PGGMNVKM.js";import"./chunk-4JISMLMH.js";import"./chunk-LQXFU6KZ.js";import"./chunk-C3V3U5PU.js";import"./chunk-C7XSXIEG.js";import"./chunk-MTHZ7MWU.js";import"./chunk-WI5MSH4N.js";import"./chunk-A2DMYIQX.js";import"./chunk-CKP3SGE2.js";import"./chunk-6GY5YBTO.js";import"./chunk-WVRPG2JR.js";import"./chunk-VEGO2JNG.js";import"./chunk-D3MN2HBL.js";import"./chunk-GLOUZK3F.js";import"./chunk-N4PXAYQ7.js";import"./chunk-M2X7KQLB.js";import"./chunk-L7HKPRYE.js";import"./chunk-C5RQ2IC2.js";import"./chunk-42C7ZIID.js";import{f as Wi,h as ut}from"./chunk-B4AJQJMI.js";var ri=(()=>{class n{elemRef;borderColor;poste;constructor(e){this.elemRef=e}ngOnInit(){this.setBorder(),this.setColor()}setColor(){let e;switch(this.poste){case"Operateur":e="primary";break;case"Maitrise":e="secondary";break;case"":break;default:break}this.elemRef.nativeElement.style.color=`var(--ion-color-${e})`}setBorder(){let e="2px",i="solid",r;typeof this.borderColor=="string"?r=this.borderColor:r=this.borderColor?"success":"danger";let o=`${e} ${i} var(--ion-color-${r})`;console.log(o,this.borderColor),this.elemRef.nativeElement.style.border=o,this.elemRef.nativeElement.style.boxShadow=`0 0 5px var(--ion-color-${r})`}static \u0275fac=function(i){return new(i||n)(g(_t))};static \u0275dir=gt({type:n,selectors:[["","appBorderColor",""]],inputs:{borderColor:"borderColor",poste:"poste"},standalone:!0})}return n})();function ji(n,t){if(n&1){let e=U();s(0,"ion-row",6),_("click",function(){let r=x(e).$implicit,o=Ee(2);return k(o.onSelectUser(r))}),s(1,"ion-col",3),y(2,"ion-icon",7),a(),s(3,"ion-col",4),l(4),a(),s(5,"ion-col",4),l(6),a(),s(7,"ion-col",4),l(8),a(),s(9,"ion-col",4),l(10),a()()}if(n&2){let e=t.$implicit;p(2),m("borderColor",e.isActive)("poste",e.poste.libelle),p(2),A(" ",e.username," "),p(2),A(" ",e.nom.toUpperCase()," "),p(2),A(" ",e.prenom.charAt(0).toUpperCase()+e.prenom.slice(1).toLowerCase()," "),p(2),A(" ",e.matricule," ")}}function Ki(n,t){if(n&1&&(vt(0),s(1,"ion-grid",1)(2,"ion-row",2),y(3,"ion-col",3),s(4,"ion-col",4),l(5,"Nom d'utilisateur"),a(),s(6,"ion-col",4),l(7,"Nom"),a(),s(8,"ion-col",4),l(9,"Pr\xE9nom"),a(),s(10,"ion-col",4),l(11,"Matricule"),a()(),F(12,ji,11,6,"ion-row",5),a(),bt()),n&2){let e=t.ngIf;p(12),m("ngForOf",e)}}var Yi={ROLE_USER:"Utilisateur",ROLE_METHODES:"Pr\xE9parateur",ROLE_CE_OUTIL:"Chef d'\xE9quipe outillage",ROLE_MOULEUR:"Mouleur",ROLE_ADMIN:"Administrateur"},zi=n=>Yi[n],oi=(()=>{class n{userService;loadingService;alertService;modalCtrl;users$;constructor(e,i,r,o){this.userService=e,this.loadingService=i,this.alertService=r,this.modalCtrl=o}ngOnInit(){this.users$=this.userService.getUsers().pipe(pt(e=>e.map(i=>(i.roles=i.roles.map(r=>{let o=zi(r);return o||r}),i))))}onSelectUser(e){return ut(this,null,function*(){(yield this.modalCtrl.create({component:Gt,componentProps:{user:e}})).present()})}statusChanged(e,i){this.confirmUser(i,e.detail.value)}confirmUser(e,i){this.loadingService.startLoading("Mise \xE0 jour de l'utilisateur"),this.userService.confirmUser(e.id,i).subscribe(r=>{this.loadingService.stopLoading()},r=>{this.loadingService.stopLoading(),this.alertService.simpleAlert("Erreur","Le serveur \xE0 renvoy\xE9 une erreur",`${r}`)})}static \u0275fac=function(i){return new(i||n)(g(qe),g(Fe),g(Qt),g(zt))};static \u0275cmp=v({type:n,selectors:[["app-admin-user-table"]],standalone:!0,features:[b],decls:2,vars:3,consts:[[4,"ngIf"],["fixed",""],["appHeaderRow",""],["size","1"],["size",""],["appDataRow","",3,"click",4,"ngFor","ngForOf"],["appDataRow","",3,"click"],["name","person-circle","appBorderColor","","size","large",3,"borderColor","poste"]],template:function(i,r){i&1&&(F(0,Ki,13,1,"ng-container",0),Q(1,"async")),i&2&&m("ngIf",J(1,1,r.users$))},dependencies:[Ae,w,q,H,Z,$,ti,X,ii,ri,Ie],styles:["ion-icon[_ngcontent-%COMP%]{border-radius:50%}"]})}return n})();var Qi=["newUsers"],si=(()=>{class n{datePipe;loadingService;serviceService;newUsersCanvas;users;lineChart;weeklyLabels=[];weeklyUsers=[];constructor(e,i,r){this.datePipe=e,this.loadingService=i,this.serviceService=r}ngOnInit(){this.users=[],this.loadingService.startLoading(),this.serviceService.getServices().subscribe(e=>{e.forEach(i=>{i.users.forEach(r=>this.users.push(r))}),this.weeklyLabels=this.createWeeklyLabel(),this.weeklyUsers=this.createWeeklyUserData(),this.lineChart=new ei(this.newUsersCanvas.nativeElement,{type:"line",data:{labels:this.weeklyLabels,datasets:[{label:"Evolution du nombre d'inscription",fill:!1,backgroundColor:"rgba(75,192,192,0.4)",borderColor:"rgba(75,192,192,1)",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",pointBorderColor:"rgba(75,192,192,1)",pointBackgroundColor:"#fff",pointBorderWidth:1,pointHoverRadius:5,pointHoverBackgroundColor:"rgba(75,192,192,1)",pointHoverBorderColor:"rgba(220,220,220,1)",pointHoverBorderWidth:2,pointRadius:1,pointHitRadius:10,data:this.weeklyUsers,spanGaps:!1}]},options:{scales:{x:{title:{display:!0,text:"N\xB0 semaine"}}}}}),this.lineChart.update(),this.loadingService.stopLoading()})}createWeeklyLabel(){let e=new Date,i=new Date(2022,0,1),r=[];do{let o=new Date(i);o.setDate(o.getDate()+7),r.push(this.datePipe.transform(i,"ww")),i=o}while(i<e);return console.log(r),r}createWeeklyUserData(){let e=new Date,i=new Date(2022,0,1,0,0,0),r=[];for(;i<e;){let o=new Date(i);o.setDate(o.getDate()+7);let h=this.users.filter(d=>new Date(d.createdAt)>i&&new Date(d.createdAt)<=o).length;r.push(h),i=o}return console.log(r),r}static \u0275fac=function(i){return new(i||n)(g(Et),g(Fe),g(Ue))};static \u0275cmp=v({type:n,selectors:[["app-admin-user"]],viewQuery:function(i,r){if(i&1&&Se(Qi,5),i&2){let o;Ce(o=xe())&&(r.newUsersCanvas=o.first)}},standalone:!0,features:[Te([qe,Ue]),b],decls:33,vars:1,consts:[["newUsers",""],["color","dark"],["color","light"],[1,"ion-no-padding",3,"fixed"],["size","6"]],template:function(i,r){i&1&&(s(0,"ion-header")(1,"ion-toolbar",1)(2,"ion-title"),l(3,"Administration des utilisateurs"),a()()(),s(4,"ion-content",2)(5,"ion-grid",3)(6,"ion-row")(7,"ion-col",4)(8,"ion-card")(9,"ion-card-header")(10,"ion-card-subtitle"),l(11,"Tableau des utilisateurs"),a()(),s(12,"ion-card-content"),y(13,"app-admin-user-table"),a()()(),s(14,"ion-col",4)(15,"ion-card")(16,"ion-card-header")(17,"ion-card-title"),l(18,"Tableau de bord"),a()(),s(19,"ion-card-content")(20,"ion-card")(21,"ion-card-header")(22,"ion-card-subtitle"),l(23,"Nouveaux inscrits"),a()(),s(24,"ion-card-content"),y(25,"canvas",null,0),a()(),s(27,"ion-card")(28,"ion-card-header")(29,"ion-card-subtitle"),l(30,"Nombre de connexions par jour"),a()(),s(31,"ion-card-content"),l(32," GRAPHIQUE ICI "),a()()()()()()()()),i&2&&(p(5),m("fixed",!1))},dependencies:[w,Oe,Re,Le,Be,Ne,q,V,H,I,$,O,R,oi],styles:["mat-cell[_ngcontent-%COMP%]{padding:100px!important}table[_ngcontent-%COMP%]{width:100%}.commands[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-around}ion-card[_ngcontent-%COMP%]{max-height:100%;flex-grow:1}.table-card-content[_ngcontent-%COMP%]{width:100%;height:100%;overflow:auto}.table-card-content[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%}"]})}return n})();var te=(()=>{class n{requestService;filteredMoldings$=new ve([]);page=new ve(1);uniqueTools$=new ve([]);moldings=[];filteredMoldings;moldingsFilters={tools:[],username:[]};constructor(e){this.requestService=e,this.page.asObservable().subscribe(i=>{this.getMoldings(i).subscribe(r=>{this.moldings.push(...r),this.filteredMoldings=this.moldings,this.filteredMoldings$.next(this.filteredMoldings),this.uniqueTools$.next(this.moldings.filter((o,c)=>this.filteredMoldings.find(d=>d.outillage===o.outillage).id===o.id).map(o=>o.OT))})})}getMoldings(e=1,i=5){return this.requestService.createGetRequest(`${xt.moldingApi}moldings?page=${e}&itemsPerPage=${i}`).pipe(ft())}getNextPage(){}resetFilters(){this.moldingsFilters={tools:[],username:[]},this.filteredMoldings$.next(this.moldings)}applyUserFilter(e){this.moldingsFilters.username.push(e),this.applyFilters()}applyToolFilter(e){this.moldingsFilters.tools=Array.from(e),this.applyFilters()}applyFilters(){let e=this.filteredMoldings.filter((i,r)=>{let o=this.isToolFilter(i),c=this.isUserFilter(i);return o&&c});this.filteredMoldings$.next(e)}isToolFilter(e){return this.moldingsFilters.tools.length<=0?!0:this.moldingsFilters.tools.some(i=>e.OT.sapToolNumber.toString().includes(i))}isUserFilter(e){return this.moldingsFilters.username.length<=0?!0:this.moldingsFilters.username.some(i=>e.userCreat.username.includes(i))}static \u0275fac=function(i){return new(i||n)(we(Xt))};static \u0275prov=be({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Ji(n,t){if(n&1&&(s(0,"ion-select-option",9),l(1),a()),n&2){let e=t.$implicit;m("value",e),p(),A(" ",e.designation," ")}}var ai=(()=>{class n{moldingListService;uniqueTools;constructor(e){this.moldingListService=e,this.uniqueTools=this.moldingListService.uniqueTools$.asObservable()}ngOnInit(){}filterToolNameChange(e){console.log(e.value),this.moldingListService.applyToolFilter(e.value)}filterToolChange(e){let r=e.detail.value.map(o=>o.sapToolNumber.toString());this.moldingListService.applyToolFilter(r)}filterCreateByChange(e){let i=e.toString();console.log(i),this.moldingListService.applyUserFilter(i)}resetFiltersClick(){this.moldingListService.resetFilters()}static \u0275fac=function(i){return new(i||n)(g(te))};static \u0275cmp=v({type:n,selectors:[["app-moldings-filters"]],standalone:!0,features:[b],decls:29,vars:4,consts:[["inputUsername",""],["inputTool",""],[1,"filters-container"],["type","text","placeholder","Nom d'utilisateur",3,"ionInput"],["color","dark","display-format","DD.MM.YYYY","presentation","date","preferWheel","false",3,"firstDayOfWeek"],["type","text","placeholder","Num\xE9ro d'OT",3,"ionInput"],["multiple","true","placeholder","Selectionner outillage",3,"ionChange"],[3,"value",4,"ngFor","ngForOf"],["expand","block","fill","outline","shape","round",3,"click"],[3,"value"]],template:function(i,r){if(i&1){let o=U();s(0,"div",2)(1,"ion-item")(2,"ion-label"),l(3,"Cr\xE9\xE9e par"),a(),s(4,"ion-input",3,0),_("ionInput",function(){x(o);let h=ce(5);return k(r.filterCreateByChange(h.value))}),a()(),s(6,"ion-item")(7,"ion-label"),l(8,"Date de cr\xE9ation"),a(),y(9,"ion-datetime",4),a(),s(10,"ion-item")(11,"ion-label"),l(12,"Salle de moulage"),a()(),s(13,"ion-item")(14,"ion-label"),l(15,"Programme avion"),a()(),s(16,"ion-item")(17,"ion-label"),l(18,"N\xB0OT"),a(),s(19,"ion-input",5,1),_("ionInput",function(){x(o);let h=ce(20);return k(r.filterToolNameChange(h.value))}),a()(),s(21,"ion-item")(22,"ion-label"),l(23,"Outillage"),a(),s(24,"ion-select",6),_("ionChange",function(h){return x(o),k(r.filterToolChange(h))}),F(25,Ji,2,2,"ion-select-option",7),Q(26,"async"),a()(),s(27,"ion-button",8),_("click",function(){return x(o),k(r.resetFiltersClick())}),l(28," Restaurer "),a()()}i&2&&(p(9),m("firstDayOfWeek",1),p(16),m("ngForOf",J(26,2,r.uniqueTools)))},dependencies:[w,G,Bt,Mt,ee,W,Ht,Wt,It,Ot,X,Ie],styles:[".filters-container[_ngcontent-%COMP%]{padding:.5rem;background-color:var(--ion-color-light)}"]})}return n})();function Xi(n,t){n&1&&y(0,"ion-spinner",14)}function Gi(n,t){if(n&1){let e=U();s(0,"ion-row",15),_("click",function(){x(e);let r=ce(2),o=Ee();return k(o.toggleOptions(r))}),s(1,"ion-item-sliding",16,0)(3,"ion-item",17)(4,"ion-col",9)(5,"ion-chip",18)(6,"ion-label"),l(7),a()()(),s(8,"ion-col")(9,"ion-text"),l(10),Q(11,"DateHeure"),a()(),s(12,"ion-col")(13,"ion-text"),l(14),a()(),s(15,"ion-col")(16,"ion-text"),l(17),a()()(),s(18,"ion-item-options")(19,"ion-item-option",19),l(20,"OUVRIR"),a()()()()}if(n&2){let e=t.$implicit;p(),m("disabled",!0),p(4),m("color",e.isActive?"success":"danger"),p(2),ke(e.id),p(3),A(" ",J(11,8,e.moldingDay)," "),p(4),A(" ",e.userCreat.username," "),p(3),wt(" ",e.OT.sapToolNumber," - ",e.OT.designation,""),p(2),m("routerLink","/molding/create-molding/"+e.id)}}var ci=(()=>{class n{moldingListService;filteredMoldings=[];moldingListLoading=!1;filteredMoldings$;constructor(e){this.moldingListService=e}nextPage(){this.moldingListService.page.next(this.moldingListService.page.value+1)}ngOnInit(){this.moldingListLoading=!0,this.filteredMoldings$=this.moldingListService.filteredMoldings$.asObservable(),this.filteredMoldings$.subscribe(e=>{this.moldingListLoading=!1,this.filteredMoldings=e})}ngOnChanges(e){}openMoldingClick(e){}toggleOptions(e){e.open("end"),setTimeout(()=>{e.close()},3e3)}static \u0275fac=function(i){return new(i||n)(g(te))};static \u0275cmp=v({type:n,selectors:[["app-admin-molding-list"]],standalone:!0,features:[yt,b],decls:30,vars:4,consts:[["slidingItem",""],[1,"molding-list-content",3,"fullscreen"],["slot","end","name","circles",4,"ngIf"],["contentId","filters-content","menuId","filters-menu"],["color","light"],[1,"ion-padding"],["id","filters-content",3,"fullscreen"],[2,"width","100%"],["color","medium",1,"ion-padding"],["size","1"],["menu","filters-menu","autoHide","false"],["name","filter-outline"],[3,"click",4,"ngFor","ngForOf"],["expand","block","fill","clear","shape","round",3,"click"],["slot","end","name","circles"],[3,"click"],[3,"disabled"],["button","","lines","full",1,"ion-text-left"],["mode","ios","outline","true",3,"color"],[3,"routerLink"]],template:function(i,r){i&1&&(s(0,"ion-content",1)(1,"ion-header")(2,"ion-toolbar")(3,"ion-title"),l(4,"Liste des moulages"),a(),F(5,Xi,1,0,"ion-spinner",2),a()(),s(6,"ion-menu",3)(7,"ion-header")(8,"ion-toolbar",4)(9,"ion-title"),l(10,"Recherche avanc\xE9e"),a()()(),s(11,"ion-content",5),y(12,"app-moldings-filters"),a()(),s(13,"ion-content",6)(14,"ion-grid",7)(15,"ion-row",8)(16,"ion-col",9)(17,"ion-menu-button",10),y(18,"ion-icon",11),a()(),s(19,"ion-col"),l(20,"Date de cr\xE9ation"),a(),s(21,"ion-col"),l(22,"Cr\xE9\xE9 par"),a(),s(23,"ion-col"),l(24,"Outillage de moulage"),a()(),F(25,Gi,21,10,"ion-row",12),a()(),s(26,"ion-footer")(27,"ion-toolbar")(28,"ion-button",13),_("click",function(){return r.nextPage()}),l(29," Charger plus "),a()()()()),i&2&&(m("fullscreen",!0),p(5),m("ngIf",r.moldingListLoading),p(8),m("fullscreen",!0),p(12),m("ngForOf",r.filteredMoldings))},dependencies:[w,G,Pe,q,V,Nt,H,I,Z,ee,Dt,Ft,Ut,W,Me,De,$,$t,jt,O,R,Yt,Ae,ai,X,Tt,ni],styles:["ion-grid[_ngcontent-%COMP%]{height:100%;overflow:hidden;overflow-y:scroll}.molding-list-content[_ngcontent-%COMP%]{height:100%}"]})}return n})();var li=(()=>{class n{constructor(){}ngOnInit(){}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=v({type:n,selectors:[["app-admin-molding-dashboard"]],standalone:!0,features:[b],decls:17,vars:0,template:function(i,r){i&1&&(s(0,"ion-card")(1,"ion-card-header")(2,"ion-card-title"),l(3,"Tableau de bord"),a()(),s(4,"ion-card-content")(5,"ion-card")(6,"ion-card-header")(7,"ion-card-subtitle"),l(8,"Nouveaux moulages"),a()(),s(9,"ion-card-content"),l(10," GRAPHIQUE ICI "),a()(),s(11,"ion-card")(12,"ion-card-header")(13,"ion-card-subtitle"),l(14,"Nombre de connexions par jour"),a()(),s(15,"ion-card-content"),l(16," GRAPHIQUE ICI "),a()()()())},dependencies:[w,Oe,Re,Le,Be,Ne]})}return n})();var hi=(()=>{class n{moldingService;moldingListService;moldingsError=!1;moldings$;constructor(e,i){this.moldingService=e,this.moldingListService=i}ngOnInit(){this.moldings$=this.moldingListService.getMoldings()}static \u0275fac=function(i){return new(i||n)(g(Ve),g(te))};static \u0275cmp=v({type:n,selectors:[["app-admin-molding"]],standalone:!0,features:[Te([Ve]),b],decls:11,vars:1,consts:[["color","dark"],["color","light",3,"fullscreen"],["fixed","",1,"grid-content"],["size","9",1,"ion-no-padding"],["size","3"]],template:function(i,r){i&1&&(s(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-title"),l(3,"Administration des moulages"),a()()(),s(4,"ion-content",1)(5,"ion-grid",2)(6,"ion-row")(7,"ion-col",3),y(8,"app-admin-molding-list"),a(),s(9,"ion-col",4),y(10,"app-admin-molding-dashboard"),a()()()()),i&2&&(p(4),m("fullscreen",!1))},dependencies:[w,q,V,H,I,$,O,R,ci,li],styles:[".grid-content[_ngcontent-%COMP%]{width:100%;height:100%;overflow:hidden}.grid-content[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]{height:100%}"]})}return n})();var T=Object.create(null);T.open="0";T.close="1";T.ping="2";T.pong="3";T.message="4";T.upgrade="5";T.noop="6";var le=Object.create(null);Object.keys(T).forEach(n=>{le[T[n]]=n});var he={type:"error",data:"parser error"};var pi=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",fi=typeof ArrayBuffer=="function",mi=n=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(n):n&&n.buffer instanceof ArrayBuffer,de=({type:n,data:t},e,i)=>pi&&t instanceof Blob?e?i(t):di(t,i):fi&&(t instanceof ArrayBuffer||mi(t))?e?i(t):di(new Blob([t]),i):i(T[n]+(t||"")),di=(n,t)=>{let e=new FileReader;return e.onload=function(){let i=e.result.split(",")[1];t("b"+(i||""))},e.readAsDataURL(n)};function ui(n){return n instanceof Uint8Array?n:n instanceof ArrayBuffer?new Uint8Array(n):new Uint8Array(n.buffer,n.byteOffset,n.byteLength)}var Ge;function gi(n,t){if(pi&&n.data instanceof Blob)return n.data.arrayBuffer().then(ui).then(t);if(fi&&(n.data instanceof ArrayBuffer||mi(n.data)))return t(ui(n.data));de(n,!1,e=>{Ge||(Ge=new TextEncoder),t(Ge.encode(e))})}var yi="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ue=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let n=0;n<yi.length;n++)ue[yi.charCodeAt(n)]=n;var _i=n=>{let t=n.length*.75,e=n.length,i,r=0,o,c,h,d;n[n.length-1]==="="&&(t--,n[n.length-2]==="="&&t--);let B=new ArrayBuffer(t),C=new Uint8Array(B);for(i=0;i<e;i+=4)o=ue[n.charCodeAt(i)],c=ue[n.charCodeAt(i+1)],h=ue[n.charCodeAt(i+2)],d=ue[n.charCodeAt(i+3)],C[r++]=o<<2|c>>4,C[r++]=(c&15)<<4|h>>2,C[r++]=(h&3)<<6|d&63;return B};var Zi=typeof ArrayBuffer=="function",pe=(n,t)=>{if(typeof n!="string")return{type:"message",data:vi(n,t)};let e=n.charAt(0);return e==="b"?{type:"message",data:en(n.substring(1),t)}:le[e]?n.length>1?{type:le[e],data:n.substring(1)}:{type:le[e]}:he},en=(n,t)=>{if(Zi){let e=_i(n);return vi(e,t)}else return{base64:!0,data:n}},vi=(n,t)=>{switch(t){case"blob":return n instanceof Blob?n:new Blob([n]);case"arraybuffer":default:return n instanceof ArrayBuffer?n:n.buffer}};var bi="",wi=(n,t)=>{let e=n.length,i=new Array(e),r=0;n.forEach((o,c)=>{de(o,!1,h=>{i[c]=h,++r===e&&t(i.join(bi))})})},Ei=(n,t)=>{let e=n.split(bi),i=[];for(let r=0;r<e.length;r++){let o=pe(e[r],t);if(i.push(o),o.type==="error")break}return i};function Si(){return new TransformStream({transform(n,t){gi(n,e=>{let i=e.length,r;if(i<126)r=new Uint8Array(1),new DataView(r.buffer).setUint8(0,i);else if(i<65536){r=new Uint8Array(3);let o=new DataView(r.buffer);o.setUint8(0,126),o.setUint16(1,i)}else{r=new Uint8Array(9);let o=new DataView(r.buffer);o.setUint8(0,127),o.setBigUint64(1,BigInt(i))}n.data&&typeof n.data!="string"&&(r[0]|=128),t.enqueue(r),t.enqueue(e)})}})}var Ze;function He(n){return n.reduce((t,e)=>t+e.length,0)}function We(n,t){if(n[0].length===t)return n.shift();let e=new Uint8Array(t),i=0;for(let r=0;r<t;r++)e[r]=n[0][i++],i===n[0].length&&(n.shift(),i=0);return n.length&&i<n[0].length&&(n[0]=n[0].slice(i)),e}function Ci(n,t){Ze||(Ze=new TextDecoder);let e=[],i=0,r=-1,o=!1;return new TransformStream({transform(c,h){for(e.push(c);;){if(i===0){if(He(e)<1)break;let d=We(e,1);o=(d[0]&128)===128,r=d[0]&127,r<126?i=3:r===126?i=1:i=2}else if(i===1){if(He(e)<2)break;let d=We(e,2);r=new DataView(d.buffer,d.byteOffset,d.length).getUint16(0),i=3}else if(i===2){if(He(e)<8)break;let d=We(e,8),B=new DataView(d.buffer,d.byteOffset,d.length),C=B.getUint32(0);if(C>Math.pow(2,21)-1){h.enqueue(he);break}r=C*Math.pow(2,32)+B.getUint32(4),i=3}else{if(He(e)<r)break;let d=We(e,r);h.enqueue(pe(o?d:Ze.decode(d),t)),i=0}if(r===0||r>n){h.enqueue(he);break}}}})}var et=4;function f(n){if(n)return tn(n)}function tn(n){for(var t in f.prototype)n[t]=f.prototype[t];return n}f.prototype.on=f.prototype.addEventListener=function(n,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+n]=this._callbacks["$"+n]||[]).push(t),this};f.prototype.once=function(n,t){function e(){this.off(n,e),t.apply(this,arguments)}return e.fn=t,this.on(n,e),this};f.prototype.off=f.prototype.removeListener=f.prototype.removeAllListeners=f.prototype.removeEventListener=function(n,t){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var e=this._callbacks["$"+n];if(!e)return this;if(arguments.length==1)return delete this._callbacks["$"+n],this;for(var i,r=0;r<e.length;r++)if(i=e[r],i===t||i.fn===t){e.splice(r,1);break}return e.length===0&&delete this._callbacks["$"+n],this};f.prototype.emit=function(n){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),e=this._callbacks["$"+n],i=1;i<arguments.length;i++)t[i-1]=arguments[i];if(e){e=e.slice(0);for(var i=0,r=e.length;i<r;++i)e[i].apply(this,t)}return this};f.prototype.emitReserved=f.prototype.emit;f.prototype.listeners=function(n){return this._callbacks=this._callbacks||{},this._callbacks["$"+n]||[]};f.prototype.hasListeners=function(n){return!!this.listeners(n).length};var N=typeof Promise=="function"&&typeof Promise.resolve=="function"?t=>Promise.resolve().then(t):(t,e)=>e(t,0),E=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),xi="arraybuffer";function $e(n,...t){return t.reduce((e,i)=>(n.hasOwnProperty(i)&&(e[i]=n[i]),e),{})}var nn=E.setTimeout,rn=E.clearTimeout;function P(n,t){t.useNativeTimers?(n.setTimeoutFn=nn.bind(E),n.clearTimeoutFn=rn.bind(E)):(n.setTimeoutFn=E.setTimeout.bind(E),n.clearTimeoutFn=E.clearTimeout.bind(E))}var on=1.33;function ki(n){return typeof n=="string"?sn(n):Math.ceil((n.byteLength||n.size)*on)}function sn(n){let t=0,e=0;for(let i=0,r=n.length;i<r;i++)t=n.charCodeAt(i),t<128?e+=1:t<2048?e+=2:t<55296||t>=57344?e+=3:(i++,e+=4);return e}function je(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function Ti(n){let t="";for(let e in n)n.hasOwnProperty(e)&&(t.length&&(t+="&"),t+=encodeURIComponent(e)+"="+encodeURIComponent(n[e]));return t}function Ai(n){let t={},e=n.split("&");for(let i=0,r=e.length;i<r;i++){let o=e[i].split("=");t[decodeURIComponent(o[0])]=decodeURIComponent(o[1])}return t}var Ke=class extends Error{constructor(t,e,i){super(t),this.description=e,this.context=i,this.type="TransportError"}},M=class extends f{constructor(t){super(),this.writable=!1,P(this,t),this.opts=t,this.query=t.query,this.socket=t.socket,this.supportsBinary=!t.forceBase64}onError(t,e,i){return super.emitReserved("error",new Ke(t,e,i)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(t){this.readyState==="open"&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){let e=pe(t,this.socket.binaryType);this.onPacket(e)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}pause(t){}createUri(t,e={}){return t+"://"+this._hostname()+this._port()+this.opts.path+this._query(e)}_hostname(){let t=this.opts.hostname;return t.indexOf(":")===-1?t:"["+t+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(t){let e=Ti(t);return e.length?"?"+e:""}};var fe=class extends M{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(t){this.readyState="pausing";let e=()=>{this.readyState="paused",t()};if(this._polling||!this.writable){let i=0;this._polling&&(i++,this.once("pollComplete",function(){--i||e()})),this.writable||(i++,this.once("drain",function(){--i||e()}))}else e()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){let e=i=>{if(this.readyState==="opening"&&i.type==="open"&&this.onOpen(),i.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(i)};Ei(t,this.socket.binaryType).forEach(e),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){let t=()=>{this.write([{type:"close"}])};this.readyState==="open"?t():this.once("open",t)}write(t){this.writable=!1,wi(t,e=>{this.doWrite(e,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){let t=this.opts.secure?"https":"http",e=this.query||{};return this.opts.timestampRequests!==!1&&(e[this.opts.timestampParam]=je()),!this.supportsBinary&&!e.sid&&(e.b64=1),this.createUri(t,e)}};var Ii=!1;try{Ii=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}var Oi=Ii;function an(){}var tt=class extends fe{constructor(t){if(super(t),typeof location<"u"){let e=location.protocol==="https:",i=location.port;i||(i=e?"443":"80"),this.xd=typeof location<"u"&&t.hostname!==location.hostname||i!==t.port}}doWrite(t,e){let i=this.request({method:"POST",data:t});i.on("success",e),i.on("error",(r,o)=>{this.onError("xhr post error",r,o)})}doPoll(){let t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(e,i)=>{this.onError("xhr poll error",e,i)}),this.pollXhr=t}},Ye=(()=>{class n extends f{constructor(e,i,r){super(),this.createRequest=e,P(this,r),this._opts=r,this._method=r.method||"GET",this._uri=i,this._data=r.data!==void 0?r.data:null,this._create()}_create(){var e;let i=$e(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");i.xdomain=!!this._opts.xd;let r=this._xhr=this.createRequest(i);try{r.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0);for(let o in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(o)&&r.setRequestHeader(o,this._opts.extraHeaders[o])}}catch{}if(this._method==="POST")try{r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{r.setRequestHeader("Accept","*/*")}catch{}(e=this._opts.cookieJar)===null||e===void 0||e.addCookies(r),"withCredentials"in r&&(r.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(r.timeout=this._opts.requestTimeout),r.onreadystatechange=()=>{var o;r.readyState===3&&((o=this._opts.cookieJar)===null||o===void 0||o.parseCookies(r.getResponseHeader("set-cookie"))),r.readyState===4&&(r.status===200||r.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof r.status=="number"?r.status:0)},0))},r.send(this._data)}catch(o){this.setTimeoutFn(()=>{this._onError(o)},0);return}typeof document<"u"&&(this._index=n.requestsCount++,n.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=an,e)try{this._xhr.abort()}catch{}typeof document<"u"&&delete n.requests[this._index],this._xhr=null}}_onLoad(){let e=this._xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}return n.requestsCount=0,n.requests={},n})();if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",Ri);else if(typeof addEventListener=="function"){let n="onpagehide"in E?"pagehide":"unload";addEventListener(n,Ri,!1)}}function Ri(){for(let n in Ye.requests)Ye.requests.hasOwnProperty(n)&&Ye.requests[n].abort()}var cn=function(){let n=Li({xdomain:!1});return n&&n.responseType!==null}(),j=class extends tt{constructor(t){super(t);let e=t&&t.forceBase64;this.supportsBinary=cn&&!e}request(t={}){return Object.assign(t,{xd:this.xd},this.opts),new Ye(Li,this.uri(),t)}};function Li(n){let t=n.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!t||Oi))return new XMLHttpRequest}catch{}if(!t)try{return new E[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}var Bi=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative",nt=class extends M{get name(){return"websocket"}doOpen(){let t=this.uri(),e=this.opts.protocols,i=Bi?{}:$e(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(i.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(t,e,i)}catch(r){return this.emitReserved("error",r)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let e=0;e<t.length;e++){let i=t[e],r=e===t.length-1;de(i,this.supportsBinary,o=>{try{this.doWrite(i,o)}catch{}r&&N(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){let t=this.opts.secure?"wss":"ws",e=this.query||{};return this.opts.timestampRequests&&(e[this.opts.timestampParam]=je()),this.supportsBinary||(e.b64=1),this.createUri(t,e)}},it=E.WebSocket||E.MozWebSocket,K=class extends nt{createSocket(t,e,i){return Bi?new it(t,e,i):e?new it(t,e):new it(t)}doWrite(t,e){this.ws.send(e)}};var ie=class extends M{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(t){return this.emitReserved("error",t)}this._transport.closed.then(()=>{this.onClose()}).catch(t=>{this.onError("webtransport error",t)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(t=>{let e=Ci(Number.MAX_SAFE_INTEGER,this.socket.binaryType),i=t.readable.pipeThrough(e).getReader(),r=Si();r.readable.pipeTo(t.writable),this._writer=r.writable.getWriter();let o=()=>{i.read().then(({done:h,value:d})=>{h||(this.onPacket(d),o())}).catch(h=>{})};o();let c={type:"open"};this.query.sid&&(c.data=`{"sid":"${this.query.sid}"}`),this._writer.write(c).then(()=>this.onOpen())})})}write(t){this.writable=!1;for(let e=0;e<t.length;e++){let i=t[e],r=e===t.length-1;this._writer.write(i).then(()=>{r&&N(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var t;(t=this._transport)===null||t===void 0||t.close()}};var rt={websocket:K,webtransport:ie,polling:j};var ln=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,hn=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function ne(n){if(n.length>8e3)throw"URI too long";let t=n,e=n.indexOf("["),i=n.indexOf("]");e!=-1&&i!=-1&&(n=n.substring(0,e)+n.substring(e,i).replace(/:/g,";")+n.substring(i,n.length));let r=ln.exec(n||""),o={},c=14;for(;c--;)o[hn[c]]=r[c]||"";return e!=-1&&i!=-1&&(o.source=t,o.host=o.host.substring(1,o.host.length-1).replace(/;/g,":"),o.authority=o.authority.replace("[","").replace("]","").replace(/;/g,":"),o.ipv6uri=!0),o.pathNames=dn(o,o.path),o.queryKey=un(o,o.query),o}function dn(n,t){let e=/\/{2,9}/g,i=t.replace(e,"/").split("/");return(t.slice(0,1)=="/"||t.length===0)&&i.splice(0,1),t.slice(-1)=="/"&&i.splice(i.length-1,1),i}function un(n,t){let e={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(i,r,o){r&&(e[r]=o)}),e}var ot=typeof addEventListener=="function"&&typeof removeEventListener=="function",ze=[];ot&&addEventListener("offline",()=>{ze.forEach(n=>n())},!1);var Qe=(()=>{class n extends f{constructor(e,i){if(super(),this.binaryType=xi,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&typeof e=="object"&&(i=e,e=null),e){let r=ne(e);i.hostname=r.host,i.secure=r.protocol==="https"||r.protocol==="wss",i.port=r.port,r.query&&(i.query=r.query)}else i.host&&(i.hostname=ne(i.host).host);P(this,i),this.secure=i.secure!=null?i.secure:typeof location<"u"&&location.protocol==="https:",i.hostname&&!i.port&&(i.port=this.secure?"443":"80"),this.hostname=i.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=i.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},i.transports.forEach(r=>{let o=r.prototype.name;this.transports.push(o),this._transportsByName[o]=r}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},i),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=Ai(this.opts.query)),ot&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},ze.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){let i=Object.assign({},this.opts.query);i.EIO=et,i.transport=e,this.id&&(i.sid=this.id);let r=Object.assign({},this.opts,{query:i,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](r)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}let e=this.opts.rememberUpgrade&&n.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";let i=this.createTransport(e);i.open(),this.setTransport(i)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",i=>this._onClose("transport close",i))}onOpen(){this.readyState="open",n.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":let i=new Error("server error");i.code=e.data,this._onError(i);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);let e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){let e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let i=1;for(let r=0;r<this.writeBuffer.length;r++){let o=this.writeBuffer[r].data;if(o&&(i+=ki(o)),r>0&&i>this._maxPayload)return this.writeBuffer.slice(0,r);i+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;let e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,N(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),e}write(e,i,r){return this._sendPacket("message",e,i,r),this}send(e,i,r){return this._sendPacket("message",e,i,r),this}_sendPacket(e,i,r,o){if(typeof i=="function"&&(o=i,i=void 0),typeof r=="function"&&(o=r,r=null),this.readyState==="closing"||this.readyState==="closed")return;r=r||{},r.compress=r.compress!==!1;let c={type:e,data:i,options:r};this.emitReserved("packetCreate",c),this.writeBuffer.push(c),o&&this.once("flush",o),this.flush()}close(){let e=()=>{this._onClose("forced close"),this.transport.close()},i=()=>{this.off("upgrade",i),this.off("upgradeError",i),e()},r=()=>{this.once("upgrade",i),this.once("upgradeError",i)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?r():e()}):this.upgrading?r():e()),this}_onError(e){if(n.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,i){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),ot&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){let r=ze.indexOf(this._offlineEventListener);r!==-1&&ze.splice(r,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,i),this.writeBuffer=[],this._prevBufferLen=0}}}return n.protocol=et,n})(),Je=class extends Qe{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let t=0;t<this._upgrades.length;t++)this._probe(this._upgrades[t])}_probe(t){let e=this.createTransport(t),i=!1;Qe.priorWebsocketSuccess=!1;let r=()=>{i||(e.send([{type:"ping",data:"probe"}]),e.once("packet",D=>{if(!i)if(D.type==="pong"&&D.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",e),!e)return;Qe.priorWebsocketSuccess=e.name==="websocket",this.transport.pause(()=>{i||this.readyState!=="closed"&&(C(),this.setTransport(e),e.send([{type:"upgrade"}]),this.emitReserved("upgrade",e),e=null,this.upgrading=!1,this.flush())})}else{let ae=new Error("probe error");ae.transport=e.name,this.emitReserved("upgradeError",ae)}}))};function o(){i||(i=!0,C(),e.close(),e=null)}let c=D=>{let ae=new Error("probe error: "+D);ae.transport=e.name,o(),this.emitReserved("upgradeError",ae)};function h(){c("transport closed")}function d(){c("socket closed")}function B(D){e&&D.name!==e.name&&o()}let C=()=>{e.removeListener("open",r),e.removeListener("error",c),e.removeListener("close",h),this.off("close",d),this.off("upgrading",B)};e.once("open",r),e.once("error",c),e.once("close",h),this.once("close",d),this.once("upgrading",B),this._upgrades.indexOf("webtransport")!==-1&&t!=="webtransport"?this.setTimeoutFn(()=>{i||e.open()},200):e.open()}onHandshake(t){this._upgrades=this._filterUpgrades(t.upgrades),super.onHandshake(t)}_filterUpgrades(t){let e=[];for(let i=0;i<t.length;i++)~this.transports.indexOf(t[i])&&e.push(t[i]);return e}},re=class extends Je{constructor(t,e={}){let i=typeof t=="object"?t:e;(!i.transports||i.transports&&typeof i.transports[0]=="string")&&(i.transports=(i.transports||["polling","websocket","webtransport"]).map(r=>rt[r]).filter(r=>!!r)),super(t,i)}};var fo=re.protocol;function Ni(n,t="",e){let i=n;e=e||typeof location<"u"&&location,n==null&&(n=e.protocol+"//"+e.host),typeof n=="string"&&(n.charAt(0)==="/"&&(n.charAt(1)==="/"?n=e.protocol+n:n=e.host+n),/^(https?|wss?):\/\//.test(n)||(typeof e<"u"?n=e.protocol+"//"+n:n="https://"+n),i=ne(n)),i.port||(/^(http|ws)$/.test(i.protocol)?i.port="80":/^(http|ws)s$/.test(i.protocol)&&(i.port="443")),i.path=i.path||"/";let o=i.host.indexOf(":")!==-1?"["+i.host+"]":i.host;return i.id=i.protocol+"://"+o+":"+i.port+t,i.href=i.protocol+"://"+o+(e&&e.port===i.port?"":":"+i.port),i}var dt={};Wi(dt,{Decoder:()=>lt,Encoder:()=>ct,PacketType:()=>u,protocol:()=>Ui});var fn=typeof ArrayBuffer=="function",mn=n=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(n):n.buffer instanceof ArrayBuffer,Pi=Object.prototype.toString,gn=typeof Blob=="function"||typeof Blob<"u"&&Pi.call(Blob)==="[object BlobConstructor]",yn=typeof File=="function"||typeof File<"u"&&Pi.call(File)==="[object FileConstructor]";function ge(n){return fn&&(n instanceof ArrayBuffer||mn(n))||gn&&n instanceof Blob||yn&&n instanceof File}function me(n,t){if(!n||typeof n!="object")return!1;if(Array.isArray(n)){for(let e=0,i=n.length;e<i;e++)if(me(n[e]))return!0;return!1}if(ge(n))return!0;if(n.toJSON&&typeof n.toJSON=="function"&&arguments.length===1)return me(n.toJSON(),!0);for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e)&&me(n[e]))return!0;return!1}function Mi(n){let t=[],e=n.data,i=n;return i.data=st(e,t),i.attachments=t.length,{packet:i,buffers:t}}function st(n,t){if(!n)return n;if(ge(n)){let e={_placeholder:!0,num:t.length};return t.push(n),e}else if(Array.isArray(n)){let e=new Array(n.length);for(let i=0;i<n.length;i++)e[i]=st(n[i],t);return e}else if(typeof n=="object"&&!(n instanceof Date)){let e={};for(let i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=st(n[i],t));return e}return n}function Di(n,t){return n.data=at(n.data,t),delete n.attachments,n}function at(n,t){if(!n)return n;if(n&&n._placeholder===!0){if(typeof n.num=="number"&&n.num>=0&&n.num<t.length)return t[n.num];throw new Error("illegal attachments")}else if(Array.isArray(n))for(let e=0;e<n.length;e++)n[e]=at(n[e],t);else if(typeof n=="object")for(let e in n)Object.prototype.hasOwnProperty.call(n,e)&&(n[e]=at(n[e],t));return n}var _n=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],Ui=5,u=function(n){return n[n.CONNECT=0]="CONNECT",n[n.DISCONNECT=1]="DISCONNECT",n[n.EVENT=2]="EVENT",n[n.ACK=3]="ACK",n[n.CONNECT_ERROR=4]="CONNECT_ERROR",n[n.BINARY_EVENT=5]="BINARY_EVENT",n[n.BINARY_ACK=6]="BINARY_ACK",n}(u||{}),ct=class{constructor(t){this.replacer=t}encode(t){return(t.type===u.EVENT||t.type===u.ACK)&&me(t)?this.encodeAsBinary({type:t.type===u.EVENT?u.BINARY_EVENT:u.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id}):[this.encodeAsString(t)]}encodeAsString(t){let e=""+t.type;return(t.type===u.BINARY_EVENT||t.type===u.BINARY_ACK)&&(e+=t.attachments+"-"),t.nsp&&t.nsp!=="/"&&(e+=t.nsp+","),t.id!=null&&(e+=t.id),t.data!=null&&(e+=JSON.stringify(t.data,this.replacer)),e}encodeAsBinary(t){let e=Mi(t),i=this.encodeAsString(e.packet),r=e.buffers;return r.unshift(i),r}};function Fi(n){return Object.prototype.toString.call(n)==="[object Object]"}var lt=class n extends f{constructor(t){super(),this.reviver=t}add(t){let e;if(typeof t=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");e=this.decodeString(t);let i=e.type===u.BINARY_EVENT;i||e.type===u.BINARY_ACK?(e.type=i?u.EVENT:u.ACK,this.reconstructor=new ht(e),e.attachments===0&&super.emitReserved("decoded",e)):super.emitReserved("decoded",e)}else if(ge(t)||t.base64)if(this.reconstructor)e=this.reconstructor.takeBinaryData(t),e&&(this.reconstructor=null,super.emitReserved("decoded",e));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+t)}decodeString(t){let e=0,i={type:Number(t.charAt(0))};if(u[i.type]===void 0)throw new Error("unknown packet type "+i.type);if(i.type===u.BINARY_EVENT||i.type===u.BINARY_ACK){let o=e+1;for(;t.charAt(++e)!=="-"&&e!=t.length;);let c=t.substring(o,e);if(c!=Number(c)||t.charAt(e)!=="-")throw new Error("Illegal attachments");i.attachments=Number(c)}if(t.charAt(e+1)==="/"){let o=e+1;for(;++e&&!(t.charAt(e)===","||e===t.length););i.nsp=t.substring(o,e)}else i.nsp="/";let r=t.charAt(e+1);if(r!==""&&Number(r)==r){let o=e+1;for(;++e;){let c=t.charAt(e);if(c==null||Number(c)!=c){--e;break}if(e===t.length)break}i.id=Number(t.substring(o,e+1))}if(t.charAt(++e)){let o=this.tryParse(t.substr(e));if(n.isPayloadValid(i.type,o))i.data=o;else throw new Error("invalid payload")}return i}tryParse(t){try{return JSON.parse(t,this.reviver)}catch{return!1}}static isPayloadValid(t,e){switch(t){case u.CONNECT:return Fi(e);case u.DISCONNECT:return e===void 0;case u.CONNECT_ERROR:return typeof e=="string"||Fi(e);case u.EVENT:case u.BINARY_EVENT:return Array.isArray(e)&&(typeof e[0]=="number"||typeof e[0]=="string"&&_n.indexOf(e[0])===-1);case u.ACK:case u.BINARY_ACK:return Array.isArray(e)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}},ht=class{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){let e=Di(this.reconPack,this.buffers);return this.finishedReconstruction(),e}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}};function S(n,t,e){return n.on(t,e),function(){n.off(t,e)}}var vn=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1}),oe=class extends f{constructor(t,e,i){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=e,i&&i.auth&&(this.auth=i.auth),this._opts=Object.assign({},i),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;let t=this.io;this.subs=[S(t,"open",this.onopen.bind(this)),S(t,"packet",this.onpacket.bind(this)),S(t,"error",this.onerror.bind(this)),S(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...e){var i,r,o;if(vn.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');if(e.unshift(t),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(e),this;let c={type:u.EVENT,data:e};if(c.options={},c.options.compress=this.flags.compress!==!1,typeof e[e.length-1]=="function"){let C=this.ids++,D=e.pop();this._registerAckCallback(C,D),c.id=C}let h=(r=(i=this.io.engine)===null||i===void 0?void 0:i.transport)===null||r===void 0?void 0:r.writable,d=this.connected&&!(!((o=this.io.engine)===null||o===void 0)&&o._hasPingExpired());return this.flags.volatile&&!h||(d?(this.notifyOutgoingListeners(c),this.packet(c)):this.sendBuffer.push(c)),this.flags={},this}_registerAckCallback(t,e){var i;let r=(i=this.flags.timeout)!==null&&i!==void 0?i:this._opts.ackTimeout;if(r===void 0){this.acks[t]=e;return}let o=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let h=0;h<this.sendBuffer.length;h++)this.sendBuffer[h].id===t&&this.sendBuffer.splice(h,1);e.call(this,new Error("operation has timed out"))},r),c=(...h)=>{this.io.clearTimeoutFn(o),e.apply(this,h)};c.withError=!0,this.acks[t]=c}emitWithAck(t,...e){return new Promise((i,r)=>{let o=(c,h)=>c?r(c):i(h);o.withError=!0,e.push(o),this.emit(t,...e)})}_addToQueue(t){let e;typeof t[t.length-1]=="function"&&(e=t.pop());let i={id:this._queueSeq++,tryCount:0,pending:!1,args:t,flags:Object.assign({fromQueue:!0},this.flags)};t.push((r,...o)=>i!==this._queue[0]?void 0:(r!==null?i.tryCount>this._opts.retries&&(this._queue.shift(),e&&e(r)):(this._queue.shift(),e&&e(null,...o)),i.pending=!1,this._drainQueue())),this._queue.push(i),this._drainQueue()}_drainQueue(t=!1){if(!this.connected||this._queue.length===0)return;let e=this._queue[0];e.pending&&!t||(e.pending=!0,e.tryCount++,this.flags=e.flags,this.emit.apply(this,e.args))}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){typeof this.auth=="function"?this.auth(t=>{this._sendConnectPacket(t)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(t){this.packet({type:u.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},t):t})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,e){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,e),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(t=>{if(!this.sendBuffer.some(i=>String(i.id)===t)){let i=this.acks[t];delete this.acks[t],i.withError&&i.call(this,new Error("socket has been disconnected"))}})}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case u.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid,t.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case u.EVENT:case u.BINARY_EVENT:this.onevent(t);break;case u.ACK:case u.BINARY_ACK:this.onack(t);break;case u.DISCONNECT:this.ondisconnect();break;case u.CONNECT_ERROR:this.destroy();let i=new Error(t.data.message);i.data=t.data.data,this.emitReserved("connect_error",i);break}}onevent(t){let e=t.data||[];t.id!=null&&e.push(this.ack(t.id)),this.connected?this.emitEvent(e):this.receiveBuffer.push(Object.freeze(e))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){let e=this._anyListeners.slice();for(let i of e)i.apply(this,t)}super.emit.apply(this,t),this._pid&&t.length&&typeof t[t.length-1]=="string"&&(this._lastOffset=t[t.length-1])}ack(t){let e=this,i=!1;return function(...r){i||(i=!0,e.packet({type:u.ACK,id:t,data:r}))}}onack(t){let e=this.acks[t.id];typeof e=="function"&&(delete this.acks[t.id],e.withError&&t.data.unshift(null),e.apply(this,t.data))}onconnect(t,e){this.id=t,this.recovered=e&&this._pid===e,this._pid=e,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>{this.notifyOutgoingListeners(t),this.packet(t)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:u.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){let e=this._anyListeners;for(let i=0;i<e.length;i++)if(t===e[i])return e.splice(i,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){let e=this._anyOutgoingListeners;for(let i=0;i<e.length;i++)if(t===e[i])return e.splice(i,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){let e=this._anyOutgoingListeners.slice();for(let i of e)i.apply(this,t.data)}}};function z(n){n=n||{},this.ms=n.min||100,this.max=n.max||1e4,this.factor=n.factor||2,this.jitter=n.jitter>0&&n.jitter<=1?n.jitter:0,this.attempts=0}z.prototype.duration=function(){var n=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),e=Math.floor(t*this.jitter*n);n=Math.floor(t*10)&1?n+e:n-e}return Math.min(n,this.max)|0};z.prototype.reset=function(){this.attempts=0};z.prototype.setMin=function(n){this.ms=n};z.prototype.setMax=function(n){this.max=n};z.prototype.setJitter=function(n){this.jitter=n};var se=class extends f{constructor(t,e){var i;super(),this.nsps={},this.subs=[],t&&typeof t=="object"&&(e=t,t=void 0),e=e||{},e.path=e.path||"/socket.io",this.opts=e,P(this,e),this.reconnection(e.reconnection!==!1),this.reconnectionAttempts(e.reconnectionAttempts||1/0),this.reconnectionDelay(e.reconnectionDelay||1e3),this.reconnectionDelayMax(e.reconnectionDelayMax||5e3),this.randomizationFactor((i=e.randomizationFactor)!==null&&i!==void 0?i:.5),this.backoff=new z({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(e.timeout==null?2e4:e.timeout),this._readyState="closed",this.uri=t;let r=e.parser||dt;this.encoder=new r.Encoder,this.decoder=new r.Decoder,this._autoConnect=e.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,t||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(t){return t===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var e;return t===void 0?this._reconnectionDelay:(this._reconnectionDelay=t,(e=this.backoff)===null||e===void 0||e.setMin(t),this)}randomizationFactor(t){var e;return t===void 0?this._randomizationFactor:(this._randomizationFactor=t,(e=this.backoff)===null||e===void 0||e.setJitter(t),this)}reconnectionDelayMax(t){var e;return t===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,(e=this.backoff)===null||e===void 0||e.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new re(this.uri,this.opts);let e=this.engine,i=this;this._readyState="opening",this.skipReconnect=!1;let r=S(e,"open",function(){i.onopen(),t&&t()}),o=h=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",h),t?t(h):this.maybeReconnectOnOpen()},c=S(e,"error",o);if(this._timeout!==!1){let h=this._timeout,d=this.setTimeoutFn(()=>{r(),o(new Error("timeout")),e.close()},h);this.opts.autoUnref&&d.unref(),this.subs.push(()=>{this.clearTimeoutFn(d)})}return this.subs.push(r),this.subs.push(c),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");let t=this.engine;this.subs.push(S(t,"ping",this.onping.bind(this)),S(t,"data",this.ondata.bind(this)),S(t,"error",this.onerror.bind(this)),S(t,"close",this.onclose.bind(this)),S(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(e){this.onclose("parse error",e)}}ondecoded(t){N(()=>{this.emitReserved("packet",t)},this.setTimeoutFn)}onerror(t){this.emitReserved("error",t)}socket(t,e){let i=this.nsps[t];return i?this._autoConnect&&!i.active&&i.connect():(i=new oe(this,t,e),this.nsps[t]=i),i}_destroy(t){let e=Object.keys(this.nsps);for(let i of e)if(this.nsps[i].active)return;this._close()}_packet(t){let e=this.encoder.encode(t);for(let i=0;i<e.length;i++)this.engine.write(e[i],t.options)}cleanup(){this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(t,e){var i;this.cleanup(),(i=this.engine)===null||i===void 0||i.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,e),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;let t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{let e=this.backoff.duration();this._reconnecting=!0;let i=this.setTimeoutFn(()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),!t.skipReconnect&&t.open(r=>{r?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",r)):t.onreconnect()}))},e);this.opts.autoUnref&&i.unref(),this.subs.push(()=>{this.clearTimeoutFn(i)})}}onreconnect(){let t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}};var ye={};function _e(n,t){typeof n=="object"&&(t=n,n=void 0),t=t||{};let e=Ni(n,t.path||"/socket.io"),i=e.source,r=e.id,o=e.path,c=ye[r]&&o in ye[r].nsps,h=t.forceNew||t["force new connection"]||t.multiplex===!1||c,d;return h?d=new se(i,t):(ye[r]||(ye[r]=new se(i,t)),d=ye[r]),e.query&&!t.query&&(t.query=e.queryKey),d.socket(e.path,t)}Object.assign(_e,{Manager:se,Socket:oe,io:_e,connect:_e});var qi=(()=>{class n{http;socket=_e("http://localhost:5000",{reconnectionDelayMax:1e4,query:{"my-key":"my-value"}});httpHeaders=new St().append("Access-Control-Allow-Origin","*");constructor(e){this.http=e,Notification.requestPermission().then(i=>{console.log(i),i==="granted"&&this.socket.on("new_molding",r=>{console.log("new_molding received")})}),this.socket.on("new_molding",()=>{console.log("new molding alert")})}newNotif(){this.http.post("http://localhost:5000/send-notification",{message:"testmessage"},{headers:this.httpHeaders}).subscribe(e=>{})}static \u0275fac=function(i){return new(i||n)(we(Ct))};static \u0275prov=be({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Vi=(()=>{class n{router;notificationsService;authStore=mt(Jt);user;documents;data;docSub;constructor(e,i){this.router=e,this.notificationsService=i}ngOnDestroy(){}ionViewDidLeave(){console.log("view did leave")}ngOnInit(){this.user=this.authStore.user()}logoutClick(){this.authStore.logout()}navigateHome(){this.router.navigate(["/home"])}notifyClick(){console.log("notify click"),this.notificationsService.newNotif()}static \u0275fac=function(i){return new(i||n)(g(kt),g(qi))};static \u0275cmp=v({type:n,selectors:[["app-shared-admin-header"]],standalone:!0,features:[b],decls:17,vars:2,consts:[[3,"translucent"],["color","primary"],["slot","start"],["color","light","menu","admin-menu","autoHide","false"],["src","assets/images/logoDaherFondBleu.png",1,"ion-hide-sm-down","logo",3,"click"],[1,"ion-text-uppercase","ion-text-center"],["id","button-profil","color","light","slot","end","outline","",1,"ion-margin-end"],["name","person-circle-outline"],["color","light"],["slot","end","color","danger",1,"ion-hide-sm-down",3,"click"],["slot","end","name","log-out-outline"],[1,"ion-hide-md-down"],["slot","end",3,"click"]],template:function(i,r){i&1&&(s(0,"ion-header",0)(1,"ion-toolbar",1)(2,"ion-buttons",2),y(3,"ion-menu-button",3),s(4,"ion-img",4),_("click",function(){return r.navigateHome()}),a()(),s(5,"ion-title",5),l(6,"Administration"),a(),s(7,"ion-chip",6),y(8,"ion-icon",7),s(9,"ion-label",8),l(10),a()(),s(11,"ion-button",9),_("click",function(){return r.logoutClick()}),y(12,"ion-icon",10),s(13,"ion-label",11),l(14,"D\xE9connexion"),a()(),s(15,"ion-button",12),_("click",function(){return r.notifyClick()}),l(16," Notify "),a()()()),i&2&&(m("translucent",!1),p(10),ke(r.user==null?null:r.user.username))},dependencies:[w,G,Lt,Pe,I,Z,Pt,W,De,O,R],styles:[".logo[_ngcontent-%COMP%]{width:100px}"]})}return n})();var wn=["menuAdmin"],Hi=(()=>{class n{navCtrl;menuAdmin;constructor(e){this.navCtrl=e}ionViewWillEnter(){this.menuAdmin.open()}navigate(e){this.navCtrl.navigateForward(e)}static \u0275fac=function(i){return new(i||n)(g(At))};static \u0275cmp=v({type:n,selectors:[["app-admin"]],viewQuery:function(i,r){if(i&1&&Se(wn,5),i&2){let o;Ce(o=xe())&&(r.menuAdmin=o.first)}},standalone:!0,features:[b],decls:24,vars:1,consts:[["menuAdmin",""],["color","medium",3,"fullscreen"],["menuId","admin-menu","side","start","type","push","contentId","admin-content","open","true"],["color","danger"],["auto-hide","true"],["button","",3,"click"],["slot","end"],["button",""],["id","admin-content"]],template:function(i,r){if(i&1){let o=U();y(0,"app-shared-admin-header"),s(1,"ion-content",1)(2,"ion-menu",2,0)(4,"ion-header")(5,"ion-toolbar",3)(6,"ion-title"),l(7,"Menu de l'admnistration"),a()()(),s(8,"ion-content")(9,"ion-list")(10,"ion-menu-toggle",4)(11,"ion-item",5),_("click",function(){return x(o),k(r.navigate("admin/admin-user"))}),s(12,"ion-label"),l(13,"Utilisateurs"),a(),s(14,"ion-badge",6),l(15,"11"),a()()(),s(16,"ion-item",7),l(17,"Outillages"),a(),s(18,"ion-menu-toggle",4)(19,"ion-item",5),_("click",function(){return x(o),k(r.navigate("admin/admin-molding"))}),l(20,"Moulages"),a()(),s(21,"ion-item",7),l(22,"Kits"),a()()()(),y(23,"ion-router-outlet",8),a()}i&2&&(p(),m("fullscreen",!1))},dependencies:[Vi,w,Rt,V,I,ee,W,qt,Me,Vt,O,R,Kt]})}return n})();var gs=[{path:"",canActivate:[Zt],data:{expectedRole:["ROLE_ADMIN"]},children:[{path:"home",component:Hi},{path:"users",component:si},{path:"molding",component:hi}]}];export{gs as ADMIN_ROUTES};
