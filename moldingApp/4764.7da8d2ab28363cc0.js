"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4764],{4764:(b,u,r)=>{r.r(u),r.d(u,{IndicatorsPageModule:()=>R});var d=r(9808),l=r(3075),a=r(3349),p=r(8555),t=r(5e3),g=r(9973);let m=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-indicator-number"]],inputs:{indicator:"indicator"},decls:7,vars:2,consts:[["color","primary"]],template:function(e,i){1&e&&(t.TgZ(0,"ion-card",0),t.TgZ(1,"ion-card-header"),t.TgZ(2,"ion-card-subtitle"),t._uU(3),t.qZA(),t.qZA(),t.TgZ(4,"ion-card-content"),t.TgZ(5,"ion-text"),t._uU(6),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(3),t.Oqu(i.indicator.name),t.xp6(3),t.hij(" ",i.indicator.value," "))},directives:[a.PM,a.Zi,a.tO,a.FN,a.yW],styles:["ion-text[_ngcontent-%COMP%]{font-size:500%;color:var(--ion-color-primary-contrast)}ion-card-content[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}"]}),n})();var h=r(9356);const f=["canvas"];let C=(()=>{class n{constructor(){}ngAfterViewInit(){console.log(this.indicator),this.pieChart=new h.Z(this.canvas.nativeElement,{type:"pie",data:{labels:Object.entries(this.indicator.repartitionObj).map(e=>e[0]),datasets:[{label:`Prefix-${this.indicator.name}`,backgroundColor:["#505F69","#6EB4CD"],borderColor:"#E1E1D7",borderWidth:1,borderJoinStyle:"miter",data:Object.entries(this.indicator.repartitionObj).map(e=>e[1])}]},options:{plugins:{}}}),this.pieChart.update()}ngOnInit(){console.log("init",this.indicator)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-indicator-graph"]],viewQuery:function(e,i){if(1&e&&t.Gf(f,5),2&e){let c;t.iGM(c=t.CRH())&&(i.canvas=c.first)}},inputs:{indicator:"indicator"},decls:7,vars:1,consts:[["color","primary",1,"ion-no-padding"],["canvas",""]],template:function(e,i){1&e&&(t.TgZ(0,"ion-card",0),t.TgZ(1,"ion-card-header"),t.TgZ(2,"ion-card-subtitle"),t._uU(3),t.qZA(),t.qZA(),t.TgZ(4,"ion-card-content"),t._UZ(5,"canvas",null,1),t.qZA(),t.qZA()),2&e&&(t.xp6(3),t.hij(" ",i.indicator.name," "))},directives:[a.PM,a.Zi,a.tO,a.FN],styles:[""]}),n})();const v=["repartitionDemandesCanvas"],y=function(n){return{name:"R\xe9partition",repartitionObj:n}};function I(n,o){if(1&n&&t._UZ(0,"app-indicator-graph",3),2&n){const e=t.oxw();t.Q6J("indicator",t.VKq(1,y,e.requestTypeDistribution))}}const Z=function(n){return{name:"En cours",value:n}},T=function(n){return{name:"Ouvertes",value:n}},P=[{path:"",component:(()=>{class n{constructor(e){this.toolRequestService=e,this.openRequestCount=0,this.onGoingRequestCount=0}ngOnInit(){}ionViewWillEnter(){this.toolRequestService.getToolRequests().then(e=>{const i=(new Date).getTime();e.forEach(s=>{console.log(s),"CLOTUREE"!==s.statut&&(this.openRequestCount=this.openRequestCount+1),"EN COURS DE REALISATION"!==s.statut&&(this.onGoingRequestCount=this.onGoingRequestCount+1)}),this.requestTypeDistribution={controle:e.filter(s=>"Controle"===s.type).length,maintenance:e.filter(s=>"Maintenance"===s.type).length};const c=(new Date).getTime();console.log(this.openRequestCount,this.onGoingRequestCount,c-i+"ms"),console.log(this.requestTypeDistribution)})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(g.C))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-indicators"]],viewQuery:function(e,i){if(1&e&&t.Gf(v,5),2&e){let c;t.iGM(c=t.CRH())&&(i.repartitionDemandesCanvas=c.first)}},decls:5,vars:8,consts:[[3,"fullscreen"],[1,"graph"],[3,"indicator",4,"ngIf"],[3,"indicator"]],template:function(e,i){1&e&&(t.TgZ(0,"ion-content",0),t.TgZ(1,"div",1),t.YNc(2,I,1,3,"app-indicator-graph",2),t._UZ(3,"app-indicator-number",3),t._UZ(4,"app-indicator-number",3),t.qZA(),t.qZA()),2&e&&(t.Q6J("fullscreen",!0),t.xp6(2),t.Q6J("ngIf",i.requestTypeDistribution),t.xp6(1),t.Q6J("indicator",t.VKq(4,Z,i.onGoingRequestCount)),t.xp6(1),t.Q6J("indicator",t.VKq(6,T,i.openRequestCount)))},directives:[a.W2,d.O5,m,C],styles:[".graph[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:nowrap;overflow:hidden}.graph[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{min-width:25%;max-width:50%;max-height:50%;min-height:1/3}"]}),n})()}];let O=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[p.Bz.forChild(P)],p.Bz]}),n})();var q=r(2992);let R=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[d.ez,l.u5,a.Pc,O,q.D]]}),n})()}}]);