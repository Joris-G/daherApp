var _R=Object.defineProperty,NR=Object.defineProperties,RR=Object.getOwnPropertyDescriptors,ml=Object.getOwnPropertySymbols,T1=Object.prototype.hasOwnProperty,B1=Object.prototype.propertyIsEnumerable,O1=(qt,zt,ue)=>zt in qt?_R(qt,zt,{enumerable:!0,configurable:!0,writable:!0,value:ue}):qt[zt]=ue,rt=(qt,zt)=>{for(var ue in zt||(zt={}))T1.call(zt,ue)&&O1(qt,ue,zt[ue]);if(ml)for(var ue of ml(zt))B1.call(zt,ue)&&O1(qt,ue,zt[ue]);return qt},Rt=(qt,zt)=>NR(qt,RR(zt)),D1=(qt,zt)=>{var ue={};for(var Ve in qt)T1.call(qt,Ve)&&zt.indexOf(Ve)<0&&(ue[Ve]=qt[Ve]);if(null!=qt&&ml)for(var Ve of ml(qt))zt.indexOf(Ve)<0&&B1.call(qt,Ve)&&(ue[Ve]=qt[Ve]);return ue};!function(){"use strict";var qt=function(t){if(null===t)return"null";if(void 0===t)return"undefined";var e=typeof t;return"object"===e&&(Array.prototype.isPrototypeOf(t)||t.constructor&&"Array"===t.constructor.name)?"array":"object"===e&&(String.prototype.isPrototypeOf(t)||t.constructor&&"String"===t.constructor.name)?"string":e},zt=function(t){return{eq:t}},ue=zt(function(t,e){return t===e}),Ve=function(t){return zt(function(e,n){if(e.length!==n.length)return!1;for(var o=e.length,r=0;r<o;r++)if(!t.eq(e[r],n[r]))return!1;return!0})},fm=function(t){return zt(function(e,n){var l,c,u,o=Object.keys(e),r=Object.keys(n);if(!(l=ue,c=Ve(l),u=function(c){return Array.prototype.slice.call(c).sort(void 0)},zt(function(f,m){return c.eq(u(f),u(m))})).eq(o,r))return!1;for(var s=o.length,a=0;a<s;a++){var i=o[a];if(!t.eq(e[i],n[i]))return!1}return!0})},fl=zt(function(t,e){if(t===e)return!0;var n=qt(t);return n===qt(e)&&(-1!==["undefined","boolean","number","string","function","xml","null"].indexOf(n)?t===e:"array"===n?Ve(fl).eq(t,e):"object"===n&&fm(fl).eq(t,e))});const L1=Object.getPrototypeOf,gm=(t,e,n)=>{var o;return!!n(t,e.prototype)||(null===(o=t.constructor)||void 0===o?void 0:o.name)===e.name},gl=t=>e=>(n=>{const o=typeof n;return null===n?"null":"object"===o&&Array.isArray(n)?"array":"object"===o&&gm(n,String,(r,s)=>s.isPrototypeOf(r))?"string":o})(e)===t,pl=t=>e=>typeof e===t,pm=t=>e=>t===e,sa=(t,e)=>Ae(t)&&gm(t,e,(n,o)=>L1(n)===o),at=gl("string"),Ae=gl("object"),hm=t=>sa(t,Object),Wt=gl("array"),Ur=pm(null),zr=pl("boolean"),Ce=pm(void 0),Oe=t=>null==t,ut=t=>!Oe(t),xt=pl("function"),an=pl("number"),Wo=(t,e)=>{if(Wt(t)){for(let n=0,o=t.length;n<o;++n)if(!e(t[n]))return!1;return!0}return!1},pt=()=>{},mo=(t,e)=>(...n)=>t(e.apply(null,n)),bm=(t,e)=>n=>t(e(n)),K=t=>()=>t,me=t=>t,P1=(t,e)=>t===e;function X(t,...e){return(...n)=>{const o=e.concat(n);return t.apply(null,o)}}const hl=t=>e=>!t(e),bl=t=>t(),jr=t=>{t()},Tt=K(!1),jt=K(!0);class C{constructor(e,n){this.tag=e,this.value=n}static some(e){return new C(!0,e)}static none(){return C.singletonNone}fold(e,n){return this.tag?n(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?C.some(e(this.value)):C.none()}bind(e){return this.tag?e(this.value):C.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:C.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw new Error(null!=e?e:"Called getOrDie on None")}static from(e){return ut(e)?C.some(e):C.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}C.singletonNone=new C(!1);const vl=Array.prototype.slice,M1=Array.prototype.indexOf,I1=Array.prototype.push,vm=(t,e)=>M1.call(t,e),Pt=(t,e)=>vm(t,e)>-1,It=(t,e)=>{for(let n=0,o=t.length;n<o;n++)if(e(t[n],n))return!0;return!1},vt=(t,e)=>{const n=t.length,o=new Array(n);for(let r=0;r<n;r++)o[r]=e(t[r],r);return o},j=(t,e)=>{for(let n=0,o=t.length;n<o;n++)e(t[n],n)},ym=(t,e)=>{for(let n=t.length-1;n>=0;n--)e(t[n],n)},Vr=(t,e)=>{const n=[],o=[];for(let r=0,s=t.length;r<s;r++){const a=t[r];(e(a,r)?n:o).push(a)}return{pass:n,fail:o}},it=(t,e)=>{const n=[];for(let o=0,r=t.length;o<r;o++){const s=t[o];e(s,o)&&n.push(s)}return n},aa=(t,e,n)=>(ym(t,(o,r)=>{n=e(n,o,r)}),n),Te=(t,e,n)=>(j(t,(o,r)=>{n=e(n,o,r)}),n),Cm=(t,e,n)=>{for(let o=0,r=t.length;o<r;o++){const s=t[o];if(e(s,o))return C.some(s);if(n(s,o))break}return C.none()},Kt=(t,e)=>Cm(t,e,Tt),Hr=(t,e)=>{for(let n=0,o=t.length;n<o;n++)if(e(t[n],n))return C.some(n);return C.none()},xm=t=>{const e=[];for(let n=0,o=t.length;n<o;++n){if(!Wt(t[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+t);I1.apply(e,t[n])}return e},An=(t,e)=>xm(vt(t,e)),Ko=(t,e)=>{for(let n=0,o=t.length;n<o;++n)if(!0!==e(t[n],n))return!1;return!0},$r=t=>{const e=vl.call(t,0);return e.reverse(),e},wm=(t,e)=>it(t,n=>!Pt(e,n)),yl=(t,e)=>{const n={};for(let o=0,r=t.length;o<r;o++){const s=t[o];n[String(s)]=e(s,o)}return n},qr=(t,e)=>{const n=vl.call(t,0);return n.sort(e),n},Cl=(t,e)=>e>=0&&e<t.length?C.some(t[e]):C.none(),Be=t=>Cl(t,0),fo=t=>Cl(t,t.length-1),xe=xt(Array.from)?Array.from:t=>vl.call(t),Go=(t,e)=>{for(let n=0;n<t.length;n++){const o=e(t[n],n);if(o.isSome())return o}return C.none()},Xe=Object.keys,F1=Object.hasOwnProperty,At=(t,e)=>{const n=Xe(t);for(let o=0,r=n.length;o<r;o++){const s=n[o];e(t[s],s)}},Wr=(t,e)=>U1(t,(n,o)=>({k:o,v:e(n,o)})),U1=(t,e)=>{const n={};return At(t,(o,r)=>{const s=e(o,r);n[s.k]=s.v}),n},xl=t=>(e,n)=>{t[n]=e},km=(t,e,n,o)=>(At(t,(r,s)=>{(e(r,s)?n:o)(r,s)}),{}),Kr=(t,e)=>{const n={};return km(t,e,xl(n),pt),n},wl=(t,e)=>{const n=[];return At(t,(o,r)=>{n.push(e(o,r))}),n},Sm=t=>wl(t,me),Nt=(t,e)=>ft(t,e)?C.from(t[e]):C.none(),ft=(t,e)=>F1.call(t,e),Yo=(t,e)=>ft(t,e)&&null!=t[e],Em=t=>{const e={};return j(t,n=>{e[n]={}}),Xe(e)},kl=Array.isArray,Gr=(t,e,n)=>{let o,r;if(!t)return!1;if(n=n||t,void 0!==t.length){for(o=0,r=t.length;o<r;o++)if(!1===e.call(n,t[o],o,t))return!1}else for(o in t)if(ft(t,o)&&!1===e.call(n,t[o],o,t))return!1;return!0},Sl=(t,e)=>{const n=[];return Gr(t,(o,r)=>{n.push(e(o,r,t))}),n},Xo=(t,e)=>{const n=[];return Gr(t,(o,r)=>{e&&!e(o,r,t)||n.push(o)}),n},_m=(t,e)=>{if(t)for(let n=0,o=t.length;n<o;n++)if(t[n]===e)return n;return-1},ia=(t,e,n,o)=>{let r=Ce(n)?t[0]:n;for(let s=0;s<t.length;s++)r=e.call(o,r,t[s],s);return r},Nm=(t,e,n)=>{let o,r;for(o=0,r=t.length;o<r;o++)if(e.call(n,t[o],o,t))return o;return-1},go=t=>t[t.length-1],po=t=>{let e,n=!1;return(...o)=>(n||(n=!0,e=t.apply(null,o)),e)},Rm=()=>El(0,0),El=(t,e)=>({major:t,minor:e}),Yr={nu:El,detect:(t,e)=>{const n=String(e).toLowerCase();return 0===t.length?Rm():((o,r)=>{const s=((i,l)=>{for(let d=0;d<i.length;d++){const c=i[d];if(c.test(l))return c}})(o,r);if(!s)return{major:0,minor:0};const a=i=>Number(r.replace(s,"$"+i));return El(a(1),a(2))})(t,n)},unknown:Rm},Am=(t,e)=>{const n=String(e).toLowerCase();return Kt(t,o=>o.search(n))},Om=(t,e,n)=>""===e||t.length>=e.length&&t.substr(n,n+e.length)===e,fe=(t,e)=>-1!==t.indexOf(e),He=(t,e)=>Om(t,e,0),Tm=(t,e)=>Om(t,e,t.length-e.length),_l=t=>e=>e.replace(t,""),Qo=_l(/^\s+|\s+$/g),z1=_l(/^\s+/g),Bm=_l(/\s+$/g),On=t=>t.length>0,la=t=>!On(t),j1=(t,e=10)=>{const n=parseInt(t,e);return isNaN(n)?C.none():C.some(n)},Nl=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Tn=t=>e=>fe(e,t),V1=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:t=>fe(t,"edge/")&&fe(t,"chrome")&&fe(t,"safari")&&fe(t,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Nl],search:t=>fe(t,"chrome")&&!fe(t,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:t=>fe(t,"msie")||fe(t,"trident")},{name:"Opera",versionRegexes:[Nl,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Tn("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Tn("firefox")},{name:"Safari",versionRegexes:[Nl,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:t=>(fe(t,"safari")||fe(t,"mobile/"))&&fe(t,"applewebkit")}],H1=[{name:"Windows",search:Tn("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:t=>fe(t,"iphone")||fe(t,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Tn("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:Tn("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Tn("linux"),versionRegexes:[]},{name:"Solaris",search:Tn("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Tn("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Tn("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],Dm={browsers:K(V1),oses:K(H1)},Pm="Chromium",Im="Firefox",Um=t=>{const e=t.current,o=r=>()=>e===r;return{current:e,version:t.version,isEdge:o("Edge"),isChromium:o(Pm),isIE:o("IE"),isOpera:o("Opera"),isFirefox:o(Im),isSafari:o("Safari")}},$1=()=>Um({current:void 0,version:Yr.unknown()}),q1=Um,zm=(K("Edge"),K(Pm),K("IE"),K("Opera"),K(Im),K("Safari"),"Windows"),jm="Android",$m="Solaris",qm="FreeBSD",Wm="ChromeOS",Km=t=>{const e=t.current,o=r=>()=>e===r;return{current:e,version:t.version,isWindows:o(zm),isiOS:o("iOS"),isAndroid:o(jm),isMacOS:o("macOS"),isLinux:o("Linux"),isSolaris:o($m),isFreeBSD:o(qm),isChromeOS:o(Wm)}},W1=()=>Km({current:void 0,version:Yr.unknown()}),K1=Km,G1=(K(zm),K("iOS"),K(jm),K("Linux"),K("macOS"),K($m),K(qm),K(Wm),t=>window.matchMedia(t).matches);let Y1=po(()=>((t,e,n)=>{const o=Dm.browsers(),r=Dm.oses(),s=e.bind(l=>{return d=o,Go(l.brands,u=>{const f=u.brand.toLowerCase();return Kt(d,m=>{var g;return f===(null===(g=m.brand)||void 0===g?void 0:g.toLowerCase())}).map(m=>({current:m.name,version:Yr.nu(parseInt(u.version,10),0)}))});var d}).orThunk(()=>{return Am(o,d=t).map(c=>{const u=Yr.detect(c.versionRegexes,d);return{current:c.name,version:u}});var d}).fold($1,q1),a=(l=r,d=t,Am(l,d).map(c=>{const u=Yr.detect(c.versionRegexes,d);return{current:c.name,version:u}})).fold(W1,K1),i=((l,d,c,u)=>{const f=l.isiOS()&&!0===/ipad/i.test(c),m=l.isiOS()&&!f,g=l.isiOS()||l.isAndroid(),b=g||u("(pointer:coarse)"),p=f||!m&&g&&u("(min-device-width:768px)"),h=m||g&&!p,v=d.isSafari()&&l.isiOS()&&!1===/safari/i.test(c),y=!h&&!p&&!v;return{isiPad:K(f),isiPhone:K(m),isTablet:K(p),isPhone:K(h),isTouch:K(b),isAndroid:l.isAndroid,isiOS:l.isiOS,isWebView:K(v),isDesktop:K(y)}})(a,s,t,n);var l,d;return{browser:s,os:a,deviceType:i}})(navigator.userAgent,C.from(navigator.userAgentData),G1));const qn=()=>Y1(),X1=navigator.userAgent,Rl=qn(),ln=Rl.browser,dn=Rl.os,ho=Rl.deviceType,Q1=-1!==X1.indexOf("Windows Phone"),wt={transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",documentMode:ln.isIE()?document.documentMode||7:10,cacheSuffix:null,container:null,canHaveCSP:!ln.isIE(),windowsPhone:Q1,browser:{current:ln.current,version:ln.version,isChromium:ln.isChromium,isEdge:ln.isEdge,isFirefox:ln.isFirefox,isIE:ln.isIE,isOpera:ln.isOpera,isSafari:ln.isSafari},os:{current:dn.current,version:dn.version,isAndroid:dn.isAndroid,isChromeOS:dn.isChromeOS,isFreeBSD:dn.isFreeBSD,isiOS:dn.isiOS,isLinux:dn.isLinux,isMacOS:dn.isMacOS,isSolaris:dn.isSolaris,isWindows:dn.isWindows},deviceType:{isDesktop:ho.isDesktop,isiPad:ho.isiPad,isiPhone:ho.isiPhone,isPhone:ho.isPhone,isTablet:ho.isTablet,isTouch:ho.isTouch,isWebView:ho.isWebView}},J1=/^\s*|\s*$/g,Gm=t=>null==t?"":(""+t).replace(J1,""),Ym=(t,e)=>e?!("array"!==e||!kl(t))||typeof t===e:void 0!==t,Xm=function(t,e,n,o){o=o||this,t&&(n&&(t=t[n]),Gr(t,(r,s)=>{if(!1===e.call(o,r,s,n))return!1;Xm(r,e,n,o)}))},z={trim:Gm,isArray:kl,is:Ym,toArray:t=>{if(kl(t))return t;{const e=[];for(let n=0,o=t.length;n<o;n++)e[n]=t[n];return e}},makeMap:(t,e,n)=>{let o;for(e=e||",","string"==typeof(t=t||[])&&(t=t.split(e)),n=n||{},o=t.length;o--;)n[t[o]]={};return n},each:Gr,map:Sl,grep:Xo,inArray:_m,hasOwn:ft,extend:(t,...e)=>{for(let n=0;n<e.length;n++){const o=e[n];for(const r in o)if(ft(o,r)){const s=o[r];void 0!==s&&(t[r]=s)}}return t},walk:Xm,resolve:(t,e)=>{let n,o;for(e=e||window,n=0,o=(t=t.split(".")).length;n<o&&(e=e[t[n]]);n++);return e},explode:(t,e)=>!t||Ym(t,"array")?t:Sl(t.split(e||","),Gm),_addCacheSuffix:t=>{const e=wt.cacheSuffix;return e&&(t+=(-1===t.indexOf("?")?"?":"&")+e),t}},Jo=(t,e,n=P1)=>t.exists(o=>n(o,e)),we=(t,e,n)=>t.isSome()&&e.isSome()?C.some(n(t.getOrDie(),e.getOrDie())):C.none(),Al=(t,e)=>t?C.some(e):C.none();"undefined"!=typeof window||Function("return this;")();const Ot=t=>t.dom.nodeName.toLowerCase(),Qm=t=>t.dom.nodeType,da=t=>e=>Qm(e)===t,$e=da(1),Le=da(3),Z1=da(9),tx=da(11),Jm=(t,e,n)=>{if(!(at(n)||zr(n)||an(n)))throw console.error("Invalid call to Attribute.set. Key ",e,":: Value ",n,":: Element ",t),new Error("Attribute value was not simple");t.setAttribute(e,n+"")},ge=(t,e,n)=>{Jm(t.dom,e,n)},cn=(t,e)=>{const n=t.dom;At(e,(o,r)=>{Jm(n,r,o)})},Pe=(t,e)=>{const n=t.dom.getAttribute(e);return null===n?void 0:n},ca=(t,e)=>C.from(Pe(t,e)),ua=(t,e)=>{const n=t.dom;return!(!n||!n.hasAttribute)&&n.hasAttribute(e)},qe=(t,e)=>{t.dom.removeAttribute(e)},Zm=t=>Te(t.dom.attributes,(e,n)=>(e[n.name]=n.value,e),{}),Ol=(t,e)=>{const n=Pe(t,e);return void 0===n||""===n?[]:n.split(" ")},Xr=t=>void 0!==t.dom.classList,tf=t=>Ol(t,"class"),ef=(t,e)=>((n,o,r)=>{const s=Ol(n,o).concat([r]);return ge(n,o,s.join(" ")),!0})(t,"class",e),nf=(t,e)=>((n,o,r)=>{const s=it(Ol(n,o),a=>a!==r);return s.length>0?ge(n,o,s.join(" ")):qe(n,o),!1})(t,"class",e),Qr=(t,e)=>{Xr(t)?t.dom.classList.add(e):ef(t,e)},of=t=>{0===(Xr(t)?t.dom.classList:tf(t)).length&&qe(t,"class")},rf=(t,e)=>{Xr(t)?t.dom.classList.remove(e):nf(t,e),of(t)},Tl=(t,e)=>Xr(t)&&t.dom.classList.contains(e),Jr=t=>void 0!==t.style&&xt(t.style.getPropertyValue),Zr=t=>{if(null==t)throw new Error("Node cannot be null or undefined");return{dom:t}},ts=(t,e)=>{const n=(e||document).createElement("div");if(n.innerHTML=t,!n.hasChildNodes()||n.childNodes.length>1){const o="HTML does not have a single root node";throw console.error(o,t),new Error(o)}return Zr(n.childNodes[0])},Ft=(t,e)=>{const n=(e||document).createElement(t);return Zr(n)},es=(t,e)=>{const n=(e||document).createTextNode(t);return Zr(n)},N=Zr,sf=(t,e)=>{const n=[],o=s=>(n.push(s),e(s));let r=e(t);do{r=r.bind(o)}while(r.isSome());return n},Bn=(t,e)=>{const n=t.dom;if(1!==n.nodeType)return!1;{const o=n;if(void 0!==o.matches)return o.matches(e);if(void 0!==o.msMatchesSelector)return o.msMatchesSelector(e);if(void 0!==o.webkitMatchesSelector)return o.webkitMatchesSelector(e);if(void 0!==o.mozMatchesSelector)return o.mozMatchesSelector(e);throw new Error("Browser lacks native selectors")}},af=t=>1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType||0===t.childElementCount,kt=(t,e)=>t.dom===e.dom,Dn=(t,e)=>{const n=t.dom,o=e.dom;return n!==o&&n.contains(o)},lf=t=>N(t.dom.ownerDocument),Wn=t=>Z1(t)?t:lf(t),df=t=>N(Wn(t).dom.defaultView),We=t=>C.from(t.dom.parentNode).map(N),bo=t=>C.from(t.dom.previousSibling).map(N),ns=t=>C.from(t.dom.nextSibling).map(N),cf=t=>$r(sf(t,bo)),uf=t=>sf(t,ns),ne=t=>vt(t.dom.childNodes,N),ma=(t,e)=>C.from(t.dom.childNodes[e]).map(N),mf=t=>ma(t,0),Bl=t=>ma(t,t.dom.childNodes.length-1),ff=t=>t.dom.childNodes.length,gf=t=>tx(t)&&ut(t.dom.host),pf=xt(Element.prototype.attachShadow)&&xt(Node.prototype.getRootNode),nx=K(pf),vo=pf?t=>N(t.dom.getRootNode()):Wn,Dl=t=>gf(t)?t:(e=>{const n=e.dom.head;if(null==n)throw new Error("Head is not available yet");return N(n)})(Wn(t)),ox=t=>N(t.dom.host),hf=t=>{if(nx()&&ut(t.target)){const e=N(t.target);if($e(e)&&rx(e)&&t.composed&&t.composedPath){const n=t.composedPath();if(n)return Be(n)}}return C.from(t.target)},rx=t=>ut(t.dom.shadowRoot),Zo=t=>{const e=Le(t)?t.dom.parentNode:t.dom;if(null==e||null===e.ownerDocument)return!1;const n=e.ownerDocument;return(o=>{const r=vo(o);return gf(r)?C.some(r):C.none()})(N(e)).fold(()=>n.body.contains(e),bm(Zo,ox))},bf=(t,e,n)=>{if(!at(n))throw console.error("Invalid call to CSS.set. Property ",e,":: Value ",n,":: Element ",t),new Error("CSS value must be a string: "+n);Jr(t)&&t.style.setProperty(e,n)},vf=(t,e,n)=>{bf(t.dom,e,n)},fa=(t,e)=>{const n=t.dom;At(e,(o,r)=>{bf(n,r,o)})},un=(t,e)=>{const n=t.dom,o=window.getComputedStyle(n).getPropertyValue(e);return""!==o||Zo(t)?o:yf(n,e)},yf=(t,e)=>Jr(t)?t.style.getPropertyValue(e):"",ga=(t,e)=>{const o=yf(t.dom,e);return C.from(o).filter(r=>r.length>0)},Cf=t=>{const e={},n=t.dom;if(Jr(n))for(let o=0;o<n.style.length;o++){const r=n.style.item(o);e[r]=n.style[r]}return e},xf=(t,e)=>{var n,o;o=e,Jr(n=t.dom)&&n.style.removeProperty(o),Jo(ca(t,"style").map(Qo),"")&&qe(t,"style")},Ke=(t,e)=>{We(t).each(n=>{n.dom.insertBefore(e.dom,t.dom)})},Kn=(t,e)=>{ns(t).fold(()=>{We(t).each(n=>{Vt(n,e)})},n=>{Ke(n,e)})},wf=(t,e)=>{mf(t).fold(()=>{Vt(t,e)},n=>{t.dom.insertBefore(e.dom,n.dom)})},Vt=(t,e)=>{t.dom.appendChild(e.dom)},yo=(t,e)=>{j(e,n=>{Vt(t,n)})},os=t=>{t.dom.textContent="",j(ne(t),e=>{Mt(e)})},Mt=t=>{const e=t.dom;null!==e.parentNode&&e.parentNode.removeChild(e)},Gn=t=>{const e=ne(t);var n,o;e.length>0&&(n=t,j(o=e,(r,s)=>{Kn(0===s?n:o[s-1],r)})),Mt(t)},kf=t=>t.dom.innerHTML,Ll=(t,e)=>{const n=lf(t).dom,o=N(n.createDocumentFragment()),r=((s,a)=>{const i=(a||document).createElement("div");return i.innerHTML=s,ne(N(i))})(e,n);yo(o,r),os(t),Vt(t,o)},ax=(t,e,n,o)=>{t.dom.removeEventListener(e,n,o)},Sf=(t,e)=>({left:t,top:e,translate:(n,o)=>Sf(t+n,e+o)}),tr=Sf,pa=(t,e)=>void 0!==t?t:void 0!==e?e:0,Pl=t=>{const e=t.dom,n=e.ownerDocument.body;return n===e?tr(n.offsetLeft,n.offsetTop):Zo(t)?(o=>{const r=o.getBoundingClientRect();return tr(r.left,r.top)})(e):tr(0,0)},Ml=t=>{const e=void 0!==t?t.dom:document;return tr(e.body.scrollLeft||e.documentElement.scrollLeft,e.body.scrollTop||e.documentElement.scrollTop)},Ef=(t,e,n)=>{const o=(void 0!==n?n.dom:document).defaultView;o&&o.scrollTo(t,e)},_f=(t,e)=>{qn().browser.isSafari()&&xt(t.dom.scrollIntoViewIfNeeded)?t.dom.scrollIntoViewIfNeeded(!1):t.dom.scrollIntoView(e)},Nf=(t,e,n,o)=>({x:t,y:e,width:n,height:o,right:t+n,bottom:e+o}),Rf=t=>{const e=void 0===t?window:t,o=Ml(N(e.document));return(r=>{const s=void 0===r?window:r;return qn().browser.isFirefox()?C.none():C.from(s.visualViewport)})(e).fold(()=>{const r=e.document.documentElement;return Nf(o.left,o.top,r.clientWidth,r.clientHeight)},r=>Nf(Math.max(r.pageLeft,o.left),Math.max(r.pageTop,o.top),r.width,r.height))},Co=t=>e=>!!e&&e.nodeType===t,ha=t=>!!t&&!Object.getPrototypeOf(t),et=Co(1),Ge=t=>{const e=t.map(n=>n.toLowerCase());return n=>{if(n&&n.nodeName){const o=n.nodeName.toLowerCase();return Pt(e,o)}return!1}},ba=(t,e)=>{const n=e.toLowerCase().split(" ");return o=>{if(et(o))for(let r=0;r<n.length;r++){const s=o.ownerDocument.defaultView.getComputedStyle(o,null);if((s?s.getPropertyValue(t):null)===n[r])return!0}return!1}},Af=t=>e=>et(e)&&e.hasAttribute(t),xo=t=>et(t)&&t.hasAttribute("data-mce-bogus"),rs=t=>et(t)&&"TABLE"===t.tagName,Of=t=>e=>!(!et(e)||e.contentEditable!==t&&e.getAttribute("data-mce-contenteditable")!==t),Il=Ge(["textarea","input"]),G=Co(3),ix=Co(4),lx=Co(7),Tf=Co(8),Fl=Co(9),Ul=Co(11),Ut=Ge(["br"]),Bf=Ge(["img"]),Ln=Of("true"),Dt=Of("false"),va=Ge(["td","th"]),mn=Ge(["video","audio","object","embed"]),dx=qn().browser,Df=t=>Kt(t,$e),Lf=(t,e)=>t.children&&Pt(t.children,e);var Pf=(t,e,n,o,r)=>t(n,o)?C.some(n):xt(r)&&r(n)?C.none():e(n,o,r);const er=(t,e,n)=>{let o=t.dom;const r=xt(n)?n:Tt;for(;o.parentNode;){o=o.parentNode;const s=N(o);if(e(s))return C.some(s);if(r(s))break}return C.none()},ya=(t,e,n)=>Pf((o,r)=>r(o),er,t,e,n),ss=(t,e,n)=>er(t,o=>Bn(o,e),n),as=(t,e)=>((n,o)=>{const r=void 0===o?document:o.dom;return af(r)?C.none():C.from(r.querySelector(n)).map(N)})(e,t),wo=(t,e,n)=>Pf((o,r)=>Bn(o,r),ss,t,e,n),Mf=(t,e={})=>{let n=0;const o={},r=N(t),s=Wn(r),a=e.maxLoadTime||5e3,i=d=>new Promise((c,u)=>{let f;const m=z._addCacheSuffix(d),g=Nt(o,m).getOrThunk(()=>({id:"mce-u"+n++,passed:[],failed:[],count:0}));o[m]=g,g.count++;const b=(S,k)=>{j(S,jr),g.status=k,g.passed=[],g.failed=[],f&&(f.onload=null,f.onerror=null,f=null)},p=()=>b(g.passed,2),h=()=>b(g.failed,3),v=()=>{var S;S=v,(()=>{const k=t.styleSheets;let T=k.length;for(;T--;){const O=k[T].ownerNode;if(O&&O.id===f.id)return p(),!0}return!1})()||(Date.now()-x<a?setTimeout(S):h())};if(c&&g.passed.push(c),u&&g.failed.push(u),1===g.status)return;if(2===g.status)return void p();if(3===g.status)return void h();g.status=1;const y=Ft("link",s.dom);cn(y,{rel:"stylesheet",type:"text/css",id:g.id});const x=Date.now();var w;e.contentCssCors&&ge(y,"crossOrigin","anonymous"),e.referrerPolicy&&ge(y,"referrerpolicy",e.referrerPolicy),f=y.dom,f.onload=v,f.onerror=h,w=y,Vt(Dl(r),w),ge(y,"href",m)}),l=d=>{const c=z._addCacheSuffix(d);Nt(o,c).each(u=>{0==--u.count&&(delete o[c],(f=>{const m=Dl(r);as(m,"#"+f).each(Mt)})(u.id))})};return{load:i,loadAll:d=>Promise.allSettled(vt(d,c=>i(c).then(K(c)))).then(c=>{const u=Vr(c,f=>"fulfilled"===f.status);return u.fail.length>0?Promise.reject(vt(u.fail,f=>f.reason)):vt(u.pass,f=>f.value)}),unload:l,unloadAll:d=>{j(d,c=>{l(c)})},_setReferrerPolicy:d=>{e.referrerPolicy=d}}},If=(()=>{const t=new WeakMap;return{forElement:(e,n)=>{const o=vo(e).dom;return C.from(t.get(o)).getOrThunk(()=>{const r=Mf(o,n);return t.set(o,r),r})}}})();class Gt{constructor(e,n){this.node=e,this.rootNode=n,this.current=this.current.bind(this),this.next=this.next.bind(this),this.prev=this.prev.bind(this),this.prev2=this.prev2.bind(this)}current(){return this.node}next(e){return this.node=this.findSibling(this.node,"firstChild","nextSibling",e),this.node}prev(e){return this.node=this.findSibling(this.node,"lastChild","previousSibling",e),this.node}prev2(e){return this.node=this.findPreviousNode(this.node,"lastChild","previousSibling",e),this.node}findSibling(e,n,o,r){let s,a;if(e){if(!r&&e[n])return e[n];if(e!==this.rootNode){if(s=e[o],s)return s;for(a=e.parentNode;a&&a!==this.rootNode;a=a.parentNode)if(s=a[o],s)return s}}}findPreviousNode(e,n,o,r){let s,a,i;if(e){if(s=e[o],this.rootNode&&s===this.rootNode)return;if(s){if(!r)for(i=s[n];i;i=i[n])if(!i[n])return i;return s}if(a=e.parentNode,a&&a!==this.rootNode)return a}}}const Yn=t=>{let e;return n=>(e=e||yl(t,jt),ft(e,Ot(n)))},cx=Yn(["h1","h2","h3","h4","h5","h6"]),fn=Yn(["article","aside","details","div","dt","figcaption","footer","form","fieldset","header","hgroup","html","main","nav","section","summary","body","p","dl","multicol","dd","figure","address","center","blockquote","h1","h2","h3","h4","h5","h6","listing","xmp","pre","plaintext","menu","dir","ul","ol","li","hr","table","tbody","thead","tfoot","th","tr","td","caption"]),zl=t=>$e(t)&&!fn(t),nr=t=>$e(t)&&"br"===Ot(t),Ff=Yn(["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"]),jl=Yn(["ul","ol","dl"]),is=Yn(["li","dd","dt"]),ux=Yn(["thead","tbody","tfoot"]),Ca=Yn(["td","th"]),xa=Yn(["pre","script","textarea","style"]),oe="\xa0",Uf=t=>"\ufeff"===t,re="\ufeff",ka=Uf,Xn=t=>t.replace(/\uFEFF/g,""),mx=et,or=G,rr=t=>(or(t)&&(t=t.parentNode),mx(t)&&t.hasAttribute("data-mce-caret")),sr=t=>or(t)&&ka(t.data),Me=t=>rr(t)||sr(t),zf=t=>t.firstChild!==t.lastChild||!Ut(t.firstChild),Vl=t=>{const e=t.container();return!!G(e)&&(e.data.charAt(t.offset())===re||t.isAtStart()&&sr(e.previousSibling))},Hl=t=>{const e=t.container();return!!G(e)&&(e.data.charAt(t.offset()-1)===re||t.isAtEnd()&&sr(e.nextSibling))},Sa=t=>or(t)&&t.data[0]===re,Ea=t=>or(t)&&t.data[t.data.length-1]===re,$l=t=>t&&t.hasAttribute("data-mce-caret")?((e=>{const n=e.getElementsByTagName("br"),o=n[n.length-1];xo(o)&&o.parentNode.removeChild(o)})(t),t.removeAttribute("data-mce-caret"),t.removeAttribute("data-mce-bogus"),t.removeAttribute("style"),t.removeAttribute("data-mce-style"),t.removeAttribute("_moz_abspos"),t):null,jf=t=>rr(t.startContainer),Vf=Ln,fx=Dt,gx=Ut,px=G,hx=Ge(["script","style","textarea"]),Hf=Ge(["img","input","textarea","hr","iframe","video","audio","object","embed"]),bx=Ge(["table"]),vx=Me,Qe=t=>!vx(t)&&(px(t)?!hx(t.parentNode):Hf(t)||gx(t)||bx(t)||ql(t)),ql=t=>{return!1===(et(e=t)&&"true"===e.getAttribute("unselectable"))&&fx(t);var e},$f=(t,e)=>Qe(t)&&((n,o)=>{for(n=n.parentNode;n&&n!==o;n=n.parentNode){if(ql(n))return!1;if(Vf(n))return!0}return!0})(t,e),yx=/^[ \t\r\n]*$/,ko=t=>yx.test(t),qf=t=>"\n"===t||"\r"===t,Wf=(t,e=4,n=!0,o=!0)=>{const r=(l=e)<=0?"":new Array(l+1).join(" "),s=t.replace(/\t/g,r);var l;return Te(s,(i,l)=>{return-1!==" \f\t\v".indexOf(l)||l===oe?i.pcIsSpace||""===i.str&&n||i.str.length===s.length-1&&o||(c=i.str.length+1)<(d=s).length&&c>=0&&qf(d[c])?{pcIsSpace:!1,str:i.str+oe}:{pcIsSpace:!0,str:i.str+" "}:{pcIsSpace:qf(l),str:i.str+l};var d,c},{pcIsSpace:!1,str:""}).str},_a=(t,e)=>{return Qe(t)&&!1===(o=e,G(n=t)&&ko(n.data)&&!1===((r,s)=>{const a=N(s);return i=N(r),l=X(kt,a),ss(i,"pre,code",l).isSome();var i,l})(n,o))||(n=>et(n)&&"A"===n.nodeName&&!n.hasAttribute("href")&&(n.hasAttribute("name")||n.hasAttribute("id")))(t)||Cx(t);var n,o},Cx=Af("data-mce-bookmark"),xx=Af("data-mce-bogus"),wx=t=>et(t)&&"all"===t.getAttribute("data-mce-bogus"),Yt=(t,e=!0)=>((n,o)=>{let r=0;if(_a(n,n))return!1;{let s=n.firstChild;if(!s)return!0;const a=new Gt(s,n);do{if(o){if(wx(s)){s=a.next(!0);continue}if(xx(s)){s=a.next();continue}}if(Ut(s))r++,s=a.next();else{if(_a(s,n))return!1;s=a.next()}}while(s);return r<=1}})(t.dom,e),Kf=(t,e)=>ut(t)&&(_a(t,e)||zl(N(t))),Gf=t=>"span"===t.nodeName.toLowerCase()&&"bookmark"===t.getAttribute("data-mce-type"),Wl=(t,e,n)=>{const o=n||e;if(et(e)&&Gf(e))return e;const r=e.childNodes;for(let s=r.length-1;s>=0;s--)Wl(t,r[s],o);if(et(e)){const s=e.childNodes;1===s.length&&Gf(s[0])&&e.parentNode.insertBefore(s[0],e)}return Ul(s=e)||Fl(s)||_a(e,o)||(s=>!!et(s)&&s.childNodes.length>0)(e)||((s,a)=>G(s)&&s.data.length>0&&((i,l)=>{const d=new Gt(i,l).prev(!1),c=new Gt(i,l).next(!1),u=Ce(d)||Kf(d,l),f=Ce(c)||Kf(c,l);return u&&f})(s,a))(e,o)||t.remove(e),e;var s},kx=z.makeMap,Na=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Ra=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Sx=/[<>&\"\']/g,Ex=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,_x={128:"\u20ac",130:"\u201a",131:"\u0192",132:"\u201e",133:"\u2026",134:"\u2020",135:"\u2021",136:"\u02c6",137:"\u2030",138:"\u0160",139:"\u2039",140:"\u0152",142:"\u017d",145:"\u2018",146:"\u2019",147:"\u201c",148:"\u201d",149:"\u2022",150:"\u2013",151:"\u2014",152:"\u02dc",153:"\u2122",154:"\u0161",155:"\u203a",156:"\u0153",158:"\u017e",159:"\u0178"},So={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},Nx={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},Yf=(t,e)=>{let n,o,r;const s={};if(t){for(t=t.split(","),e=e||10,n=0;n<t.length;n+=2)o=String.fromCharCode(parseInt(t[n],e)),So[o]||(r="&"+t[n+1]+";",s[o]=r,s[r]=o);return s}},Kl=Yf("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),Xf=(t,e)=>t.replace(e?Na:Ra,n=>So[n]||n),Qf=(t,e)=>t.replace(e?Na:Ra,n=>n.length>1?"&#"+(1024*(n.charCodeAt(0)-55296)+(n.charCodeAt(1)-56320)+65536)+";":So[n]||"&#"+n.charCodeAt(0)+";"),Gl=(t,e,n)=>(n=n||Kl,t.replace(e?Na:Ra,o=>So[o]||n[o]||o)),Qn={encodeRaw:Xf,encodeAllRaw:t=>(""+t).replace(Sx,e=>So[e]||e),encodeNumeric:Qf,encodeNamed:Gl,getEncodeFunc:(t,e)=>{const n=Yf(e)||Kl,o=kx(t.replace(/\+/g,","));return o.named&&o.numeric?(r,s)=>r.replace(s?Na:Ra,a=>void 0!==So[a]?So[a]:void 0!==n[a]?n[a]:a.length>1?"&#"+(1024*(a.charCodeAt(0)-55296)+(a.charCodeAt(1)-56320)+65536)+";":"&#"+a.charCodeAt(0)+";"):o.named?e?(r,s)=>Gl(r,s,n):Gl:o.numeric?Qf:Xf},decode:t=>t.replace(Ex,(e,n)=>n?(n="x"===n.charAt(0).toLowerCase()?parseInt(n.substr(1),16):parseInt(n,10))>65535?(n-=65536,String.fromCharCode(55296+(n>>10),56320+(1023&n))):_x[n]||String.fromCharCode(n):Nx[e]||Kl[e]||(o=>{const r=Ft("div").dom;return r.innerHTML=o,r.textContent||r.innerText||o})(e))},Jn={},Rx={},ar=z.makeMap,ae=z.each,Yl=z.extend,Jf=z.explode,Ax=z.inArray,ee=(t,e)=>(t=z.trim(t))?t.split(e||" "):[],Xl=(t,e)=>{let n;return t&&(n={},"string"==typeof t&&(t={"*":t}),ae(t,(o,r)=>{n[r]=n[r.toUpperCase()]="map"===e?ar(o,/[, ]/):Jf(o,/[, ]/)})),n},Zn=t=>{var e;const n={},o={};let r=[];const s={},a={},i=(A,B,F)=>{let H=t[A];return H?H=ar(H,/[, ]/,ar(H.toUpperCase(),/[, ]/)):(H=Jn[A],H||(H=ar(B," ",ar(B.toUpperCase()," ")),H=Yl(H,F),Jn[A]=H)),H},l=null!==(e=(t=t||{}).schema)&&void 0!==e?e:"html5",d=(A=>{const B={};let F,H,$,q,Y,gt;const W=(Ct,de="",Jt="")=>{const se=ee(Jt),Zt=ee(Ct);let ye=Zt.length;for(;ye--;){const te=ee([F,de].join(" "));B[Zt[ye]]={attributes:yl(te,()=>({})),attributesOrder:te,children:yl(se,K(Rx))}}},st=(Ct,de)=>{const Jt=ee(Ct),se=ee(de);let Zt=Jt.length;for(;Zt--;){const ye=B[Jt[Zt]];for(let te=0,uo=se.length;te<uo;te++)ye.attributes[se[te]]={},ye.attributesOrder.push(se[te])}};return Jn[A]?Jn[A]:(F="id accesskey class dir lang style tabindex title role",H="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",$="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment","html4"!==A&&(F+=" contenteditable contextmenu draggable dropzone hidden spellcheck translate",H+=" article aside details dialog figure main header footer hgroup section nav",$+=" audio canvas command datalist mark meter output picture progress time wbr video ruby bdi keygen"),"html5-strict"!==A&&(F+=" xml:lang",gt="acronym applet basefont big font strike tt",$=[$,gt].join(" "),ae(ee(gt),Ct=>{W(Ct,"",$)}),Y="center dir isindex noframes",H=[H,Y].join(" "),q=[H,$].join(" "),ae(ee(Y),Ct=>{W(Ct,"",q)})),q=q||[H,$].join(" "),W("html","manifest","head body"),W("head","","base command link meta noscript script style title"),W("title hr noscript br"),W("base","href target"),W("link","href rel media hreflang type sizes hreflang"),W("meta","name http-equiv content charset"),W("style","media type scoped"),W("script","src async defer type charset"),W("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",q),W("address dt dd div caption","",q),W("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",$),W("blockquote","cite",q),W("ol","reversed start type","li"),W("ul","","li"),W("li","value",q),W("dl","","dt dd"),W("a","href target rel media hreflang type",$),W("q","cite",$),W("ins del","cite datetime",q),W("img","src sizes srcset alt usemap ismap width height"),W("iframe","src name width height",q),W("embed","src type width height"),W("object","data type typemustmatch name usemap form width height",[q,"param"].join(" ")),W("param","name value"),W("map","name",[q,"area"].join(" ")),W("area","alt coords shape href target rel media hreflang type"),W("table","border","caption colgroup thead tfoot tbody tr"+("html4"===A?" col":"")),W("colgroup","span","col"),W("col","span"),W("tbody thead tfoot","","tr"),W("tr","","td th"),W("td","colspan rowspan headers",q),W("th","colspan rowspan headers scope abbr",q),W("form","accept-charset action autocomplete enctype method name novalidate target",q),W("fieldset","disabled form name",[q,"legend"].join(" ")),W("label","form for",$),W("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),W("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value","html4"===A?q:$),W("select","disabled form multiple name required size","option optgroup"),W("optgroup","disabled label","option"),W("option","disabled label selected value"),W("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),W("menu","type label",[q,"li"].join(" ")),W("noscript","",q),"html4"!==A&&(W("wbr"),W("ruby","",[$,"rt rp"].join(" ")),W("figcaption","",q),W("mark rt rp summary bdi","",$),W("canvas","width height",q),W("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[q,"track source"].join(" ")),W("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[q,"track source"].join(" ")),W("picture","","img source"),W("source","src srcset type media sizes"),W("track","kind src srclang label default"),W("datalist","",[$,"option"].join(" ")),W("article section nav aside main header footer","",q),W("hgroup","","h1 h2 h3 h4 h5 h6"),W("figure","",[q,"figcaption"].join(" ")),W("time","datetime",$),W("dialog","open",q),W("command","type label icon disabled checked radiogroup command"),W("output","for form name",$),W("progress","value max",$),W("meter","value min max low high optimum",$),W("details","open",[q,"summary"].join(" ")),W("keygen","autofocus challenge disabled form keytype name")),"html5-strict"!==A&&(st("script","language xml:space"),st("style","xml:space"),st("object","declare classid code codebase codetype archive standby align border hspace vspace"),st("embed","align name hspace vspace"),st("param","valuetype type"),st("a","charset name rev shape coords"),st("br","clear"),st("applet","codebase archive code object alt name width height align hspace vspace"),st("img","name longdesc align border hspace vspace"),st("iframe","longdesc frameborder marginwidth marginheight scrolling align"),st("font basefont","size color face"),st("input","usemap align"),st("select"),st("textarea"),st("h1 h2 h3 h4 h5 h6 div p legend caption","align"),st("ul","type compact"),st("li","type"),st("ol dl menu dir","compact"),st("pre","width xml:space"),st("hr","align noshade size width"),st("isindex","prompt"),st("table","summary width frame rules cellspacing cellpadding align bgcolor"),st("col","width align char charoff valign"),st("colgroup","width align char charoff valign"),st("thead","align char charoff valign"),st("tr","align char charoff valign bgcolor"),st("th","axis align char charoff valign nowrap bgcolor width height"),st("form","accept"),st("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),st("tfoot","align char charoff valign"),st("tbody","align char charoff valign"),st("area","nohref"),st("body","background bgcolor text link vlink alink")),"html4"!==A&&(st("input button select textarea","autofocus"),st("input textarea","placeholder"),st("a","download"),st("link script img","crossorigin"),st("img","loading"),st("iframe","sandbox seamless allowfullscreen loading")),"html4"!==A&&j([B.video,B.audio],Ct=>{delete Ct.children.audio,delete Ct.children.video}),ae(ee("a form meter progress dfn"),Ct=>{B[Ct]&&delete B[Ct].children[Ct]}),delete B.caption.children.table,delete B.script,Jn[A]=B,B)})(l);!1===t.verify_html&&(t.valid_elements="*[*]");const c=Xl(t.valid_styles),u=Xl(t.invalid_styles,"map"),f=Xl(t.valid_classes,"map"),m=i("whitespace_elements","pre script noscript style textarea video audio iframe object code"),g=i("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),b=i("void_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),p=i("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls allowfullscreen"),h="td th iframe video audio object script code",v=i("non_empty_elements",h+" pre",b),y=i("move_caret_before_on_enter_elements",h+" table",b),x=i("text_block_elements","h1 h2 h3 h4 h5 h6 p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),w=i("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary",x),S=i("text_inline_elements","span strong b em i font strike u var cite dfn code mark q sup sub samp");ae("script noscript iframe noframes noembed title style textarea xmp plaintext".split(" "),A=>{a[A]=new RegExp("</"+A+"[^>]*>","gi")});const k=A=>new RegExp("^"+A.replace(/([?+*])/g,".$1")+"$"),T=A=>{let B,F,H,$,q,Y,gt,W,st,Ct,de,Jt,se,Zt,ye,te,uo,jn;const ll=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)])?$/,Zs=/^([!\-])?(\w+[\\:]:\w+|[^=~<]+)?(?:([=~<])(.*))?$/,ta=/[*?+]/;if(A){const Ir=ee(A,",");for(n["@"]&&(te=n["@"].attributes,uo=n["@"].attributesOrder),B=0,F=Ir.length;B<F;B++)if(q=ll.exec(Ir[B]),q){if(Zt=q[1],st=q[2],ye=q[3],W=q[5],Jt={},se=[],Y={attributes:Jt,attributesOrder:se},"#"===Zt&&(Y.paddEmpty=!0),"-"===Zt&&(Y.removeEmpty=!0),"!"===q[4]&&(Y.removeEmptyAttrs=!0),te&&(At(te,(ea,Rn)=>{Jt[Rn]=ea}),se.push.apply(se,uo)),W)for(W=ee(W,"|"),H=0,$=W.length;H<$;H++)if(q=Zs.exec(W[H]),q){if(gt={},de=q[1],Ct=q[2].replace(/[\\:]:/g,":"),Zt=q[3],jn=q[4],"!"===de&&(Y.attributesRequired=Y.attributesRequired||[],Y.attributesRequired.push(Ct),gt.required=!0),"-"===de){delete Jt[Ct],se.splice(Ax(se,Ct),1);continue}Zt&&("="===Zt&&(Y.attributesDefault=Y.attributesDefault||[],Y.attributesDefault.push({name:Ct,value:jn}),gt.defaultValue=jn),"~"===Zt&&(Y.attributesForced=Y.attributesForced||[],Y.attributesForced.push({name:Ct,value:jn}),gt.forcedValue=jn),"<"===Zt&&(gt.validValues=ar(jn,"?"))),ta.test(Ct)?(Y.attributePatterns=Y.attributePatterns||[],gt.pattern=k(Ct),Y.attributePatterns.push(gt)):(Jt[Ct]||se.push(Ct),Jt[Ct]=gt)}te||"@"!==st||(te=Jt,uo=se),ye&&(Y.outputName=st,n[ye]=Y),ta.test(st)?(Y.pattern=k(st),r.push(Y)):n[st]=Y}}},O=A=>{r=[],j(Xe(n),B=>{delete n[B]}),T(A),ae(d,(B,F)=>{o[F]=B.children})},I=A=>{const B=/^(~)?(.+)$/;A&&(Jn.text_block_elements=Jn.block_elements=null,ae(ee(A,","),F=>{const H=B.exec(F),$="~"===H[1],q=$?"span":"div",Y=H[2];if(o[Y]=o[q],s[Y]=q,$||(w[Y.toUpperCase()]={},w[Y]={}),!n[Y]){let gt=n[q];gt=Yl({},gt),delete gt.removeEmptyAttrs,delete gt.removeEmpty,n[Y]=gt}ae(o,(gt,W)=>{gt[q]&&(o[W]=gt=Yl({},o[W]),gt[Y]=gt[q])})}))},R=A=>{const B=/^([+\-]?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)\[([^\]]+)]$/;Jn[l]=null,A&&ae(ee(A,","),F=>{const H=B.exec(F);let $,q;H&&(q=H[1],$=q?o[H[2]]:o[H[2]]={"#comment":{}},$=o[H[2]],ae(ee(H[3],"|"),Y=>{"-"===q?delete $[Y]:$[Y]={}}))})},P=A=>{let B,F=n[A];if(F)return F;for(B=r.length;B--;)if(F=r[B],F.pattern.test(A))return F};t.valid_elements?O(t.valid_elements):(ae(d,(A,B)=>{n[B]={attributes:A.attributes,attributesOrder:A.attributesOrder},o[B]=A.children}),ae(ee("strong/b em/i"),A=>{const B=ee(A,"/");n[B[1]].outputName=B[0]}),ae(ee("ol ul sub sup blockquote span font a table tbody strong em b i"),A=>{n[A]&&(n[A].removeEmpty=!0)}),ae(ee("p h1 h2 h3 h4 h5 h6 th td pre div address caption li"),A=>{n[A].paddEmpty=!0}),ae(ee("span"),A=>{n[A].removeEmptyAttrs=!0})),I(t.custom_elements),R(t.valid_children),T(t.extended_valid_elements),R("+ol[ul|ol],+ul[ul|ol]"),ae({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},(A,B)=>{n[B]&&(n[B].parentsRequired=ee(A))}),t.invalid_elements&&ae(Jf(t.invalid_elements),A=>{n[A]&&delete n[A]}),P("span")||T("span[!data-mce-type|*]");const L=K(c),U=K(u),V=K(f),nt=K(p),ct=K(w),lt=K(x),bt=K(S),Et=K(Object.seal(b)),dt=K(g),ht=K(v),_t=K(y),J=K(m),E=K(Object.seal(a)),_=K(s);return{type:l,children:o,elements:n,getValidStyles:L,getValidClasses:V,getBlockElements:ct,getInvalidStyles:U,getVoidElements:Et,getTextBlockElements:lt,getTextInlineElements:bt,getBoolAttrs:nt,getElementRule:P,getSelfClosingElements:dt,getNonEmptyElements:ht,getMoveCaretBeforeOnEnterElements:_t,getWhitespaceElements:J,getSpecialElements:E,isValidChild:(A,B)=>{const F=o[A.toLowerCase()];return!(!F||!F[B.toLowerCase()])},isValid:(A,B)=>{let F,H;const $=P(A);if($){if(!B||$.attributes[B])return!0;if(F=$.attributePatterns,F)for(H=F.length;H--;)if(F[H].pattern.test(B))return!0}return!1},getCustomElements:_,addValidElements:T,setValidElements:O,addCustomElements:I,addValidChildren:R}},Ql=(t,e)=>{const n=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,o=/\s*([^:]+):\s*([^;]+);?/g,r=/\s+$/;let s;const a={};let i,l;t=t||{},e&&(i=e.getValidStyles(),l=e.getInvalidStyles());const d="\\\" \\' \\; \\: ; : \ufeff".split(" ");for(s=0;s<d.length;s++)a[d[s]]="\ufeff"+s,a["\ufeff"+s]=d[s];const c={parse:u=>{const f={};let m,g,b,p;const h=t.url_converter,v=t.url_converter_scope||c,y=(L,U,V)=>{const nt=f[L+"-top"+U];if(!nt)return;const ct=f[L+"-right"+U];if(!ct)return;const lt=f[L+"-bottom"+U];if(!lt)return;const bt=f[L+"-left"+U];if(!bt)return;const Et=[nt,ct,lt,bt];for(s=Et.length-1;s--&&Et[s]===Et[s+1];);s>-1&&V||(f[L+U]=-1===s?Et[0]:Et.join(" "),delete f[L+"-top"+U],delete f[L+"-right"+U],delete f[L+"-bottom"+U],delete f[L+"-left"+U])},x=L=>{let U,V=f[L];if(V){for(V=V.split(" "),U=V.length;U--;)if(V[U]!==V[0])return!1;return f[L]=V[0],!0}},w=L=>(p=!0,a[L]),S=(L,U)=>(p&&(L=L.replace(/\uFEFF[0-9]/g,V=>a[V])),U||(L=L.replace(/\\([\'\";:])/g,"$1")),L),k=L=>String.fromCharCode(parseInt(L.slice(1),16)),T=L=>L.replace(/\\[0-9a-f]+/gi,k),O=(L,U,V,nt,ct,lt)=>{if(ct=ct||lt)return"'"+(ct=S(ct)).replace(/\'/g,"\\'")+"'";if(U=S(U||V||nt),!t.allow_script_urls){const bt=U.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(bt)||!t.allow_svg_data_urls&&/^data:image\/svg/i.test(bt))return""}return h&&(U=h.call(v,U,"style")),"url('"+U.replace(/\'/g,"\\'")+"')"};if(u){for(u=(u=u.replace(/[\u0000-\u001F]/g,"")).replace(/\\[\"\';:\uFEFF]/g,w).replace(/\"[^\"]+\"|\'[^\']+\'/g,L=>L.replace(/[;:]/g,w));m=o.exec(u);)if(o.lastIndex=m.index+m[0].length,g=m[1].replace(r,"").toLowerCase(),b=m[2].replace(r,""),g&&b){if(g=T(g),b=T(b),-1!==g.indexOf("\ufeff")||-1!==g.indexOf('"')||!t.allow_script_urls&&("behavior"===g||/expression\s*\(|\/\*|\*\//.test(b)))continue;"font-weight"===g&&"700"===b?b="bold":"color"!==g&&"background-color"!==g||(b=b.toLowerCase()),b=b.replace(n,O),f[g]=p?S(b,!0):b}y("border","",!0),y("border","-width"),y("border","-color"),y("border","-style"),y("padding",""),y("margin",""),R="border-style",P="border-color",x(I="border-width")&&x(R)&&x(P)&&(f.border=f[I]+" "+f[R]+" "+f[P],delete f[I],delete f[R],delete f[P]),"medium none"===f.border&&delete f.border,"none"===f["border-image"]&&delete f["border-image"]}var I,R,P;return f},serialize:(u,f)=>{let m="";const g=b=>{let p;const h=i[b];if(h)for(let v=0,y=h.length;v<y;v++)p=u[b=h[v]],p&&(m+=(m.length>0?" ":"")+b+": "+p+";")};return f&&i?(g("*"),g(f)):At(u,(b,p)=>{!b||l&&!((h,v)=>{let y=l["*"];return!(y&&y[h]||(y=l[v],y&&y[h]))})(p,f)||(m+=(m.length>0?" ":"")+p+": "+b+";")}),m}};return c},Ox={keyLocation:!0,layerX:!0,layerY:!0,returnValue:!0,webkitMovementX:!0,webkitMovementY:!0,keyIdentifier:!0,mozPressure:!0},Zf=(t,e)=>{const n=null!=e?e:{};for(const o in t)ft(Ox,o)||(n[o]=t[o]);return ut(n.composedPath)&&(n.composedPath=()=>t.composedPath()),n},Jl=(t,e,n,o)=>{var r;const s=Zf(e,o);return s.type=t,Oe(s.target)&&(s.target=null!==(r=s.srcElement)&&void 0!==r?r:n),(Oe((a=e).preventDefault)||(i=a)instanceof Event||xt(i.initEvent))&&(s.preventDefault=()=>{s.defaultPrevented=!0,s.isDefaultPrevented=jt,xt(e.preventDefault)&&e.preventDefault()},s.stopPropagation=()=>{s.cancelBubble=!0,s.isPropagationStopped=jt,xt(e.stopPropagation)&&e.stopPropagation()},s.stopImmediatePropagation=()=>{s.isImmediatePropagationStopped=jt,s.stopPropagation()},(a=>a.isDefaultPrevented===jt||a.isDefaultPrevented===Tt)(s)||(s.isDefaultPrevented=!0===s.defaultPrevented?jt:Tt,s.isPropagationStopped=!0===s.cancelBubble?jt:Tt,s.isImmediatePropagationStopped=Tt)),s;var a,i},Tx=/^(?:mouse|contextmenu)|click/,Zl=(t,e,n,o)=>{t.addEventListener?t.addEventListener(e,n,o||!1):t.attachEvent&&t.attachEvent("on"+e,n)},Aa=(t,e,n,o)=>{t.removeEventListener?t.removeEventListener(e,n,o||!1):t.detachEvent&&t.detachEvent("on"+e,n)},ir=(t,e)=>{const n=Jl(t.type,t,document,e);if(ut(o=t)&&Tx.test(o.type)&&Ce(t.pageX)&&!Ce(t.clientX)){const o=n.target.ownerDocument||document,r=o.documentElement,s=o.body,a=n;a.pageX=t.clientX+(r&&r.scrollLeft||s&&s.scrollLeft||0)-(r&&r.clientLeft||s&&s.clientLeft||0),a.pageY=t.clientY+(r&&r.scrollTop||s&&s.scrollTop||0)-(r&&r.clientTop||s&&s.clientTop||0)}var o;return n},Bx=(t,e,n)=>{const o=t.document,r={type:"ready"};if(n.domLoaded)return void e(r);const s=()=>{Aa(t,"DOMContentLoaded",s),Aa(t,"load",s),n.domLoaded||(n.domLoaded=!0,e(r)),t=null};"complete"===o.readyState||"interactive"===o.readyState&&o.body?s():Zl(t,"DOMContentLoaded",s),n.domLoaded||Zl(t,"load",s)};class Eo{constructor(){this.domLoaded=!1,this.events={},this.count=1,this.expando="mce-data-"+(+new Date).toString(32),this.hasMouseEnterLeave="onmouseenter"in document.documentElement,this.hasFocusIn="onfocusin"in document.documentElement,this.count=1}bind(e,n,o,r){const s=this;let a,i,l,d,c,u,f;const m=window,g=p=>{s.executeHandlers(ir(p||m.event),a)};if(!e||3===e.nodeType||8===e.nodeType)return;e[s.expando]?a=e[s.expando]:(a=s.count++,e[s.expando]=a,s.events[a]={}),r=r||e;const b=n.split(" ");for(l=b.length;l--;)d=b[l],u=g,c=f=!1,"DOMContentLoaded"===d&&(d="ready"),s.domLoaded&&"ready"===d&&"complete"===e.readyState?o.call(r,ir({type:d})):(s.hasMouseEnterLeave||(c=s.mouseEnterLeave[d],c&&(u=p=>{const h=p.currentTarget;let v=p.relatedTarget;if(v&&h.contains)v=h.contains(v);else for(;v&&v!==h;)v=v.parentNode;v||((p=ir(p||m.event)).type="mouseout"===p.type?"mouseleave":"mouseenter",p.target=h,s.executeHandlers(p,a))})),s.hasFocusIn||"focusin"!==d&&"focusout"!==d||(f=!0,c="focusin"===d?"focus":"blur",u=p=>{(p=ir(p||m.event)).type="focus"===p.type?"focusin":"focusout",s.executeHandlers(p,a)}),i=s.events[a][d],i?"ready"===d&&s.domLoaded?o(ir({type:d})):i.push({func:o,scope:r}):(s.events[a][d]=i=[{func:o,scope:r}],i.fakeName=c,i.capture=f,i.nativeHandler=u,"ready"===d?Bx(e,u,s):Zl(e,c||d,u,f)));return e=i=null,o}unbind(e,n,o){let r,s,a,i,l;if(!e||3===e.nodeType||8===e.nodeType)return this;const d=e[this.expando];if(d){if(l=this.events[d],n){const c=n.split(" ");for(s=c.length;s--;)if(i=c[s],r=l[i],r){if(o)for(a=r.length;a--;)if(r[a].func===o){const u=r.nativeHandler,f=r.fakeName,m=r.capture;r=r.slice(0,a).concat(r.slice(a+1)),r.nativeHandler=u,r.fakeName=f,r.capture=m,l[i]=r}o&&0!==r.length||(delete l[i],Aa(e,r.fakeName||i,r.nativeHandler,r.capture))}}else At(l,(c,u)=>{Aa(e,c.fakeName||u,c.nativeHandler,c.capture)}),l={};for(i in l)if(ft(l,i))return this;delete this.events[d];try{delete e[this.expando]}catch(c){e[this.expando]=null}}return this}fire(e,n,o){return this.dispatch(e,n,o)}dispatch(e,n,o){let r;if(!e||3===e.nodeType||8===e.nodeType)return this;const s=ir({type:n,target:e},o);do{r=e[this.expando],r&&this.executeHandlers(s,r),e=e.parentNode||e.ownerDocument||e.defaultView||e.parentWindow}while(e&&!s.isPropagationStopped());return this}clean(e){let n,o;if(!e||3===e.nodeType||8===e.nodeType)return this;if(e[this.expando]&&this.unbind(e),e.getElementsByTagName||(e=e.document),e&&e.getElementsByTagName)for(this.unbind(e),o=e.getElementsByTagName("*"),n=o.length;n--;)(e=o[n])[this.expando]&&this.unbind(e);return this}destroy(){this.events={}}cancel(e){return e&&(e.preventDefault(),e.stopImmediatePropagation()),!1}executeHandlers(e,n){const o=this.events[n],r=o&&o[e.type];if(r)for(let s=0,a=r.length;s<a;s++){const i=r[s];if(i&&!1===i.func.call(i.scope,e)&&e.preventDefault(),e.isImmediatePropagationStopped())return}}}Eo.Event=new Eo;const td=z.each,Dx=z.grep,ed="data-mce-style",ls=(t,e,n)=>{Oe(n)||""===n?qe(t,e):ge(t,e,n)},lr=(t,e)=>{let n,o,r=0;if(t)for(n=t.nodeType,t=t.previousSibling;t;t=t.previousSibling)o=t.nodeType,(!e||3!==o||o!==n&&t.nodeValue.length)&&(r++,n=o);return r},Px=z.makeMap("fill-opacity font-weight line-height opacity orphans widows z-index zoom"," "),tg=t=>t.replace(/[A-Z]/g,e=>"-"+e.toLowerCase()),St=(t,e={})=>{const n={},o=window,r={};let s=0;const a=If.forElement(N(t),{contentCssCors:e.contentCssCors,referrerPolicy:e.referrerPolicy}),i=[],l=e.schema?e.schema:Zn({}),d=Ql({url_converter:e.url_converter,url_converter_scope:e.url_converter_scope},e.schema),c=e.ownEvents?new Eo:Eo.Event,u=l.getBlockElements(),f=E=>E&&t&&at(E)?t.getElementById(E):E,m=E=>{const _=f(E);return ut(_)?N(_):null},g=(E,_,A)=>{let B;const F=m(E);if(ut(F)&&$e(F)){const H=J[_];B=H&&H.get?H.get(F.dom,_):Pe(F,_)}return ut(B)?B:null!=A?A:""},b=E=>{const _=f(E);return Oe(_)?[]:_.attributes},p=(E,_,A)=>{O(E,B=>{if(et(B)){const F=N(B);""===A&&(A=null);const H=Pe(F,_),$=J[_];$&&$.set?$.set(F.dom,A,_):ls(F,_,A),H!==A&&e.onSetAttrib&&e.onSetAttrib({attrElm:F,attrName:_,attrValue:A})}})},h=()=>e.root_element||t.body,v=(E,_)=>((A,B,F)=>{let H=0,$=0;const q=A.ownerDocument;if(F=F||A,B){if(F===A&&B.getBoundingClientRect&&"static"===un(N(A),"position")){const gt=B.getBoundingClientRect();return H=gt.left+(q.documentElement.scrollLeft||A.scrollLeft)-q.documentElement.clientLeft,$=gt.top+(q.documentElement.scrollTop||A.scrollTop)-q.documentElement.clientTop,{x:H,y:$}}let Y=B;for(;Y&&Y!==F&&Y.nodeType&&!Lf(Y,F);)H+=Y.offsetLeft||0,$+=Y.offsetTop||0,Y=Y.offsetParent;for(Y=B.parentNode;Y&&Y!==F&&Y.nodeType&&!Lf(Y,F);)H-=Y.scrollLeft||0,$-=Y.scrollTop||0,Y=Y.parentNode;$+=(gt=N(B),dx.isFirefox()&&"table"===Ot(gt)?Df(ne(gt)).filter(W=>"caption"===Ot(W)).bind(W=>Df(uf(W)).map(st=>st.dom.offsetTop<=W.dom.offsetTop?-W.dom.offsetHeight:0)).getOr(0):0)}var gt;return{x:H,y:$}})(t.body,f(E),_),y=(E,_,A)=>{const B=(H,$)=>at(H)?H:an(H)?ft(Px,$)?H+"":H+"px":Wr(H,B),F=(H,$,q)=>{const Y=tg($);Oe(q)||""===q?xf(H,Y):vf(H,Y,B(q,Y))};O(E,H=>{const $=N(H);at(_)?F($,_,A):At(_,(q,Y)=>{F($,Y,q)}),e.update_styles&&((t,e)=>{const n=Pe(e,"style"),o=t.serialize(t.parse(n),Ot(e));ls(e,ed,o)})(d,$)})},x=(E,_,A)=>{const B=f(E);if(!Oe(B)&&et(B))return A?un(N(B),tg(_)):("float"===(_=_.replace(/-(\D)/g,(F,H)=>H.toUpperCase()))&&(_="cssFloat"),B.style?B.style[_]:void 0)},w=E=>{let _,A;const B=f(E);return _=x(B,"width"),A=x(B,"height"),-1===_.indexOf("px")&&(_=0),-1===A.indexOf("px")&&(A=0),{w:parseInt(_,10)||B.offsetWidth||B.clientWidth,h:parseInt(A,10)||B.offsetHeight||B.clientHeight}},S=(E,_)=>{if(!E)return!1;const A=Wt(E)?E:[E];return It(A,B=>Bn(N(B),_))},k=(E,_,A,B)=>{const F=[];let H,$=f(E);for(B=void 0===B,A=A||("BODY"!==h().nodeName?h().parentNode:null),at(_)&&(H=_,_="*"===_?et:q=>S(q,H));$&&!($===A||Oe($.nodeType)||Fl($)||Ul($));){if(!_||_($)){if(!B)return[$];F.push($)}$=$.parentNode}return B?F:null},T=(E,_,A)=>{let B=_;if(E)for(at(_)&&(B=F=>S(F,_)),E=E[A];E;E=E[A])if(xt(B)&&B(E))return E;return null},O=function(E,_,A){const B=null!=A?A:this,F=at(E)?f(E):E;if(!F)return!1;if(Wt(F)&&(F.length||0===F.length)){const H=[];return td(F,($,q)=>{$&&H.push(_.call(B,at($)?f($):$,q))}),H}return _.call(B,F)},I=(E,_)=>{O(E,A=>{At(_,(B,F)=>{p(A,F,B)})})},R=(E,_)=>{O(E,A=>{const B=N(A);Ll(B,_)})},P=(E,_,A,B,F)=>O(E,H=>{const $=at(_)?t.createElement(_):_;return ut(A)&&I($,A),B&&(!at(B)&&B.nodeType?$.appendChild(B):at(B)&&R($,B)),F?$:H.appendChild($)}),L=(E,_,A)=>P(t.createElement(E),E,_,A,!0),U=Qn.encodeAllRaw,V=(E,_)=>O(E,A=>{const B=N(A);return _&&j(ne(B),F=>{Le(F)&&0===F.dom.length?Mt(F):Ke(B,F)}),Mt(B),B.dom}),nt=(E,_,A)=>{O(E,B=>{if(et(B)){const F=N(B),H=_.split(" ");j(H,$=>{var q,Y,W,st;ut(A)?(A?Qr:rf)(F,$):(Y=$,Xr(q=F)?q.dom.classList.toggle(Y):(st=Y,Pt(tf(W=q),st)?nf(W,st):ef(W,st)),of(q))})}})},ct=(E,_,A)=>O(_,B=>(Wt(B)&&(E=E.cloneNode(!0)),A&&td(Dx(B.childNodes),F=>{E.appendChild(F)}),B.parentNode.replaceChild(E,B))),lt=E=>{if(et(E)){const _="a"===E.nodeName.toLowerCase()&&!g(E,"href")&&g(E,"id");if(g(E,"name")||g(E,"data-mce-bookmark")||_)return!0}return!1},bt=()=>t.createRange(),Et=(E,_,A,B)=>{if(Wt(E)){let F=E.length;const H=[];for(;F--;)H[F]=Et(E[F],_,A,B);return H}return!e.collect||E!==t&&E!==o||i.push([E,_,A,B]),c.bind(E,_,A,B||_t)},dt=(E,_,A)=>{if(Wt(E)){let B=E.length;const F=[];for(;B--;)F[B]=dt(E[B],_,A);return F}if(i.length>0&&(E===t||E===o)){let B=i.length;for(;B--;){const F=i[B];E!==F[0]||_&&_!==F[1]||A&&A!==F[2]||c.unbind(F[0],F[1],F[2])}}return c.unbind(E,_,A)},ht=E=>{if(E&&et(E)){const _=E.getAttribute("data-mce-contenteditable");return _&&"inherit"!==_?_:"inherit"!==E.contentEditable?E.contentEditable:null}return null},_t={doc:t,settings:e,win:o,files:r,stdMode:!0,boxModel:!0,styleSheetLoader:a,boundEvents:i,styles:d,schema:l,events:c,isBlock:E=>at(E)?ft(u,E):et(E)&&ft(u,E.nodeName),root:null,clone:(E,_)=>E.cloneNode(_),getRoot:h,getViewPort:E=>{const _=Rf(E);return{x:_.x,y:_.y,w:_.width,h:_.height}},getRect:E=>{const _=f(E),A=v(_),B=w(_);return{x:A.x,y:A.y,w:B.w,h:B.h}},getSize:w,getParent:(E,_,A)=>{const B=k(E,_,A,!1);return B&&B.length>0?B[0]:null},getParents:k,get:f,getNext:(E,_)=>T(E,_,"nextSibling"),getPrev:(E,_)=>T(E,_,"previousSibling"),select:(E,_)=>{var A,B;const F=null!==(B=null!==(A=f(_))&&void 0!==A?A:e.root_element)&&void 0!==B?B:t;return xe(F.querySelectorAll(E))},is:S,add:P,create:L,createHTML:(E,_,A="")=>{let B,F="";for(B in F+="<"+E,_)Yo(_,B)&&(F+=" "+B+'="'+U(_[B])+'"');return la(A)&&ft(l.getVoidElements(),E)?F+" />":F+">"+A+"</"+E+">"},createFragment:E=>{let _;const A=t.createElement("div"),B=t.createDocumentFragment();for(B.appendChild(A),E&&(A.innerHTML=E);_=A.firstChild;)B.appendChild(_);return B.removeChild(A),B},remove:V,setStyle:y,getStyle:x,setStyles:(E,_)=>{y(E,_)},removeAllAttribs:E=>O(E,_=>{const A=_.attributes;for(let B=A.length-1;B>=0;B--)_.removeAttributeNode(A.item(B))}),setAttrib:p,setAttribs:I,getAttrib:g,getPos:v,parseStyle:E=>d.parse(E),serializeStyle:(E,_)=>d.serialize(E,_),addStyle:E=>{let _,A;if(_t!==St.DOM&&t===document){if(n[E])return;n[E]=!0}A=t.getElementById("mceDefaultStyles"),A||(A=t.createElement("style"),A.id="mceDefaultStyles",A.type="text/css",_=t.getElementsByTagName("head")[0],_.firstChild?_.insertBefore(A,_.firstChild):_.appendChild(A)),A.styleSheet?A.styleSheet.cssText+=E:A.appendChild(t.createTextNode(E))},loadCSS:E=>{E||(E=""),j(E.split(","),_=>{r[_]=!0,a.load(_).catch(pt)})},addClass:(E,_)=>{nt(E,_,!0)},removeClass:(E,_)=>{nt(E,_,!1)},hasClass:(E,_)=>{const A=m(E),B=_.split(" ");return Ko(B,F=>Tl(A,F))},toggleClass:nt,show:E=>{O(E,_=>xf(N(_),"display"))},hide:E=>{O(E,_=>vf(N(_),"display","none"))},isHidden:E=>{const _=m(E);return Jo(ga(_,"display"),"none")},uniqueId:E=>(E||"mce_")+s++,setHTML:R,getOuterHTML:E=>{const _=m(E);return et(_.dom)?_.dom.outerHTML:(A=>{const B=Ft("div"),F=N(A.dom.cloneNode(!0));return Vt(B,F),kf(B)})(_)},setOuterHTML:(E,_)=>{O(E,A=>{et(A)&&(A.outerHTML=_)})},decode:Qn.decode,encode:U,insertAfter:(E,_)=>{const A=f(_);return O(E,B=>{const F=A.parentNode,H=A.nextSibling;return H?F.insertBefore(B,H):F.appendChild(B),B})},replace:ct,rename:(E,_)=>{let A;return E.nodeName!==_.toUpperCase()&&(A=L(_),td(b(E),B=>{p(A,B.nodeName,g(E,B.nodeName))}),ct(A,E,!0)),A||E},findCommonAncestor:(E,_)=>{let A,B=E;for(;B;){for(A=_;A&&B!==A;)A=A.parentNode;if(B===A)break;B=B.parentNode}return!B&&E.ownerDocument?E.ownerDocument.documentElement:B},run:O,getAttribs:b,isEmpty:(E,_)=>{let A,B,F=0;if(lt(E))return!1;if(E=E.firstChild){const H=new Gt(E,E.parentNode),$=l?l.getWhitespaceElements():{};_=_||(l?l.getNonEmptyElements():null);do{if(A=E.nodeType,et(E)){const q=E.getAttribute("data-mce-bogus");if(q){E=H.next("all"===q);continue}if(B=E.nodeName.toLowerCase(),_&&_[B]){if("br"===B){F++,E=H.next();continue}return!1}if(lt(E))return!1}if(8===A||3===A&&!ko(E.nodeValue)||3===A&&E.parentNode&&$[E.parentNode.nodeName]&&ko(E.nodeValue))return!1;E=H.next()}while(E)}return F<=1},createRng:bt,nodeIndex:lr,split:(E,_,A)=>{let B,F,H,$=bt();if(E&&_)return $.setStart(E.parentNode,lr(E)),$.setEnd(_.parentNode,lr(_)),B=$.extractContents(),$=bt(),$.setStart(_.parentNode,lr(_)+1),$.setEnd(E.parentNode,lr(E)+1),F=$.extractContents(),H=E.parentNode,H.insertBefore(Wl(_t,B),E),H.insertBefore(A||_,E),H.insertBefore(Wl(_t,F),E),V(E),A||_},bind:Et,unbind:dt,fire:(E,_,A)=>c.dispatch(E,_,A),dispatch:(E,_,A)=>c.dispatch(E,_,A),getContentEditable:ht,getContentEditableParent:E=>{const _=h();let A=null;for(;E&&E!==_&&(A=ht(E),null===A);E=E.parentNode);return A},destroy:()=>{if(i.length>0){let E=i.length;for(;E--;){const _=i[E];c.unbind(_[0],_[1],_[2])}}At(r,(E,_)=>{a.unload(_),delete r[_]})},isChildOf:(E,_)=>E===_||_.contains(E),dumpRng:E=>"startContainer: "+E.startContainer.nodeName+", startOffset: "+E.startOffset+", endContainer: "+E.endContainer.nodeName+", endOffset: "+E.endOffset},J=((E,_,A)=>{const B=_.keep_values,H={style:{set:($,q)=>{const Y=N($);Ae(q)?fa(Y,q):(B&&ls(Y,ed,q),qe(Y,"style"),at(q)&&fa(Y,E.parse(q)))},get:$=>{const q=N($),Y=Pe(q,ed)||Pe(q,"style");return E.serialize(E.parse(Y),Ot(q))}}};return B&&(H.href=H.src={set:($,q,Y)=>{const gt=N($);xt(_.url_converter)&&ut(q)&&(q=_.url_converter.call(_.url_converter_scope||A(),q,Y,$[0])),ls(gt,"data-mce-"+Y,q),ls(gt,Y,q)},get:($,q)=>{const Y=N($);return Pe(Y,"data-mce-"+q)||Pe(Y,q)}}),H})(d,e,K(_t));return _t};St.DOM=St(document),St.nodeIndex=lr;const Mx=St.DOM;class Pn{constructor(e={}){this.states={},this.queue=[],this.scriptLoadedCallbacks={},this.queueLoadedCallbacks=[],this.loading=!1,this.settings=e}_setReferrerPolicy(e){this.settings.referrerPolicy=e}loadScript(e){return new Promise((n,o)=>{const r=Mx;let s;const a=()=>{r.remove(i),s&&(s.onerror=s.onload=s=null)},i=r.uniqueId();s=document.createElement("script"),s.id=i,s.type="text/javascript",s.src=z._addCacheSuffix(e),this.settings.referrerPolicy&&r.setAttrib(s,"referrerpolicy",this.settings.referrerPolicy),s.onload=()=>{a(),n()},s.onerror=()=>{a(),o("Failed to load script: "+e)},(document.getElementsByTagName("head")[0]||document.body).appendChild(s)})}isDone(e){return 2===this.states[e]}markDone(e){this.states[e]=2}add(e){const n=this;return n.queue.push(e),void 0===n.states[e]&&(n.states[e]=0),new Promise((o,r)=>{n.scriptLoadedCallbacks[e]||(n.scriptLoadedCallbacks[e]=[]),n.scriptLoadedCallbacks[e].push({resolve:o,reject:r})})}load(e){return this.add(e)}remove(e){delete this.states[e],delete this.scriptLoadedCallbacks[e]}loadQueue(){const e=this.queue;return this.queue=[],this.loadScripts(e)}loadScripts(e){const n=this,o=(l,d)=>{Nt(n.scriptLoadedCallbacks,d).each(c=>{j(c,u=>u[l](d))}),delete n.scriptLoadedCallbacks[d]},r=l=>{const d=it(l,c=>"rejected"===c.status);return d.length>0?Promise.reject(An(d,({reason:c})=>Wt(c)?c:[c])):Promise.resolve()},s=l=>Promise.allSettled(vt(l,d=>2===n.states[d]?(o("resolve",d),Promise.resolve()):3===n.states[d]?(o("reject",d),Promise.reject(d)):(n.states[d]=1,n.loadScript(d).then(()=>{n.states[d]=2,o("resolve",d);const c=n.queue;if(c.length>0)return n.queue=[],s(c).then(r)},()=>(n.states[d]=3,o("reject",d),Promise.reject(d)))))),a=l=>(n.loading=!0,s(l).then(d=>{n.loading=!1;const c=n.queueLoadedCallbacks.shift();return C.from(c).each(jr),r(d)})),i=Em(e);return n.loading?new Promise((l,d)=>{n.queueLoadedCallbacks.push(()=>a(i).then(l,d))}):a(i)}}Pn.ScriptLoader=new Pn;const Ht=t=>{let e=t;return{get:()=>e,set:n=>{e=n}}},ds={},nd=Ht("en"),eg=()=>Nt(ds,nd.get()),Je={getData:()=>Wr(ds,t=>rt({},t)),setCode:t=>{t&&nd.set(t)},getCode:()=>nd.get(),add:(t,e)=>{let n=ds[t];n||(ds[t]=n={}),At(e,(o,r)=>{n[r.toLowerCase()]=o})},translate:t=>{const e=eg().getOr({}),n=i=>xt(i)?Object.prototype.toString.call(i):o(i)?"":""+i,o=i=>""===i||null==i,r=i=>{const l=n(i);return Nt(e,l.toLowerCase()).map(n).getOr(l)},s=i=>i.replace(/{context:\w+}$/,"");if(o(t))return"";if(Ae(a=t)&&ft(a,"raw"))return n(t.raw);var a,i;if(Wt(i=t)&&i.length>1){const i=t.slice(1);return s(r(t[0]).replace(/\{([0-9]+)\}/g,(l,d)=>ft(i,d)?n(i[d]):l))}return s(r(t))},isRtl:()=>eg().bind(t=>Nt(t,"_dir")).exists(t=>"rtl"===t),hasCode:t=>ft(ds,t)},ie=()=>{const t=[],e={},n={},o=[],r=(l,d)=>{const c=it(o,u=>u.name===l&&u.state===d);j(c,u=>u.resolve())},s=l=>ft(e,l),a=(l,d)=>{const c=Je.getCode();!c||d&&-1===(","+(d||"")+",").indexOf(","+c+",")||Pn.ScriptLoader.add(e[l]+"/langs/"+c+".js")},i=(l,d="added")=>"added"===d&&ft(n,l)||"loaded"===d&&s(l)?Promise.resolve():new Promise(c=>{o.push({name:l,state:d,resolve:c})});return{items:t,urls:e,lookup:n,get:l=>{if(n[l])return n[l].instance},requireLangPack:(l,d)=>{!1!==ie.languageLoad&&(s(l)?a(l,d):i(l,"loaded").then(()=>a(l,d)))},add:(l,d)=>(t.push(d),n[l]={instance:d},r(l,"added"),d),remove:l=>{delete e[l],delete n[l]},createUrl:(l,d)=>at(d)?at(l)?{prefix:"",resource:d,suffix:""}:{prefix:l.prefix,resource:d,suffix:l.suffix}:d,load:(l,d)=>{if(e[l])return Promise.resolve();let c=at(d)?d:d.prefix+d.resource+d.suffix;0!==c.indexOf("/")&&-1===c.indexOf("://")&&(c=ie.baseURL+"/"+c),e[l]=c.substring(0,c.lastIndexOf("/"));const u=()=>(r(l,"loaded"),Promise.resolve());return n[l]?u():Pn.ScriptLoader.add(c).then(u)},waitFor:i}};ie.languageLoad=!0,ie.baseURL="",ie.PluginManager=ie(),ie.ThemeManager=ie(),ie.ModelManager=ie();const to=()=>{const t=(e=>{const n=Ht(C.none()),o=()=>n.get().each(e);return{clear:()=>{o(),n.set(C.none())},isSet:()=>n.get().isSome(),get:()=>n.get(),set:r=>{o(),n.set(C.some(r))}}})(pt);return Rt(rt({},t),{on:e=>t.get().each(e)})},Oa=(t,e)=>{let n=null;return{cancel:()=>{Ur(n)||(clearTimeout(n),n=null)},throttle:(...o)=>{Ur(n)&&(n=setTimeout(()=>{n=null,t.apply(null,o)},e))}}},od=(t,e)=>{let n=null;const o=()=>{Ur(n)||(clearTimeout(n),n=null)};return{cancel:o,throttle:(...r)=>{o(),n=setTimeout(()=>{n=null,t.apply(null,r)},e)}}},ng=(t,e)=>{let n=[];return j(ne(t),o=>{e(o)&&(n=n.concat([o])),n=n.concat(ng(o,e))}),n},ke=(t,e)=>((n,o)=>{const r=void 0===o?document:o.dom;return af(r)?[]:vt(r.querySelectorAll(n),N)})(e,t),rd=K("mce-annotation"),cs=K("data-mce-annotation"),Ta=K("data-mce-annotation-uid"),sd=K("data-mce-annotation-active"),og=(t,e)=>{const n=t.selection.getRng(),o=N(n.startContainer),r=N(t.getBody()),s=e.fold(()=>"."+rd(),d=>`[${cs()}="${d}"]`),a=ma(o,n.startOffset).getOr(o),i=wo(a,s,d=>kt(d,r)),l=(d,c)=>ua(d,c)?C.some(Pe(d,c)):C.none();return i.bind(d=>l(d,`${Ta()}`).bind(c=>l(d,`${cs()}`).map(u=>{const f=rg(t,c);return{uid:c,name:u,elements:f}})))},rg=(t,e)=>{const n=N(t.getBody());return ke(n,`[${Ta()}="${e}"]`)},sg=(t,e)=>{const n=N(t.getBody()),o=ke(n,`[${cs()}="${e}"]`),r={};return j(o,s=>{const a=Pe(s,Ta()),i=Nt(r,a).getOr([]);r[a]=i.concat([s])}),r};let ag=0;const ig=t=>{const e=(new Date).getTime(),n=Math.floor(1e9*Math.random());return ag++,t+"_"+n+ag+String(e)},lg=(t,e)=>N(t.dom.cloneNode(e)),dr=t=>lg(t,!1),dg=t=>lg(t,!0),cg=(t,e,n=Tt)=>{const o=new Gt(t,e),r=s=>{let a;do{a=o[s]()}while(a&&!G(a)&&!n(a));return C.from(a).filter(G)};return{current:()=>C.from(o.current()).filter(G),next:()=>r("next"),prev:()=>r("prev"),prev2:()=>r("prev2")}},_o=(t,e)=>{const n=e||(r=>t.isBlock(r)||Ut(r)||Dt(r)),o=(r,s,a,i)=>{if(G(r)){const l=i(r,s,r.data);if(-1!==l)return C.some({container:r,offset:l})}return a().bind(l=>o(l.container,l.offset,a,i))};return{backwards:(r,s,a,i)=>{const l=cg(r,i,n);return o(r,s,()=>l.prev().map(d=>({container:d,offset:d.length})),a).getOrNull()},forwards:(r,s,a,i)=>{const l=cg(r,i,n);return o(r,s,()=>l.next().map(d=>({container:d,offset:0})),a).getOrNull()}}},cr=Math.round,No=t=>t?{left:cr(t.left),top:cr(t.top),bottom:cr(t.bottom),right:cr(t.right),width:cr(t.width),height:cr(t.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0},ug=(t,e)=>(t=No(t),e||(t.left=t.left+t.width),t.right=t.left,t.width=0,t),mg=(t,e,n)=>t>=0&&t<=Math.min(e.height,n.height)/2,us=(t,e)=>{const n=Math.min(e.height/2,t.height/2);return t.bottom-n<e.top||!(t.top>e.bottom)&&mg(e.top-t.bottom,t,e)},ms=(t,e)=>t.top>e.bottom||!(t.bottom<e.top)&&mg(e.bottom-t.top,t,e),fg=(t,e,n)=>{const o=Math.max(Math.min(e,t.left+t.width),t.left),r=Math.max(Math.min(n,t.top+t.height),t.top);return Math.sqrt((e-o)*(e-o)+(n-r)*(n-r))},Ba=t=>{const e=t.startContainer,n=t.startOffset;return e.hasChildNodes()&&t.endOffset===n+1?e.childNodes[n]:null},eo=(t,e)=>{if(et(t)&&t.hasChildNodes()){const n=t.childNodes;return n[(a=n.length-1,Math.min(Math.max(e,0),a))]}var a;return t},Ix=new RegExp("[\u0300-\u036f\u0483-\u0487\u0488-\u0489\u0591-\u05bd\u05bf\u05c1-\u05c2\u05c4-\u05c5\u05c7\u0610-\u061a\u064b-\u065f\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7-\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u08e3-\u0902\u093a\u093c\u0941-\u0948\u094d\u0951-\u0957\u0962-\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2-\u09e3\u0a01-\u0a02\u0a3c\u0a41-\u0a42\u0a47-\u0a48\u0a4b-\u0a4d\u0a51\u0a70-\u0a71\u0a75\u0a81-\u0a82\u0abc\u0ac1-\u0ac5\u0ac7-\u0ac8\u0acd\u0ae2-\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62-\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c00\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55-\u0c56\u0c62-\u0c63\u0c81\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc-\u0ccd\u0cd5-\u0cd6\u0ce2-\u0ce3\u0d01\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62-\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb-\u0ebc\u0ec8-\u0ecd\u0f18-\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86-\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039-\u103a\u103d-\u103e\u1058-\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085-\u1086\u108d\u109d\u135d-\u135f\u1712-\u1714\u1732-\u1734\u1752-\u1753\u1772-\u1773\u17b4-\u17b5\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927-\u1928\u1932\u1939-\u193b\u1a17-\u1a18\u1a1b\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1ab0-\u1abd\u1abe\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80-\u1b81\u1ba2-\u1ba5\u1ba8-\u1ba9\u1bab-\u1bad\u1be6\u1be8-\u1be9\u1bed\u1bef-\u1bf1\u1c2c-\u1c33\u1c36-\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1cf4\u1cf8-\u1cf9\u1dc0-\u1df5\u1dfc-\u1dff\u200c-\u200d\u20d0-\u20dc\u20dd-\u20e0\u20e1\u20e2-\u20e4\u20e5-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302d\u302e-\u302f\u3099-\u309a\ua66f\ua670-\ua672\ua674-\ua67d\ua69e-\ua69f\ua6f0-\ua6f1\ua802\ua806\ua80b\ua825-\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\ua9e5\uaa29-\uaa2e\uaa31-\uaa32\uaa35-\uaa36\uaa43\uaa4c\uaa7c\uaab0\uaab2-\uaab4\uaab7-\uaab8\uaabe-\uaabf\uaac1\uaaec-\uaaed\uaaf6\uabe5\uabe8\uabed\ufb1e\ufe00-\ufe0f\ufe20-\ufe2f\uff9e-\uff9f]"),gg=t=>"string"==typeof t&&t.charCodeAt(0)>=768&&Ix.test(t),pg=et,Fx=Qe,hg=ba("display","block table"),Ux=ba("float","left right"),fs=((...t)=>e=>{for(let n=0;n<t.length;n++)if(!t[n](e))return!1;return!0})(pg,Fx,hl(Ux)),zx=hl(ba("white-space","pre pre-line pre-wrap")),gs=G,ad=Ut,bg=St.nodeIndex,Da=(t,e)=>e<0&&et(t)&&t.hasChildNodes()?void 0:eo(t,e),id=t=>"createRange"in t?t.createRange():St.DOM.createRng(),ld=t=>t&&/[\r\n\t ]/.test(t),vg=t=>!!t.setStart&&!!t.setEnd,dd=t=>{const e=t.startContainer,n=t.startOffset;if(ld(t.toString())&&zx(e.parentNode)&&G(e)){const o=e.data;if(ld(o[n-1])||ld(o[n+1]))return!0}return!1},yg=t=>0===t.left&&0===t.right&&0===t.top&&0===t.bottom,no=t=>{let e;const n=t.getClientRects();return e=No(n.length>0?n[0]:t.getBoundingClientRect()),!vg(t)&&ad(t)&&yg(e)?(o=>{const r=o.ownerDocument,s=id(r),a=r.createTextNode(oe),i=o.parentNode;i.insertBefore(a,o),s.setStart(a,0),s.setEnd(a,1);const l=No(s.getBoundingClientRect());return i.removeChild(a),l})(t):yg(e)&&vg(t)?(o=>{const s=o.endContainer,a=o.startOffset,i=o.endOffset;if(o.startContainer===s&&G(s)&&0===a&&1===i){const l=o.cloneRange();return l.setEndAfter(s),no(l)}return null})(t):e},Ro=(t,e)=>{const n=ug(t,e);return n.width=1,n.right=n.left+1,n},M=(t,e,n)=>{const o=()=>(n||(n=(r=>{const s=[],a=c=>{var u,f;0!==c.height&&(s.length>0&&(u=c).left===(f=s[s.length-1]).left&&u.top===f.top&&u.bottom===f.bottom&&u.right===f.right||s.push(c))},i=(c,u)=>{const f=id(c.ownerDocument);if(u<c.data.length){if(gg(c.data[u]))return s;if(gg(c.data[u-1])&&(f.setStart(c,u),f.setEnd(c,u+1),!dd(f)))return a(Ro(no(f),!1)),s}u>0&&(f.setStart(c,u-1),f.setEnd(c,u),dd(f)||a(Ro(no(f),!1))),u<c.data.length&&(f.setStart(c,u),f.setEnd(c,u+1),dd(f)||a(Ro(no(f),!0)))},l=r.container(),d=r.offset();if(gs(l))return i(l,d),s;if(pg(l))if(r.isAtEnd()){const c=Da(l,d);gs(c)&&i(c,c.data.length),fs(c)&&!ad(c)&&a(Ro(no(c),!1))}else{const c=Da(l,d);if(gs(c)&&i(c,0),fs(c)&&r.isAtEnd())return a(Ro(no(c),!1)),s;const u=Da(r.container(),r.offset()-1);fs(u)&&!ad(u)&&(hg(u)||hg(c)||!fs(c))&&a(Ro(no(u),!1)),fs(c)&&a(Ro(no(c),!0))}return s})(M(t,e))),n);return{container:K(t),offset:K(e),toRange:()=>{const r=id(t.ownerDocument);return r.setStart(t,e),r.setEnd(t,e),r},getClientRects:o,isVisible:()=>o().length>0,isAtStart:()=>(gs(t),0===e),isAtEnd:()=>gs(t)?e>=t.data.length:e>=t.childNodes.length,isEqual:r=>r&&t===r.container()&&e===r.offset(),getNode:r=>Da(t,r?e-1:e)}};M.fromRangeStart=t=>M(t.startContainer,t.startOffset),M.fromRangeEnd=t=>M(t.endContainer,t.endOffset),M.after=t=>M(t.parentNode,bg(t)+1),M.before=t=>M(t.parentNode,bg(t)),M.isAbove=(t,e)=>we(Be(e.getClientRects()),fo(t.getClientRects()),us).getOr(!1),M.isBelow=(t,e)=>we(fo(e.getClientRects()),Be(t.getClientRects()),ms).getOr(!1),M.isAtStart=t=>!!t&&t.isAtStart(),M.isAtEnd=t=>!!t&&t.isAtEnd(),M.isTextPosition=t=>!!t&&G(t.container()),M.isElementPosition=t=>!1===M.isTextPosition(t);const La=(t,e)=>{G(e)&&0===e.data.length&&t.remove(e)},cd=(t,e,n)=>{var o,s;Ul(n)?((o,r,s)=>{const a=C.from(s.firstChild),i=C.from(s.lastChild);r.insertNode(s),a.each(l=>La(o,l.previousSibling)),i.each(l=>La(o,l.nextSibling))})(t,e,n):(o=t,e.insertNode(s=n),La(o,s.previousSibling),La(o,s.nextSibling))},Ze=G,Cg=xo,xg=St.nodeIndex,wg=t=>{const e=t.parentNode;return Cg(e)?wg(e):e},ud=t=>t?ia(t.childNodes,(e,n)=>(Cg(n)&&"BR"!==n.nodeName?e=e.concat(ud(n)):e.push(n),e),[]):[],kg=t=>e=>t===e,Sg=t=>{let e;return e=Ze(t)?"text()":t.nodeName.toLowerCase(),e+"["+(n=>{let o,r;o=ud(wg(n)),r=Nm(o,kg(n),n),o=o.slice(0,r+1);const s=ia(o,(a,i,l)=>(Ze(i)&&Ze(o[l-1])&&a++,a),0);return o=Xo(o,Ge([n.nodeName])),r=Nm(o,kg(n),n),r-s})(t)+"]"},Eg=(t,e)=>{let n,o,r,s,a,i=[];return n=e.container(),o=e.offset(),Ze(n)?r=((l,d)=>{for(;(l=l.previousSibling)&&Ze(l);)d+=l.data.length;return d})(n,o):(s=n.childNodes,o>=s.length?(r="after",o=s.length-1):r="before",n=s[o]),i.push(Sg(n)),a=((l,d,c)=>{const u=[];for(d=d.parentNode;d!==l;d=d.parentNode)u.push(d);return u})(t,n),a=Xo(a,hl(xo)),i=i.concat(Sl(a,l=>Sg(l))),i.reverse().join("/")+","+r},_g=(t,e)=>{let n;if(!e)return null;const o=e.split(","),r=o[0].split("/");n=o.length>1?o[1]:"before";const s=ia(r,(a,i)=>{const l=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(i);return l?("text()"===l[1]&&(l[1]="#text"),((d,c,u)=>{let f=ud(d);return f=Xo(f,(m,g)=>!Ze(m)||!Ze(f[g-1])),f=Xo(f,Ge([c])),f[u]})(a,l[1],parseInt(l[2],10))):null},t);return s?Ze(s)?((a,i)=>{let l,d=a,c=0;for(;Ze(d);){if(l=d.data.length,i>=c&&i<=c+l){a=d,i-=c;break}if(!Ze(d.nextSibling)){a=d,i=l;break}c+=l,d=d.nextSibling}return Ze(a)&&i>a.data.length&&(i=a.data.length),M(a,i)})(s,parseInt(n,10)):(n="after"===n?xg(s)+1:xg(s),M(s.parentNode,n)):null},Pa=Dt,Ng=(t,e,n,o,r)=>{let s=o[r?"startContainer":"endContainer"],a=o[r?"startOffset":"endOffset"];const i=[];let l,d=0;const c=t.getRoot();for(G(s)?i.push(n?((u,f,m)=>{let g,b;for(b=u(f.data.slice(0,m)).length,g=f.previousSibling;g&&G(g);g=g.previousSibling)b+=u(g.data).length;return b})(e,s,a):a):(l=s.childNodes,a>=l.length&&l.length&&(d=1,a=Math.max(0,l.length-1)),i.push(t.nodeIndex(l[a],n)+d));s&&s!==c;s=s.parentNode)i.push(t.nodeIndex(s,n));return i},md=(t,e,n)=>{let o=0;return z.each(t.select(e),r=>{if("all"!==r.getAttribute("data-mce-bogus"))return r!==n&&void o++}),o},Rg=(t,e)=>{let n,o,r;const s=e?"start":"end";n=t[s+"Container"],o=t[s+"Offset"],et(n)&&"TR"===n.nodeName&&(r=n.childNodes,n=r[Math.min(e?o:o-1,r.length-1)],n&&(o=e?0:n.childNodes.length,t["set"+(e?"Start":"End")](n,o)))},Ag=t=>(Rg(t,!0),Rg(t,!1),t),Og=(t,e)=>{let n;return et(t)&&(t=eo(t,e),Pa(t))?t:Me(t)&&(G(t)&&rr(t)&&(t=t.parentNode),n=t.previousSibling,Pa(n)||(n=t.nextSibling,Pa(n)))?n:void 0},Tg=(t,e,n)=>{const o=n.getNode();let r=o?o.nodeName:null;const s=n.getRng();if(Pa(o)||"IMG"===r)return{name:r,index:md(n.dom,r,o)};const a=Og((i=s).startContainer,i.startOffset)||Og(i.endContainer,i.endOffset);var i;return a?(r=a.tagName,{name:r,index:md(n.dom,r,a)}):((i,l,d,c)=>{const u=l.dom,f={};return f.start=Ng(u,i,d,c,!0),l.isCollapsed()||(f.end=Ng(u,i,d,c,!1)),jf(c)&&(f.isFakeCaret=!0),f})(t,n,e,s)},Bg=(t,e,n)=>{const o={"data-mce-type":"bookmark",id:e,style:"overflow:hidden;line-height:0px"};return n?t.create("span",o,"&#xFEFF;"):t.create("span",o)},Dg=(t,e)=>{const n=t.dom;let o=t.getRng();const r=n.uniqueId(),s=t.isCollapsed(),a=t.getNode(),i=a.nodeName;if("IMG"===i)return{name:i,index:md(n,i,a)};const l=Ag(o.cloneRange());if(!s){l.collapse(!1);const c=Bg(n,r+"_end",e);cd(n,l,c)}o=Ag(o),o.collapse(!0);const d=Bg(n,r+"_start",e);return cd(n,o,d),t.moveToBookmark({id:r,keep:!0}),{id:r}},Lg=X(Tg,me,!0),Pg=t=>{const e=s=>s(t),n=K(t),o=()=>r,r={tag:!0,inner:t,fold:(s,a)=>a(t),isValue:jt,isError:Tt,map:s=>pe.value(s(t)),mapError:o,bind:e,exists:e,forall:e,getOr:n,or:o,getOrThunk:n,orThunk:o,getOrDie:n,each:s=>{s(t)},toOptional:()=>C.some(t)};return r},Mg=t=>{const e=()=>n,n={tag:!1,inner:t,fold:(r,s)=>r(t),isValue:Tt,isError:jt,map:e,mapError:r=>pe.error(r(t)),bind:e,exists:Tt,forall:jt,getOr:me,or:me,getOrThunk:bl,orThunk:bl,getOrDie:(o=String(t),()=>{throw new Error(o)}),each:pt,toOptional:C.none};var o;return n},pe={value:Pg,error:Mg,fromOption:(t,e)=>t.fold(()=>Mg(e),Pg)},gn=t=>{if(!Wt(t))throw new Error("cases must be an array");if(0===t.length)throw new Error("there must be at least one case");const e=[],n={};return j(t,(o,r)=>{const s=Xe(o);if(1!==s.length)throw new Error("one and only one name per case");const a=s[0],i=o[a];if(void 0!==n[a])throw new Error("duplicate key detected:"+a);if("cata"===a)throw new Error("cannot have a case named cata (sorry)");if(!Wt(i))throw new Error("case arguments must be an array");e.push(a),n[a]=(...l)=>{const d=l.length;if(d!==i.length)throw new Error("Wrong number of arguments to case "+a+". Expected "+i.length+" ("+i+"), got "+d);return{fold:(...c)=>{if(c.length!==t.length)throw new Error("Wrong number of arguments to fold. Expected "+t.length+", got "+c.length);return c[r].apply(null,l)},match:c=>{const u=Xe(c);if(e.length!==u.length)throw new Error("Wrong number of arguments to match. Expected: "+e.join(",")+"\nActual: "+u.join(","));if(!Ko(e,f=>Pt(u,f)))throw new Error("Not all branches were specified when using match. Specified: "+u.join(", ")+"\nRequired: "+e.join(", "));return c[a].apply(null,l)},log:c=>{console.log(c,{constructors:e,constructor:a,params:l})}}}}),n};gn([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const jx=t=>"inline-command"===t.type||"inline-format"===t.type,Vx=t=>"block-command"===t.type||"block-format"===t.type,Hx=t=>{const e=o=>pe.error({message:o,pattern:t}),n=(o,r,s)=>{if(void 0!==t.format){let a;if(Wt(t.format)){if(!Ko(t.format,at))return e(o+" pattern has non-string items in the `format` array");a=t.format}else{if(!at(t.format))return e(o+" pattern has non-string `format` parameter");a=[t.format]}return pe.value(r(a))}return void 0!==t.cmd?at(t.cmd)?pe.value(s(t.cmd,t.value)):e(o+" pattern has non-string `cmd` parameter"):e(o+" pattern is missing both `format` and `cmd` parameters")};if(!Ae(t))return e("Raw pattern is not an object");if(!at(t.start))return e("Raw pattern is missing `start` parameter");if(void 0!==t.end){if(!at(t.end))return e("Inline pattern has non-string `end` parameter");if(0===t.start.length&&0===t.end.length)return e("Inline pattern has empty `start` and `end` parameters");let o=t.start,r=t.end;return 0===r.length&&(r=o,o=""),n("Inline",s=>({type:"inline-format",start:o,end:r,format:s}),(s,a)=>({type:"inline-command",start:o,end:r,cmd:s,value:a}))}return void 0!==t.replacement?at(t.replacement)?0===t.start.length?e("Replacement pattern has empty `start` parameter"):pe.value({type:"inline-command",start:"",end:t.start,cmd:"mceInsertContent",value:t.replacement}):e("Replacement pattern has non-string `replacement` parameter"):0===t.start.length?e("Block pattern has empty `start` parameter"):n("Block",o=>({type:"block-format",start:t.start,format:o[0]}),(o,r)=>({type:"block-command",start:t.start,cmd:o,value:r}))},$x=t=>{return e=it(t,Vx),qr(e,(n,o)=>n.start.length===o.start.length?0:n.start.length>o.start.length?-1:1);var e},Ig=t=>it(t,jx),qx=t=>{const e=(n=>{const o=[],r=[];return j(n,s=>{s.fold(a=>{o.push(a)},a=>{r.push(a)})}),{errors:o,values:r}})(vt(t,Hx));return j(e.errors,n=>console.error(n.message,n.pattern)),e.values},fd=qn().deviceType,Wx=fd.isTouch(),Kx=St.DOM,Fg=t=>sa(t,RegExp),Q=t=>e=>e.options.get(t),gd=t=>at(t)||Ae(t),Ug=(t,e="")=>n=>{const o=at(n);if(o){if(-1!==n.indexOf("=")){const r=(s=>{const a=s.indexOf("=")>0?s.split(/[;,](?![^=;,]*(?:[;,]|$))/):s.split(",");return Te(a,(i,l)=>{const d=l.split("="),c=d[0],u=d.length>1?d[1]:c;return i[Qo(c)]=Qo(u),i},{})})(n);return{value:Nt(r,t.id).getOr(e),valid:o}}return{value:n,valid:o}}return{valid:!1,message:"Must be a string."}},Gx=Q("iframe_attrs"),Yx=Q("doctype"),zg=Q("document_base_url"),Xx=Q("body_id"),Qx=Q("body_class"),jg=Q("content_security_policy"),Jx=Q("br_in_pre"),Se=Q("forced_root_block"),Ao=Q("forced_root_block_attrs"),Zx=Q("br_newline_selector"),tw=Q("no_newline_selector"),ew=Q("keep_styles"),nw=Q("end_container_on_empty_block"),Vg=Q("automatic_uploads"),Hg=Q("images_reuse_filename"),ow=Q("images_replace_blob_uris"),$g=Q("icons"),rw=Q("icons_url"),sw=Q("images_upload_url"),aw=Q("images_upload_base_path"),iw=Q("images_upload_credentials"),lw=Q("images_upload_handler"),dw=Q("content_css_cors"),pd=Q("referrer_policy"),qg=Q("language"),cw=Q("language_url"),Wg=Q("indent_use_margin"),uw=Q("indentation"),mw=Q("content_css"),fw=Q("content_style"),Kg=Q("font_css"),gw=Q("directionality"),pw=Q("inline_boundaries_selector"),Gg=Q("object_resizing"),hw=Q("resize_img_proportional"),bw=Q("placeholder"),Yg=Q("event_root"),vw=Q("service_message"),ur=Q("theme"),yw=Q("theme_url"),hd=Q("model"),Cw=Q("model_url"),ps=Q("inline_boundaries"),xw=Q("formats"),ww=Q("preview_styles"),kw=Q("format_empty_lines"),Sw=Q("custom_ui_selector"),bd=Q("inline"),Ew=Q("hidden_input"),_w=Q("submit_patch"),Nw=Q("add_form_submit_trigger"),Rw=Q("add_unload_trigger"),Aw=Q("custom_undo_redo_levels"),Ow=Q("disable_nodechange"),Xg=Q("readonly"),Tw=Q("content_css_cors"),Ma=Q("plugins"),Bw=Q("external_plugins"),Dw=Q("block_unsupported_drop"),Lw=Q("visual"),Pw=Q("visual_table_class"),Qg=Q("visual_anchor_class"),Mw=Q("iframe_aria_text"),Iw=Q("setup"),Fw=Q("init_instance_callback"),Uw=Q("urlconverter_callback"),zw=Q("auto_focus"),jw=Q("browser_spellcheck"),Vw=Q("protect"),Hw=Q("paste_block_drop"),Ia=Q("paste_data_images"),$w=Q("paste_preprocess"),qw=Q("paste_postprocess"),Ww=Q("paste_webkit_styles"),Kw=Q("paste_remove_styles_if_webkit"),Gw=Q("paste_merge_formats"),Yw=Q("smart_paste"),Xw=Q("paste_as_text"),Qw=Q("paste_tab_spaces"),Jw=Q("allow_html_data_urls"),Jg=Q("text_patterns"),Zg=Q("noneditable_class"),Zw=Q("editable_class"),tk=Q("noneditable_regexp"),tp=t=>z.explode(t.options.get("images_file_types")),ek=Q("table_tab_navigation"),nk=et,ep=G,np=t=>{const e=t.parentNode;e&&e.removeChild(t)},op=t=>{const e=Xn(t);return{count:t.length-e.length,text:e}},rp=t=>{let e;for(;-1!==(e=t.data.lastIndexOf(re));)t.deleteData(e,1)},sp=(t,e)=>(Oo(t),e),Oo=t=>{nk(t)&&Me(t)&&(zf(t)?t.removeAttribute("data-mce-caret"):np(t)),ep(t)&&(rp(t),0===t.data.length&&np(t))},rk=Dt,sk=mn,ak=va,ap=(t,e,n)=>{const o=ug(e.getBoundingClientRect(),n);let r,s;if("BODY"===t.tagName){const i=t.ownerDocument.documentElement;r=t.scrollLeft||i.scrollLeft,s=t.scrollTop||i.scrollTop}else{const i=t.getBoundingClientRect();r=t.scrollLeft-i.left,s=t.scrollTop-i.top}o.left+=r,o.right+=r,o.top+=s,o.bottom+=s,o.width=1;let a=e.offsetWidth-e.clientWidth;return a>0&&(n&&(a*=-1),o.left+=a,o.right+=a),o},ip=()=>wt.browser.isFirefox(),hs=t=>rk(t)||sk(t),bs=t=>hs(t)||rs(t)&&ip(),lk=Ln,vd=Dt,dk=mn,ck=ba("display","block table table-cell table-caption list-item"),lp=Me,dp=rr,cp=et,uk=Qe,mr=t=>t>0,To=t=>t<0,Fa=(t,e)=>{let n;for(;n=t(e);)if(!dp(n))return n;return null},vs=(t,e,n,o,r)=>{const s=new Gt(t,o),a=vd(t)||dp(t);if(To(e)){if(a&&n(t=Fa(s.prev.bind(s),!0)))return t;for(;t=Fa(s.prev.bind(s),r);)if(n(t))return t}if(mr(e)){if(a&&n(t=Fa(s.next.bind(s),!0)))return t;for(;t=Fa(s.next.bind(s),r);)if(n(t))return t}return null},oo=(t,e)=>{for(;t&&t!==e;){if(ck(t))return t;t=t.parentNode}return null},pn=(t,e,n)=>oo(t.container(),n)===oo(e.container(),n),yd=(t,e)=>{if(!e)return null;const n=e.container(),o=e.offset();return cp(n)?n.childNodes[o+t]:null},up=(t,e)=>{const n=e.ownerDocument.createRange();return t?(n.setStartBefore(e),n.setEndBefore(e)):(n.setStartAfter(e),n.setEndAfter(e)),n},mk=(t,e,n)=>oo(e,t)===oo(n,t),mp=(t,e,n)=>{const o=t?"previousSibling":"nextSibling";for(;n&&n!==e;){let r=n[o];if(lp(r)&&(r=r[o]),vd(r)||dk(r)){if(mk(e,r,n))return r;break}if(uk(r))break;n=n.parentNode}return null},ys=X(up,!0),Cs=X(up,!1),Cd=(t,e,n)=>{let o;const r=X(mp,!0,e),s=X(mp,!1,e);let a=n.startContainer;const i=n.startOffset;if(rr(a)){cp(a)||(a=a.parentNode);const l=a.getAttribute("data-mce-caret");if("before"===l&&(o=a.nextSibling,bs(o)))return ys(o);if("after"===l&&(o=a.previousSibling,bs(o)))return Cs(o)}if(!n.collapsed)return n;if(G(a)){if(lp(a)){if(1===t){if(o=s(a),o)return ys(o);if(o=r(a),o)return Cs(o)}if(-1===t){if(o=r(a),o)return Cs(o);if(o=s(a),o)return ys(o)}return n}if(Ea(a)&&i>=a.data.length-1)return 1===t&&(o=s(a),o)?ys(o):n;if(Sa(a)&&i<=1)return-1===t&&(o=r(a),o)?Cs(o):n;if(i===a.data.length)return o=s(a),o?ys(o):n;if(0===i)return o=r(a),o?Cs(o):n}return n},fp=(t,e)=>C.from(yd(t?0:-1,e)).filter(vd),xs=(t,e,n)=>{const o=Cd(t,e,n);return-1===t?M.fromRangeStart(o):M.fromRangeEnd(o)},Ua=t=>C.from(t.getNode()).map(N),xd=(t,e)=>{for(;e=t(e);)if(e.isVisible())return e;return e},za=(t,e)=>{const n=pn(t,e);return!(n||!Ut(t.getNode()))||n};var Xt,t;(t=Xt||(Xt={}))[t.Backwards=-1]="Backwards",t[t.Forwards=1]="Forwards";const fk=Dt,hn=G,gp=et,wd=Ut,fr=Qe,pp=t=>{return Hf(t)||!!ql(e=t)&&!0!==Te(xe(e.getElementsByTagName("*")),(n,o)=>n||Vf(o),!1);var e},ja=$f,hp=(t,e)=>t.hasChildNodes()&&e<t.childNodes.length?t.childNodes[e]:null,bp=(t,e)=>{if(mr(t)){if(fr(e.previousSibling)&&!hn(e.previousSibling))return M.before(e);if(hn(e))return M(e,0)}if(To(t)){if(fr(e.nextSibling)&&!hn(e.nextSibling))return M.after(e);if(hn(e))return M(e,e.data.length)}return To(t)?wd(e)?M.before(e):M.after(e):M.before(e)},kd=(t,e,n)=>{let o,r,s,a;if(!gp(n)||!e)return null;if(e.isEqual(M.after(n))&&n.lastChild){if(a=M.after(n.lastChild),To(t)&&fr(n.lastChild)&&gp(n.lastChild))return wd(n.lastChild)?M.before(n.lastChild):a}else a=e;const i=a.container();let l=a.offset();if(hn(i)){if(To(t)&&l>0)return M(i,--l);if(mr(t)&&l<i.length)return M(i,++l);o=i}else{if(To(t)&&l>0&&(r=hp(i,l-1),fr(r)))return!pp(r)&&(s=vs(r,t,ja,r),s)?hn(s)?M(s,s.data.length):M.after(s):hn(r)?M(r,r.data.length):M.before(r);if(mr(t)&&l<i.childNodes.length&&(r=hp(i,l),fr(r)))return wd(r)?((c,u)=>{const f=u.nextSibling;return f&&fr(f)?hn(f)?M(f,0):M.before(f):kd(Xt.Forwards,M.after(u),c)})(n,r):!pp(r)&&(s=vs(r,t,ja,r),s)?hn(s)?M(s,0):M.before(s):hn(r)?M(r,0):M.after(r);o=r||a.getNode()}if((mr(t)&&a.isAtEnd()||To(t)&&a.isAtStart())&&(o=vs(o,t,jt,n,!0),ja(o,n)))return bp(t,o);r=vs(o,t,ja,n);const d=go(it(((c,u)=>{const f=[];for(;c&&c!==u;)f.push(c),c=c.parentNode;return f})(i,n),fk));return!d||r&&d.contains(r)?r?bp(t,r):null:(a=mr(t)?M.after(d):M.before(d),a)},bn=t=>({next:e=>kd(Xt.Forwards,e,t),prev:e=>kd(Xt.Backwards,e,t)}),vp=t=>M.isTextPosition(t)?0===t.offset():Qe(t.getNode()),yp=t=>{if(M.isTextPosition(t)){const e=t.container();return t.offset()===e.data.length}return Qe(t.getNode(!0))},Cp=(t,e)=>!M.isTextPosition(t)&&!M.isTextPosition(e)&&t.getNode()===e.getNode(!0),Ie=(t,e,n)=>{const o=bn(e);return C.from(t?o.next(n):o.prev(n))},Va=(t,e,n)=>Ie(t,e,n).bind(o=>{return pn(n,o,e)&&(s=n,a=o,t?!Cp(s,a)&&(M.isTextPosition(i=s)||!Ut(i.getNode()))&&yp(s)&&vp(a):!Cp(a,s)&&vp(s)&&yp(a))?Ie(t,e,o):C.some(o);var s,a,i}),xp=(t,e,n,o)=>Va(t,e,n).bind(r=>o(r)?xp(t,e,r,o):C.some(r)),gr=(t,e)=>{const n=t?e.firstChild:e.lastChild;return G(n)?C.some(M(n,t?0:n.data.length)):n?Qe(n)?C.some(t?M.before(n):Ut(o=n)?M.before(o):M.after(o)):((r,s,a)=>{const i=r?M.before(a):M.after(a);return Ie(r,s,i)})(t,e,n):C.none();var o},tn=X(Ie,!0),vn=X(Ie,!1),he=X(gr,!0),yn=X(gr,!1),wp="_mce_caret",Cn=t=>et(t)&&t.id===wp,Bo=(t,e)=>{for(;e&&e!==t;){if(e.id===wp)return e;e=e.parentNode}return null},kp=t=>z.isArray(t.start),Sp=(t,e)=>(et(e)&&t.isBlock(e)&&!e.innerHTML&&(e.innerHTML='<br data-mce-bogus="1" />'),e),gk=(t,e)=>yn(t).fold(Tt,n=>(e.setStart(n.container(),n.offset()),e.setEnd(n.container(),n.offset()),!0)),Ep=(t,e,n)=>!(!1!==e.hasChildNodes()||!Bo(t,e)||(((o,r)=>{const s=o.ownerDocument.createTextNode(re);o.appendChild(s),r.setStart(s,0),r.setEnd(s,0)})(e,n),0)),_p=(t,e,n,o)=>{const r=n[e?"start":"end"];let s,a,i,l;const d=t.getRoot();if(r){for(i=r[0],a=d,s=r.length-1;s>=1;s--){if(l=a.childNodes,Ep(d,a,o))return!0;if(r[s]>l.length-1)return!!Ep(d,a,o)||gk(a,o);a=l[r[s]]}3===a.nodeType&&(i=Math.min(r[0],a.nodeValue.length)),1===a.nodeType&&(i=Math.min(r[0],a.childNodes.length)),e?o.setStart(a,i):o.setEnd(a,i)}return!0},Sd=t=>G(t)&&t.data.length>0,Np=(t,e,n)=>{let o,r,s,a,i=t.get(n.id+"_"+e);const l=n.keep;let d,c;if(i){if(o=i.parentNode,"start"===e?(l?i.hasChildNodes()?(o=i.firstChild,r=1):Sd(i.nextSibling)?(o=i.nextSibling,r=0):Sd(i.previousSibling)?(o=i.previousSibling,r=i.previousSibling.data.length):(o=i.parentNode,r=t.nodeIndex(i)+1):r=t.nodeIndex(i),d=o,c=r):(l?i.hasChildNodes()?(o=i.firstChild,r=1):Sd(i.previousSibling)?(o=i.previousSibling,r=i.previousSibling.data.length):(o=i.parentNode,r=t.nodeIndex(i)):r=t.nodeIndex(i),d=o,c=r),!l){for(a=i.previousSibling,s=i.nextSibling,z.each(z.grep(i.childNodes),u=>{G(u)&&(u.nodeValue=u.nodeValue.replace(/\uFEFF/g,""))});i=t.get(n.id+"_"+e);)t.remove(i,!0);a&&s&&a.nodeType===s.nodeType&&G(a)&&!wt.browser.isOpera()&&(r=a.nodeValue.length,a.appendData(s.nodeValue),t.remove(s),d=a,c=r)}return C.some(M(d,c))}return C.none()},pk=(t,e,n)=>{return o=t,2===(r=e)?Tg(Xn,n,o):3===r?(a=>{const i=a.getRng();return{start:Eg(a.dom.getRoot(),M.fromRangeStart(i)),end:Eg(a.dom.getRoot(),M.fromRangeEnd(i))}})(o):r?{rng:o.getRng()}:Dg(o,!1);var o,r},hk=(t,e)=>{((n,o)=>{const r=n.dom;if(o){if(kp(o))return((s,a)=>{const i=s.createRng();return _p(s,!0,a,i)&&_p(s,!1,a,i)?C.some(i):C.none()})(r,o);if(at(o.start))return C.some(((s,a)=>{let i;const l=s.createRng();return i=_g(s.getRoot(),a.start),l.setStart(i.container(),i.offset()),i=_g(s.getRoot(),a.end),l.setEnd(i.container(),i.offset()),l})(r,o));if(ft(o,"id"))return((s,a)=>{const i=Np(s,"start",a),l=Np(s,"end",a);return we(i,l.or(i),(d,c)=>{const u=s.createRng();return u.setStart(Sp(s,d.container()),d.offset()),u.setEnd(Sp(s,c.container()),c.offset()),u})})(r,o);if((s=>ft(s,"name"))(o))return((s,a)=>C.from(s.select(a.name)[a.index]).map(i=>{const l=s.createRng();return l.selectNode(i),l}))(r,o);if((s=>ft(s,"rng"))(o))return C.some(o.rng)}return C.none()})(t,e).each(n=>{t.setRng(n)})},Fe=t=>et(t)&&"SPAN"===t.tagName&&"bookmark"===t.getAttribute("data-mce-type"),Ha=t=>"\xa0"===t,ws=t=>""!==t&&-1!==" \f\n\r\t\v".indexOf(t),Ed=t=>!ws(t)&&!Ha(t)&&!Uf(t),_d=t=>{const e=t.toString(16);return(1===e.length?"0"+e:e).toUpperCase()},bk=t=>({value:_d(t.red)+_d(t.green)+_d(t.blue)}),vk=/^\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i,yk=/^\s*rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?(?:\.\d+)?)\s*\)\s*$/i,Rp=(t,e,n,o)=>({red:t,green:e,blue:n,alpha:o}),Ap=(t,e,n,o)=>{const r=parseInt(t,10),s=parseInt(e,10),a=parseInt(n,10),i=parseFloat(o);return Rp(r,s,a,i)},$a=t=>(e=>{if("transparent"===e)return C.some(Rp(0,0,0,0));const n=vk.exec(e);if(null!==n)return C.some(Ap(n[1],n[2],n[3],"1"));const o=yk.exec(e);return null!==o?C.some(Ap(o[1],o[2],o[3],o[4])):C.none()})(t).map(bk).map(e=>"#"+e.value).getOr(t),qa=t=>!!t.nodeType,Op=(t,e,n)=>{const o=n.startOffset;let r=n.startContainer;var s;if((r!==n.endContainer||!(s=r.childNodes[o])||!/^(IMG)$/.test(s.nodeName))&&et(r)){const a=r.childNodes;let i;o<a.length?(r=a[o],i=new Gt(r,t.getParent(r,t.isBlock))):(r=a[a.length-1],i=new Gt(r,t.getParent(r,t.isBlock)),i.next(!0));for(let l=i.current();l;l=i.next())if(G(l)&&!Rd(l))return n.setStart(l,0),void e.setRng(n)}},Tp=(t,e,n)=>{if(t){const o=e?"nextSibling":"previousSibling";for(t=n?t:t[o];t;t=t[o])if(et(t)||!Rd(t))return t}},Nd=(t,e)=>(qa(e)&&(e=e.nodeName),!!t.schema.getTextBlockElements()[e.toLowerCase()]),pr=(t,e,n)=>t.schema.isValidChild(e,n),Rd=(t,e=!1)=>{if(ut(t)&&G(t)){const n=e?t.data.replace(/ /g,"\xa0"):t.data;return ko(n)}return!1},Mn=(t,e)=>(xt(t)?t=t(e):ut(e)&&(t=t.replace(/%(\w+)/g,(n,o)=>e[o]||n)),t),Ad=(t,e)=>(t=""+((t=t||"").nodeName||t),e=""+((e=e||"").nodeName||e),t.toLowerCase()===e.toLowerCase()),Od=(t,e)=>("color"!==e&&"backgroundColor"!==e||(t=$a(t)),"fontWeight"===e&&700===t&&(t="bold"),"fontFamily"===e&&(t=t.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),""+t),Wa=(t,e,n)=>Od(t.getStyle(e,n),n),Bp=(t,e)=>{let n;return t.getParent(e,o=>(n=t.getStyle(o,"text-decoration"),n&&"none"!==n)),n},Ka=(t,e,n)=>t.getParents(e,n,t.getRoot()),xn=t=>Yo(t,"block"),De=t=>Yo(t,"selector"),Qt=t=>Yo(t,"inline"),Td=t=>De(t)&&!1!==t.expand&&!Qt(t),hr=Fe,Dp=Ka,Lp=Rd,Ck=Nd,Pp=(t,e)=>{let n=e;for(;n;){if(et(n)&&t.getContentEditable(n))return"false"===t.getContentEditable(n)?n:e;n=n.parentNode}return e},Mp=(t,e,n,o)=>{const r=e.data;for(let s=n;t?s>=0:s<r.length;t?s--:s++)if(o(r.charAt(s)))return t?s+1:s;return-1},xk=(t,e,n)=>Mp(t,e,n,o=>Ha(o)||ws(o)),wk=(t,e,n)=>Mp(t,e,n,Ed),Ip=(t,e,n,o,r,s)=>{let a;const i=t.getParent(n,t.isBlock)||e,l=(d,c,u)=>{const f=_o(t);return C.from((r?f.backwards:f.forwards)(d,c,(g,b)=>hr(g.parentNode)?-1:(a=g,u(r,g,b)),i))};return l(n,o,xk).bind(d=>s?l(d.container,d.offset+(r?-1:0),wk):C.some(d)).orThunk(()=>a?C.some({container:a,offset:r?0:a.length}):C.none())},Fp=(t,e,n,o,r)=>{G(o)&&la(o.data)&&o[r]&&(o=o[r]);const s=Dp(t,o);for(let a=0;a<s.length;a++)for(let i=0;i<e.length;i++){const l=e[i];if((!ut(l.collapsed)||l.collapsed===n.collapsed)&&De(l)&&t.is(s[a],l.selector))return s[a]}return o},Up=(t,e,n,o)=>{let r=n;const s=t.dom,a=s.getRoot(),i=e[0];if(xn(i)&&(r=i.wrapper?null:s.getParent(n,i.block,a)),!r){const l=s.getParent(n,"LI,TD,TH");r=s.getParent(G(n)?n.parentNode:n,d=>d!==a&&Ck(t,d),l)}if(r&&xn(i)&&i.wrapper&&(r=Dp(s,r,"ul,ol").reverse()[0]||r),!r)for(r=n;r[o]&&!s.isBlock(r[o])&&(r=r[o],!Ad(r,"br")););return r||n},zp=(t,e,n,o)=>{const r=n.parentNode;return!ut(n[o])&&(!(r!==e&&!Oe(r)&&!t.isBlock(r))||zp(t,e,r,o))},Ga=(t,e,n,o,r)=>{let s=n;const a=r?"previousSibling":"nextSibling",i=t.getRoot();if(G(n)&&!Lp(n)&&(r?o>0:o<n.data.length))return n;for(;;){if(!e[0].block_expand&&t.isBlock(s))return s;for(let d=s[a];d;d=d[a]){const c=G(d)&&!zp(t,i,d,a);if(!hr(d)&&(!Ut(l=d)||!l.getAttribute("data-mce-bogus")||l.nextSibling)&&!Lp(d,c))return s}if(s===i||s.parentNode===i){n=s;break}s=s.parentNode}var l;return n},jp=t=>hr(t.parentNode)||hr(t),br=(t,e,n,o=!1)=>{let{startContainer:r,startOffset:s,endContainer:a,endOffset:i}=e;const l=t.dom,d=n[0];return et(r)&&r.hasChildNodes()&&(r=eo(r,s),G(r)&&(s=0)),et(a)&&a.hasChildNodes()&&(a=eo(a,e.collapsed?i:i-1),G(a)&&(i=a.nodeValue.length)),r=Pp(l,r),a=Pp(l,a),jp(r)&&(r=hr(r)?r:r.parentNode,r=e.collapsed?r.previousSibling||r:r.nextSibling||r,G(r)&&(s=e.collapsed?r.length:0)),jp(a)&&(a=hr(a)?a:a.parentNode,a=e.collapsed?a.nextSibling||a:a.previousSibling||a,G(a)&&(i=e.collapsed?0:a.length)),e.collapsed&&(Ip(l,t.getBody(),r,s,!0,o).each(({container:c,offset:u})=>{r=c,s=u}),Ip(l,t.getBody(),a,i,!1,o).each(({container:c,offset:u})=>{a=c,i=u})),(Qt(d)||d.block_expand)&&(Qt(d)&&G(r)&&0!==s||(r=Ga(l,n,r,s,!0)),Qt(d)&&G(a)&&i!==a.nodeValue.length||(a=Ga(l,n,a,i,!1))),Td(d)&&(r=Fp(l,n,e,r,"previousSibling"),a=Fp(l,n,e,a,"nextSibling")),(xn(d)||De(d))&&(r=Up(t,n,r,"previousSibling"),a=Up(t,n,a,"nextSibling"),xn(d)&&(l.isBlock(r)||(r=Ga(l,n,r,s,!0)),l.isBlock(a)||(a=Ga(l,n,a,i,!1)))),et(r)&&(s=l.nodeIndex(r),r=r.parentNode),et(a)&&(i=l.nodeIndex(a)+1,a=a.parentNode),{startContainer:r,startOffset:s,endContainer:a,endOffset:i}},ks=(t,e,n)=>{const o=e.startOffset,r=eo(e.startContainer,o),s=e.endOffset,a=eo(e.endContainer,s-1),i=b=>{const p=b[0];G(p)&&p===r&&o>=p.data.length&&b.splice(0,1);const h=b[b.length-1];return 0===s&&b.length>0&&h===a&&G(h)&&b.splice(b.length-1,1),b},l=(b,p,h)=>{const v=[];for(;b&&b!==h;b=b[p])v.push(b);return v},d=(b,p)=>t.getParent(b,h=>h.parentNode===p,p),c=(b,p,h)=>{const v=h?"nextSibling":"previousSibling";for(let y=b,x=y.parentNode;y&&y!==p;y=x){x=y.parentNode;const w=l(y===b?y:y[v],v);w.length&&(h||w.reverse(),n(i(w)))}};if(r===a)return n(i([r]));const u=t.findCommonAncestor(r,a);if(t.isChildOf(r,a))return c(r,u,!0);if(t.isChildOf(a,r))return c(a,u);const f=d(r,u)||r,m=d(a,u)||a;c(r,f,!0);const g=l(f===r?f:f.nextSibling,"nextSibling",m===a?m.nextSibling:m);g.length&&n(i(g)),c(a,m)},Bd=t=>{const e=[];if(t)for(let n=0;n<t.rangeCount;n++)e.push(t.getRangeAt(n));return e},Vp=(t,e)=>{const n=ke(e,"td[data-mce-selected],th[data-mce-selected]");return n.length>0?n:it(An(t,s=>{const a=Ba(s);return a?[N(a)]:[]}),Ca)},vr=t=>Vp(Bd(t.selection.getSel()),N(t.getBody())),Ss=(t,e)=>ss(t,"table",e),Hp=t=>mf(t).fold(K([t]),e=>[t].concat(Hp(e))),Dd=t=>Bl(t).fold(K([t]),e=>"br"===Ot(e)?bo(e).map(n=>[t].concat(Dd(n))).getOr([]):[t].concat(Dd(e))),Ld=(t,e)=>we((n=>{const o=n.startContainer,r=n.startOffset;return G(o)?0===r?C.some(N(o)):C.none():C.from(o.childNodes[r]).map(N)})(e),(n=>{const o=n.endContainer,r=n.endOffset;return G(o)?r===o.data.length?C.some(N(o)):C.none():C.from(o.childNodes[r-1]).map(N)})(e),(n,o)=>{const r=Kt(Hp(t),X(kt,n)),s=Kt(Dd(t),X(kt,o));return r.isSome()&&s.isSome()}).getOr(!1),Pd=(t,e,n,o)=>{const r=n,s=new Gt(n,r),a=Kr(t.schema.getMoveCaretBeforeOnEnterElements(),(i,l)=>!Pt(["td","th","table"],l.toLowerCase()));do{if(G(n)&&0!==z.trim(n.nodeValue).length)return void(o?e.setStart(n,0):e.setEnd(n,n.nodeValue.length));if(a[n.nodeName])return void(o?e.setStartBefore(n):"BR"===n.nodeName?e.setEndBefore(n):e.setEndAfter(n))}while(n=o?s.next():s.prev());"BODY"===r.nodeName&&(o?e.setStart(r,0):e.setEnd(r,r.childNodes.length))},Ya=t=>{const e=t.selection.getSel();return e&&e.rangeCount>0},Md=(t,e)=>{const n=vr(t);n.length>0?j(n,o=>{const r=o.dom,s=t.dom.createRng();s.setStartBefore(r),s.setEndAfter(r),e(s,!0)}):e(t.selection.getRng(),!1)},Id=(t,e,n)=>{const o=Dg(t,e);n(o),t.moveToBookmark(o)},$p=((t,e)=>{const n=o=>t(o)?C.from(o.dom.nodeValue):C.none();return{get:o=>{if(!t(o))throw new Error("Can only get text value of a text node");return n(o).getOr("")},getOption:n,set:(o,r)=>{if(!t(o))throw new Error("Can only set raw text value of a text node");o.dom.nodeValue=r}}})(Le),Fd=t=>$p.get(t),qp=t=>$p.getOption(t),Wp=(t,s,o,r)=>{var a=s,{uid:e=ig("mce-annotation")}=a,n=D1(a,["uid"]);const i=Ft("span",t);Qr(i,rd()),ge(i,`${Ta()}`,e),ge(i,`${cs()}`,o);const{attributes:l={},classes:d=[]}=r(e,n);return cn(i,l),c=i,j(d,f=>{Qr(c,f)}),i;var c},Kp=t=>{const e=(()=>{const o={};return{register:(r,s)=>{o[r]={name:r,settings:s}},lookup:r=>Nt(o,r).map(s=>s.settings),getNames:()=>Xe(o)}})();var o,r;r=e,(o=t).serializer.addTempAttr(sd()),o.serializer.addNodeFilter("span",s=>{j(s,a=>{var i;(i=a,C.from(i.attr(cs())).bind(r.lookup)).each(i=>{!1===i.persistent&&a.unwrap()})})});const n=((o,r)=>{const s=Ht({}),a=()=>({listeners:[],previous:to()}),i=(u,f)=>{l(u,m=>(f(m),m))},l=(u,f)=>{const m=s.get(),g=f(Nt(m,u).getOrThunk(a));m[u]=g,s.set(m)},d=(u,f)=>{j(rg(o,u),m=>{f?ge(m,sd(),"true"):qe(m,sd())})},c=od(()=>{const u=qr(r.getNames());j(u,f=>{l(f,m=>{const g=m.previous.get();return og(o,C.some(f)).fold(()=>{g.each(b=>{var p;i(p=f,h=>{j(h.listeners,v=>v(!1,p))}),m.previous.clear(),d(b,!1)})},({uid:b,name:p,elements:h})=>{var v,y,x;Jo(g,b)||(g.each(v=>d(v,!1)),y=b,x=h,i(v=p,w=>{j(w.listeners,S=>S(!0,v,{uid:y,nodes:vt(x,k=>k.dom)}))}),m.previous.set(b),d(b,!0))}),{previous:m.previous,listeners:m.listeners}})})},30);return o.on("remove",()=>{c.cancel()}),o.on("NodeChange",()=>{c.throttle()}),{addListener:(u,f)=>{l(u,m=>({previous:m.previous,listeners:m.listeners.concat([f])}))}}})(t,e);return{register:(o,r)=>{e.register(o,r)},annotate:(o,r)=>{e.lookup(o).each(s=>{var a,i,l,d;i=o,l=s,d=r,(a=t).undoManager.transact(()=>{const c=a.selection,u=c.getRng(),f=vr(a).length>0;if(u.collapsed&&!f&&((m,g)=>{const b=br(m,g,[{inline:"span"}]);g.setStart(b.startContainer,b.startOffset),g.setEnd(b.endContainer,b.endOffset),m.selection.setRng(g)})(a,u),c.getRng().collapsed&&!f){const m=Wp(a.getDoc(),d,i,l.decorate);Ll(m,oe),c.getRng().insertNode(m.dom),c.select(m.dom)}else Id(c,!1,()=>{Md(a,m=>{((t,e,n,o,r)=>{const s=[],a=Wp(t.getDoc(),r,n,o),i=to(),l=()=>{i.clear()},d=u=>{j(u,c)},c=u=>{switch(f=t,m=u,g="span",b=Ot(u),We(m).fold(()=>"skipping",p=>{return"br"===b||Le(h=m)&&Fd(h)===re?"valid":(h=>$e(h)&&Tl(h,rd()))(m)?"existing":Cn(m.dom)?"caret":pr(f,g,b)&&pr(f,Ot(p),g)?"valid":"invalid-child";var h})){case"invalid-child":{l();const f=ne(u);d(f),l();break}case"valid":{const f=i.get().getOrThunk(()=>{const m=dr(a);return s.push(m),i.set(m),m});((m,g)=>{Ke(m,g),Vt(g,m)})(u,f);break}}var f,m,g,b};ks(t.dom,e,u=>{l(),(f=>{const m=vt(f,N);d(m)})(u)})})(a,m,i,l.decorate,d)})})})})},annotationChanged:(o,r)=>{n.addListener(o,r)},remove:o=>{const r=t.selection.getBookmark();og(t,C.some(o)).each(({elements:s})=>{j(s,Gn)}),t.selection.moveToBookmark(r)},removeAll:o=>{const r=t.selection.getBookmark();At(sg(t,o),(s,a)=>j(s,Gn)),t.selection.moveToBookmark(r)},getAll:o=>{const r=sg(t,o);return Wr(r,s=>vt(s,a=>a.dom))}}},Es=t=>({getBookmark:X(pk,t),moveToBookmark:X(hk,t)});Es.isBookmarkNode=Fe;const Gp=(t,e,n)=>!n.collapsed&&It(n.getClientRects(),o=>{return a=e,(s=t)>=(r=o).left&&s<=r.right&&a>=r.top&&a<=r.bottom;var r,s,a}),Yp=(t,e,n)=>t.dispatch(e,n),Xp=(t,e,n,o)=>t.dispatch("FormatApply",{format:e,node:n,vars:o}),Ud=(t,e,n,o)=>t.dispatch("FormatRemove",{format:e,node:n,vars:o}),Qp=(t,e)=>t.dispatch("SetContent",e),Jp=(t,e)=>t.dispatch("GetContent",e),Zp=(t,e)=>t.dispatch("PastePlainTextToggle",{state:e}),tt={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,ESC:27,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,modifierPressed:t=>t.shiftKey||t.ctrlKey||t.altKey||tt.metaKeyPressed(t),metaKeyPressed:t=>wt.os.isMacOS()||wt.os.isiOS()?t.metaKey:t.ctrlKey&&!t.altKey},th=(t,e)=>{const n="data-mce-selected",o=e.dom,r=z.each;let s,a,i,l,d,c,u,f,m,g,b,p,h;const v=e.getDoc(),y=document,x=Math.abs,w=Math.round,S=e.getBody();let k,T;const O={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},I=J=>ut(J)&&(Bf(J)||e.dom.is(J,"figure.image")),R=J=>mn(J)||o.hasClass(J,"mce-preview-object"),P=J=>{const E=J.target;((_,A)=>{if("longpress"===_.type||0===_.type.indexOf("touch")){const B=_.touches[0];return I(_.target)&&!Gp(B.clientX,B.clientY,A)}return I(_.target)&&!Gp(_.clientX,_.clientY,A)})(J,e.selection.getRng())&&!J.isDefaultPrevented()&&e.selection.select(E)},L=J=>o.is(J,"figure.image")?[J.querySelector("img")]:o.hasClass(J,"mce-preview-object")&&ut(J.firstElementChild)?[J,J.firstElementChild]:[J],U=J=>{const E=Gg(e);return!!E&&"false"!==J.getAttribute("data-mce-resize")&&J!==e.getBody()&&(o.hasClass(J,"mce-preview-object")?Bn(N(J.firstElementChild),E):Bn(N(J),E))},V=(J,E,_)=>{if(ut(_)){const A=L(J);j(A,B=>{B.style[E]||!e.schema.isValid(B.nodeName.toLowerCase(),E)?o.setStyle(B,E,_):o.setAttrib(B,E,""+_)})}},nt=(J,E,_)=>{V(J,"width",E),V(J,"height",_)},ct=J=>{let E,_,A,B,F;E=J.screenX-c,_=J.screenY-u,p=E*l[2]+f,h=_*l[3]+m,p=p<5?5:p,h=h<5?5:h,A=(I(s)||R(s))&&!1!==hw(e)?!tt.modifierPressed(J):tt.modifierPressed(J),A&&(x(E)>x(_)?(h=w(p*g),p=w(h/g)):(p=w(h/g),h=w(p*g))),nt(a,p,h),B=l.startPos.x+E,F=l.startPos.y+_,B=B>0?B:0,F=F>0?F:0,o.setStyles(i,{left:B,top:F,display:"block"}),i.innerHTML=p+" &times; "+h,l[2]<0&&a.clientWidth<=p&&o.setStyle(a,"left",void 0+(f-p)),l[3]<0&&a.clientHeight<=h&&o.setStyle(a,"top",void 0+(m-h)),E=S.scrollWidth-k,_=S.scrollHeight-T,E+_!==0&&o.setStyles(i,{left:B-E,top:F-_}),b||(e.dispatch("ObjectResizeStart",{target:s,width:f,height:m,origin:"corner-"+l.name}),b=!0)},lt=()=>{const J=b;b=!1,J&&(V(s,"width",p),V(s,"height",h)),o.unbind(v,"mousemove",ct),o.unbind(v,"mouseup",lt),y!==v&&(o.unbind(y,"mousemove",ct),o.unbind(y,"mouseup",lt)),o.remove(a),o.remove(i),o.remove(d),bt(s),J&&(e.dispatch("ObjectResized",{target:s,width:p,height:h,origin:"corner-"+l.name}),o.setAttrib(s,"style",o.getAttrib(s,"style"))),e.nodeChanged()},bt=J=>{ht();const E=o.getPos(J,S),_=E.x,A=E.y,B=J.getBoundingClientRect(),F=B.width||B.right-B.left,H=B.height||B.bottom-B.top;s!==J&&(Et(),s=J,p=h=0);const $=e.dispatch("ObjectSelected",{target:J}),q=o.getAttrib(s,n,"1");U(J)&&!$.isDefaultPrevented()?r(O,(Y,gt)=>{let W;W=o.get("mceResizeHandle"+gt),W&&o.remove(W),W=o.add(S,"div",{id:"mceResizeHandle"+gt,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+gt+"-resize; margin:0; padding:0"}),o.bind(W,"mousedown",st=>{st.stopImmediatePropagation(),st.preventDefault(),(Ct=>{const de=L(s)[0];var Jt;c=Ct.screenX,u=Ct.screenY,f=de.clientWidth,m=de.clientHeight,g=m/f,l=Y,l.name=gt,l.startPos={x:F*Y[0]+_,y:H*Y[1]+A},k=S.scrollWidth,T=S.scrollHeight,d=o.add(S,"div",{class:"mce-resize-backdrop","data-mce-bogus":"all"}),o.setStyles(d,{position:"fixed",left:"0",top:"0",width:"100%",height:"100%"}),a=R(Jt=s)?o.create("img",{src:wt.transparentSrc}):Jt.cloneNode(!0),o.addClass(a,"mce-clonedresizable"),o.setAttrib(a,"data-mce-bogus","all"),a.contentEditable="false",o.setStyles(a,{left:_,top:A,margin:0}),nt(a,F,H),a.removeAttribute(n),S.appendChild(a),o.bind(v,"mousemove",ct),o.bind(v,"mouseup",lt),y!==v&&(o.bind(y,"mousemove",ct),o.bind(y,"mouseup",lt)),i=o.add(S,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},f+" &times; "+m)})(st)}),Y.elm=W,o.setStyles(W,{left:F*Y[0]+_-W.offsetWidth/2,top:H*Y[1]+A-W.offsetHeight/2})}):Et(),o.getAttrib(s,n)||s.setAttribute(n,q)},Et=()=>{ht(),s&&s.removeAttribute(n),At(O,(J,E)=>{const _=o.get("mceResizeHandle"+E);_&&(o.unbind(_),o.remove(_))})},dt=J=>{var E;let _,A;const B=(F,H)=>{if(F)do{if(F===H)return!0}while(F=F.parentNode)};b||e.removed||(r(o.select("img[data-mce-selected],hr[data-mce-selected]"),F=>{F.removeAttribute(n)}),A="mousedown"===J.type?J.target:t.getNode(),A=null===(E=wo(N(A),"table,img,figure.image,hr,video,span.mce-preview-object").getOrUndefined())||void 0===E?void 0:E.dom,B(A,S)&&(_t(),_=t.getStart(!0),B(_,A)&&B(t.getEnd(!0),A))?bt(A):Et())},ht=()=>{At(O,J=>{J.elm&&(o.unbind(J.elm),delete J.elm)})},_t=()=>{try{e.getDoc().execCommand("enableObjectResizing",!1,"false")}catch(J){}};return e.on("init",()=>{_t();const J=Oa(E=>{e.composing||dt(E)},0);e.on("nodechange ResizeEditor ResizeWindow ResizeContent drop FullscreenStateChanged",J.throttle),e.on("keyup compositionend",E=>{s&&"TABLE"===s.nodeName&&J.throttle(E)}),e.on("hide blur",Et),e.on("contextmenu longpress",P,!0)}),e.on("remove",ht),{isResizable:U,showResizeRect:bt,hideResizeRect:Et,updateResizeRect:dt,destroy:()=>{s=a=d=null}}},eh=(t,e,n)=>{const o=t.document.createRange();var r,s;return r=o,e.fold(s=>{r.setStartBefore(s.dom)},(s,a)=>{r.setStart(s.dom,a)},s=>{r.setStartAfter(s.dom)}),s=o,n.fold(i=>{s.setEndBefore(i.dom)},(i,l)=>{s.setEnd(i.dom,l)},i=>{s.setEndAfter(i.dom)}),o},zd=(t,e,n,o,r)=>{const s=t.document.createRange();return s.setStart(e.dom,n),s.setEnd(o.dom,r),s},_s=gn([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),nh=(t,e,n)=>e(N(n.startContainer),n.startOffset,N(n.endContainer),n.endOffset),oh=(t,e,n,o)=>({start:t,soffset:e,finish:n,foffset:o}),Sk=document.caretPositionFromPoint?(t,e,n)=>{var o,r;return C.from(null===(r=(o=t.dom).caretPositionFromPoint)||void 0===r?void 0:r.call(o,e,n)).bind(s=>{if(null===s.offsetNode)return C.none();const a=t.dom.createRange();return a.setStart(s.offsetNode,s.offset),a.collapse(),C.some(a)})}:document.caretRangeFromPoint?(t,e,n)=>{var o,r;return C.from(null===(r=(o=t.dom).caretRangeFromPoint)||void 0===r?void 0:r.call(o,e,n))}:C.none,jd=gn([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),In={before:jd.before,on:jd.on,after:jd.after,cata:(t,e,n,o)=>t.fold(e,n,o),getStart:t=>t.fold(me,me,me)},Xa=gn([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),yr={domRange:Xa.domRange,relative:Xa.relative,exact:Xa.exact,exactFromRange:t=>Xa.exact(t.start,t.soffset,t.finish,t.foffset),getWin:t=>{const e=t.match({domRange:o=>N(o.startContainer),relative:(o,r)=>In.getStart(o),exact:(o,r,s,a)=>o});return df(e)},range:oh},Qa=(t,e)=>{const n=Ot(t);return"input"===n?In.after(t):Pt(["br","img"],n)?0===e?In.before(t):In.after(t):In.on(t,e)},Ek=(t,e)=>{const n=t.fold(In.before,Qa,In.after),o=e.fold(In.before,Qa,In.after);return yr.relative(n,o)},rh=(t,e,n,o)=>{const r=Qa(t,e),s=Qa(n,o);return yr.relative(r,s)},Vd=(t,e)=>{const n=(e||document).createDocumentFragment();return j(t,o=>{n.appendChild(o.dom)}),N(n)},sh=(t,e,n)=>{return(o=n.defaultView,r=t,s=e,((a,i,l)=>{const d=N(a.document);return Sk(d,i,l).map(c=>oh(N(c.startContainer),c.startOffset,N(c.endContainer),c.endOffset))})(o,r,s)).map(a=>{const i=n.createRange();return i.setStart(a.start.dom,a.soffset),i.setEnd(a.finish.dom,a.foffset),i}).getOrUndefined();var o,r,s},Hd=(t,e)=>t&&e&&t.startContainer===e.startContainer&&t.startOffset===e.startOffset&&t.endContainer===e.endContainer&&t.endOffset===e.endOffset,ah=(t,e,n)=>null!==((o,r,s)=>{for(;o&&o!==r;){if(s(o))return o;o=o.parentNode}return null})(t,e,n),Nk=(t,e,n)=>ah(t,e,o=>o.nodeName===n),$d=t=>t&&"TABLE"===t.nodeName,Rk=t=>t&&/^(TD|TH|CAPTION)$/.test(t.nodeName),Ak=(t,e)=>Me(t)&&!1===ah(t,e,Cn),ih=(t,e,n)=>{const o=new Gt(e,t.getParent(e.parentNode,t.isBlock)||t.getRoot());for(;e=o[n?"prev":"next"]();)if(Ut(e))return!0},qd=(t,e,n,o,r)=>{let s;const a=t.getRoot();let i;const l=t.schema.getNonEmptyElements(),d=t.getParent(r.parentNode,t.isBlock)||a;if(o&&Ut(r)&&e&&t.isEmpty(d))return C.some(M(r.parentNode,t.nodeIndex(r)));const c=new Gt(r,d);for(;i=c[o?"prev":"next"]();){if("false"===t.getContentEditableParent(i)||Ak(i,a))return C.none();if(G(i)&&i.nodeValue.length>0)return!1===Nk(i,a,"A")?C.some(M(i,o?i.nodeValue.length:0)):C.none();if(t.isBlock(i)||l[i.nodeName.toLowerCase()])return C.none();s=i}return n&&s?C.some(M(s,0)):C.none()},lh=(t,e,n,o)=>{let r,s;const a=t.getRoot();let i,l,d=!1;r=o[(n?"start":"end")+"Container"],s=o[(n?"start":"end")+"Offset"];const c=et(r)&&s===r.childNodes.length,u=t.schema.getNonEmptyElements();if(l=n,Me(r))return C.none();if(et(r)&&s>r.childNodes.length-1&&(l=!1),Fl(r)&&(r=a,s=0),r===a){if(l&&(i=r.childNodes[s>0?s-1:0],i)&&(Me(i)||u[i.nodeName]||$d(i)))return C.none();if(r.hasChildNodes()){if(s=Math.min(!l&&s>0?s-1:s,r.childNodes.length-1),r=r.childNodes[s],s=G(r)&&c?r.data.length:0,!e&&r===a.lastChild&&$d(r)||((f,m)=>{for(;m&&m!==f;){if(Dt(m))return!0;m=m.parentNode}return!1})(a,r)||Me(r))return C.none();if(r.hasChildNodes()&&!1===$d(r)){i=r;const f=new Gt(r,a);do{if(Dt(i)||Me(i)){d=!1;break}if(G(i)&&i.nodeValue.length>0){s=l?0:i.nodeValue.length,r=i,d=!0;break}if(u[i.nodeName.toLowerCase()]&&!Rk(i)){s=t.nodeIndex(i),r=i.parentNode,l||s++,d=!0;break}}while(i=l?f.next():f.prev())}}}return e&&(G(r)&&0===s&&qd(t,c,e,!0,r).each(f=>{r=f.container(),s=f.offset(),d=!0}),et(r)&&(i=r.childNodes[s],i||(i=r.childNodes[s-1]),!i||!Ut(i)||(f=i).previousSibling&&"A"===f.previousSibling.nodeName||ih(t,i,!1)||ih(t,i,!0)||qd(t,c,e,!0,i).each(f=>{r=f.container(),s=f.offset(),d=!0}))),l&&!e&&G(r)&&s===r.nodeValue.length&&qd(t,c,e,!1,r).each(f=>{r=f.container(),s=f.offset(),d=!0}),d?C.some(M(r,s)):C.none();var f},Ja=(t,e)=>{const n=e.collapsed,o=e.cloneRange(),r=M.fromRangeStart(e);return lh(t,n,!0,o).each(s=>{n&&M.isAbove(r,s)||o.setStart(s.container(),s.offset())}),n||lh(t,n,!1,o).each(s=>{o.setEnd(s.container(),s.offset())}),n&&o.collapse(!0),Hd(e,o)?C.none():C.some(o)},Za=(t,e)=>t.splitText(e),ti=t=>{let e=t.startContainer,n=t.startOffset,o=t.endContainer,r=t.endOffset;return e===o&&G(e)?n>0&&n<e.nodeValue.length&&(o=Za(e,n),e=o.previousSibling,r>n?(r-=n,e=o=Za(o,r).previousSibling,r=o.nodeValue.length,n=0):r=0):(G(e)&&n>0&&n<e.nodeValue.length&&(e=Za(e,n),n=0),G(o)&&r>0&&r<o.nodeValue.length&&(o=Za(o,r).previousSibling,r=o.nodeValue.length)),{startContainer:e,startOffset:n,endContainer:o,endOffset:r}},Cr=t=>({walk:(e,n)=>ks(t,e,n),split:ti,normalize:e=>Ja(t,e).fold(Tt,n=>(e.setStart(n.startContainer,n.startOffset),e.setEnd(n.endContainer,n.endOffset),!0))});Cr.compareRanges=Hd,Cr.getCaretRangeFromPoint=sh,Cr.getSelectedNode=Ba,Cr.getNode=eo;const Ok=((t,e)=>{const n=r=>{const s=(a=>{const i=a.dom;return Zo(a)?i.getBoundingClientRect().height:i.offsetHeight})(r);if(s<=0||null===s){const a=un(r,t);return parseFloat(a)||0}return s},o=(r,s)=>Te(s,(a,i)=>{const l=un(r,i),d=void 0===l?0:parseInt(l,10);return isNaN(d)?a:a+d},0);return{set:(r,s)=>{if(!an(s)&&!s.match(/^[0-9]+$/))throw new Error(t+".set accepts only positive integer values. Value was "+s);const a=r.dom;Jr(a)&&(a.style[t]=s+"px")},get:n,getOuter:n,aggregate:o,max:(r,s,a)=>{const i=o(r,a);return s>i?s-i:0}}})("height"),dh=()=>N(document),ch=(t,e)=>t.view(e).fold(K([]),n=>{const o=t.owner(n),r=ch(t,o);return[n].concat(r)});var Tk=Object.freeze({__proto__:null,view:t=>{var e;return(t.dom===document?C.none():C.from(null===(e=t.dom.defaultView)||void 0===e?void 0:e.frameElement)).map(N)},owner:t=>Wn(t)});const Wd=t=>"textarea"===Ot(t),uh=(t,e)=>{const n=(r=>{const s=r.dom.ownerDocument,a=s.body,i=s.defaultView,l=s.documentElement;if(a===r.dom)return tr(a.offsetLeft,a.offsetTop);const d=pa(null==i?void 0:i.pageYOffset,l.scrollTop),c=pa(null==i?void 0:i.pageXOffset,l.scrollLeft),u=pa(l.clientTop,a.clientTop),f=pa(l.clientLeft,a.clientLeft);return Pl(r).translate(c-f,d-u)})(t),o=Ok.get(t);return{element:t,bottom:n.top+o,height:o,pos:n,cleanup:e}},mh=(t,e,n,o)=>{Dk(t,(r,s)=>Bk(t,e,n,o),n)},fh=(t,e,n,o,r)=>{const s={elm:o.element.dom,alignToTop:r};t.dispatch("ScrollIntoView",s).isDefaultPrevented()||(n(e,Ml(e).top,o,r),t.dispatch("AfterScrollIntoView",s))},Bk=(t,e,n,o)=>{N(t.getBody());const s=N(t.getDoc()),a=((i,l)=>{const d=((u,f)=>{const m=ne(u);if(0===m.length||Wd(u))return{element:u,offset:f};if(f<m.length&&!Wd(m[f]))return{element:m[f],offset:0};{const g=m[m.length-1];return Wd(g)?{element:u,offset:f}:"img"===Ot(g)?{element:g,offset:1}:Le(g)?{element:g,offset:Fd(g).length}:{element:g,offset:ne(g).length}}})(i,l),c=ts('<span data-mce-bogus="all" style="display: inline-block;">\ufeff</span>');return Ke(d.element,c),uh(c,()=>Mt(c))})(N(n.startContainer),n.startOffset);fh(t,s,e,a,o),a.cleanup()},gh=(t,e,n,o)=>{const r=N(t.getDoc());fh(t,r,n,uh(N(e),pt),o)},Dk=(t,e,n)=>{const o=n.startContainer,r=n.startOffset,s=n.endContainer,a=n.endOffset;e(N(o),N(s));const i=t.dom.createRng();i.setStart(o,r),i.setEnd(s,a),t.selection.setRng(n)},Kd=(t,e,n,o)=>{const r=t.pos;Ef(r.left,n?r.top:r.top-e+t.height,o)},ph=(t,e,n,o,r)=>{const s=n+e,a=o.pos.top,i=o.bottom,l=i-a>=n;a<e?Kd(o,n,!1!==r,t):a>s?Kd(o,n,l?!1!==r:!0===r,t):i>s&&!l&&Kd(o,n,!0===r,t)},hh=(t,e,n,o)=>{ph(t,e,t.dom.defaultView.innerHeight,n,o)},bh=(t,e,n,o)=>{ph(t,e,t.dom.defaultView.innerHeight,n,o);const s=(i=>{const l=dh(),d=Ml(l),c=((m,g)=>{const b=g.owner(m);return ch(g,b)})(i,Tk),u=Pl(i),f=aa(c,(m,g)=>{const b=Pl(g);return{left:m.left+b.left,top:m.top+b.top}},{left:0,top:0});return tr(f.left+u.left+d.left,f.top+u.top+d.top)})(n.element),a=Rf(window);s.top<a.y?_f(n.element,!1!==o):s.top>a.bottom&&_f(n.element,!0===o)},Lk=(t,e,n)=>mh(t,hh,e,n),Pk=(t,e,n)=>gh(t,e,hh,n),Mk=(t,e,n)=>mh(t,bh,e,n),Ik=(t,e,n)=>gh(t,e,bh,n),Ns=(t,e,n)=>{(t.inline?Lk:Mk)(t,e,n)},vh=t=>t.dom.focus(),yh=t=>{const e=vo(t).dom;return t.dom===e.activeElement},Gd=(t=dh())=>C.from(t.dom.activeElement).map(N),Ch=(t,e)=>{const n=Le(e)?Fd(e).length:ne(e).length+1;return t>n?n:t<0?0:t},Fk=t=>yr.range(t.start,Ch(t.soffset,t.start),t.finish,Ch(t.foffset,t.finish)),xh=(t,e)=>!ha(e.dom)&&(Dn(t,e)||kt(t,e)),wh=t=>e=>xh(t,e.start)&&xh(t,e.finish),Uk=t=>yr.range(N(t.startContainer),t.startOffset,N(t.endContainer),t.endOffset),zk=t=>{const e=document.createRange();try{return e.setStart(t.start.dom,t.soffset),e.setEnd(t.finish.dom,t.foffset),C.some(e)}catch(n){return C.none()}},Yd=t=>{const e=t.inline?(n=N(t.getBody()),(o=>{const r=o.getSelection();return(r&&0!==r.rangeCount?C.from(r.getRangeAt(0)):C.none()).map(Uk)})(df(n).dom).filter(wh(n))):C.none();var n;t.bookmark=e.isSome()?e:t.bookmark},Xd=t=>(t.bookmark?t.bookmark:C.none()).bind(e=>{return n=N(t.getBody()),C.from(e).filter(wh(n)).map(Fk);var n}).bind(zk),kh={isEditorUIElement:t=>{const e=t.className.toString();return-1!==e.indexOf("tox-")||-1!==e.indexOf("mce-")}},Ue={setEditorTimeout:(t,e,n)=>{return an(r=n)||(r=0),setTimeout(()=>{t.removed||e()},r);var r},setEditorInterval:(t,e,n)=>{const o=(an(s=n)||(s=0),setInterval(()=>{t.removed?clearInterval(o):e()},s));var s;return o}};let Rs;const Qd=St.DOM,ei=(t,e)=>{const n=Sw(t);return null!==Qd.getParent(e,r=>kh.isEditorUIElement(r)||!!n&&t.dom.is(r,n))},jk=(t,e)=>{const n=e.editor;(o=>{const r=Oa(()=>{Yd(o)},0);o.on("init",()=>{var s,l;o.inline&&((s,a)=>{const i=()=>{a.throttle()};St.DOM.bind(document,"mouseup",i),s.on("remove",()=>{St.DOM.unbind(document,"mouseup",i)})})(o,r),l=r,(s=o).on("mouseup touchend",d=>{l.throttle()}),s.on("keyup NodeChange AfterSetSelectionRange",i=>{(l=>"nodechange"===l.type&&l.selectionChange)(i)||Yd(s)})}),o.on("remove",()=>{r.cancel()})})(n),n.on("focusin",()=>{const o=t.focusedEditor;o!==n&&(o&&o.dispatch("blur",{focusedEditor:n}),t.setActive(n),t.focusedEditor=n,n.dispatch("focus",{blurredEditor:o}),n.focus(!0))}),n.on("focusout",()=>{Ue.setEditorTimeout(n,()=>{const o=t.focusedEditor;ei(n,(r=>{try{const s=vo(N(r.getElement()));return Gd(s).fold(()=>document.body,a=>a.dom)}catch(s){return document.body}})(n))||o!==n||(n.dispatch("blur",{focusedEditor:null}),t.focusedEditor=null)})}),Rs||(Rs=o=>{const r=t.activeEditor;r&&hf(o).each(s=>{s.ownerDocument===document&&(s===document.body||ei(r,s)||t.focusedEditor!==r||(r.dispatch("blur",{focusedEditor:null}),t.focusedEditor=null))})},Qd.bind(document,"focusin",Rs))},Vk=(t,e)=>{t.focusedEditor===e.editor&&(t.focusedEditor=null),t.activeEditor||(Qd.unbind(document,"focusin",Rs),Rs=null)},Sh=(t,e)=>{var n,o,r;(n=N(t.getBody()),o=e,(r=o,r.collapsed?C.from(eo(r.startContainer,r.startOffset)).map(N):C.none()).bind(r=>ux(r)?C.some(r):!1===Dn(n,r)?C.some(n):C.none())).bind(n=>he(n.dom)).fold(()=>{t.selection.normalize()},n=>t.selection.setRng(n.toRange()))},Jd=t=>{if(t.setActive)try{t.setActive()}catch(e){t.focus()}else t.focus()},Do=t=>{return t.inline?(e=>{const n=e.getBody();return n&&(o=N(n),yh(o)||(r=o,Gd(vo(r)).filter(s=>r.dom.contains(s.dom))).isSome());var o,r})(t):(e=t).iframeElement&&yh(N(e.iframeElement));var e},Zd=t=>t.editorManager.setActive(t),Eh=(t,e,n,o,r)=>{const a=n?e.startOffset:e.endOffset;return C.from(n?e.startContainer:e.endContainer).map(N).map(i=>o&&e.collapsed?i:ma(i,r(i,a)).getOr(i)).bind(i=>$e(i)?C.some(i):We(i).filter($e)).map(i=>i.dom).getOr(t)},_h=(t,e,n)=>Eh(t,e,!0,n,(o,r)=>Math.min(ff(o),r)),Nh=(t,e,n)=>Eh(t,e,!1,n,(o,r)=>r>0?r-1:r),Rh=(t,e)=>{const n=t;for(;t&&G(t)&&0===t.length;)t=e?t.nextSibling:t.previousSibling;return t||n},tc=(t,e)=>vt(e,n=>{const o=t.dispatch("GetSelectionRange",{range:n});return o.range!==n?o.range:n}),Hk=["img","br"],Ah=t=>qp(t).filter(n=>0!==n.trim().length||n.indexOf(oe)>-1).isSome()||Pt(Hk,Ot(t)),Oh="[data-mce-autocompleter]",Th=t=>as(t,Oh),qk={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},ni=(t,e,n)=>{const o=n?"lastChild":"firstChild",r=n?"prev":"next";if(t[o])return t[o];if(t!==e){let s=t[r];if(s)return s;for(let a=t.parent;a&&a!==e;a=a.parent)if(s=a[r],s)return s}},Wk=t=>{if(!ko(t.value))return!1;const e=t.parent;return!e||"span"===e.name&&!e.attr("style")||!/^[ ]+$/.test(t.value)},Bh=t=>{const e="a"===t.name&&!t.attr("href")&&t.attr("id");return t.attr("name")||t.attr("id")&&!t.firstChild||t.attr("data-mce-bookmark")||e};class be{constructor(e,n){this.name=e,this.type=n,1===n&&(this.attributes=[],this.attributes.map={})}static create(e,n){const o=new be(e,qk[e]||1);return n&&At(n,(r,s)=>{o.attr(s,r)}),o}replace(e){const n=this;return e.parent&&e.remove(),n.insert(e,n),n.remove(),n}attr(e,n){const o=this;let r;if("string"!=typeof e)return null!=e&&At(e,(s,a)=>{o.attr(a,s)}),o;if(r=o.attributes){if(void 0!==n){if(null===n){if(e in r.map){delete r.map[e];let s=r.length;for(;s--;)if(r[s].name===e)return r.splice(s,1),o}return o}if(e in r.map){let s=r.length;for(;s--;)if(r[s].name===e){r[s].value=n;break}}else r.push({name:e,value:n});return r.map[e]=n,o}return r.map[e]}}clone(){const e=this,n=new be(e.name,e.type);let o;if(o=e.attributes){const r=[];r.map={};for(let s=0,a=o.length;s<a;s++){const i=o[s];"id"!==i.name&&(r[r.length]={name:i.name,value:i.value},r.map[i.name]=i.value)}n.attributes=r}return n.value=e.value,n}wrap(e){const n=this;return n.parent.insert(e,n),e.append(n),n}unwrap(){const e=this;for(let n=e.firstChild;n;){const o=n.next;e.insert(n,e,!0),n=o}e.remove()}remove(){const e=this,n=e.parent,o=e.next,r=e.prev;return n&&(n.firstChild===e?(n.firstChild=o,o&&(o.prev=null)):r.next=o,n.lastChild===e?(n.lastChild=r,r&&(r.next=null)):o.prev=r,e.parent=e.next=e.prev=null),e}append(e){const n=this;e.parent&&e.remove();const o=n.lastChild;return o?(o.next=e,e.prev=o,n.lastChild=e):n.lastChild=n.firstChild=e,e.parent=n,e}insert(e,n,o){e.parent&&e.remove();const r=n.parent||this;return o?(n===r.firstChild?r.firstChild=e:n.prev.next=e,e.prev=n.prev,e.next=n,n.prev=e):(n===r.lastChild?r.lastChild=e:n.next.prev=e,e.next=n.next,e.prev=n,n.next=e),e.parent=r,e}getAll(e){const n=this,o=[];for(let r=n.firstChild;r;r=ni(r,n))r.name===e&&o.push(r);return o}children(){const e=[];for(let n=this.firstChild;n;n=n.next)e.push(n);return e}empty(){const e=this;if(e.firstChild){const n=[];for(let r=e.firstChild;r;r=ni(r,e))n.push(r);let o=n.length;for(;o--;){const r=n[o];r.parent=r.firstChild=r.lastChild=r.next=r.prev=null}}return e.firstChild=e.lastChild=null,e}isEmpty(e,n={},o){const r=this;let s=r.firstChild;if(Bh(r))return!1;if(s)do{if(1===s.type){if(s.attr("data-mce-bogus"))continue;if(e[s.name]||Bh(s))return!1}if(8===s.type||3===s.type&&!Wk(s)||3===s.type&&s.parent&&n[s.parent.name]&&ko(s.value)||o&&o(s))return!1}while(s=ni(s,r));return!0}walk(e){return ni(this,null,e)}}const Dh=(t,e,n=0)=>{const o=t.toLowerCase();if(-1!==o.indexOf("[if ",n)&&/^\s*\[if [\w\W]+\]>.*<!\[endif\](--!?)?>/.test(o.substr(n))){const r=o.indexOf("[endif]",n);return o.indexOf(">",r)}if(e){const r=o.indexOf(">",n);return-1!==r?r:o.length}{const r=/--!?>/g;r.lastIndex=n;const s=r.exec(t);return s?s.index+s[0].length:o.length}},Kk=(t,e,n)=>{const o=/<([!?\/])?([A-Za-z0-9\-_:.]+)/g,r=/(?:\s(?:[^'">]+(?:"[^"]*"|'[^']*'))*[^"'>]*(?:"[^">]*|'[^'>]*)?|\s*|\/)>/g,s=t.getVoidElements();let a=1,i=n;for(;0!==a;)for(o.lastIndex=i;;){const l=o.exec(e);if(null===l)return i;if("!"===l[1]){i=He(l[2],"--")?Dh(e,!1,l.index+3):Dh(e,!0,l.index+1);break}{r.lastIndex=o.lastIndex;const d=r.exec(e);if(Ur(d)||d.index!==o.lastIndex)continue;"/"===l[1]?a-=1:ft(s,l[2])||(a+=1),i=o.lastIndex+d[0].length;break}}return i},Lh=(t,e)=>{const n=/<(\w+) [^>]*data-mce-bogus="all"[^>]*>/g,o=t.schema;let r=((i,l)=>{const d=new RegExp(["\\s?("+i.join("|")+')="[^"]+"'].join("|"),"gi");return l.replace(d,"")})(t.getTempAttrs(),e);const s=o.getVoidElements();let a;for(;a=n.exec(r);){const i=n.lastIndex,l=a[0].length;let d;d=s[a[1]]?i:Kk(o,r,i),r=r.substring(0,i-l)+r.substring(d),n.lastIndex=i-l}return Xn(r)},Gk=Lh,Yk=z.each,Ph=t=>({compare:(e,n)=>{if(e.nodeName!==n.nodeName)return!1;const o=s=>{const a={};return Yk(t.getAttribs(s),i=>{const l=i.nodeName.toLowerCase();0!==l.indexOf("_")&&"style"!==l&&0!==l.indexOf("data-")&&(a[l]=t.getAttrib(s,l))}),a},r=(s,a)=>{let i,l;for(l in s)if(ft(s,l)){if(i=a[l],void 0===i||s[l]!==i)return!1;delete a[l]}for(l in a)if(ft(a,l))return!1;return!0};return!(!r(o(e),o(n))||!r(t.parseStyle(t.getAttrib(e,"style")),t.parseStyle(t.getAttrib(n,"style")))||Fe(e)||Fe(n))}}),Mh=z.makeMap,Ih=t=>{const e=[],n=(t=t||{}).indent,o=Mh(t.indent_before||""),r=Mh(t.indent_after||""),s=Qn.getEncodeFunc(t.entity_encoding||"raw",t.entities),a="xhtml"!==t.element_format;return{start:(i,l,d)=>{let c,u,f,m;if(n&&o[i]&&e.length>0&&(m=e[e.length-1],m.length>0&&"\n"!==m&&e.push("\n")),e.push("<",i),l)for(c=0,u=l.length;c<u;c++)f=l[c],e.push(" ",f.name,'="',s(f.value,!0),'"');e[e.length]=!d||a?">":" />",d&&n&&r[i]&&e.length>0&&(m=e[e.length-1],m.length>0&&"\n"!==m&&e.push("\n"))},end:i=>{let l;e.push("</",i,">"),n&&r[i]&&e.length>0&&(l=e[e.length-1],l.length>0&&"\n"!==l&&e.push("\n"))},text:(i,l)=>{i.length>0&&(e[e.length]=l?i:s(i))},cdata:i=>{e.push("<![CDATA[",i,"]]>")},comment:i=>{e.push("\x3c!--",i,"--\x3e")},pi:(i,l)=>{l?e.push("<?",i," ",s(l),"?>"):e.push("<?",i,"?>"),n&&e.push("\n")},doctype:i=>{e.push("<!DOCTYPE",i,">",n?"\n":"")},reset:()=>{e.length=0},getContent:()=>e.join("").replace(/\n$/,"")}},ro=(t,e=Zn())=>{const n=Ih(t);return(t=t||{}).validate=!("validate"in t)||t.validate,{serialize:o=>{const r=t.validate,s={3:i=>{n.text(i.value,i.raw)},8:i=>{n.comment(i.value)},7:i=>{n.pi(i.name,i.value)},10:i=>{n.doctype(i.value)},4:i=>{n.cdata(i.value)},11:i=>{if(i=i.firstChild)do{a(i)}while(i=i.next)}};n.reset();const a=i=>{const l=s[i.type];if(l)l(i);else{const d=i.name,c=d in e.getVoidElements();let u=i.attributes;if(r&&u&&u.length>1){const f=[];f.map={};const m=e.getElementRule(i.name);if(m){for(let g=0,b=m.attributesOrder.length;g<b;g++){const p=m.attributesOrder[g];if(p in u.map){const h=u.map[p];f.map[p]=h,f.push({name:p,value:h})}}for(let g=0,b=u.length;g<b;g++){const p=u[g].name;if(!(p in f.map)){const h=u.map[p];f.map[p]=h,f.push({name:p,value:h})}}u=f}}if(n.start(d,u,c),!c){let f=i.firstChild;if(f){"pre"!==d&&"textarea"!==d||3!==f.type||"\n"!==f.value[0]||n.text("\n",!0);do{a(f)}while(f=f.next)}n.end(d)}}};return 1!==o.type||t.inner?3===o.type?s[3](o):s[11](o):a(o),n.getContent()}}},Fh=new Set;j(["margin","margin-left","margin-right","margin-top","margin-bottom","padding","padding-left","padding-right","padding-top","padding-bottom","border","border-width","border-style","border-color","background","background-attachment","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","float","position","left","right","top","bottom","z-index","display","transform","width","max-width","min-width","height","max-height","min-height","overflow","overflow-x","overflow-y","text-overflow","vertical-align","transition","transition-delay","transition-duration","transition-property","transition-timing-function"],t=>{Fh.add(t)});const Uh=["font","text-decoration","text-emphasis"],ec=(t,e)=>Xe(t.parseStyle(t.getAttrib(e,"style"))),Xk=(t,e,n)=>{const o=ec(t,e),r=ec(t,n),s=a=>{var i,l;const d=null!==(i=t.getStyle(e,a))&&void 0!==i?i:"",c=null!==(l=t.getStyle(n,a))&&void 0!==l?l:"";return On(d)&&On(c)&&d!==c};return It(o,a=>{const i=l=>It(l,d=>d===a);if(!i(r)&&i(Uh)){const l=it(r,d=>It(Uh,c=>He(d,c)));return It(l,s)}return s(a)})},zh=(t,e,n)=>C.from(n.container()).filter(G).exists(o=>{const r=t?0:-1;return e(o.data.charAt(n.offset()+r))}),nc=X(zh,!0,ws),oc=X(zh,!1,ws),Qk=t=>{const e=t.container();return G(e)&&(0===e.data.length||ka(e.data)&&Es.isBookmarkNode(e.parentNode))},so=(t,e)=>n=>C.from(yd(t?0:-1,n)).filter(e).isSome(),jh=t=>Bf(t)&&"block"===un(N(t),"display"),Vh=t=>{return Dt(t)&&!(et(e=t)&&"all"===e.getAttribute("data-mce-bogus"));var e},Jk=so(!0,jh),Zk=so(!1,jh),As=so(!0,mn),Os=so(!1,mn),Hh=so(!0,rs),$h=so(!1,rs),Lo=so(!0,Vh),Po=so(!1,Vh),Mo=t=>{os(t),Vt(t,ts('<br data-mce-bogus="1">'))},tS=t=>{Bl(t).each(e=>{bo(e).each(n=>{fn(t)&&nr(e)&&fn(n)&&Mt(e)})})},qh=(t,e)=>{return r=Tt,Dn(o=e,n=t)?((a,i)=>{const l=xt(i)?i:Tt;let d=a.dom;const c=[];for(;null!=d.parentNode;){const u=d.parentNode,f=N(u);if(c.push(f),!0===l(f))break;d=u}return c})(n,a=>r(a)||kt(a,o)).slice(0,-1):[];var n,o,r},Fn=(t,e)=>[t].concat(qh(t,e)),rc=(t,e,n)=>xp(t,e,n,Qk),Wh=(t,e)=>Kt(Fn(N(e.container()),t),fn),Kh=(t,e,n)=>rc(t,e.dom,n).forall(o=>Wh(e,n).fold(()=>!1===pn(o,n,e.dom),r=>!1===pn(o,n,e.dom)&&Dn(r,N(o.container())))),Gh=(t,e,n)=>Wh(e,n).fold(()=>rc(t,e.dom,n).forall(o=>!1===pn(o,n,e.dom)),o=>rc(t,o.dom,n).isNone()),sc=X(Gh,!1),Yh=X(Gh,!0),eS=X(Kh,!1),nS=X(Kh,!0),oS=t=>Ua(t).exists(nr),oi=(t,e,n)=>{const o=it(Fn(N(n.container()),e),fn),r=Be(o).getOr(e);return Ie(t,r.dom,n).filter(oS)},ac=(t,e)=>Ua(e).exists(nr)||oi(!0,t,e).isSome(),ic=(t,e)=>{return(n=e,C.from(n.getNode(!0)).map(N)).exists(nr)||oi(!1,t,e).isSome();var n},rS=X(oi,!1),sS=X(oi,!0),Xh=t=>M.isTextPosition(t)&&!t.isAtStart()&&!t.isAtEnd(),Qh=(t,e)=>{const n=it(Fn(N(e.container()),t),fn);return Be(n).getOr(t)},Jh=(t,e)=>Xh(e)?oc(e):oc(e)||vn(Qh(t,e).dom,e).exists(oc),Zh=(t,e)=>Xh(e)?nc(e):nc(e)||tn(Qh(t,e).dom,e).exists(nc),lc=t=>Ua(t).bind(e=>ya(e,$e)).exists(e=>{return n=un(e,"white-space"),Pt(["pre","pre-wrap"],n);var n}),ri=(t,e)=>!lc(e)&&(sc(t,e)||eS(t,e)||ic(t,e)||Jh(t,e)),si=(t,e)=>!lc(e)&&(Yh(t,e)||nS(t,e)||ac(t,e)||Zh(t,e)),tb=(t,e)=>ri(t,e)||si(t,(n=>{const o=n.container(),r=n.offset();return G(o)&&r<o.data.length?M(o,r+1):n})(e)),eb=(t,e)=>Ha(t.charAt(e)),aS=t=>{const e=t.container();return G(e)&&fe(e.data,oe)},nb=(t,e,n)=>{if(0===n)return;const o=N(t),r=er(o,fn).getOr(o),s=t.data.slice(e,e+n),a=e+n>=t.data.length&&si(r,M(t,t.data.length)),i=0===e&&ri(r,M(t,0));t.replaceData(e,n,Wf(s,4,i,a))},ai=(t,e)=>{const n=t.data.slice(e),o=n.length-z1(n).length;nb(t,e,o)},dc=(t,e)=>{const n=t.data.slice(0,e),o=n.length-Bm(n).length;nb(t,e-o,o)},cc=(t,e,n,o=!0)=>{const r=Bm(t.data).length,s=o?t:e,a=o?e:t;return o?s.appendData(a.data):s.insertData(0,a.data),Mt(N(a)),n&&ai(s,r),s},lS=(t,e)=>((n,o)=>{const r=n.container(),s=n.offset();return!1===M.isTextPosition(n)&&r===o.parentNode&&s>M.before(o).offset()})(e,t)?M(e.container(),e.offset()-1):e,ob=t=>{return Qe(t.previousSibling)?C.some(G(e=t.previousSibling)?M(e,e.data.length):M.after(e)):t.previousSibling?yn(t.previousSibling):C.none();var e},rb=t=>{return Qe(t.nextSibling)?C.some(G(e=t.nextSibling)?M(e,0):M.before(e)):t.nextSibling?he(t.nextSibling):C.none();var e},sb=(t,e,n)=>{n.fold(()=>{t.focus()},o=>{t.selection.setRng(o.toRange(),e)})},cS=(t,e)=>e&&ft(t.schema.getBlockElements(),Ot(e)),uS=t=>{if(Yt(t)){const e=ts('<br data-mce-bogus="1">');return os(t),Vt(t,e),C.some(M.before(e.dom))}return C.none()},Io=(t,e,n,o=!0)=>{const r=((t,e,n)=>{return(o=t,r=e,s=n,o?(a=r,rb(i=s).orThunk(()=>ob(i)).orThunk(()=>{return tn(l=a,M.after(d=i)).fold(()=>vn(l,M.before(d)),C.some);var l,d})):((a,i)=>ob(i).orThunk(()=>rb(i)).orThunk(()=>((l,d)=>{const c=M.before(d.previousSibling?d.previousSibling:d.parentNode);return vn(l,c).fold(()=>tn(l,M.after(d)),C.some)})(a,i)))(r,s)).map(X(lS,n));var o,r,s,a,i})(e,t.getBody(),n.dom),s=er(n,X(cS,t),(a=t.getBody(),l=>l.dom===a));var a;const i=((l,d,c)=>{const u=bo(l).filter(Le),f=ns(l).filter(Le);return Mt(l),(m=u,g=f,b=d,p=(h,v,y)=>{const x=h.dom,w=v.dom,S=x.data.length;return cc(x,w,c),y.container()===w?M(x,S):y},m.isSome()&&g.isSome()&&b.isSome()?C.some(p(m.getOrDie(),g.getOrDie(),b.getOrDie())):C.none()).orThunk(()=>(c&&(u.each(h=>dc(h.dom,h.dom.length)),f.each(h=>ai(h.dom,0))),d));var m,g,b,p})(n,r,(d=n,ft(t.schema.getTextInlineElements(),Ot(d))));var d;t.dom.isEmpty(t.getBody())?(t.setContent(""),t.selection.setCursorLocation()):s.bind(uS).fold(()=>{o&&sb(t,e,i)},l=>{o&&sb(t,e,C.some(l))})},uc=t=>ke(t,"td,th"),mc=(t,e)=>({start:t,end:e}),Ts=gn([{singleCellTable:["rng","cell"]},{fullTable:["table"]},{partialTable:["cells","outsideDetails"]},{multiTable:["startTableCells","endTableCells","betweenRng"]}]),ii=(t,e)=>wo(N(t),"td,th",e),ab=t=>!kt(t.start,t.end),ib=(t,e)=>Ss(t.start,e).bind(n=>Ss(t.end,e).bind(o=>Al(kt(n,o),n))),fc=t=>e=>ib(e,t).map(n=>({rng:e,table:n,cells:uc(n)})),lb=(t,e,n,o)=>{if(n.collapsed||!t.forall(ab))return C.none();if(e.isSameTable){const r=t.bind(fc(o));return C.some({start:r,end:r})}{const r=ii(n.startContainer,o),s=ii(n.endContainer,o),a=r.bind((l=o,d=>Ss(d,l).bind(c=>fo(uc(c)).map(u=>mc(d,u))))).bind(fc(o)),i=s.bind((l=>d=>Ss(d,l).bind(c=>Be(uc(c)).map(u=>mc(u,d))))(o)).bind(fc(o));return C.some({start:a,end:i})}var l},db=(t,e)=>Hr(t,n=>kt(n,e)),gc=t=>we(db(t.cells,t.rng.start),db(t.cells,t.rng.end),(e,n)=>t.cells.slice(e,n+1)),cb=(t,e)=>{const{startTable:n,endTable:o}=e,r=t.cloneRange();return n.each(s=>r.setStartAfter(s.dom)),o.each(s=>r.setEndBefore(s.dom)),r},ub=t=>{var e;return(8===Qm(e=t)||"#comment"===Ot(e)?bo(t):Bl(t)).bind(ub).orThunk(()=>C.some(t))},mb=t=>j(t,e=>{qe(e,"contenteditable"),Mo(e)}),pc=(t,e,n,o)=>{const r=n.cloneRange();o?(r.setStart(n.startContainer,n.startOffset),r.setEndAfter(e.dom.lastChild)):(r.setStartBefore(e.dom.firstChild),r.setEnd(n.endContainer,n.endOffset)),hc(t,r,e,!1).each(s=>s())},fb=t=>{const e=vr(t),n=N(t.selection.getNode());va(n.dom)&&Yt(n)?t.selection.setCursorLocation(n.dom,0):t.selection.collapse(!0),e.length>1&&It(e,o=>kt(o,n))&&ge(n,"data-mce-selected","1")},gb=(t,e,n)=>C.some(()=>{const o=t.selection.getRng(),r=n.bind(({rng:s,isStartInTable:a})=>{const i=C.from((d=t).dom.getParent(a?s.endContainer:s.startContainer,d.dom.isBlock)).map(N);var d;s.deleteContents(),((d,c,u)=>{u.each(f=>{c?Mt(f):(Mo(f),d.selection.setCursorLocation(f.dom,0))})})(t,a,i.filter(Yt));const l=a?e[0]:e[e.length-1];return pc(t,l,o,a),Yt(l)?C.none():C.some(a?e.slice(1):e.slice(0,-1))}).getOr(e);mb(r),fb(t)}),fS=(t,e,n,o)=>C.some(()=>{const r=t.selection.getRng(),s=e[0],a=n[n.length-1];pc(t,s,r,!0),pc(t,a,r,!1);const i=Yt(s)?e:e.slice(1),l=Yt(a)?n:n.slice(0,-1);mb(i.concat(l)),o.deleteContents(),fb(t)}),hc=(t,e,n,o=!0)=>C.some(()=>{e.deleteContents();const r=ub(n).getOr(n),s=N(t.dom.getParent(r.dom,t.dom.isBlock));if(Yt(s)&&(Mo(s),o&&t.selection.setCursorLocation(s.dom,0)),!kt(n,s)){const i=Jo(We(s),n)?[]:We(a=s).map(ne).map(l=>it(l,d=>!kt(a,d))).getOr([]);j(i.concat(ne(n)),l=>{kt(l,s)||Dn(l,s)||!Yt(l)||Mt(l)})}var a}),gS=(t,e)=>C.some(()=>Io(t,!1,e)),pb=(t,e)=>Kt(Fn(e,t),Ca),bc=(t,e)=>Kt(Fn(e,t),n=>$e(n)&&"caption"===Ot(n)),li=(t,e)=>C.some(()=>{Mo(e),t.selection.setCursorLocation(e.dom,0)}),hb=(t,e)=>t?Hh(e):$h(e),vc=(t,e)=>{const n=N(t.selection.getStart(!0)),o=vr(t);return t.selection.isCollapsed()&&0===o.length?((t,e,n)=>{const o=N(t.getBody());return bc(o,n).fold(()=>((r,s,a,i)=>{const l=M.fromRangeStart(r.selection.getRng());return pb(a,i).bind(d=>{return Yt(d)?li(r,d):(u=a,m=d,g=l,Va(s,r.getBody(),g).bind(b=>pb(u,N(b.getNode())).bind(p=>kt(p,m)?C.none():C.some(pt))));var u,m,g})})(t,e,o,n).orThunk(()=>Al(((r,s)=>{const a=M.fromRangeStart(r.selection.getRng());return hb(s,a)||Ie(s,r.getBody(),a).exists(i=>hb(s,i))})(t,e),pt)),r=>((s,a,i,l)=>{const d=M.fromRangeStart(s.selection.getRng());return Yt(l)?li(s,l):(u=i,m=l,g=d,Va(f=a,(c=s).getBody(),g).fold(()=>C.some(pt),b=>{return h=f,v=g,y=b,he((p=m).dom).bind(x=>yn(p.dom).map(w=>h?v.isEqual(x)&&y.isEqual(w):v.isEqual(w)&&y.isEqual(x))).getOr(!0)?((p,h)=>li(p,h))(c,m):((p,h,v)=>bc(p,N(v.getNode())).fold(()=>C.some(pt),y=>Al(!kt(y,h),pt)))(u,m,b);var p,h,v,y}));var c,u,f,m,g})(t,e,o,r))})(t,e,n):((r,s,a)=>{const i=N(r.getBody()),l=r.selection.getRng();return 0!==a.length?gb(r,a,C.none()):(d=r,u=l,bc(c=i,s).fold(()=>{return m=d,((t,e)=>{const n=(s=t,a=>kt(s,a)),o=((s,a)=>{const i=ii(s.startContainer,a),l=ii(s.endContainer,a);return we(i,l,mc)})(e,n),r=((s,a)=>{const i=m=>Ss(N(m),a),l=i(s.startContainer),d=i(s.endContainer),c=l.isSome(),u=d.isSome(),f=we(l,d,kt).getOr(!1);return{startTable:l,endTable:d,isStartInTable:c,isEndInTable:u,isSameTable:f,isMultiTable:!f&&c&&u}})(e,n);var s;return((s,a,i)=>s.exists(l=>{return c=i,!ab(d=l)&&ib(d,c).exists(u=>{const f=u.dom.rows;return 1===f.length&&1===f[0].cells.length})&&Ld(l.start,a);var d,c}))(o,e,n)?o.map(s=>Ts.singleCellTable(e,s.start)):r.isMultiTable?((s,a,i,l)=>lb(s,a,i,l).bind(({start:d,end:c})=>{const u=d.bind(gc).getOr([]),f=c.bind(gc).getOr([]);if(u.length>0&&f.length>0){const m=cb(i,a);return C.some(Ts.multiTable(u,f,m))}return C.none()}))(o,r,e,n):((s,a,i,l)=>lb(s,a,i,l).bind(({start:d,end:c})=>d.or(c)).bind(d=>{const{isSameTable:c}=a,u=gc(d).getOr([]);if(c&&d.cells.length===u.length)return C.some(Ts.fullTable(d.table));if(u.length>0){if(c)return C.some(Ts.partialTable(u,C.none()));{const f=cb(i,a);return C.some(Ts.partialTable(u,C.some(Rt(rt({},a),{rng:f}))))}}return C.none()}))(o,r,e,n)})(c,u).bind(p=>p.fold(X(hc,m),X(gS,m),X(gb,m),X(fS,m)));var m},m=>li(d,m)));var d,c,u})(t,n,o)},Bs=(t,e)=>{for(;e&&e!==t;){if(Ln(e)||Dt(e))return e;e=e.parentNode}return null},yc=(t,e)=>{e(t),t.firstChild&&yc(t.firstChild,e),t.next&&yc(t.next,e)},bb=(t,e,n,o)=>{const r=n.name;for(let s=0,a=t.length;s<a;s++){const i=t[s];if(i.name===r){const l=o.nodes[r];l?l.nodes.push(n):o.nodes[r]={filter:i,nodes:[n]}}}if(n.attributes)for(let s=0,a=e.length;s<a;s++){const i=e[s],l=i.name;if(l in n.attributes.map){const d=o.attributes[l];d?d.nodes.push(n):o.attributes[l]={filter:i,nodes:[n]}}}},vb=(t,e)=>{const n=o=>{At(o,r=>{const s=it(r.nodes,a=>ut(a.parent));j(r.filter.callbacks,a=>{a(s,r.filter.name,e)})})};n(t.nodes),n(t.attributes)},yb=(t,e,n,o={})=>{const r=((s,a,i)=>{const l={nodes:{},attributes:{}};return i.firstChild&&yc(i.firstChild,d=>{bb(s,a,d,l)}),l})(t,e,n);vb(r,o)},Cb=(t,e,n,o)=>{e.insert&&n[o.name]?o.empty().append(new be("br",1)):o.empty().append(new be("#text",3)).value=oe},xb=(t,e)=>t&&t.firstChild&&t.firstChild===t.lastChild&&t.firstChild.name===e,di=(t,e,n,o)=>o.isEmpty(e,n,r=>((s,a)=>{const i=s.getElementRule(a.name);return i&&i.paddEmpty})(t,r)),Cc=(t,e,n=t.parent)=>{if(e.getSpecialElements()[t.name])t.empty().remove();else{const o=t.children();for(const r of o)e.isValidChild(n.name,r.name)||Cc(r,e,n);t.unwrap()}},xc=(t,e,n=pt)=>{const o=e.getTextBlockElements(),r=e.getNonEmptyElements(),s=e.getWhitespaceElements(),a=z.makeMap("tr,td,th,tbody,thead,tfoot,table"),i=new Set;for(let l=0;l<t.length;l++){const d=t[l];let c,u,f;if(!d.parent||i.has(d))continue;if(o[d.name]&&"li"===d.parent.name){let g=d.next;for(;g&&o[g.name];)g.name="li",i.add(g),d.parent.insert(g,d.parent),g=g.next;d.unwrap();continue}const m=[d];for(c=d.parent;c&&!e.isValidChild(c.name,d.name)&&!a[c.name];c=c.parent)m.push(c);if(c&&m.length>1)if(e.isValidChild(c.name,d.name)){m.reverse(),u=m[0].clone(),n(u);let g=u;for(let b=0;b<m.length-1;b++){e.isValidChild(g.name,m[b].name)?(f=m[b].clone(),n(f),g.append(f)):f=g;for(let p=m[b].firstChild;p&&p!==m[b+1];){const h=p.next;f.append(p),p=h}g=f}di(e,r,s,u)?c.insert(d,m[0],!0):(c.insert(u,m[0],!0),c.insert(d,u)),c=m[0],(di(e,r,s,c)||xb(c,"br"))&&c.empty().remove()}else Cc(d,e);else if(d.parent){if("li"===d.name){let g=d.prev;if(g&&("ul"===g.name||"ol"===g.name)){g.append(d);continue}if(g=d.next,g&&("ul"===g.name||"ol"===g.name)){g.insert(d,g.firstChild,!0);continue}const b=new be("ul",1);n(b),d.wrap(b);continue}if(e.isValidChild(d.parent.name,"div")&&e.isValidChild("div",d.name)){const g=new be("div",1);n(g),d.wrap(g)}else Cc(d,e)}}},wc=t=>t.collapsed?t:(e=>{const n=M.fromRangeStart(e),o=M.fromRangeEnd(e),r=e.commonAncestorContainer;return Ie(!1,r,o).map(s=>!pn(n,o,r)&&pn(n,s,r)?((a,i,l,d)=>{const c=document.createRange();return c.setStart(a,i),c.setEnd(l,d),c})(n.container(),n.offset(),s.container(),s.offset()):e).getOr(e)})(t),kc=(t,e)=>{const n=t.getParent(e,t.isBlock);return n&&"LI"===n.nodeName?n:null},wb=(t,e)=>{const n=M.after(t),o=bn(e).prev(n);return o?o.toRange():null},Sc=va,yS=(t,e,n)=>{let o,r,s;const a=t.selection,i=t.dom,l=t.parser,d=n.merge,c=ro({validate:!0},t.schema),u='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>';-1===e.indexOf("{$caret}")&&(e+="{$caret}"),e=e.replace(/\{\$caret\}/,u),r=a.getRng();const f=r.startContainer||(r.parentElement?r.parentElement():null),m=t.getBody();var v;f===m&&a.isCollapsed()&&i.isBlock(m.firstChild)&&((v=m.firstChild)&&!t.schema.getVoidElements()[v.nodeName])&&i.isEmpty(m.firstChild)&&(r=i.createRng(),r.setStart(m.firstChild,0),r.setEnd(m.firstChild,0),a.setRng(r)),a.isCollapsed()||(h=>{const v=h.dom,y=wc(h.selection.getRng());h.selection.setRng(y);const x=v.getParent(y.startContainer,Sc);var S,k;S=y,null!==(k=x)&&k===v.getParent(S.endContainer,Sc)&&Ld(N(k),S)?hc(h,y,N(x)):h.getDoc().execCommand("Delete",!1,null)})(t),o=a.getNode();const g={context:o.nodeName.toLowerCase(),data:n.data,insert:!0},b=l.parse(e,g);if(!0===n.paste&&((t,e)=>{let n=e.firstChild,o=e.lastChild;return n&&"meta"===n.name&&(n=n.next),o&&"mce_marker"===o.attr("id")&&(o=o.prev),((r,s)=>{const a=r.getNonEmptyElements();return s&&(s.isEmpty(a)||(l=s,r.getBlockElements()[l.name]&&(d=l).firstChild&&d.firstChild===d.lastChild&&(d=>"br"===d.name||d.value===oe)(l.firstChild)));var l,d})(t,o)&&(o=o.prev),!(!n||n!==o||"ul"!==n.name&&"ol"!==n.name)})(t.schema,b)&&((h,v)=>!!kc(h,v))(i,o))return r=((t,e,n,o)=>{const r=((c,u,f)=>{const m=u.serialize(f);return(g=>{const b=g.firstChild,p=g.lastChild;return b&&"META"===b.nodeName&&b.parentNode.removeChild(b),p&&"mce_marker"===p.id&&p.parentNode.removeChild(p),g})(c.createFragment(m))})(e,t,o),s=kc(e,n.startContainer),a=(t=>{return t.length>0&&(!(n=t[t.length-1]).firstChild||(e=n)&&e.firstChild&&e.firstChild===e.lastChild&&((o=e.firstChild).data===oe||Ut(o)))?t.slice(0,-1):t;var o,e,n})(it(r.firstChild.childNodes,c=>"LI"===c.nodeName)),l=e.getRoot(),d=c=>{const u=M.fromRangeStart(n),f=bn(e.getRoot()),m=1===c?f.prev(u):f.next(u);return!m||kc(e,m.getNode())!==s};return d(1)?((c,u,f)=>{const m=c.parentNode;return z.each(u,g=>{m.insertBefore(g,c)}),((g,b)=>{const p=M.before(g),h=bn(b).next(p);return h?h.toRange():null})(c,f)})(s,a,l):d(2)?(c=s,f=l,e.insertAfter((u=a).reverse(),c),wb(u[0],f)):((c,u,f,m)=>{const g=((p,h)=>{const v=h.cloneRange(),y=h.cloneRange();return v.setStartBefore(p),y.setEndAfter(p),[v.cloneContents(),y.cloneContents()]})(c,m),b=c.parentNode;return b.insertBefore(g[0],c),z.each(u,p=>{b.insertBefore(p,c)}),b.insertBefore(g[1],c),b.removeChild(c),wb(u[u.length-1],f)})(s,a,l,n);var c,u,f})(c,i,a.getRng(),b),a.setRng(r),e;if((h=>{let v=h;for(;v=v.walk();)1===v.type&&v.attr("data-mce-fragment","1")})(b),s=b.lastChild,"mce_marker"===s.attr("id")){const h=s;for(s=s.prev;s;s=s.walk(!0))if(3===s.type||!i.isBlock(s.name)){t.schema.isValidChild(s.parent.name,"span")&&s.parent.insert(h,s,"br"===s.name);break}}if(t._selectionOverrides.showBlockCaretContainer(o),g.invalid){t.selection.setContent(u),o=a.getNode();const h=t.getBody();for(9===o.nodeType?o=s=h:s=o;s!==h;)o=s,s=s.parentNode;e=o===h?h.innerHTML:i.getOuterHTML(o);const v=l.parse(e);for(let S=v;S;S=S.walk())if("mce_marker"===S.attr("id")){S.replace(b);break}const y=b.children(),x=b.parent.name;b.unwrap();const w=it(y,S=>!t.schema.isValidChild(x,S.name));xc(w,t.schema),yb(l.getNodeFilters(),l.getAttributeFilters(),v),e=c.serialize(v),o===h?i.setHTML(h,e):i.setOuterHTML(o,e)}else e=c.serialize(b),((h,v,y)=>{if("all"===y.getAttribute("data-mce-bogus"))y.parentNode.insertBefore(h.dom.createFragment(v),y);else{const x=y.firstChild,w=y.lastChild;!x||x===w&&"BR"===x.nodeName?h.dom.setHTML(y,v):h.selection.setContent(v,{no_events:!0})}})(t,e,o);var p;return((h,v)=>{const y=h.schema.getTextInlineElements(),x=h.dom;if(v){const w=h.getBody(),S=Ph(x);z.each(x.select("*[data-mce-fragment]"),k=>{if(ut(y[k.nodeName.toLowerCase()])&&Ko(ec(x,k),I=>!Fh.has(I)))for(let T=k.parentNode;ut(T)&&T!==w&&!Xk(x,k,T);T=T.parentNode)if(S.compare(T,k)){x.remove(k,!0);break}})}})(t,d),((h,v)=>{let y;const x=h.dom,w=h.selection;if(!v)return;w.scrollIntoView(v);const S=Bs(h.getBody(),v);if("false"===x.getContentEditable(S))return x.remove(v),void w.select(S);let k=x.createRng();const T=v.previousSibling;if(G(T)){k.setStart(T,T.nodeValue.length);const I=v.nextSibling;G(I)&&(T.appendData(I.data),I.parentNode.removeChild(I))}else k.setStartBefore(v),k.setEndBefore(v);const O=x.getParent(v,x.isBlock);x.remove(v),O&&x.isEmpty(O)&&(os(N(O)),k.setStart(O,0),k.setEnd(O,0),Sc(O)||O.getAttribute("data-mce-fragment")||!(y=(I=>{let R=M.fromRangeStart(I);if(R=bn(h.getBody()).next(R),R)return R.toRange()})(k))?x.add(O,x.create("br",{"data-mce-bogus":"1"})):(k=y,x.remove(O))),w.setRng(k)})(t,i.get("mce_marker")),p=t.getBody(),z.each(p.getElementsByTagName("*"),h=>{h.removeAttribute("data-mce-fragment")}),((h,v)=>{C.from(h.getParent(v,"td,th")).map(N).each(tS)})(i,a.getStart()),e},ci=t=>t instanceof be,Ec=(t,e,n)=>{var o;t.dom.setHTML(t.getBody(),e),!0!==n&&Do(o=t)&&he(o.getBody()).each(r=>{const s=r.getNode(),a=rs(s)?he(s).getOr(r):r;o.selection.setRng(a.toRange())})},kb=t=>xt(t)?t:Tt,_c=(t,e,n)=>{const o=e(t),r=kb(n);return o.orThunk(()=>r(t)?C.none():((s,a,i)=>{let l=s.dom;const d=kb(i);for(;l.parentNode;){l=l.parentNode;const c=N(l),u=a(c);if(u.isSome())return u;if(d(c))break}return C.none()})(t,e,r))},Nc=Ad,Sb=(t,e,n)=>{const o=t.formatter.get(n);if(o)for(let r=0;r<o.length;r++){const s=o[r];if(De(s)&&!1===s.inherit&&t.dom.is(e,s.selector))return!0}return!1},Rc=(t,e,n,o,r)=>{const s=t.dom.getRoot();return e!==s&&(e=t.dom.getParent(e,a=>!!Sb(t,a,n)||a.parentNode===s||!!wn(t,a,n,o,!0)),!!wn(t,e,n,o,r))},ui=(t,e,n)=>!(!Qt(n)||!Nc(e,n.inline))||!(!xn(n)||!Nc(e,n.block))||!!De(n)&&et(e)&&t.is(e,n.selector),Eb=(t,e,n,o,r,s)=>{const a=n[o];if(xt(n.onmatch))return n.onmatch(e,n,o);if(a)if(Ce(a.length)){for(const i in a)if(ft(a,i)){const l="attributes"===o?t.getAttrib(e,i):Wa(t,e,i),d=Mn(a[i],s),c=Oe(l)||la(l);if(c&&Oe(d))continue;if(r&&c&&!n.exact||(!r||n.exact)&&!Nc(l,Od(d,i)))return!1}}else for(let i=0;i<a.length;i++)if("attributes"===o?t.getAttrib(e,a[i]):Wa(t,e,a[i]))return!0;return!0},wn=(t,e,n,o,r)=>{const s=t.formatter.get(n),a=t.dom;if(s&&e)for(let i=0;i<s.length;i++){const l=s[i];if(ui(t.dom,e,l)&&Eb(a,e,l,"attributes",r,o)&&Eb(a,e,l,"styles",r,o)){const d=l.classes;if(d)for(let c=0;c<d.length;c++)if(!t.dom.hasClass(e,Mn(d[c],o)))return;return l}}},Ac=(t,e,n,o,r)=>{if(o)return Rc(t,o,e,n,r);if(o=t.selection.getNode(),Rc(t,o,e,n,r))return!0;const s=t.selection.getStart();return!(s===o||!Rc(t,s,e,n,r))},_b="_mce_caret",Nb=t=>(e=>{const n=[];for(;e;){if(3===e.nodeType&&"\ufeff"!==e.nodeValue||e.childNodes.length>1)return[];1===e.nodeType&&n.push(e),e=e.firstChild}return n})(t).length>0,Rb=t=>{if(t){const e=new Gt(t,t);for(t=e.current();t;t=e.next())if(G(t))return t}return null},Oc=t=>{const e=Ft("span");return cn(e,{id:_b,"data-mce-bogus":"1","data-mce-type":"format-caret"}),t&&Vt(e,es("\ufeff")),e},Tc=(t,e,n=!0)=>{const o=t.dom,r=t.selection;if(Nb(e))Io(t,!1,N(e),n);else{const s=r.getRng(),a=o.getParent(e,o.isBlock),i=s.startContainer,l=s.startOffset,d=s.endContainer,c=s.endOffset,u=(f=>{const m=Rb(f);return m&&"\ufeff"===m.nodeValue.charAt(0)&&m.deleteData(0,1),m})(e);o.remove(e,!0),i===u&&l>0&&s.setStart(u,l-1),d===u&&c>0&&s.setEnd(u,c-1),a&&o.isEmpty(a)&&Mo(N(a)),r.setRng(s)}},Bc=(t,e,n=!0)=>{const o=t.dom,r=t.selection;if(e)Tc(t,e,n);else if(!(e=Bo(t.getBody(),r.getStart())))for(;e=o.get(_b);)Tc(t,e,!1)},Ab=(t,e)=>(t.appendChild(e),e),Ob=(t,e)=>{const n=aa(t,(o,r)=>Ab(o,r.cloneNode(!1)),e);return Ab(n,n.ownerDocument.createTextNode("\ufeff"))},wS=(t,e)=>{const n=t.schema.getTextInlineElements();return ft(n,Ot(e))&&!Cn(e.dom)&&!xo(e.dom)},mi={},Tb=Xo,Bb=Gr;mi.pre||(mi.pre=[]),mi.pre.push(t=>{const e=t.selection.getRng();let n;const r=Ge(["pre"]);e.collapsed||(n=t.selection.getSelectedBlocks(),Bb(Tb(Tb(n,r),s=>r(s.previousSibling)&&-1!==_m(n,s.previousSibling)),s=>{((a,i)=>{const l=N(i),d=Wn(l).dom;Mt(l),yo(N(a),[Ft("br",d),Ft("br",d),...ne(l)])})(s.previousSibling,s)}))});const Dc=z.each,Lc=t=>et(t)&&!Fe(t)&&!Cn(t)&&!xo(t),Db=(t,e)=>{for(let n=t;n;n=n[e]){if(G(n)&&On(n.data))return t;if(et(n)&&!Fe(n))return n}return t},Lb=(t,e,n)=>{const o=Ph(t);if(e&&n&&(e=Db(e,"previousSibling"),n=Db(n,"nextSibling"),o.compare(e,n))){for(let r=e.nextSibling;r&&r!==n;){const s=r;r=r.nextSibling,e.appendChild(s)}return t.remove(n),z.each(z.grep(n.childNodes),r=>{e.appendChild(r)}),e}return n},Pb=(t,e,n,o)=>{if(o&&!1!==e.merge_siblings){const r=Lb(t,Tp(o),o);Lb(t,r,Tp(r,!0))}},Pc=(t,e,n)=>{Dc(t.childNodes,o=>{Lc(o)&&(e(o)&&n(o),o.hasChildNodes()&&Pc(o,e,n))})},Mb=(t,e)=>n=>!(!n||!Wa(t,n,e)),Ib=(t,e,n)=>o=>{var r,s;t.setStyle(o,e,n),""===o.getAttribute("style")&&o.removeAttribute("style"),r=t,"SPAN"===(s=o).nodeName&&0===r.getAttribs(s).length&&r.remove(s,!0)},Ds=gn([{keep:[]},{rename:["name"]},{removed:[]}]),kS=/^(src|href|style)$/,Mc=z.each,fi=Ad,Fb=(t,e,n)=>t.isChildOf(e,n)&&e!==n&&!t.isBlock(n),Ub=(t,e,n)=>{let o=e[n?"startContainer":"endContainer"],r=e[n?"startOffset":"endOffset"];if(et(o)){const s=o.childNodes.length-1;!n&&r&&r--,o=o.childNodes[r>s?s:r]}return G(o)&&n&&r>=o.nodeValue.length&&(o=new Gt(o,t.getBody()).next()||o),G(o)&&!n&&0===r&&(o=new Gt(o,t.getBody()).prev()||o),o},zb=(t,e)=>{const n=e?"firstChild":"lastChild";if(/^(TR|TH|TD)$/.test(t.nodeName)&&t[n]){const o=t[n];return"TR"===t.nodeName&&o[n]||o}return t},Ic=(t,e,n,o)=>{const r=t.create(n,o);return e.parentNode.insertBefore(r,e),r.appendChild(e),r},jb=(t,e,n,o,r)=>{const s=N(e),a=N(t.create(o,r)),i=n?uf(s):cf(s);return yo(a,i),n?(Ke(s,a),wf(a,s)):(Kn(s,a),Vt(a,s)),a.dom},Vb=(t,e,n,o,r)=>{let s;const a=t.dom;if(!ui(a,o,e)&&(!e.links||"A"!==o.nodeName))return Ds.keep();const i=o;if(Qt(e)&&"all"===e.remove&&Wt(e.preserve_attributes)){const l=it(a.getAttribs(i),d=>Pt(e.preserve_attributes,d.name.toLowerCase()));if(a.removeAllAttribs(i),j(l,d=>a.setAttrib(i,d.name,d.value)),l.length>0)return Ds.rename("span")}if("all"!==e.remove){Mc(e.styles,(d,c)=>{d=Od(Mn(d,n),c+""),an(c)&&(c=d,r=null),(e.remove_similar||!r||fi(Wa(a,r,c),d))&&a.setStyle(i,c,""),s=!0}),s&&""===a.getAttrib(i,"style")&&(i.removeAttribute("style"),i.removeAttribute("data-mce-style")),Mc(e.attributes,(d,c)=>{let u;if(d=Mn(d,n),an(c)&&(c=d,r=null),e.remove_similar||!r||fi(a.getAttrib(r,c),d)){if("class"===c&&(d=a.getAttrib(i,c))&&(u="",j(d.split(/\s+/),f=>{/mce\-\w+/.test(f)&&(u+=(u?" ":"")+f)}),u))return void a.setAttrib(i,c,u);if(kS.test(c)&&i.removeAttribute("data-mce-"+c),"style"===c&&Ge(["li"])(i)&&"none"===a.getStyle(i,"list-style-type"))return i.removeAttribute(c),void a.setStyle(i,"list-style-type","none");"class"===c&&i.removeAttribute("className"),i.removeAttribute(c)}}),Mc(e.classes,d=>{d=Mn(d,n),r&&!a.hasClass(r,d)||a.removeClass(i,d)});const l=a.getAttribs(i);for(let d=0;d<l.length;d++){const c=l[d].nodeName;if(0!==c.indexOf("_")&&0!==c.indexOf("data-"))return Ds.keep()}}return"none"!==e.remove?(((l,d,c)=>{const u=d.parentNode;let f;const m=l.dom,g=Se(l);var b;xn(c)&&u===m.getRoot()&&(c.list_block&&fi(d,c.list_block)||j(xe(d.childNodes),b=>{pr(l,g,b.nodeName.toLowerCase())?f?f.appendChild(b):(f=Ic(m,b,g),m.setAttribs(f,Ao(l))):f=null})),De(b=c)&&Qt(b)&&Jo(Nt(b,"mixed"),!0)&&!fi(c.inline,d)||m.remove(d,!0)})(t,i,e),Ds.removed()):Ds.keep()},wr=(t,e,n,o,r)=>Vb(t,e,n,o,r).fold(Tt,s=>(t.dom.rename(o,s),!0),jt),SS=(t,e,n,o)=>Vb(t,e,n,o,o).fold(K(o),r=>(t.dom.createFragment().appendChild(o),t.dom.rename(o,r)),K(null)),Hb=(t,e,n,o,r)=>{const s=t.formatter.get(e),a=s[0];let i=!0;const l=t.dom,d=t.selection,c=b=>{const p=((h,v,y,x,w)=>{let S;return j(Ka(h.dom,v.parentNode).reverse(),k=>{if(!S&&"_start"!==k.id&&"_end"!==k.id){const T=wn(h,k,y,x,w);T&&!1!==T.split&&(S=k)}}),S})(t,b,e,n,r);return((h,v,y,x,w,S,k,T)=>{let O,I,R;const P=h.dom;if(y){const L=y.parentNode;for(let U=x.parentNode;U&&U!==L;U=U.parentNode){O=P.clone(U,!1);for(let V=0;V<v.length&&(O=SS(h,v[V],T,O),null!==O);V++);O&&(I&&O.appendChild(I),R||(R=O),I=O)}k.mixed&&P.isBlock(y)||(x=P.split(y,x)),I&&(w.parentNode.insertBefore(I,w),R.appendChild(w),Qt(k)&&Pb(P,k,0,I))}return x})(t,s,p,b,b,0,a,n)},u=b=>It(s,p=>wr(t,p,n,b,b)),f=b=>{let p=!0,h=!1;et(b)&&l.getContentEditable(b)&&(p=i,i="true"===l.getContentEditable(b),h=!0);const v=xe(b.childNodes);if(i&&!h){const y=u(b)||It(s,w=>ui(l,b,w)),x=b.parentNode;!y&&ut(x)&&Td(a)&&u(x)}if(a.deep&&v.length){for(let y=0;y<v.length;y++)f(v[y]);h&&(i=p)}j(["underline","line-through","overline"],y=>{et(b)&&t.dom.getStyle(b,"text-decoration")===y&&b.parentNode&&Bp(l,b.parentNode)===y&&wr(t,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:y}},null,b)})},m=b=>{const p=l.get(b?"_start":"_end");let h=p[b?"firstChild":"lastChild"];return Fe(v=h)&&et(v)&&("_start"===v.id||"_end"===v.id)&&(h=h[b?"firstChild":"lastChild"]),G(h)&&0===h.data.length&&(h=b?p.previousSibling||p.nextSibling:p.nextSibling||p.previousSibling),l.remove(p,!0),h;var v},g=b=>{let p,h,v=br(t,b,s,b.collapsed);if(a.split){if(v=ti(v),p=Ub(t,v,!0),h=Ub(t,v),p!==h){if(p=zb(p,!0),h=zb(h,!1),Fb(l,p,h)){const x=C.from(p.firstChild).getOr(p);return c(jb(l,x,!0,"span",{id:"_start","data-mce-type":"bookmark"})),void m(!0)}if(Fb(l,h,p)){const x=C.from(h.lastChild).getOr(h);return c(jb(l,x,!1,"span",{id:"_end","data-mce-type":"bookmark"})),void m(!1)}p=Ic(l,p,"span",{id:"_start","data-mce-type":"bookmark"}),h=Ic(l,h,"span",{id:"_end","data-mce-type":"bookmark"});const y=l.createRng();y.setStartAfter(p),y.setEndBefore(h),ks(l,y,x=>{j(x,w=>{Fe(w)||Fe(w.parentNode)||c(w)})}),c(p),c(h),p=m(!0),h=m()}else p=h=c(p);v.startContainer=p.parentNode?p.parentNode:p,v.startOffset=l.nodeIndex(p),v.endContainer=h.parentNode?h.parentNode:h,v.endOffset=l.nodeIndex(h)+1}ks(l,v,y=>{j(y,f)})};if(o){if(qa(o)){const b=l.createRng();b.setStartBefore(o),b.setEndAfter(o),g(b)}else g(o);Ud(t,e,o,n)}else if("false"!==l.getContentEditable(d.getNode()))d.isCollapsed()&&Qt(a)&&!vr(t).length?((t,e,n,o)=>{const r=t.dom,s=t.selection;let a,i,l;const d=[],c=s.getRng(),u=c.startContainer;for(i=u,3===u.nodeType&&(c.startOffset!==u.nodeValue.length&&(a=!0),i=i.parentNode);i;){if(wn(t,i,e,n,o)){l=i;break}i.nextSibling&&(a=!0),d.push(i),i=i.parentNode}if(l)if(a){const m=s.getBookmark();c.collapse(!0);let g=br(t,c,t.formatter.get(e),!0);g=ti(g),t.formatter.remove(e,n,g,o),s.moveToBookmark(m)}else{const m=Bo(t.getBody(),l),g=Oc(!1).dom;((h,v,y)=>{const x=h.dom,w=x.getParent(y,X(Nd,h));w&&x.isEmpty(w)?y.parentNode.replaceChild(v,y):((S=>{const k=ke(S,"br"),T=it((O=>{const I=[];let R=O.dom;for(;R;)I.push(N(R)),R=R.lastChild;return I})(S).slice(-1),nr);k.length===T.length&&j(T,Mt)})(N(y)),x.isEmpty(y)?y.parentNode.replaceChild(v,y):x.insertAfter(v,y))})(t,g,null!==m?m:l);const b=((h,v,y,x,w,S)=>{const k=h.formatter,T=h.dom,O=it(Xe(k.get()),R=>R!==x&&!fe(R,"removeformat")),I=(R=h,P=y,Te(O,(U,V)=>{const nt=It(R.formatter.get(V),bt=>{const Et=dt=>dt.length>1&&"%"===dt.charAt(0);return It(["styles","attributes"],dt=>Nt(bt,dt).exists(ht=>{const _t=Wt(ht)?ht:Sm(ht);return It(_t,Et)}))});return R.formatter.matchNode(P,V,{},nt)?U.concat([V]):U},[]));var R,P;if(it(I,R=>!((P,L,U)=>{const V=["inline","block","selector","attributes","styles","classes"],nt=ct=>Kr(ct,(lt,bt)=>It(V,Et=>Et===bt));return It(P.formatter.get(L),ct=>{const lt=nt(ct);return It(P.formatter.get(U),bt=>{const Et=nt(bt);return((dt,ht,_t=fl)=>fm(_t).eq(dt,ht))(lt,Et)})})})(h,R,x)).length>0){const R=y.cloneNode(!1);return T.add(v,R),k.remove(x,w,R,S),T.remove(R),C.some(R)}return C.none()})(t,g,l,e,n,o),p=Ob(d.concat(b.toArray()),g);Tc(t,m,!1),s.setCursorLocation(p,1),r.isEmpty(l)&&r.remove(l)}})(t,e,n,r):(Id(d,!0,()=>{Md(t,g)}),Qt(a)&&Ac(t,e,n,d.getStart())&&Op(l,d,d.getRng()),t.nodeChanged()),Ud(t,e,o,n);else{o=d.getNode();for(let b=0;b<s.length&&(!s[b].ceFalseOverride||!wr(t,s[b],n,o,o));b++);Ud(t,e,o,n)}},$b=z.each,gi=z.each,ES=t=>et(t)&&!Fe(t)&&!Cn(t)&&!xo(t),qb=(t,e,n,o)=>{const r=t.formatter.get(e),s=r[0],a=!o&&t.selection.isCollapsed(),i=t.dom,l=t.selection,d=(m,g=s)=>{if(xt(g.onformat)&&g.onformat(m,g,n,o),gi(g.styles,(b,p)=>{i.setStyle(m,p,Mn(b,n))}),g.styles){const b=i.getAttrib(m,"style");b&&i.setAttrib(m,"data-mce-style",b)}gi(g.attributes,(b,p)=>{i.setAttrib(m,p,Mn(b,n))}),gi(g.classes,b=>{b=Mn(b,n),i.hasClass(m,b)||i.addClass(m,b)})},c=(m,g)=>{let b=!1;return gi(m,p=>!!De(p)&&(ut(p.collapsed)&&p.collapsed!==a?void 0:i.is(g,p.selector)&&!Cn(g)?(d(g,p),b=!0,!1):void 0)),b},f=(m,g,b)=>{const p=[];let h=!0;const v=s.inline||s.block,y=(m=>{if(at(m)){const g=i.create(m);return d(g),g}return null})(v);ks(m,g,x=>{let w;const S=k=>{let T=!1,O=h;const I=k.nodeName.toLowerCase(),R=k.parentNode,P=R.nodeName.toLowerCase();if(et(k)&&m.getContentEditable(k)&&(O=h,h="true"===m.getContentEditable(k),T=!0),Ut(k)&&!((L,U,V,nt)=>{if(kw(L)&&Qt(U)){const ct=Rt(rt({},L.schema.getTextBlockElements()),{td:{},th:{},li:{},dt:{},dd:{},figcaption:{},caption:{},details:{},summary:{}}),lt=((t,e)=>((n,o)=>{const r=n.dom;return r.parentNode?(s=N(r.parentNode),Kt(s.dom.childNodes,i=>(s=>!kt(n,s)&&o(s))(N(i))).map(N)):C.none();var s})(t,e).isSome())(N(V),bt=>Cn(bt.dom));return Yo(ct,nt)&&Yt(N(V.parentNode),!1)&&!lt}return!1})(t,s,k,P))return w=null,void(xn(s)&&m.remove(k));if(xn(s)&&s.wrapper&&wn(t,k,e,n))w=null;else{if(h&&!T&&xn(s)&&!s.wrapper&&Nd(t,I)&&pr(t,P,v)){const L=m.rename(k,v);return d(L),p.push(L),void(w=null)}if(De(s)){let L=c(r,k);if(!L&&ut(R)&&Td(s)&&(L=c(r,R)),!Qt(s)||L)return void(w=null)}!h||T||!pr(t,v,I)||!pr(t,P,v)||!b&&G(k)&&ka(k.data)||Cn(k)||Qt(s)&&m.isBlock(k)?(w=null,j(xe(k.childNodes),S),T&&(h=O),w=null):(w||(w=m.clone(y,!1),k.parentNode.insertBefore(w,k),p.push(w)),w.appendChild(k))}};j(x,S)}),!0===s.links&&j(p,x=>{const w=S=>{"A"===S.nodeName&&d(S,s),j(xe(S.childNodes),w)};w(x)}),j(p,x=>{const w=(S=>{let k=0;return j(S.childNodes,T=>{var O;ut(O=T)&&G(O)&&0===O.length||Fe(T)||k++}),k})(x);var S;!(p.length>1)&&m.isBlock(x)||0!==w?(Qt(s)||xn(s)&&s.wrapper)&&(s.exact||1!==w||(x=Kt((S=x).childNodes,ES).filter(T=>ui(m,T,s)).map(T=>{const O=m.clone(T,!1);return d(O),m.replace(O,S,!0),m.remove(T,!0),O}).getOr(S)),((S,k,T,O)=>{$b(k,I=>{var R,P,L;Qt(I)&&$b(S.dom.select(I.inline,O),R=>{Lc(R)&&wr(S,I,T,R,I.exact?R:null)}),R=S.dom,L=O,(P=I).clear_child_styles&&Dc(R.select(P.links?"*:not(a)":"*",L),V=>{Lc(V)&&Dc(P.styles,(nt,ct)=>{R.setStyle(V,ct,"")})})})})(t,r,n,x),((S,k,T,O,I)=>{wn(S,I.parentNode,T,O)&&wr(S,k,O,I)||k.merge_with_parents&&S.dom.getParent(I.parentNode,R=>{if(wn(S,R,T,O))return wr(S,k,O,I),!0})})(t,s,e,n,x),((S,k,T,O)=>{k.styles&&k.styles.backgroundColor&&Pc(O,Mb(S,"fontSize"),Ib(S,"backgroundColor",Mn(k.styles.backgroundColor,T)))})(m,s,n,x),((S,k,T,O)=>{const I=R=>{if(1===R.nodeType&&R.parentNode&&1===R.parentNode.nodeType){const P=Bp(S,R.parentNode);S.getStyle(R,"color")&&P?S.setStyle(R,"text-decoration",P):S.getStyle(R,"text-decoration")===P&&S.setStyle(R,"text-decoration",null)}};k.styles&&(k.styles.color||k.styles.textDecoration)&&(z.walk(O,I,"childNodes"),I(O))})(m,s,0,x),((S,k,T,O)=>{!Qt(k)||"sub"!==k.inline&&"sup"!==k.inline||(Pc(O,Mb(S,"fontSize"),Ib(S,"fontSize","")),S.remove(S.select("sup"===k.inline?"sub":"sup",O),!0))})(m,s,0,x),Pb(m,s,0,x)):m.remove(x,!0)})};if("false"!==i.getContentEditable(l.getNode())){if(s){if(o)if(qa(o)){if(!c(r,o)){const m=i.createRng();m.setStartBefore(o),m.setEndAfter(o),f(i,br(t,m,r),!0)}}else f(i,o,!0);else a&&Qt(s)&&!vr(t).length?((m,g,b)=>{let p,h;const v=m.selection,y=v.getRng();let x=y.startOffset;const w=y.startContainer.nodeValue;p=Bo(m.getBody(),v.getStart()),p&&(h=Rb(p));const S=/[^\s\u00a0\u00ad\u200b\ufeff]/;if(w&&x>0&&x<w.length&&S.test(w.charAt(x))&&S.test(w.charAt(x-1))){const O=v.getBookmark();y.collapse(!0);let I=br(m,y,m.formatter.get(g));I=ti(I),m.formatter.apply(g,b,I),v.moveToBookmark(O)}else p&&"\ufeff"===h.nodeValue||(k=m.getDoc(),T=Oc(!0).dom,p=k.importNode(T,!0),h=p.firstChild,y.insertNode(p),x=1),m.formatter.apply(g,b,p),v.setCursorLocation(h,x);var k,T})(t,e,n):(l.setRng(wc(l.getRng())),Id(l,!0,()=>{Md(t,(m,g)=>{const b=g?m:br(t,m,r);f(i,b,!1)})}),Op(i,l,l.getRng()),t.nodeChanged());g=t,Bb(mi[e],b=>{b(g)})}Xp(t,e,o,n)}else{o=l.getNode();for(let m=0,g=r.length;m<g;m++){const b=r[m];if(b.ceFalseOverride&&De(b)&&i.is(o,b.selector)){d(o,b);break}}Xp(t,e,o,n)}var g},Wb=t=>ft(t,"vars"),Kb=t=>t.selection.getStart(),Gb=(t,e,n,o,r)=>Cm(e,s=>{const a=t.formatter.matchNode(s,n,null!=r?r:{},o);return!Ce(a)},s=>!!Sb(t,s,n)||!o&&ut(t.formatter.matchNode(s,n,r,!0))),Yb=(t,e)=>{const n=null!=e?e:Kb(t);return it(Ka(t.dom,n),o=>et(o)&&!xo(o))},Xb=(t,e,n)=>{const o=Yb(t,e);At(n,(r,s)=>{const a=i=>{const l=Gb(t,o,s,i.similar,Wb(i)?i.vars:void 0),d=l.isSome();if(i.state.get()!==d){i.state.set(d);const c=l.getOr(e);Wb(i)?i.callback(d,{node:c,format:s,parents:o}):j(i.callbacks,u=>u(d,{node:c,format:s,parents:o}))}};j([r.withSimilar,r.withoutSimilar],a),j(r.withVars,a)})};var _S=Object.hasOwnProperty,Qb=Object.setPrototypeOf,NS=Object.isFrozen,RS=Object.getPrototypeOf,AS=Object.getOwnPropertyDescriptor,Ee=Object.freeze,kn=Object.seal,OS=Object.create,Jb="undefined"!=typeof Reflect&&Reflect,pi=Jb.apply,Fc=Jb.construct;pi||(pi=function(t,e,n){return t.apply(e,n)}),Ee||(Ee=function(t){return t}),kn||(kn=function(t){return t}),Fc||(Fc=function(t,e){return new(Function.prototype.bind.apply(t,[null].concat(function(n){if(Array.isArray(n)){for(var o=0,r=Array(n.length);o<n.length;o++)r[o]=n[o];return r}return Array.from(n)}(e))))});var Zb,TS=en(Array.prototype.forEach),BS=en(Array.prototype.pop),Ls=en(Array.prototype.push),hi=en(String.prototype.toLowerCase),DS=en(String.prototype.match),ao=en(String.prototype.replace),LS=en(String.prototype.indexOf),PS=en(String.prototype.trim),_e=en(RegExp.prototype.test),Uc=(Zb=TypeError,function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return Fc(Zb,e)});function en(t){return function(e){for(var n=arguments.length,o=Array(n>1?n-1:0),r=1;r<n;r++)o[r-1]=arguments[r];return pi(t,e,o)}}function yt(t,e){Qb&&Qb(t,null);for(var n=e.length;n--;){var o=e[n];if("string"==typeof o){var r=hi(o);r!==o&&(NS(e)||(e[n]=r),o=r)}t[o]=!0}return t}function Fo(t){var e=OS(null),n=void 0;for(n in t)pi(_S,t,[n])&&(e[n]=t[n]);return e}function bi(t,e){for(;null!==t;){var n=AS(t,e);if(n){if(n.get)return en(n.get);if("function"==typeof n.value)return en(n.value)}t=RS(t)}return function(o){return console.warn("fallback value for",o),null}}var t0=Ee(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),zc=Ee(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),jc=Ee(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),MS=Ee(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Vc=Ee(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),IS=Ee(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),e0=Ee(["#text"]),n0=Ee(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),Hc=Ee(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),o0=Ee(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),vi=Ee(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),FS=kn(/\{\{[\s\S]*|[\s\S]*\}\}/gm),US=kn(/<%[\s\S]*|[\s\S]*%>/gm),zS=kn(/^data-[\-\w.\u00B7-\uFFFF]/),jS=kn(/^aria-[\-\w]+$/),VS=kn(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),HS=kn(/^(?:\w+script|data):/i),$S=kn(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),qS=kn(/^html$/i),Ps="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function Sn(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}var WS=function(){return"undefined"==typeof window?null:window},KS=function(t,e){if("object"!==(void 0===t?"undefined":Ps(t))||"function"!=typeof t.createPolicy)return null;var n=null,o="data-tt-policy-suffix";e.currentScript&&e.currentScript.hasAttribute(o)&&(n=e.currentScript.getAttribute(o));var r="dompurify"+(n?"#"+n:"");try{return t.createPolicy(r,{createHTML:function(s){return s}})}catch(s){return console.warn("TrustedTypes policy "+r+" could not be created."),null}},GS=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:WS(),n=function(D){return t(D)};if(n.version="2.3.6",n.removed=[],!e||!e.document||9!==e.document.nodeType)return n.isSupported=!1,n;var o=e.document,r=e.document,s=e.DocumentFragment,a=e.HTMLTemplateElement,i=e.Node,l=e.Element,d=e.NodeFilter,c=e.NamedNodeMap,u=void 0===c?e.NamedNodeMap||e.MozNamedAttrMap:c,f=e.HTMLFormElement,m=e.DOMParser,g=e.trustedTypes,b=l.prototype,p=bi(b,"cloneNode"),h=bi(b,"nextSibling"),v=bi(b,"childNodes"),y=bi(b,"parentNode");if("function"==typeof a){var x=r.createElement("template");x.content&&x.content.ownerDocument&&(r=x.content.ownerDocument)}var w=KS(g,o),S=w?w.createHTML(""):"",k=r,T=k.implementation,O=k.createNodeIterator,I=k.createDocumentFragment,R=k.getElementsByTagName,P=o.importNode,L={};try{L=Fo(r).documentMode?r.documentMode:{}}catch(D){}var U={};n.isSupported="function"==typeof y&&T&&void 0!==T.createHTMLDocument&&9!==L;var V=FS,nt=US,ct=zS,lt=jS,bt=HS,Et=$S,dt=VS,ht=null,_t=yt({},[].concat(Sn(t0),Sn(zc),Sn(jc),Sn(Vc),Sn(e0))),J=null,E=yt({},[].concat(Sn(n0),Sn(Hc),Sn(o0),Sn(vi))),_=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),A=null,B=null,F=!0,H=!0,$=!1,q=!1,Y=!1,gt=!1,W=!1,st=!1,Ct=!1,de=!1,Jt=!0,se=!0,Zt=!1,ye={},te=null,uo=yt({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),jn=null,ll=yt({},["audio","video","img","source","image","track"]),Zs=null,ta=yt({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Ir="http://www.w3.org/1998/Math/MathML",ea="http://www.w3.org/2000/svg",Rn="http://www.w3.org/1999/xhtml",dl=Rn,C1=!1,na=void 0,bR=["application/xhtml+xml","text/html"],vR="text/html",qo=void 0,Fr=null,yR=r.createElement("form"),x1=function(D){return D instanceof RegExp||D instanceof Function},um=function(D){Fr&&Fr===D||(D&&"object"===(void 0===D?"undefined":Ps(D))||(D={}),D=Fo(D),ht="ALLOWED_TAGS"in D?yt({},D.ALLOWED_TAGS):_t,J="ALLOWED_ATTR"in D?yt({},D.ALLOWED_ATTR):E,Zs="ADD_URI_SAFE_ATTR"in D?yt(Fo(ta),D.ADD_URI_SAFE_ATTR):ta,jn="ADD_DATA_URI_TAGS"in D?yt(Fo(ll),D.ADD_DATA_URI_TAGS):ll,te="FORBID_CONTENTS"in D?yt({},D.FORBID_CONTENTS):uo,A="FORBID_TAGS"in D?yt({},D.FORBID_TAGS):{},B="FORBID_ATTR"in D?yt({},D.FORBID_ATTR):{},ye="USE_PROFILES"in D&&D.USE_PROFILES,F=!1!==D.ALLOW_ARIA_ATTR,H=!1!==D.ALLOW_DATA_ATTR,$=D.ALLOW_UNKNOWN_PROTOCOLS||!1,q=D.SAFE_FOR_TEMPLATES||!1,Y=D.WHOLE_DOCUMENT||!1,st=D.RETURN_DOM||!1,Ct=D.RETURN_DOM_FRAGMENT||!1,de=D.RETURN_TRUSTED_TYPE||!1,W=D.FORCE_BODY||!1,Jt=!1!==D.SANITIZE_DOM,se=!1!==D.KEEP_CONTENT,Zt=D.IN_PLACE||!1,dt=D.ALLOWED_URI_REGEXP||dt,dl=D.NAMESPACE||Rn,D.CUSTOM_ELEMENT_HANDLING&&x1(D.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(_.tagNameCheck=D.CUSTOM_ELEMENT_HANDLING.tagNameCheck),D.CUSTOM_ELEMENT_HANDLING&&x1(D.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(_.attributeNameCheck=D.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),D.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof D.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(_.allowCustomizedBuiltInElements=D.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),na=na=-1===bR.indexOf(D.PARSER_MEDIA_TYPE)?vR:D.PARSER_MEDIA_TYPE,qo="application/xhtml+xml"===na?function(ot){return ot}:hi,q&&(H=!1),Ct&&(st=!0),ye&&(ht=yt({},[].concat(Sn(e0))),J=[],!0===ye.html&&(yt(ht,t0),yt(J,n0)),!0===ye.svg&&(yt(ht,zc),yt(J,Hc),yt(J,vi)),!0===ye.svgFilters&&(yt(ht,jc),yt(J,Hc),yt(J,vi)),!0===ye.mathMl&&(yt(ht,Vc),yt(J,o0),yt(J,vi))),D.ADD_TAGS&&(ht===_t&&(ht=Fo(ht)),yt(ht,D.ADD_TAGS)),D.ADD_ATTR&&(J===E&&(J=Fo(J)),yt(J,D.ADD_ATTR)),D.ADD_URI_SAFE_ATTR&&yt(Zs,D.ADD_URI_SAFE_ATTR),D.FORBID_CONTENTS&&(te===uo&&(te=Fo(te)),yt(te,D.FORBID_CONTENTS)),se&&(ht["#text"]=!0),Y&&yt(ht,["html","head","body"]),ht.table&&(yt(ht,["tbody"]),delete A.tbody),Ee&&Ee(D),Fr=D)},w1=yt({},["mi","mo","mn","ms","mtext"]),k1=yt({},["foreignobject","desc","title","annotation-xml"]),CR=yt({},["title","style","font","a","script"]),cl=yt({},zc);yt(cl,jc),yt(cl,MS);var mm=yt({},Vc);yt(mm,IS);var xR=function(D){var ot=y(D);ot&&ot.tagName||(ot={namespaceURI:Rn,tagName:"template"});var Z=hi(D.tagName),Bt=hi(ot.tagName);return D.namespaceURI===ea?ot.namespaceURI===Rn?"svg"===Z:ot.namespaceURI===Ir?"svg"===Z&&("annotation-xml"===Bt||w1[Bt]):Boolean(cl[Z]):D.namespaceURI===Ir?ot.namespaceURI===Rn?"math"===Z:ot.namespaceURI===ea?"math"===Z&&k1[Bt]:Boolean(mm[Z]):D.namespaceURI===Rn&&!(ot.namespaceURI===ea&&!k1[Bt])&&!(ot.namespaceURI===Ir&&!w1[Bt])&&!mm[Z]&&(CR[Z]||!cl[Z])},Vn=function(D){Ls(n.removed,{element:D});try{D.parentNode.removeChild(D)}catch(ot){try{D.outerHTML=S}catch(Z){D.remove()}}},ul=function(D,ot){try{Ls(n.removed,{attribute:ot.getAttributeNode(D),from:ot})}catch(Z){Ls(n.removed,{attribute:null,from:ot})}if(ot.removeAttribute(D),"is"===D&&!J[D])if(st||Ct)try{Vn(ot)}catch(Z){}else try{ot.setAttribute(D,"")}catch(Z){}},S1=function(D){var ot=void 0,Z=void 0;if(W)D="<remove></remove>"+D;else{var Bt=DS(D,/^[\r\n\t ]+/);Z=Bt&&Bt[0]}"application/xhtml+xml"===na&&(D='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+D+"</body></html>");var $t=w?w.createHTML(D):D;if(dl===Rn)try{ot=(new m).parseFromString($t,na)}catch(ce){}if(!ot||!ot.documentElement){ot=T.createDocument(dl,"template",null);try{ot.documentElement.innerHTML=C1?"":$t}catch(ce){}}var Re=ot.body||ot.documentElement;return D&&Z&&Re.insertBefore(r.createTextNode(Z),Re.childNodes[0]||null),dl===Rn?R.call(ot,Y?"html":"body")[0]:Y?ot.documentElement:Re},E1=function(D){return O.call(D.ownerDocument||D,D,d.SHOW_ELEMENT|d.SHOW_COMMENT|d.SHOW_TEXT,null,!1)},wR=function(D){return D instanceof f&&("string"!=typeof D.nodeName||"string"!=typeof D.textContent||"function"!=typeof D.removeChild||!(D.attributes instanceof u)||"function"!=typeof D.removeAttribute||"function"!=typeof D.setAttribute||"string"!=typeof D.namespaceURI||"function"!=typeof D.insertBefore)},oa=function(D){return"object"===(void 0===i?"undefined":Ps(i))?D instanceof i:D&&"object"===(void 0===D?"undefined":Ps(D))&&"number"==typeof D.nodeType&&"string"==typeof D.nodeName},Hn=function(D,ot,Z){U[D]&&TS(U[D],function(Bt){Bt.call(n,ot,Z,Fr)})},_1=function(D){var ot=void 0;if(Hn("beforeSanitizeElements",D,null),wR(D)||_e(/[\u0080-\uFFFF]/,D.nodeName))return Vn(D),!0;var Z=qo(D.nodeName);if(Hn("uponSanitizeElement",D,{tagName:Z,allowedTags:ht}),D.hasChildNodes()&&!oa(D.firstElementChild)&&(!oa(D.content)||!oa(D.content.firstElementChild))&&_e(/<[/\w]/g,D.innerHTML)&&_e(/<[/\w]/g,D.textContent)||"select"===Z&&_e(/<template/i,D.innerHTML))return Vn(D),!0;if(!ht[Z]||A[Z]){if(!A[Z]&&R1(Z)&&(_.tagNameCheck instanceof RegExp&&_e(_.tagNameCheck,Z)||_.tagNameCheck instanceof Function&&_.tagNameCheck(Z)))return!1;if(se&&!te[Z]){var Bt=y(D)||D.parentNode,$t=v(D)||D.childNodes;if($t&&Bt)for(var Re=$t.length-1;Re>=0;--Re)Bt.insertBefore(p($t[Re],!0),h(D))}return Vn(D),!0}return D instanceof l&&!xR(D)?(Vn(D),!0):"noscript"!==Z&&"noembed"!==Z||!_e(/<\/no(script|embed)/i,D.innerHTML)?(q&&3===D.nodeType&&(ot=ao(ot=D.textContent,V," "),ot=ao(ot,nt," "),D.textContent!==ot&&(Ls(n.removed,{element:D.cloneNode()}),D.textContent=ot)),Hn("afterSanitizeElements",D,null),!1):(Vn(D),!0)},N1=function(D,ot,Z){if(Jt&&("id"===ot||"name"===ot)&&(Z in r||Z in yR))return!1;if((!H||B[ot]||!_e(ct,ot))&&(!F||!_e(lt,ot)))if(!J[ot]||B[ot]){if(!(R1(D)&&(_.tagNameCheck instanceof RegExp&&_e(_.tagNameCheck,D)||_.tagNameCheck instanceof Function&&_.tagNameCheck(D))&&(_.attributeNameCheck instanceof RegExp&&_e(_.attributeNameCheck,ot)||_.attributeNameCheck instanceof Function&&_.attributeNameCheck(ot))||"is"===ot&&_.allowCustomizedBuiltInElements&&(_.tagNameCheck instanceof RegExp&&_e(_.tagNameCheck,Z)||_.tagNameCheck instanceof Function&&_.tagNameCheck(Z))))return!1}else if(!Zs[ot]&&!_e(dt,ao(Z,Et,""))&&("src"!==ot&&"xlink:href"!==ot&&"href"!==ot||"script"===D||0!==LS(Z,"data:")||!jn[D])&&(!$||_e(bt,ao(Z,Et,"")))&&Z)return!1;return!0},R1=function(D){return D.indexOf("-")>0},A1=function(D){var ot=void 0,Z=void 0,Bt=void 0,$t=void 0;Hn("beforeSanitizeAttributes",D,null);var Re=D.attributes;if(Re){var ce={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:J};for($t=Re.length;$t--;){var ra=ot=Re[$t],$n=ra.name,sn=ra.namespaceURI;Z=PS(ot.value),Bt=qo($n);var SR=Z;if(ce.attrName=Bt,ce.attrValue=Z,ce.keepAttr=!0,ce.forceKeepAttr=void 0,Hn("uponSanitizeAttribute",D,ce),Z=ce.attrValue,!ce.forceKeepAttr)if(ce.keepAttr)if(_e(/\/>/i,Z))ul($n,D);else{q&&(Z=ao(Z,V," "),Z=ao(Z,nt," "));var ER=qo(D.nodeName);if(N1(ER,Bt,Z)){if(Z!==SR)try{sn?D.setAttributeNS(sn,$n,Z):D.setAttribute($n,Z)}catch(AR){ul($n,D)}}else ul($n,D)}else ul($n,D)}Hn("afterSanitizeAttributes",D,null)}},kR=function D(ot){var Z=void 0,Bt=E1(ot);for(Hn("beforeSanitizeShadowDOM",ot,null);Z=Bt.nextNode();)Hn("uponSanitizeShadowNode",Z,null),_1(Z)||(Z.content instanceof s&&D(Z.content),A1(Z));Hn("afterSanitizeShadowDOM",ot,null)};return n.sanitize=function(D,ot){var Z=void 0,Bt=void 0,$t=void 0,Re=void 0,ce=void 0;if((C1=!D)&&(D="\x3c!--\x3e"),"string"!=typeof D&&!oa(D)){if("function"!=typeof D.toString)throw Uc("toString is not a function");if("string"!=typeof(D=D.toString()))throw Uc("dirty is not a string, aborting")}if(!n.isSupported){if("object"===Ps(e.toStaticHTML)||"function"==typeof e.toStaticHTML){if("string"==typeof D)return e.toStaticHTML(D);if(oa(D))return e.toStaticHTML(D.outerHTML)}return D}if(gt||um(ot),n.removed=[],"string"==typeof D&&(Zt=!1),Zt){if(D.nodeName){var ra=qo(D.nodeName);if(!ht[ra]||A[ra])throw Uc("root node is forbidden and cannot be sanitized in-place")}}else if(D instanceof i)1===(Bt=(Z=S1("\x3c!----\x3e")).ownerDocument.importNode(D,!0)).nodeType&&"BODY"===Bt.nodeName||"HTML"===Bt.nodeName?Z=Bt:Z.appendChild(Bt);else{if(!st&&!q&&!Y&&-1===D.indexOf("<"))return w&&de?w.createHTML(D):D;if(!(Z=S1(D)))return st?null:de?S:""}Z&&W&&Vn(Z.firstChild);for(var $n=E1(Zt?D:Z);$t=$n.nextNode();)3===$t.nodeType&&$t===Re||_1($t)||($t.content instanceof s&&kR($t.content),A1($t),Re=$t);if(Re=null,Zt)return D;if(st){if(Ct)for(ce=I.call(Z.ownerDocument);Z.firstChild;)ce.appendChild(Z.firstChild);else ce=Z;return J.shadowroot&&(ce=P.call(o,ce,!0)),ce}var sn=Y?Z.outerHTML:Z.innerHTML;return Y&&ht["!doctype"]&&Z.ownerDocument&&Z.ownerDocument.doctype&&Z.ownerDocument.doctype.name&&_e(qS,Z.ownerDocument.doctype.name)&&(sn="<!DOCTYPE "+Z.ownerDocument.doctype.name+">\n"+sn),q&&(sn=ao(sn,V," "),sn=ao(sn,nt," ")),w&&de?w.createHTML(sn):sn},n.setConfig=function(D){um(D),gt=!0},n.clearConfig=function(){Fr=null,gt=!1},n.isValidAttribute=function(D,ot,Z){Fr||um({});var Bt=qo(D),$t=qo(ot);return N1(Bt,$t,Z)},n.addHook=function(D,ot){"function"==typeof ot&&(U[D]=U[D]||[],Ls(U[D],ot))},n.removeHook=function(D){U[D]&&BS(U[D])},n.removeHooks=function(D){U[D]&&(U[D]=[])},n.removeAllHooks=function(){U={}},n}();const yi=t=>{let e;const n=decodeURIComponent(t).split(","),o=/data:([^;]+)/.exec(n[0]);return o&&(e=o[1]),{type:e,data:n[1]}},r0=(t,e)=>{let n;try{n=atob(e)}catch(r){return C.none()}const o=new Uint8Array(n.length);for(let r=0;r<o.length;r++)o[r]=n.charCodeAt(r);return C.some(new Blob([o],{type:t}))},s0=t=>{return 0===t.indexOf("blob:")?(n=t,new Promise((o,r)=>{const s=()=>{r("Cannot convert "+n+" to Blob. Resource might not exist or is inaccessible.")};try{const a=new XMLHttpRequest;a.open("GET",n,!0),a.responseType="blob",a.onload=()=>{200===a.status?o(a.response):s()},a.onerror=s,a.send()}catch(a){s()}})):0===t.indexOf("data:")?(e=t,new Promise(n=>{const{type:o,data:r}=yi(e);r0(o,r).fold(()=>n(new Blob([])),n)})):null;var n,e},a0=t=>new Promise(e=>{const n=new FileReader;n.onloadend=()=>{e(n.result)},n.readAsDataURL(t)});let XS=0;const $c=t=>(t||"blobid")+XS++,i0=z.each,QS=z.trim,JS="source protocol authority userInfo user password host port relative path directory file query anchor".split(" "),ZS={ftp:21,http:80,https:443,mailto:25},tE=["img","video"],l0=(t,e,n)=>{const o=(r=>{try{return decodeURIComponent(r)}catch(s){return unescape(r)}})(e);return!t.allow_script_urls&&(!!/((java|vb)script|mhtml):/i.test(o)||!t.allow_html_data_urls&&(/^data:image\//i.test(o)?(s=n,(ut(r=t.allow_svg_data_urls)?!r:!ut(s)||!Pt(tE,s))&&/^data:image\/svg\+xml/i.test(o)):/^data:/i.test(o)));var r,s};class nn{constructor(e,n){e=QS(e),this.settings=n||{};const o=this.settings.base_uri,r=this;if(/^([\w\-]+):([^\/]{2})/i.test(e)||/^\s*#/.test(e))return void(r.source=e);const s=0===e.indexOf("//");if(0!==e.indexOf("/")||s||(e=(o&&o.protocol||"http")+"://mce_host"+e),!/^[\w\-]*:?\/\//.test(e)){const i=this.settings.base_uri?this.settings.base_uri.path:new nn(document.location.href).directory;if(this.settings.base_uri&&""==this.settings.base_uri.protocol)e="//mce_host"+r.toAbsPath(i,e);else{const l=/([^#?]*)([#?]?.*)/.exec(e);e=(o&&o.protocol||"http")+"://mce_host"+r.toAbsPath(i,l[1])+l[2]}}e=e.replace(/@@/g,"(mce_at)");const a=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?(\[[a-zA-Z0-9:.%]+\]|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(e);i0(JS,(i,l)=>{let d=a[l];d&&(d=d.replace(/\(mce_at\)/g,"@@")),r[i]=d}),o&&(r.protocol||(r.protocol=o.protocol),r.userInfo||(r.userInfo=o.userInfo),r.port||"mce_host"!==r.host||(r.port=o.port),r.host&&"mce_host"!==r.host||(r.host=o.host),r.source=""),s&&(r.protocol="")}static parseDataUri(e){let n;const o=decodeURIComponent(e).split(","),r=/data:([^;]+)/.exec(o[0]);return r&&(n=r[1]),{type:n,data:o[1]}}static isDomSafe(e,n,o={}){if(o.allow_script_urls)return!0;{const r=Qn.decode(e).replace(/[\s\u0000-\u001F]+/g,"");return!l0(o,r,n)}}static getDocumentBaseUrl(e){let n;return n=0!==e.protocol.indexOf("http")&&"file:"!==e.protocol?e.href:e.protocol+"//"+e.host+e.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(n)&&(n=n.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(n)||(n+="/")),n}setPath(e){const n=/^(.*?)\/?(\w+)?$/.exec(e);this.path=n[0],this.directory=n[1],this.file=n[2],this.source="",this.getURI()}toRelative(e){let n;if("./"===e)return e;const o=new nn(e,{base_uri:this});if("mce_host"!==o.host&&this.host!==o.host&&o.host||this.port!==o.port||this.protocol!==o.protocol&&""!==o.protocol)return o.getURI();const r=this.getURI(),s=o.getURI();return r===s||"/"===r.charAt(r.length-1)&&r.substr(0,r.length-1)===s?r:(n=this.toRelPath(this.path,o.path),o.query&&(n+="?"+o.query),o.anchor&&(n+="#"+o.anchor),n)}toAbsolute(e,n){const o=new nn(e,{base_uri:this});return o.getURI(n&&this.isSameOrigin(o))}isSameOrigin(e){if(this.host==e.host&&this.protocol==e.protocol){if(this.port==e.port)return!0;const n=ZS[this.protocol];if(n&&(this.port||n)==(e.port||n))return!0}return!1}toRelPath(e,n){let o,r,s=0,a="";const i=e.substring(0,e.lastIndexOf("/")).split("/"),l=n.split("/");if(i.length>=l.length)for(o=0,r=i.length;o<r;o++)if(o>=l.length||i[o]!==l[o]){s=o+1;break}if(i.length<l.length)for(o=0,r=l.length;o<r;o++)if(o>=i.length||i[o]!==l[o]){s=o+1;break}if(1===s)return n;for(o=0,r=i.length-(s-1);o<r;o++)a+="../";for(o=s-1,r=l.length;o<r;o++)a+=o!==s-1?"/"+l[o]:l[o];return a}toAbsPath(e,n){let o,r,s=0,a=[];const i=/\/$/.test(n)?"/":"";let l=e.split("/");const d=n.split("/");for(i0(l,c=>{c&&a.push(c)}),l=a,o=d.length-1,a=[];o>=0;o--)0!==d[o].length&&"."!==d[o]&&(".."!==d[o]?s>0?s--:a.push(d[o]):s++);return o=l.length-s,r=o<=0?$r(a).join("/"):l.slice(0,o).join("/")+"/"+$r(a).join("/"),0!==r.indexOf("/")&&(r="/"+r),i&&r.lastIndexOf("/")!==r.length-1&&(r+=i),r}getURI(e=!1){let n;return this.source&&!e||(n="",e||(n+=this.protocol?this.protocol+"://":"//",this.userInfo&&(n+=this.userInfo+"@"),this.host&&(n+=this.host),this.port&&(n+=":"+this.port)),this.path&&(n+=this.path),this.query&&(n+="?"+this.query),this.anchor&&(n+="#"+this.anchor),this.source=n),this.source}}const d0=z.makeMap,c0=z.each,u0=z.explode,m0=z.extend,eE={IN_PLACE:!0,ALLOW_UNKNOWN_PROTOCOLS:!0,ALLOWED_TAGS:["#comment","#cdata-section","body"],ALLOWED_ATTR:[]},nE=z.makeMap("src,href,data,background,action,formaction,poster,xlink:href"),qc="data-mce-type",f0=(t,e,n)=>{const o=t.name,r=o in n&&"title"!==o&&"textarea"!==o,s=e.childNodes;for(let a=0,i=s.length;a<i;a++){const l=s[a],d=new be(l.nodeName.toLowerCase(),l.nodeType);if(et(l)){const c=l.attributes;for(let u=0,f=c.length;u<f;u++){const m=c[u];d.attr(m.name,m.value)}}else G(l)?(d.value=l.data,r&&(d.raw=!0)):(Tf(l)||ix(l)||lx(l))&&(d.value=l.data);f0(d,l,n),t.append(d)}},kr=(t={},e=Zn())=>{const n={},o=[],r=rt({validate:!0,root_name:"body"},t),s=new DOMParser,a=((t,e)=>{const n=GS(),o=t.validate;let r=0;return n.addHook("uponSanitizeElement",(s,a)=>{var i,l;8===s.nodeType&&!t.allow_conditional_comments&&/^\[if/i.test(s.nodeValue)&&(s.nodeValue=" "+s.nodeValue);const d=a.tagName;if(1!==s.nodeType||"body"===d)return;const c=N(s),u=ua(c,qc),f=Pe(c,"data-mce-bogus");if(!u&&at(f))return void("all"===f?Mt(c):Gn(c));const m=e.getElementRule(d.toLowerCase());if(!o||m){if(a.allowedTags[d]=!0,o&&!u){if(j(null!==(i=m.attributesForced)&&void 0!==i?i:[],g=>{ge(c,g.name,"{$uid}"===g.value?"mce_"+r++:g.value)}),j(null!==(l=m.attributesDefault)&&void 0!==l?l:[],g=>{ua(c,g.name)||ge(c,g.name,"{$uid}"===g.value?"mce_"+r++:g.value)}),m.attributesRequired&&!It(m.attributesRequired,g=>ua(c,g))||m.removeEmptyAttrs&&(g=>{const b=g.dom.attributes;return null==b||0===b.length})(c))return void Gn(c);m.outputName&&m.outputName!==d.toLowerCase()&&((g,b)=>{const p=((v,y)=>{const x=Ft(y),w=Zm(v);return cn(x,w),x})(g,b);Kn(g,p);const h=ne(g);yo(p,h),Mt(g)})(c,m.outputName)}}else Gn(c)}),n.addHook("uponSanitizeAttribute",(s,a)=>{const i=s.tagName.toLowerCase(),{attrName:l,attrValue:d}=a;a.keepAttr=!o||e.isValid(i,l)||He(l,"data-")||He(l,"aria-"),l in nE&&l0(t,d,i)&&(a.keepAttr=!1),a.keepAttr?(a.allowedAttributes[l]=!0,l in e.getBoolAttrs()&&(a.attrValue=l),t.allow_svg_data_urls&&He(d,"data:image/svg+xml")&&(a.forceKeepAttr=!0)):!s.hasAttribute(qc)||"id"!==l&&"class"!==l&&"style"!==l||(a.forceKeepAttr=!0)}),n})(r,e),i=()=>{const d=[];for(const c in n)ft(n,c)&&d.push({name:c,callbacks:n[c]});return d},l={schema:e,addAttributeFilter:(d,c)=>{c0(u0(d),u=>{let f;for(f=0;f<o.length;f++)if(o[f].name===u)return void o[f].callbacks.push(c);o.push({name:u,callbacks:[c]})})},getAttributeFilters:()=>[].concat(o),addNodeFilter:(d,c)=>{c0(u0(d),u=>{let f=n[u];f||(n[u]=f=[]),f.push(c)})},getNodeFilters:i,parse:(d,c={})=>{var u;const f=r.validate,m=null!==(u=c.context)&&void 0!==u?u:r.root_name,g=((T,O,I="html")=>{const R="xhtml"===I?"application/xhtml+xml":"text/html",P=ft(e.getSpecialElements(),O.toLowerCase()),L=P?`<${O}>${T}</${O}>`:T,V=s.parseFromString("xhtml"===I?`<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>${L}</body></html>`:`<body>${L}</body>`,R).body;return a.sanitize(V,((nt,ct)=>{const lt=rt({},eE);return lt.PARSER_MEDIA_TYPE=ct,nt.allow_script_urls?lt.ALLOWED_URI_REGEXP=/.*/:nt.allow_html_data_urls&&(lt.ALLOWED_URI_REGEXP=/^(?!(\w+script|mhtml):)/i),lt})(r,R)),a.removed=[],P?V.firstChild:V})(d,m,c.format),b=new be(m,11);f0(b,g,e.getSpecialElements());const[p,h]=((T,O,I,R)=>{const P=I.validate,L=O.getNonEmptyElements(),U=O.getWhitespaceElements(),V=m0(d0("script,style,head,html,body,title,meta,param"),O.getBlockElements()),nt=/[ \t\r\n]+/g,ct=/^[ \t\r\n]+/,lt=/[ \t\r\n]+$/,bt=dt=>{for(dt=dt.parent;ut(dt);){if(dt.name in U)return!0;dt=dt.parent}return!1},Et=(dt,ht)=>!ut(ht?dt.prev:dt.next)&&dt.parent.name in V&&(dt.parent!==T||R.isRootContent);return[dt=>{if(3===dt.type&&!bt(dt)){let ht=dt.value;ht=ht.replace(nt," "),((_t=dt.prev)&&(_t.name in V||"br"===_t.name)||Et(dt,!0))&&(ht=ht.replace(ct,"")),0===ht.length?dt.remove():dt.value=ht}var _t},dt=>{var ht,E;if(1===dt.type){const _t=O.getElementRule(dt.name);if(P&&_t){const J=di(O,L,U,dt);_t.removeEmpty&&J?V[dt.name]?dt.remove():dt.unwrap():_t.paddEmpty&&(J||xb(E=dt,"#text")&&E.firstChild.value===oe)&&Cb(0,R,V,dt)}}else if(3===dt.type&&!bt(dt)){let _t=dt.value;(V[null===(ht=dt.next)||void 0===ht?void 0:ht.name]||Et(dt,!1))&&(_t=_t.replace(lt,"")),0===_t.length?dt.remove():dt.value=_t}}]})(b,e,r,c),v=[],y=f?T=>((O,I)=>{const R=O.parent;R&&e.children[O.name]&&!e.isValidChild(R.name,O.name)&&I.push(O)})(T,v):pt,x=i(),w={nodes:{},attributes:{}},S=T=>bb(x,o,T,w);if(((T,O,I)=>{const R=[];for(let P=T,L=P;ut(P);L=P,P=P.walk())j(O,U=>U(P)),Oe(P.parent)&&P!==T?P=L:R.push(P);for(let P=R.length-1;P>=0;P--){const L=R[P];j(I,U=>U(L))}})(b,[p,S],[h,y]),v.reverse(),f&&v.length>0)if(c.context){const{pass:T,fail:O}=Vr(v,I=>I.parent===b);xc(O,e,S),c.invalid=T.length>0}else xc(v,e,S);const k=((T,O)=>{var I;const R=null!==(I=O.forced_root_block)&&void 0!==I?I:T.forced_root_block;return!1===R?"":!0===R?"p":R})(r,c);return k&&("body"===b.name||c.isRootContent)&&((T,O)=>{const I=m0(d0("script,style,head,html,body,title,meta,param"),e.getBlockElements()),R=/^[ \t\r\n]+/,P=/[ \t\r\n]+$/;let L=T.firstChild,U=null;const V=nt=>{nt&&(L=nt.firstChild,L&&3===L.type&&(L.value=L.value.replace(R,"")),L=nt.lastChild,L&&3===L.type&&(L.value=L.value.replace(P,"")))};if(e.isValidChild(T.name,O.toLowerCase())){for(;L;){const nt=L.next;3===L.type||1===L.type&&"p"!==L.name&&!I[L.name]&&!L.attr(qc)?(U||(U=new be(O,1),U.attr(r.forced_root_block_attrs),T.insert(U,L)),U.append(L)):(V(U),U=null),L=nt}V(U)}})(b,k),c.invalid||vb(w,c),b}};return((d,c)=>{const u=d.schema;c.remove_trailing_brs&&d.addNodeFilter("br",(f,m,g)=>{const b=z.extend({},u.getBlockElements()),p=u.getNonEmptyElements(),h=u.getWhitespaceElements();b.body=1;for(let v=0,y=f.length;v<y;v++){let x=f[v],w=x.parent;if(b[x.parent.name]&&x===w.lastChild){let S=x.prev;for(;S;){const k=S.name;if("span"!==k||"bookmark"!==S.attr("data-mce-type")){"br"===k&&(x=null);break}S=S.prev}if(x&&(x.remove(),di(u,p,h,w))){const k=u.getElementRule(w.name);k&&(k.removeEmpty?w.remove():k.paddEmpty&&Cb(0,g,b,w))}}else{let S=x;for(;w&&w.firstChild===S&&w.lastChild===S&&(S=w,!b[w.name]);)w=w.parent;if(S===w){const k=new be("#text",3);k.value=oe,x.replace(k)}}}}),d.addAttributeFilter("href",f=>{let m=f.length;const g=b=>{const p=b?z.trim(b):"";return/\b(noopener)\b/g.test(p)?p:p.split(" ").filter(v=>v.length>0).concat(["noopener"]).sort().join(" ")};if(!c.allow_unsafe_link_target)for(;m--;){const b=f[m];"a"===b.name&&"_blank"===b.attr("target")&&b.attr("rel",g(b.attr("rel")))}}),c.allow_html_in_named_anchor||d.addAttributeFilter("id,name",f=>{let m,g,b,p,h=f.length;for(;h--;)if(p=f[h],"a"===p.name&&p.firstChild&&!p.attr("href")){b=p.parent,m=p.lastChild;do{g=m.prev,b.insert(m,p),m=g}while(m)}}),c.fix_list_elements&&d.addNodeFilter("ul,ol",f=>{let m,g,b=f.length;for(;b--;)if(m=f[b],g=m.parent,"ul"===g.name||"ol"===g.name)if(m.prev&&"li"===m.prev.name)m.prev.append(m);else{const p=new be("li",1);p.attr("style","list-style-type: none"),m.wrap(p)}}),c.validate&&u.getValidClasses()&&d.addAttributeFilter("class",f=>{const m=u.getValidClasses();let g=f.length;for(;g--;){const b=f[g],p=b.attr("class").split(" ");let h="";for(let v=0;v<p.length;v++){const y=p[v];let x=!1,w=m["*"];w&&w[y]&&(x=!0),w=m[b.name],!x&&w&&w[y]&&(x=!0),x&&(h&&(h+=" "),h+=y)}h.length||(h=null),b.attr("class",h)}}),((f,m)=>{const{blob_cache:g}=m,b=p=>{const h=p.attr("src");var v;(v=p).attr("src")===wt.transparentSrc||ut(v.attr("data-mce-placeholder"))||(v=>ut(v.attr("data-mce-bogus")))(p)||(v=>{const y=/data:([^;]+);base64,([a-z0-9\+\/=\s]+)/i.exec(v);return y?C.some({type:y[1],data:decodeURIComponent(y[2])}):C.none()})(h).bind(({type:v,data:y})=>C.from(g.getByData(y,v)).orThunk(()=>r0(v,y).map(x=>{const w=g.create($c(),x,y);return g.add(w),w}))).each(v=>{p.attr("src",v.blobUri())})};g&&f.addAttributeFilter("src",p=>j(p,b))})(d,c)})(l,r),(c=r).inline_styles&&((t,e,n)=>{const o=Ql();var r,s,a;e.convert_fonts_to_spans&&(r=t,s=o,a=z.explode(e.font_size_legacy_values),r.addNodeFilter("font",i=>{j(i,l=>{const d=s.parse(l.attr("style")),c=l.attr("color"),u=l.attr("face"),f=l.attr("size");var m;c&&(d.color=c),u&&(d["font-family"]=u),f&&(d["font-size"]=a[parseInt(l.attr("size"),10)-1]),l.name="span",l.attr("style",s.serialize(d)),m=l,j(["color","face","size"],b=>{m.attr(b,null)})})})),((r,s,a)=>{r.addNodeFilter("strike",i=>{const l="html4"!==s.type;j(i,d=>{if(l)d.name="s";else{const c=a.parse(d.attr("style"));c["text-decoration"]="line-through",d.name="span",d.attr("style",a.serialize(c))}})})})(t,n,o)})(l,c,e),l;var c},g0=(t,e)=>{const n=ci(r=t)?ro({validate:!1}).serialize(r):r,o=e(n);var r;if(o.isDefaultPrevented())return o;if(ci(t)){if(o.content!==n){const r=kr({validate:!1,forced_root_block:!1}).parse(o.content,{context:t.name});return Rt(rt({},o),{content:r})}return Rt(rt({},o),{content:t})}return o},p0=(t,e)=>{if(e.no_events)return pe.value(e);{const n=t.dispatch("BeforeGetContent",e);return n.isDefaultPrevented()?pe.error(Jp(t,rt({content:""},n)).content):pe.value(n)}},h0=(t,e,n)=>n.no_events?e:g0(e,o=>Jp(t,Rt(rt({},n),{content:o}))).content,Wc=(t,e)=>{if(e.no_events)return pe.value(e);{const n=g0(e.content,o=>{return r=t,s=Rt(rt({},e),{content:o}),r.dispatch("BeforeSetContent",s);var r,s});return n.isDefaultPrevented()?(Qp(t,n),pe.error(void 0)):pe.value(n)}},Kc=(t,e,n)=>{n.no_events||Qp(t,Rt(rt({},n),{content:e}))},Gc=(t,e,n)=>({element:t,width:e,rows:n}),b0=(t,e)=>({element:t,cells:e}),rE=(t,e)=>({x:t,y:e}),v0=(t,e)=>{const n=parseInt(Pe(t,e),10);return isNaN(n)?1:n},sE=(t,e,n)=>{const o=t.rows;return!!(o[n]?o[n].cells:[])[e]},y0=t=>Te(t,(e,n)=>n.cells.length>e?n.cells.length:e,0),C0=(t,e)=>{const n=t.rows;for(let o=0;o<n.length;o++){const r=n[o].cells;for(let s=0;s<r.length;s++)if(kt(r[s],e))return C.some(rE(s,o))}return C.none()},x0=(t,e,n,o,r)=>{const s=[],a=t.rows;for(let i=n;i<=r;i++){const l=a[i].cells,d=e<o?l.slice(e,o+1):l.slice(o,e+1);s.push(b0(a[i].element,d))}return s},aE=t=>((e,n)=>{const o=dr(e.element),r=Ft("tbody");return yo(r,n),Vt(o,r),o})(t,vt(t.rows,n=>{const o=vt(n.cells,s=>{const a=dg(s);return qe(a,"colspan"),qe(a,"rowspan"),a}),r=dr(n.element);return yo(r,o),r})),w0=()=>Vd([]),Ci=(t,e)=>e>=0&&e<t.length&&ws(t.charAt(e)),k0=t=>Xn(t.innerText),S0=t=>et(t)?t.outerHTML:G(t)?Qn.encodeRaw(t.data,!1):Tf(t)?"\x3c!--"+t.data+"--\x3e":"",uE=po(()=>document.implementation.createHTMLDocument("undo")),Yc=t=>{const e=(n=t.getBody(),it(vt(xe(n.childNodes),S0),s=>s.length>0));var n;const o=An(e,s=>{const a=Lh(t.serializer,s);return a.length>0?[a]:[]}),r=o.join("");return-1!==r.indexOf("</iframe>")?{type:"fragmented",fragments:o,content:"",bookmark:null,beforeBookmark:null}:(s=>({type:"complete",fragments:null,content:s,bookmark:null,beforeBookmark:null}))(r)},Xc=(t,e,n)=>{const o=n?e.beforeBookmark:e.bookmark;"fragmented"===e.type?((t,e)=>{((n,o)=>{let r=0;j(n,s=>{0===s[0]?r++:1===s[0]?(((a,i,l)=>{const d=(c=>{let u;const f=document.createElement("div"),m=document.createDocumentFragment();for(c&&(f.innerHTML=c);u=f.firstChild;)m.appendChild(u);return m})(i);if(a.hasChildNodes()&&l<a.childNodes.length){const c=a.childNodes[l];c.parentNode.insertBefore(d,c)}else a.appendChild(d)})(o,s[1],r),r++):2===s[0]&&((a,i)=>{if(a.hasChildNodes()&&i<a.childNodes.length){const l=a.childNodes[i];l.parentNode.removeChild(l)}})(o,r)})})(((n,o)=>{const r=n.length+o.length+2,s=new Array(r),a=new Array(r),i=(u,f,m,g,b)=>{const p=d(u,f,m,g);if(null===p||p.start===f&&p.diag===f-g||p.end===u&&p.diag===u-m){let h=u,v=m;for(;h<f||v<g;)h<f&&v<g&&n[h]===o[v]?(b.push([0,n[h]]),++h,++v):f-u>g-m?(b.push([2,n[h]]),++h):(b.push([1,o[v]]),++v)}else{i(u,p.start,m,p.start-p.diag,b);for(let h=p.start;h<p.end;++h)b.push([0,n[h]]);i(p.end,f,p.end-p.diag,g,b)}},l=(u,f,m,g)=>{let b=u;for(;b-f<g&&b<m&&n[b]===o[b-f];)++b;return{start:u,end:b,diag:f}},d=(u,f,m,g)=>{const b=f-u,p=g-m;if(0===b||0===p)return null;const h=b-p,v=p+b,y=(v%2==0?v:v+1)/2;let x,w,S,k,T;for(s[1+y]=u,a[1+y]=f+1,x=0;x<=y;++x){for(w=-x;w<=x;w+=2){for(S=w+y,s[S]=w===-x||w!==x&&s[S-1]<s[S+1]?s[S+1]:s[S-1]+1,k=s[S],T=k-u+m-w;k<f&&T<g&&n[k]===o[T];)s[S]=++k,++T;if(h%2!=0&&h-x<=w&&w<=h+x&&a[S-h]<=s[S])return l(a[S-h],w+u-m,f,g)}for(w=h-x;w<=h+x;w+=2){for(S=w+y-h,a[S]=w===h-x||w!==h+x&&a[S+1]<=a[S-1]?a[S+1]-1:a[S-1],k=a[S]-1,T=k-u+m-w;k>=u&&T>=m&&n[k]===o[T];)a[S]=k--,T--;if(h%2==0&&-x<=w&&w<=x&&a[S]<=s[S+h])return l(a[S],w+u-m,f,g)}}},c=[];return i(0,n.length,0,o.length,c),c})(vt(xe(e.childNodes),S0),t),e)})(e.fragments,t.getBody()):t.setContent(e.content,{format:"raw",no_selection:!ut(o)||!kp(o)||!o.isFakeCaret}),t.selection.moveToBookmark(o)},Qc=t=>"fragmented"===t.type?t.fragments.join(""):t.content,E0=t=>{const e=Ft("body",uE());return Ll(e,Qc(t)),j(ke(e,"*[data-mce-bogus]"),Gn),kf(e)},xi=(t,e)=>{return!(!t||!e)&&(o=e,!(Qc(t)!==Qc(o))||((n,o)=>E0(n)===E0(o))(t,e));var o},Jc=t=>0===t.get(),wi=(t,e,n)=>{Jc(n)&&(t.typing=e)},_0=(t,e)=>{t.typing&&(wi(t,!1,e),t.add())},N0=t=>({init:{bindEvents:pt},undoManager:{beforeChange:(e,n)=>{return o=t,s=n,void(Jc(e)&&s.set(Lg(o.selection)));var o,s},add:(e,n,o,r,s,a)=>((i,l,d,c,u,f,m)=>{const g=Yc(i);if(f=z.extend(f=f||{},g),!1===Jc(c)||i.removed)return null;const b=l.data[d.get()];if(i.dispatch("BeforeAddUndo",{level:f,lastLevel:b,originalEvent:m}).isDefaultPrevented()||b&&xi(b,f))return null;l.data[d.get()]&&u.get().each(v=>{l.data[d.get()].beforeBookmark=v});const p=Aw(i);if(p&&l.data.length>p){for(let v=0;v<l.data.length-1;v++)l.data[v]=l.data[v+1];l.data.length--,d.set(l.data.length)}f.bookmark=Lg(i.selection),d.get()<l.data.length-1&&(l.data.length=d.get()+1),l.data.push(f),d.set(l.data.length-1);const h={level:f,lastLevel:b,originalEvent:m};return d.get()>0?(i.setDirty(!0),i.dispatch("AddUndo",h),i.dispatch("change",h)):i.dispatch("AddUndo",h),f})(t,e,n,o,r,s,a),undo:(e,n,o)=>((r,s,a,i)=>{let l;return s.typing&&(s.add(),s.typing=!1,wi(s,!1,a)),i.get()>0&&(i.set(i.get()-1),l=s.data[i.get()],Xc(r,l,!0),r.setDirty(!0),r.dispatch("Undo",{level:l})),l})(t,e,n,o),redo:(e,n)=>((o,r,s)=>{let a;return r.get()<s.length-1&&(r.set(r.get()+1),a=s[r.get()],Xc(o,a,!1),o.setDirty(!0),o.dispatch("Redo",{level:a})),a})(t,e,n),clear:(e,n)=>{return o=t,s=n,(r=e).data=[],s.set(0),r.typing=!1,void o.dispatch("ClearUndos");var o,r,s},reset:e=>{return(n=e).clear(),void n.add();var n},hasUndo:(e,n)=>{return o=t,r=e,n.get()>0||r.typing&&r.data[0]&&!xi(Yc(o),r.data[0]);var o,r},hasRedo:(e,n)=>{return o=e,n.get()<o.data.length-1&&!o.typing;var o},transact:(e,n,o)=>{return a=o,_0(r=e,n),r.beforeChange(),r.ignore(a),r.add();var r,a},ignore:(e,n)=>((o,r)=>{try{o.set(o.get()+1),r()}finally{o.set(o.get()-1)}})(e,n),extra:(e,n,o,r)=>((s,a,i,l,d)=>{if(a.transact(l)){const c=a.data[i.get()].bookmark,u=a.data[i.get()-1];Xc(s,u,!0),a.transact(d)&&(a.data[i.get()-1].beforeBookmark=c)}})(t,e,n,o,r)},formatter:{match:(e,n,o,r)=>Ac(t,e,n,o,r),matchAll:(e,n)=>((o,r,s)=>{const a=[],i={},l=o.selection.getStart();return o.dom.getParent(l,d=>{for(let c=0;c<r.length;c++){const u=r[c];!i[u]&&wn(o,d,u,s)&&(i[u]=!0,a.push(u))}},o.dom.getRoot()),a})(t,e,n),matchNode:(e,n,o,r)=>wn(t,e,n,o,r),canApply:e=>((n,o)=>{const r=n.formatter.get(o),s=n.dom;if(r){const a=n.selection.getStart(),i=Ka(s,a);for(let l=r.length-1;l>=0;l--){const d=r[l];if(!De(d))return!0;for(let c=i.length-1;c>=0;c--)if(s.is(i[c],d.selector))return!0}}return!1})(t,e),closest:e=>((n,o)=>{const r=s=>kt(s,N(n.getBody()));return C.from(n.selection.getStart(!0)).bind(s=>_c(N(s),a=>Go(o,i=>{return wn(n,a.dom,d=i)?C.some(d):C.none();var d}),r)).getOrNull()})(t,e),apply:(e,n,o)=>qb(t,e,n,o),remove:(e,n,o,r)=>Hb(t,e,n,o,r),toggle:(e,n,o)=>((r,s,a,i)=>{const l=r.formatter.get(s);!Ac(r,s,a,i)||"toggle"in l[0]&&!l[0].toggle?qb(r,s,a,i):Hb(r,s,a,i)})(t,e,n,o),formatChanged:(e,n,o,r,s)=>{return a=t,l=n,d=o,c=r,u=s,null===(i=e).get()&&(m=a,(f=i).set({}),m.on("NodeChange",g=>{Xb(m,g.element,f.get())}),m.on("FormatApply FormatRemove",g=>{const b=C.from(g.node).map(p=>qa(p)?p:p.startContainer).bind(p=>et(p)?C.some(p):C.from(p.parentElement)).getOrThunk(()=>Kb(m));Xb(m,b,f.get())})),((f,m,g,b,p,h)=>{const v=m.get();j(g.split(","),y=>{const x=Nt(v,y).getOrThunk(()=>{const S={withSimilar:{state:Ht(!1),similar:!0,callbacks:[]},withoutSimilar:{state:Ht(!1),similar:!1,callbacks:[]},withVars:[]};return v[y]=S,S}),w=()=>{const S=Yb(f);return Gb(f,S,y,p,h).isSome()};if(Ce(h)){const S=p?x.withSimilar:x.withoutSimilar;S.callbacks.push(b),1===S.callbacks.length&&S.state.set(w())}else x.withVars.push({state:Ht(w()),similar:p,vars:h,callback:b})}),m.set(v)})(a,i,l,d,c,u),{unbind:()=>((f,m,g)=>{const b=f.get();j(m.split(","),p=>Nt(b,p).each(h=>{b[p]={withSimilar:Rt(rt({},h.withSimilar),{callbacks:it(h.withSimilar.callbacks,v=>v!==g)}),withoutSimilar:Rt(rt({},h.withoutSimilar),{callbacks:it(h.withoutSimilar.callbacks,v=>v!==g)}),withVars:it(h.withVars,v=>v.callback!==g)}})),f.set(b)})(i,l,d)};var a,i,l,d,c,u,f,m}},editor:{getContent:e=>{return o=e,C.from((n=t).getBody()).fold(K("tree"===o.format?new be("body",11):""),r=>((s,a,i)=>{let l;return l="raw"===a.format?z.trim(Gk(s.serializer,i.innerHTML)):"text"===a.format?s.dom.isEmpty(i)?"":Xn(i.innerText||i.textContent):"tree"===a.format?s.serializer.serialize(i,a):((d,c)=>{const u=Se(d),f=new RegExp(`^(<${u}[^>]*>(&nbsp;|&#160;|\\s|\xa0|<br \\/>|)<\\/${u}>[\r\n]*|<br \\/>[\r\n]*)$`);return c.replace(f,"")})(s,s.serializer.serialize(i,a)),"text"!==a.format&&!xa(N(i))&&at(l)?z.trim(l):l})(n,o,r));var n,o},setContent:(e,n)=>{return r=e,s=n,C.from((o=t).getBody()).map(a=>ci(r)?((i,l,d,c)=>{yb(i.parser.getNodeFilters(),i.parser.getAttributeFilters(),d);const u=ro({validate:!1},i.schema).serialize(d),f=xa(N(l))?u:z.trim(u);return Ec(i,f,c.no_selection),{content:d,html:f}})(o,a,r,s):((i,l,d,c)=>{if(0===d.length||/^\s+$/.test(d)){const u='<br data-mce-bogus="1">';"TABLE"===l.nodeName?d="<tr><td>"+u+"</td></tr>":/^(UL|OL)$/.test(l.nodeName)&&(d="<li>"+u+"</li>");const f=Se(i);return i.schema.isValidChild(l.nodeName.toLowerCase(),f.toLowerCase())?(d=u,d=i.dom.createHTML(f,Ao(i),d)):d||(d=u),Ec(i,d,c.no_selection),{content:d,html:d}}{"raw"!==c.format&&(d=ro({validate:!1},i.schema).serialize(i.parser.parse(d,{isRootContent:!0,insert:!0})));const u=xa(N(l))?d:z.trim(d);return Ec(i,u,c.no_selection),{content:u,html:u}}})(o,a,r,s)).getOr({content:r,html:ci(s.content)?"":s.content});var o,r,s},insertContent:(e,n)=>yS(t,e,n),addVisual:e=>((n,o)=>{const r=n.dom,s=ut(o)?o:n.getBody();Ce(n.hasVisual)&&(n.hasVisual=Lw(n)),j(r.select("table,a",s),a=>{switch(a.nodeName){case"TABLE":const i=Pw(n),l=r.getAttrib(a,"border");l&&"0"!==l||!n.hasVisual?r.removeClass(a,i):r.addClass(a,i);break;case"A":if(!r.getAttrib(a,"href")){const d=r.getAttrib(a,"name")||a.id,c=Qg(n);d&&n.hasVisual?r.addClass(a,c):r.removeClass(a,c)}}}),n.dispatch("VisualAid",{element:o,hasVisual:n.hasVisual})})(t,e)},selection:{getContent:(e,n)=>((o,r,s={})=>{const a=(l=r,Rt(rt({},s),{format:l,get:!0,selection:!0,getInner:!0}));var l;return p0(o,a).fold(me,i=>{const l=((d,c)=>{if("text"===c.format)return C.from((u=d).selection.getRng()).map(f=>{const m=C.from(u.dom.getParent(f.commonAncestorContainer,u.dom.isBlock)),g=u.getBody(),b=m.map(x=>x.nodeName).getOr("div").toLowerCase(),p=u.dom.add(g,b,{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},f.cloneContents()),h=k0(p),v=Xn(p.textContent);if(u.dom.remove(p),Ci(v,0)||Ci(v,v.length-1)){const y=m.getOr(g),x=k0(y),w=x.indexOf(h);return-1===w?h:(Ci(x,w-1)?" ":"")+h+(Ci(x,w+h.length)?" ":"")}return h}).getOr("");var u;{const u=((f,m)=>{const g=f.selection.getRng(),b=f.dom.create("body"),p=f.selection.getSel(),h=tc(f,Bd(p)),v=m.contextual?((t,e)=>{const n=Vp(e,t);return n.length>0?((t,e)=>{return(n=t,o=e[0],ss(o,"table",X(kt,n))).bind(n=>{const o=e[0],r=e[e.length-1],s=(a=>{const i=Gc(dr(a),0,[]);return j(ke(a,"tr"),(l,d)=>{j(ke(l,"td,th"),(c,u)=>{((f,m,g,b,p)=>{const h=v0(p,"rowspan"),v=v0(p,"colspan"),y=f.rows;for(let x=g;x<g+h;x++){y[x]||(y[x]=b0(dg(b),[]));for(let w=m;w<m+v;w++)y[x].cells[w]=x===g&&w===m?p:dr(p)}})(i,((f,m,g)=>{for(;sE(f,m,g);)m++;return m})(i,u,d),d,l,c)})}),Gc(i.element,y0(i.rows),i.rows)})(n);return(a=s,i=o,l=r,C0(a,i).bind(d=>C0(a,l).map(c=>((u,f,m)=>{const g=f.x,b=f.y,p=m.x,h=m.y,v=b<h?x0(u,g,b,p,h):x0(u,g,h,p,b);return Gc(u.element,y0(v),v)})(a,d,c)))).map(a=>Vd([aE(a)]));var a,i,l}).getOrThunk(w0);var n,o})(t,n):(o=t,(r=e).length>0&&r[0].collapsed?w0():(s=o,((i,l)=>{const d=Te(l,(c,u)=>(Vt(u,c),u),i);return l.length>0?Vd([d]):d})(N((a=r[0]).cloneContents()),((t,e)=>{const n=N(e.commonAncestorContainer),o=Fn(n,t),r=it(o,i=>zl(i)||cx(i)),s=(l=e,Kt(i=o,d=>"li"===Ot(d)&&Ld(d,l)).fold(K([]),d=>{return(c=i,Kt(c,u=>"ul"===Ot(u)||"ol"===Ot(u))).map(c=>{const u=Ft(Ot(c)),f=Kr(Cf(c),(m,g)=>He(g,"list-style"));return fa(u,f),[Ft("li"),u]}).getOr([]);var c})),a=r.concat(s.length?s:(i=>is(i)?We(i).filter(jl).fold(K([]),l=>[i,l]):jl(i)?[i]:[])(n));var i,l;return vt(a,dr)})(s,a))));var o,r,s,a})(N(f.getBody()),h).dom:g.cloneContents();return v&&b.appendChild(v),f.selection.serializer.serialize(b,m)})(d,c);return"tree"===c.format?u:d.selection.isCollapsed()?"":u}})(o,i);return h0(o,l,i)})})(t,e,n)},autocompleter:{addDecoration:e=>((t,e)=>{if(Th(N(t.getBody())).isNone()){const o=ts('<span data-mce-autocompleter="1" data-mce-bogus="1"></span>',t.getDoc());Vt(o,N(e.extractContents())),e.insertNode(o.dom),We(o).each(r=>r.dom.normalize()),(n=o,((r,s)=>{const a=i=>{const l=ne(i);for(let d=l.length-1;d>=0;d--){const c=l[d];if(s(c))return C.some(c);const u=a(c);if(u.isSome())return u}return C.none()};return a(r)})(n,Ah)).map(r=>{var s;t.selection.setCursorLocation(r.dom,"img"===Ot(s=r)?1:qp(s).fold(()=>ne(s).length,a=>a.length))})}var n})(t,e),removeDecoration:()=>{return e=t,n=N(t.getBody()),Th(n).each(o=>{const r=e.selection.getBookmark();Gn(o),e.selection.moveToBookmark(r)});var e,n}},raw:{getModel:()=>C.none()}}),Un=t=>ft(t.plugins,"rtc"),Zc=t=>t.rtcInstance?t.rtcInstance:N0(t),Lt=t=>{const e=t.rtcInstance;if(e)return e;throw new Error("Failed to get RTC instance not yet initialized.")},R0=t=>Lt(t).init.bindEvents(),A0=t=>0===t.dom.length?(Mt(t),C.none()):C.some(t),O0=(t,e,n,o)=>{t.bind(r=>((o?dc:ai)(r.dom,o?r.dom.length:0),e.filter(Le).map(s=>((a,i,l,d)=>{const c=a.dom,u=i.dom,f=d?c.length:u.length;d?(cc(c,u,!1,!d),l.setStart(u,f)):(cc(u,c,!1,!d),l.setEnd(u,f))})(r,s,n,o)))).orThunk(()=>{return(s=e,a=o,s.filter(i=>Es.isBookmarkNode(i.dom)).bind(a?ns:bo)).or(e).filter(Le).map(s=>((a,i)=>{We(a).each(l=>{const d=a.dom;i&&ri(l,M(d,0))?ai(d,0):!i&&si(l,M(d,d.length))&&dc(d,d.length)})})(s,o));var s,a})},T0=(t,e,n)=>{if(t&&ft(t,e)){const o=it(t[e],r=>r!==n);0===o.length?delete t[e]:t[e]=o}},B0=t=>!(!t||!t.ownerDocument)&&Dn(N(t.ownerDocument),N(t)),D0=(t,e,n,o)=>{let r,s;const{selectorChangedWithUnbind:a}=((p,h)=>{let v,y;const x=(S,k)=>Kt(k,T=>p.is(T,S)),w=S=>p.getParents(S,null,p.getRoot());return{selectorChangedWithUnbind:(S,k)=>(v||(v={},y={},h.on("NodeChange",T=>{const O=T.element,I=w(O),R={};z.each(v,(P,L)=>{x(L,I).each(U=>{y[L]||(j(P,V=>{V(!0,{node:U,selector:L,parents:I})}),y[L]=P),R[L]=P})}),z.each(y,(P,L)=>{R[L]||(delete y[L],z.each(P,U=>{U(!1,{node:O,selector:L,parents:I})}))})})),v[S]||(v[S]=[]),v[S].push(k),x(S,w(h.selection.getStart())).each(()=>{y[S]=v[S]}),{unbind:()=>{T0(v,S,k),T0(y,S,k)}})}})(t,o),i=(p,h)=>((v,y,x={})=>{const w=(k=y,Rt(rt({format:"html"},x),{set:!0,selection:!0,content:k}));var k;Wc(v,w).each(S=>{const k=((O,I)=>{if("raw"!==I.format){const R=O.selection.getRng(),P=O.dom.getParent(R.commonAncestorContainer,O.dom.isBlock),L=P?{context:P.nodeName.toLowerCase()}:{},U=O.parser.parse(I.content,rt(rt({forced_root_block:!1},L),I));return ro({validate:!1},O.schema).serialize(U)}return I.content})(v,S),T=v.selection.getRng();((O,I)=>{const R=C.from(I.firstChild).map(N),P=C.from(I.lastChild).map(N);O.deleteContents(),O.insertNode(I);const L=R.bind(bo).filter(Le).bind(A0),U=P.bind(ns).filter(Le).bind(A0);O0(L,R,O,!0),O0(U,P,O,!1),O.collapse(!1)})(T,T.createContextualFragment(k)),v.selection.setRng(T),Ns(v,T),Kc(v,k,S)})})(o,p,h),l=p=>{const h=c();h.collapse(!!p),u(h)},d=()=>e.getSelection?e.getSelection():e.document.selection,c=()=>{let p,h,v;const y=(w,S,k)=>{try{return S.compareBoundaryPoints(w,k)}catch(T){return-1}},x=e.document;if(void 0!==o.bookmark&&!1===Do(o)){const w=Xd(o);if(w.isSome())return w.map(S=>tc(o,[S])[0]).getOr(x.createRange())}try{(p=d())&&!ha(p.anchorNode)&&(h=p.rangeCount>0?p.getRangeAt(0):p.createRange?p.createRange():x.createRange(),h=tc(o,[h])[0])}catch(w){}return h||(h=x.createRange()),h.setStart&&9===h.startContainer.nodeType&&h.collapsed&&(v=t.getRoot(),h.setStart(v,0),h.setEnd(v,0)),r&&s&&(0===y(h.START_TO_START,h,r)&&0===y(h.END_TO_END,h,r)?h=s:(r=null,s=null)),h},u=(p,h)=>{let v;if(!((x=p)&&B0(x.startContainer)&&B0(x.endContainer)))return;var x;const y=d();if(p=o.dispatch("SetSelectionRange",{range:p,forward:h}).range,y){s=p;try{y.removeAllRanges(),y.addRange(p)}catch(x){}!1===h&&y.extend&&(y.collapse(p.endContainer,p.endOffset),y.extend(p.startContainer,p.startOffset)),r=y.rangeCount>0?y.getRangeAt(0):null}!p.collapsed&&p.startContainer===p.endContainer&&y.setBaseAndExtent&&p.endOffset-p.startOffset<2&&p.startContainer.hasChildNodes()&&(v=p.startContainer.childNodes[p.startOffset],v&&"IMG"===v.tagName&&(y.setBaseAndExtent(p.startContainer,p.startOffset,p.endContainer,p.endOffset),y.anchorNode===p.startContainer&&y.focusNode===p.endContainer||y.setBaseAndExtent(v,0,v,1))),o.dispatch("AfterSetSelectionRange",{range:p,forward:h})},f=()=>{const p=d(),h=null==p?void 0:p.anchorNode,v=null==p?void 0:p.focusNode;if(!p||!h||!v||ha(h)||ha(v))return!0;const y=t.createRng();y.setStart(h,p.anchorOffset),y.collapse(!0);const x=t.createRng();return x.setStart(v,p.focusOffset),x.collapse(!0),y.compareBoundaryPoints(y.START_TO_START,x)<=0},m={bookmarkManager:null,controlSelection:null,dom:t,win:e,serializer:n,editor:o,collapse:l,setCursorLocation:(p,h)=>{const v=t.createRng();ut(p)&&ut(h)?(v.setStart(p,h),v.setEnd(p,h),u(v),l(!1)):(Pd(t,v,o.getBody(),!0),u(v))},getContent:p=>((h,v={})=>{return x=v.format?v.format:"html",w=v,Lt(h).selection.getContent(x,w);var x,w})(o,p),setContent:i,getBookmark:(p,h)=>g.getBookmark(p,h),moveToBookmark:p=>g.moveToBookmark(p),select:(p,h)=>{return(v=t,y=p,x=h,C.from(y).map(w=>{const S=v.nodeIndex(w),k=v.createRng();return k.setStart(w.parentNode,S),k.setEnd(w.parentNode,S+1),x&&(Pd(v,k,w,!0),Pd(v,k,w,!1)),k})).each(u),p;var v,y,x},isCollapsed:()=>{const p=c(),h=d();return!(!p||p.item)&&(p.compareEndPoints?0===p.compareEndPoints("StartToEnd",p):!h||p.collapsed)},isForward:f,setNode:p=>(i(t.getOuterHTML(p)),p),getNode:()=>((p,h)=>{let v,y,x;if(!h)return p;y=h.startContainer,x=h.endContainer;const w=h.startOffset,S=h.endOffset;return v=h.commonAncestorContainer,!h.collapsed&&(y===x&&S-w<2&&y.hasChildNodes()&&(v=y.childNodes[w]),3===y.nodeType&&3===x.nodeType&&(y=y.length===w?Rh(y.nextSibling,!0):y.parentNode,x=0===S?Rh(x.previousSibling,!1):x.parentNode,y&&y===x))?y:v&&3===v.nodeType?v.parentNode:v})(o.getBody(),c()),getSel:d,setRng:u,getRng:c,getStart:p=>_h(o.getBody(),c(),p),getEnd:p=>Nh(o.getBody(),c(),p),getSelectedBlocks:(p,h)=>((v,y,x,w)=>{let S;const k=[],T=v.getRoot();if(x=v.getParent(x||_h(T,y,y.collapsed),v.isBlock),w=v.getParent(w||Nh(T,y,y.collapsed),v.isBlock),x&&x!==T&&k.push(x),x&&w&&x!==w){S=x;const O=new Gt(x,T);for(;(S=O.next())&&S!==w;)v.isBlock(S)&&k.push(S)}return w&&x!==w&&w!==T&&k.push(w),k})(t,c(),p,h),normalize:()=>{const p=c(),h=d();if(!(Bd(h).length>1)&&Ya(o)){const v=Ja(t,p);return v.each(y=>{u(y,f())}),v.getOr(p)}return p},selectorChanged:(p,h)=>(a(p,h),m),selectorChangedWithUnbind:a,getScrollContainer:()=>{let p,h=t.getRoot();for(;h&&"BODY"!==h.nodeName;){if(h.scrollHeight>h.clientHeight){p=h;break}h=h.parentNode}return p},scrollIntoView:(p,h)=>{var v;ut(p)?((v=o).inline?Pk:Ik)(v,p,h):Ns(o,c(),h)},placeCaretAt:(p,h)=>u(sh(p,h,o.getDoc())),getBoundingClientRect:()=>{const p=c();return p.collapsed?M.fromRangeStart(p).getClientRects()[0]:p.getBoundingClientRect()},destroy:()=>{e=r=s=null,b.destroy()}},g=Es(m),b=th(m,o);return m.bookmarkManager=g,m.controlSelection=b,m},mE=(t,e,n)=>{-1===z.inArray(e,n)&&(t.addAttributeFilter(n,(o,r)=>{let s=o.length;for(;s--;)o[s].attr(r,null)}),e.push(n))},L0=(t,e)=>{const n=((t,e)=>{const n=["data-mce-selected"],o=e&&e.dom?e.dom:St.DOM,r=e&&e.schema?e.schema:Zn(t);t.entity_encoding=t.entity_encoding||"named",t.remove_trailing_brs=!("remove_trailing_brs"in t)||t.remove_trailing_brs;const s=kr(t,r);return i=t,l=o,(a=s).addAttributeFilter("data-mce-tabindex",(d,c)=>{let u=d.length;for(;u--;){const f=d[u];f.attr("tabindex",f.attr("data-mce-tabindex")),f.attr(c,null)}}),a.addAttributeFilter("src,href,style",(d,c)=>{const u="data-mce-"+c,f=i.url_converter,m=i.url_converter_scope;let g=d.length;for(;g--;){const b=d[g];let p=b.attr(u);void 0!==p?(b.attr(c,p.length>0?p:null),b.attr(u,null)):(p=b.attr(c),"style"===c?p=l.serializeStyle(l.parseStyle(p),b.name):f&&(p=f.call(m,p,c,b.name)),b.attr(c,p.length>0?p:null))}}),a.addAttributeFilter("class",d=>{let c=d.length;for(;c--;){const u=d[c];let f=u.attr("class");f&&(f=u.attr("class").replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),u.attr("class",f.length>0?f:null))}}),a.addAttributeFilter("data-mce-type",(d,c,u)=>{let f=d.length;for(;f--;){const m=d[f];"bookmark"===m.attr("data-mce-type")&&!u.cleanup&&(C.from(m.firstChild).exists(b=>!ka(b.value))?m.unwrap():m.remove())}}),a.addNodeFilter("noscript",d=>{let c=d.length;for(;c--;){const u=d[c].firstChild;u&&(u.value=Qn.decode(u.value))}}),a.addNodeFilter("script,style",(d,c)=>{const u=m=>m.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"");let f=d.length;for(;f--;){const m=d[f],g=m.firstChild?m.firstChild.value:"";if("script"===c){const b=m.attr("type");b&&m.attr("type","mce-no/type"===b?null:b.replace(/^mce\-/,"")),"xhtml"===i.element_format&&g.length>0&&(m.firstChild.value="// <![CDATA[\n"+u(g)+"\n// ]]>")}else"xhtml"===i.element_format&&g.length>0&&(m.firstChild.value="\x3c!--\n"+u(g)+"\n--\x3e")}}),a.addNodeFilter("#comment",d=>{let c=d.length;for(;c--;){const u=d[c];i.preserve_cdata&&0===u.value.indexOf("[CDATA[")?(u.name="#cdata",u.type=4,u.value=l.decode(u.value.replace(/^\[CDATA\[|\]\]$/g,""))):0===u.value.indexOf("mce:protected ")&&(u.name="#text",u.type=3,u.raw=!0,u.value=unescape(u.value).substr(14))}}),a.addNodeFilter("xml:namespace,input",(d,c)=>{let u=d.length;for(;u--;){const f=d[u];7===f.type?f.remove():1===f.type&&("input"!==c||f.attr("type")||f.attr("type","text"))}}),a.addAttributeFilter("data-mce-type",d=>{j(d,c=>{"format-caret"===c.attr("data-mce-type")&&(c.isEmpty(a.schema.getNonEmptyElements())?c.remove():c.unwrap())})}),a.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-type,data-mce-resize,data-mce-placeholder",(d,c)=>{let u=d.length;for(;u--;)d[u].attr(c,null)}),{schema:r,addNodeFilter:s.addNodeFilter,addAttributeFilter:s.addAttributeFilter,serialize:(a,i={})=>{const l=rt({format:"html"},i),d=(m=a,p=g=l,(b=f=e)&&b.hasEventListeners("PreProcess")&&!p.no_events?((b,p,h)=>{let v;const y=b.dom;let x=p.cloneNode(!0);const w=document.implementation;if(w.createHTMLDocument){const S=w.createHTMLDocument("");z.each("BODY"===x.nodeName?x.childNodes:[x],k=>{S.body.appendChild(S.importNode(k,!0))}),x="BODY"!==x.nodeName?S.body.firstChild:S.body,v=y.doc,y.doc=S}return S=b,k=Rt(rt({},h),{node:x}),S.dispatch("PreProcess",k),v&&(y.doc=v),x;var S,k})(f,m,g):m),c=((f,m,g)=>{const b=Xn(g.getInner?m.innerHTML:f.getOuterHTML(m));return g.selection||xa(N(m))?b:z.trim(b)})(o,d,l),u=((f,m,g)=>{const b=g.selection?rt({forced_root_block:!1},g):g,p=f.parse(m,b);return(h=>{const v=x=>x&&"br"===x.name,y=h.lastChild;if(v(y)){const x=y.prev;v(x)&&(y.remove(),x.remove())}})(p),p})(s,c,l);var f,m,g,b,p;return"tree"===l.format?u:((f,m,g,b,p)=>{var x;return((v,y,x)=>{return!y.no_events&&v?(S=v,k=Rt(rt({},y),{content:x}),S.dispatch("PostProcess",k)).content:x;var S,k})(f,p,(x=b,ro(m,g).serialize(x)))})(e,t,r,u,l)},addRules:r.addValidElements,setRules:r.setValidElements,addTempAttr:X(mE,s,n),getTempAttrs:K(n),getNodeFilters:s.getNodeFilters,getAttributeFilters:s.getAttributeFilters};var a,i,l})(t,e);return{schema:n.schema,addNodeFilter:n.addNodeFilter,addAttributeFilter:n.addAttributeFilter,serialize:n.serialize,addRules:n.addRules,setRules:n.setRules,addTempAttr:n.addTempAttr,getTempAttrs:n.getTempAttrs,getNodeFilters:n.getNodeFilters,getAttributeFilters:n.getAttributeFilters}},tu=(t,e,n={})=>{const o=(s=e,Rt(rt({format:"html"},n),{set:!0,content:s}));var s;return Wc(t,o).map(r=>{const s=(i=r.content,l=r,Zc(t).editor.setContent(i,l));var i,l;return Kc(t,s.html,r),s.content}).getOr(e)},gE="autoresize_on_init,content_editable_state,padd_empty_with_br,block_elements,boolean_attributes,editor_deselector,editor_selector,elements,file_browser_callback_types,filepicker_validator_handler,force_hex_style_colors,force_p_newlines,gecko_spellcheck,images_dataimg_filter,media_scripts,mode,move_caret_before_on_enter_elements,non_empty_elements,self_closing_elements,short_ended_elements,special,spellchecker_select_languages,spellchecker_whitelist,tab_focus,tabfocus_elements,table_responsive_width,text_block_elements,text_inline_elements,toolbar_drawer,types,validate,whitespace_elements,paste_enable_default_filters,paste_filter_drop,paste_word_valid_elements,paste_retain_style_properties,paste_convert_word_fake_lists".split(","),pE="bbcode,colorpicker,contextmenu,fullpage,legacyoutput,spellchecker,textcolor".split(","),ki=St.DOM,Si=t=>C.from(t).each(e=>e.destroy()),Ei=(()=>{const t={};return{add:(e,n)=>{t[e]=n},get:e=>t[e]?t[e]:{icons:{}},has:e=>ft(t,e)}})(),Sr=ie.ModelManager,P0=(t,e)=>e.dom[t],M0=(t,e)=>parseInt(un(e,t),10),vE=X(P0,"clientWidth"),yE=X(P0,"clientHeight"),CE=X(M0,"margin-top"),xE=X(M0,"margin-left"),I0=t=>{const e=[],n=()=>{const l=t.theme;return l&&l.getNotificationManagerImpl?l.getNotificationManagerImpl():(()=>{const d=()=>{throw new Error("Theme did not provide a NotificationManager implementation.")};return{open:d,close:d,getArgs:d}})()},o=()=>C.from(e[0]),r=()=>{j(e,l=>{l.reposition()})},s=l=>{Hr(e,d=>d===l).each(d=>{e.splice(d,1)})},a=(l,d=!0)=>{if(!t.removed&&(u=(c=t).inline?c.getBody():c.getContentAreaContainer(),C.from(u).map(N)).map(Zo).getOr(!1))return d&&t.dispatch("BeforeOpenNotification",{notification:l}),Kt(e,c=>{return!((u=n().getArgs(c)).type!==(f=l).type||u.text!==f.text||u.progressBar||u.timeout||f.progressBar||f.timeout);var u,f}).getOrThunk(()=>{t.editorManager.setActive(t);const c=n().open(l,()=>{s(c),r(),o().fold(()=>t.focus(),u=>vh(N(u.getEl())))});return(u=>{e.push(u)})(c),r(),t.dispatch("OpenNotification",{notification:rt({},c)}),c});var c,u},i=K(e);return(l=t).on("SkinLoaded",()=>{const d=vw(l);d&&a({text:d,type:"warning",timeout:0},!1),r()}),l.on("show ResizeEditor ResizeWindow NodeChange",()=>{requestAnimationFrame(r)}),l.on("remove",()=>{j(e.slice(),d=>{n().close(d)})}),{open:a,close:()=>{o().each(l=>{n().close(l),s(l),r()})},getNotifications:i};var l},Er=ie.PluginManager,Uo=ie.ThemeManager,F0=t=>{let e=[];const n=()=>{const a=t.theme;return a&&a.getWindowManagerImpl?a.getWindowManagerImpl():(()=>{const i=()=>{throw new Error("Theme did not provide a WindowManager implementation.")};return{open:i,openUrl:i,alert:i,confirm:i,close:i,getParams:i,setParams:i}})()},o=(a,i)=>(...l)=>i?i.apply(a,l):void 0,r=a=>{t.dispatch("CloseWindow",{dialog:a}),e=it(e,i=>i!==a),0===e.length&&t.focus()},s=a=>{t.editorManager.setActive(t),Yd(t),t.ui.show();const i=a();return e.push(l=i),t.dispatch("OpenWindow",{dialog:l}),i;var l};return t.on("remove",()=>{j(e,a=>{n().close(a)})}),{open:(a,i)=>s(()=>n().open(a,i,r)),openUrl:a=>s(()=>n().openUrl(a,r)),alert:(a,i,l)=>{const d=n();d.alert(a,o(l||d,i))},confirm:(a,i,l)=>{const d=n();d.confirm(a,o(l||d,i))},close:()=>{C.from(e[e.length-1]).each(a=>{n().close(a),r(a)})}}},U0=(t,e)=>{t.notificationManager.open({type:"error",text:e})},_i=(t,e)=>{t._skinLoaded?U0(t,e):t.on("SkinLoaded",()=>{U0(t,e)})},Ms=(t,e,n)=>{Yp(t,e,{message:n}),console.error(n)},Is=(t,e,n)=>n?`Failed to load ${t}: ${n} from url ${e}`:`Failed to load ${t} url: ${e}`,Ni=(t,...e)=>{const n=window.console;n&&(n.error?n.error(t,...e):n.log(t,...e))},z0=(t,e)=>{const n=t.editorManager.baseURL+"/skins/content",o=`content${t.editorManager.suffix}.css`,r=!0===t.inline;return vt(e,s=>/^[a-z0-9\-]+$/i.test(s)&&!r?`${n}/${s}/${o}`:t.documentBaseURI.toAbsolute(s))},wE=jt,j0=()=>{let t={};const e=(o,r)=>({status:o,resultUri:r}),n=o=>o in t;return{hasBlobUri:n,getResultUri:o=>{const r=t[o];return r?r.resultUri:null},isPending:o=>!!n(o)&&1===t[o].status,isUploaded:o=>!!n(o)&&2===t[o].status,markPending:o=>{t[o]=e(1,null)},markUploaded:(o,r)=>{t[o]=e(2,r)},removeFailed:o=>{delete t[o]},destroy:()=>{t={}}}};let kE=0;const V0=t=>()=>t.notificationManager.open({text:t.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0}),H0=(t,e)=>((t,e)=>{const n={},o=(i,l)=>new Promise((d,c)=>{const u=new XMLHttpRequest;u.open("POST",e.url),u.withCredentials=e.credentials,u.upload.onprogress=m=>{l(m.loaded/m.total*100)},u.onerror=()=>{c("Image upload failed due to a XHR Transport error. Code: "+u.status)},u.onload=()=>{if(u.status<200||u.status>=300)return void c("HTTP Error: "+u.status);const m=JSON.parse(u.responseText);var g,b;m&&at(m.location)?d((b=m.location,(g=e.basePath)?g.replace(/\/$/,"")+"/"+b.replace(/^\//,""):b)):c("Invalid JSON: "+u.responseText)};const f=new FormData;f.append("file",i.blob(),i.filename()),u.send(f)}),r=(i,l)=>({url:l,blobInfo:i,status:!0}),s=(i,l)=>({url:"",blobInfo:i,status:!1,error:l}),a=(i,l)=>{z.each(n[i],d=>{d(l)}),delete n[i]};return!1===xt(e.handler)&&(e.handler=o),{upload:(i,l)=>{return e.url||e.handler!==o?(c=l,d=z.grep(d=i,u=>!t.isUploaded(u.blobUri())),Promise.all(z.map(d,u=>{return t.isPending(u.blobUri())?(f=>{const m=f.blobUri();return new Promise(g=>{n[m]=n[m]||[],n[m].push(g)})})(u):(m=e.handler,g=c,t.markPending((f=u).blobUri()),new Promise(b=>{let p,h;try{const v=()=>{p&&(p.close(),h=pt)},y=w=>{v(),t.markUploaded(f.blobUri(),w),a(f.blobUri(),r(f,w)),b(r(f,w))},x=w=>{v(),t.removeFailed(f.blobUri()),a(f.blobUri(),s(f,w)),b(s(f,w))};h=w=>{w<0||w>100||C.from(p).orThunk(()=>C.from(g).map(bl)).each(S=>{p=S,S.progressBar.value(w)})},m(f,h).then(y,w=>{x(at(w)?{message:w}:w)})}catch(v){b(s(f,v))}}));var f,m,g}))):new Promise(d=>{d([])});var d,c}}})(e,{url:sw(t),basePath:aw(t),credentials:iw(t),handler:lw(t)}),$0={remove_similar:!0,inherit:!1},_r=rt({selector:"td,th"},$0),_E={tablecellbackgroundcolor:rt({styles:{backgroundColor:"%value"}},_r),tablecellverticalalign:rt({styles:{"vertical-align":"%value"}},_r),tablecellbordercolor:rt({styles:{borderColor:"%value"}},_r),tablecellclass:rt({classes:["%value"]},_r),tableclass:rt({selector:"table",classes:["%value"]},$0),tablecellborderstyle:rt({styles:{borderStyle:"%value"}},_r),tablecellborderwidth:rt({styles:{borderWidth:"%value"}},_r)},NE=K(_E),Ri=z.each,Ne=St.DOM,q0=(t,e)=>{let n,o,r;const s=e&&e.schema||Zn({}),a=l=>{o="string"==typeof l?{name:l,classes:[],attrs:{}}:l;const d=Ne.create(o.name);return c=d,(u=o).classes.length&&Ne.addClass(c,u.classes.join(" ")),Ne.setAttribs(c,u.attrs),d;var c,u},i=(l,d,c)=>{let u,f;const m=d.length>0&&d[0],g=m&&m.name,b=((p,h)=>{const v="string"!=typeof p?p.nodeName.toLowerCase():p,y=s.getElementRule(v),x=y&&y.parentsRequired;return!(!x||!x.length)&&(h&&-1!==z.inArray(x,h)?h:x[0])})(l,g);if(b)g===b?(f=d[0],d=d.slice(1)):f=b;else if(m)f=d[0],d=d.slice(1);else if(!c)return l;return f&&(u=a(f),u.appendChild(l)),c&&(u||(u=Ne.create("div"),u.appendChild(l)),z.each(c,p=>{const h=a(p);u.insertBefore(h,l)})),i(u,d,f&&f.siblings)};return t&&t.length?(o=t[0],n=a(o),r=Ne.create("div"),r.appendChild(i(n,t.slice(1),o.siblings)),r):""},RE=t=>{let e;const n={classes:[],attrs:{}};return"*"!==(t=n.selector=z.trim(t))&&(e=t.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,(o,r,s,a,i)=>{switch(r){case"#":n.attrs.id=s;break;case".":n.classes.push(s);break;case":":-1!==z.inArray("checked disabled enabled read-only required".split(" "),s)&&(n.attrs[s]=s)}if("["===a){const l=i.match(/([\w\-]+)(?:\=\"([^\"]+))?/);l&&(n.attrs[l[1]]=l[2])}return""})),n.name=e||"div",n},AE=(t,e)=>{let n,o,r,s="",a=ww(t);if(""===a)return"";const i=u=>u.replace(/%(\w+)/g,"");if("string"==typeof e){if(!(e=t.formatter.get(e)))return;e=e[0]}if("preview"in e){const u=Nt(e,"preview");if(Jo(u,!1))return"";a=u.getOr(a)}n=e.block||e.inline||"span";const l=(d=e.selector)&&"string"==typeof d?(d=(d=d.split(/\s*,\s*/)[0]).replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),z.map(d.split(/(?:>|\s+(?![^\[\]]+\]))/),u=>{const f=z.map(u.split(/(?:~\+|~|\+)/),RE),m=f.pop();return f.length&&(m.siblings=f),m}).reverse()):[];var d;l.length?(l[0].name||(l[0].name=n),n=e.selector,o=q0(l,t)):o=q0([n],t);const c=Ne.select(n,o)[0]||o.firstChild;return Ri(e.styles,(u,f)=>{const m=i(u);m&&Ne.setStyle(c,f,m)}),Ri(e.attributes,(u,f)=>{const m=i(u);m&&Ne.setAttrib(c,f,m)}),Ri(e.classes,u=>{const f=i(u);Ne.hasClass(c,f)||Ne.addClass(c,f)}),t.dispatch("PreviewFormats"),Ne.setStyles(o,{position:"absolute",left:-65535}),t.getBody().appendChild(o),r=Ne.getStyle(t.getBody(),"fontSize",!0),r=/px$/.test(r)?parseInt(r,10):0,Ri(a.split(" "),u=>{let f=Ne.getStyle(c,u,!0);if(!("background-color"===u&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(f)&&(f=Ne.getStyle(t.getBody(),u,!0),"#ffffff"===$a(f).toLowerCase())||"color"===u&&"#000000"===$a(f).toLowerCase())){if("font-size"===u&&/em|%$/.test(f)){if(0===r)return;f=parseFloat(f)/(/%$/.test(f)?100:1)*r+"px"}"border"===u&&f&&(s+="padding:0 2px;"),s+=u+":"+f+";"}}),t.dispatch("AfterPreviewFormats"),Ne.remove(o),s},W0=t=>{const e=(o=>{const r={},s=(a,i)=>{a&&(at(a)?(Wt(i)||(i=[i]),j(i,l=>{Ce(l.deep)&&(l.deep=!De(l)),Ce(l.split)&&(l.split=!De(l)||Qt(l)),Ce(l.remove)&&De(l)&&!Qt(l)&&(l.remove="none"),De(l)&&Qt(l)&&(l.mixed=!0,l.block_expand=!0),at(l.classes)&&(l.classes=l.classes.split(/\s+/))}),r[a]=i):At(a,(l,d)=>{s(d,l)}))};return s((a=>{const i=a.dom,l=a.schema.type,d={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"left"},inherit:!1,preview:!1},{selector:"img,audio,video",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginLeft:"0px",marginRight:"auto"},onformat:c=>{i.setStyle(c,"float",null)},preview:"font-family font-size"}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginRight:"0px",marginLeft:"auto"},onformat:c=>{i.setStyle(c,"float",null)},preview:"font-family font-size"}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"justify"},inherit:!1,preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all",preserve_attributes:["class","style"]}],italic:[{inline:"em",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all",preserve_attributes:["class","style"]}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all",preserve_attributes:["class","style"]}],strikethrough:(()=>{const c={inline:"span",styles:{textDecoration:"line-through"},exact:!0},u={inline:"strike",remove:"all",preserve_attributes:["class","style"]},f={inline:"s",remove:"all",preserve_attributes:["class","style"]};return"html4"!==l?[f,c,u]:[c,f,u]})(),forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},lineheight:{selector:"h1,h2,h3,h4,h5,h6,p,li,td,th,div",styles:{lineHeight:"%value"}},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:!0,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:(c,u,f)=>et(c)&&c.hasAttribute("href"),onformat:(c,u,f)=>{z.each(f,(m,g)=>{i.setAttrib(c,g,m)})}},lang:{inline:"span",clear_child_styles:!0,remove_similar:!0,attributes:{lang:"%value","data-mce-lang":c=>{var u;return null!==(u=null==c?void 0:c.customValue)&&void 0!==u?u:null}}},removeformat:[{selector:"b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return z.each("p h1 h2 h3 h4 h5 h6 div address pre dt dd samp".split(/\s/),c=>{d[c]={block:c,remove:"all"}}),d})(o)),s(NE()),s(xw(o)),{get:a=>ut(a)?r[a]:r,has:a=>ft(r,a),register:s,unregister:a=>(a&&r[a]&&delete r[a],r)}})(t),n=Ht(null);return(o=>{o.addShortcut("meta+b","","Bold"),o.addShortcut("meta+i","","Italic"),o.addShortcut("meta+u","","Underline");for(let r=1;r<=6;r++)o.addShortcut("access+"+r,"",["FormatBlock",!1,"h"+r]);o.addShortcut("access+7","",["FormatBlock",!1,"p"]),o.addShortcut("access+8","",["FormatBlock",!1,"div"]),o.addShortcut("access+9","",["FormatBlock",!1,"address"])})(t),(o=t).on("mouseup keydown",r=>{((s,a)=>{const i=s.selection,l=s.getBody();Bc(s,null,!1),8!==a&&46!==a||!i.isCollapsed()||"\ufeff"!==i.getStart().innerHTML||Bc(s,Bo(l,i.getStart())),37!==a&&39!==a||Bc(s,Bo(l,i.getStart()))})(o,r.keyCode)}),{get:e.get,has:e.has,register:e.register,unregister:e.unregister,apply:(o,r,s)=>{var i,l,d;i=o,l=r,d=s,Lt(t).formatter.apply(i,l,d)},remove:(o,r,s,a)=>{var l,d,c,u;l=o,d=r,c=s,u=a,Lt(t).formatter.remove(l,d,c,u)},toggle:(o,r,s)=>{var i,l,d;i=o,l=r,d=s,Lt(t).formatter.toggle(i,l,d)},match:(o,r,s,a)=>{return l=o,d=r,c=s,u=a,Lt(t).formatter.match(l,d,c,u);var l,d,c,u},closest:o=>{return s=o,Lt(t).formatter.closest(s);var s},matchAll:(o,r)=>{return a=o,i=r,Lt(t).formatter.matchAll(a,i);var a,i},matchNode:(o,r,s,a)=>{return l=o,d=r,c=s,u=a,Lt(t).formatter.matchNode(l,d,c,u);var l,d,c,u},canApply:o=>{return s=o,Lt(t).formatter.canApply(s);var s},formatChanged:(o,r,s,a)=>{return l=n,d=o,c=r,u=s,f=a,Lt(t).formatter.formatChanged(l,d,c,u,f);var l,d,c,u,f},getCssText:X(AE,t)};var o},K0=t=>{switch(t.toLowerCase()){case"undo":case"redo":case"mcefocus":return!0;default:return!1}},G0=t=>{const e=to(),n=Ht(0),o=Ht(0),r={data:[],typing:!1,beforeChange:()=>{var a,i;a=n,i=e,Lt(t).undoManager.beforeChange(a,i)},add:(s,a)=>{return l=r,d=o,c=n,u=e,f=s,m=a,Lt(t).undoManager.add(l,d,c,u,f,m);var l,d,c,u,f,m},undo:()=>{return a=r,i=n,l=o,Lt(t).undoManager.undo(a,i,l);var a,i,l},redo:()=>{return a=o,i=r.data,Lt(t).undoManager.redo(a,i);var a,i},clear:()=>{var a,i;a=r,i=o,Lt(t).undoManager.clear(a,i)},reset:()=>{var a;a=r,Lt(t).undoManager.reset(a)},hasUndo:()=>{return a=r,i=o,Lt(t).undoManager.hasUndo(a,i);var a,i},hasRedo:()=>{return a=r,i=o,Lt(t).undoManager.hasRedo(a,i);var a,i},transact:s=>{return i=r,l=n,d=s,Lt(t).undoManager.transact(i,l,d);var i,l,d},ignore:s=>{var i,l;i=n,l=s,Lt(t).undoManager.ignore(i,l)},extra:(s,a)=>{var l,d,c,u;l=r,d=o,c=s,u=a,Lt(t).undoManager.extra(l,d,c,u)}};return Un(t)||((s,a,i)=>{const l=Ht(!1),d=c=>{wi(a,!1,i),a.add({},c)};s.on("init",()=>{a.add()}),s.on("BeforeExecCommand",c=>{K0(c.command)||(_0(a,i),a.beforeChange())}),s.on("ExecCommand",c=>{K0(c.command)||d(c)}),s.on("ObjectResizeStart cut",()=>{a.beforeChange()}),s.on("SaveContent ObjectResized blur",d),s.on("dragend",d),s.on("keyup",c=>{const u=c.keyCode;c.isDefaultPrevented()||((u>=33&&u<=36||u>=37&&u<=40||45===u||c.ctrlKey)&&(d(),s.nodeChanged()),46!==u&&8!==u||s.nodeChanged(),l.get()&&a.typing&&!1===xi(Yc(s),a.data[0])&&(!1===s.isDirty()&&s.setDirty(!0),s.dispatch("TypingUndo"),l.set(!1),s.nodeChanged()))}),s.on("keydown",c=>{const u=c.keyCode;c.isDefaultPrevented()||(u>=33&&u<=36||u>=37&&u<=40||45===u?a.typing&&d(c):!(u<16||u>20)||224===u||91===u||a.typing||c.ctrlKey&&!c.altKey||c.metaKey||(a.beforeChange(),wi(a,!0,i),a.add({},c),l.set(!0)))}),s.on("mousedown",c=>{a.typing&&d(c)}),s.on("input",c=>{var u,f;c.inputType&&("insertReplacementText"===c.inputType||"insertText"===(u=c).inputType&&null===u.data||"insertFromPaste"===(f=c).inputType||"insertFromDrop"===f.inputType)&&d(c)}),s.on("AddUndo Undo Redo ClearUndos",c=>{c.isDefaultPrevented()||s.nodeChanged()})})(t,r,n),(s=t).addShortcut("meta+z","","Undo"),s.addShortcut("meta+y,meta+shift+z","","Redo"),r;var s},OE=[9,27,tt.HOME,tt.END,19,20,44,144,145,33,34,45,16,17,18,91,92,93,tt.DOWN,tt.UP,tt.LEFT,tt.RIGHT].concat(wt.browser.isFirefox()?[224]:[]),Y0="data-mce-placeholder",X0=t=>"keydown"===t.type||"keyup"===t.type,Q0=t=>{const e=t.keyCode;return e===tt.BACKSPACE||e===tt.DELETE},TE=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,zo=(t,e)=>Bn(N(e),pw(t)),io=(t,e,n)=>{const o=(r=t,s=e,it(St.DOM.getParents(n.container(),"*",s),r));var r,s;return C.from(o[o.length-1])},ze=(t,e)=>{if(!e)return e;const n=e.container(),o=e.offset();return t?sr(n)?G(n.nextSibling)?M(n.nextSibling,0):M.after(n):Vl(e)?M(n,o+1):e:sr(n)?G(n.previousSibling)?M(n.previousSibling,n.previousSibling.data.length):M.before(n):Hl(e)?M(n,o-1):e},J0=X(ze,!0),Z0=X(ze,!1),tv=(t,e)=>{const n=o=>o.stopImmediatePropagation();t.on("beforeinput input",n,!0),t.getDoc().execCommand(e),t.off("beforeinput input",n)},eu=t=>tv(t,"Delete"),BE=t=>Ff(t)||is(t),Ai=(t,e)=>{return Dn(t,e)?ya(e,BE,(n=t,o=>kt(n,N(o.dom.parentNode)))):C.none();var n},ev=t=>{t.dom.isEmpty(t.getBody())&&(t.setContent(""),(e=>{const n=e.getBody(),o=n.firstChild&&e.dom.isBlock(n.firstChild)?n.firstChild:n;e.selection.setCursorLocation(o,0)})(t))},DE=(t,e)=>({from:t,to:e}),nu=(t,e)=>{const n=N(t),o=N(e.container());return Ai(n,o).map(r=>({block:r,position:e}))},nv=t=>{const e=(t=>{const e=ne(t);return Hr(e,fn).fold(K(e),n=>e.slice(0,n))})(t);return j(e,Mt),e},ov=(t,e)=>{const n=Fn(e,t);return Kt(n.reverse(),o=>Yt(o)).each(Mt)},PE=(t,e,n,o)=>{if(Yt(n))return Mo(n),he(n.dom);0===it(cf(o),s=>!Yt(s)).length&&Yt(e)&&Ke(o,Ft("br"));const r=vn(n.dom,M.before(o.dom));return j(nv(e),s=>{Ke(o,s)}),ov(t,e),r},ME=(t,e,n)=>{if(Yt(n))return Mt(n),Yt(e)&&Mo(e),he(e.dom);const o=yn(n.dom);return j(nv(e),r=>{Vt(n,r)}),ov(t,e),o},rv=(t,e)=>{gr(t,e.dom).map(n=>n.getNode()).map(N).filter(nr).each(Mt)},sv=(t,e,n)=>{return rv(!0,e),rv(!1,n),(o=e,r=n,Dn(r,o)?((s,a)=>{const i=Fn(a,s);return C.from(i[i.length-1])})(r,o):C.none()).fold(X(ME,t,e,n),X(PE,t,e,n));var o,r},av=(t,e,n,o)=>e?sv(t,o,n):sv(t,n,o),ou=(t,e)=>{const n=N(t.getBody());return(r=n.dom,s=e,a=t.selection.getRng(),a.collapsed?((i,l,d)=>{const c=nu(i,M.fromRangeStart(d)),u=c.bind(f=>Ie(l,i,f.position).bind(m=>nu(i,m).map(g=>{return b=i,p=l,Ut((h=g).position.getNode())&&!1===Yt(h.block)?gr(!1,h.block.dom).bind(v=>v.isEqual(h.position)?Ie(p,b,v).bind(y=>nu(b,y)):C.some(h)).getOr(h):h;var b,p,h})));return we(c,u,DE).filter(f=>{return!1===kt((m=f).from.block,m.to.block)&&(m=>We(m.from.block).bind(g=>We(m.to.block).filter(b=>kt(g,b))).isSome())(f)&&(m=>!1===Dt(m.from.block.dom)&&!1===Dt(m.to.block.dom))(f);var m})})(r,s,a):C.none()).map(r=>()=>{av(n,e,r.from.block,r.to.block).each(s=>{t.selection.setRng(s.toRange())})});var r,s,a},iv=(t,e)=>{const n=N(e),o=X(kt,t);return er(n,Ca,o).isSome()},ru=(t,e)=>t.selection.isCollapsed()?C.none():(t=>{const e=N(t.getBody());return((n,o)=>{const r=vn(n.dom,M.fromRangeStart(o)).isNone(),s=tn(n.dom,M.fromRangeEnd(o)).isNone();return!(iv(a=n,(i=o).startContainer)||iv(a,i.endContainer))&&r&&s;var a,i})(e,t.selection.getRng())?(n=t,C.some(()=>{n.setContent(""),n.selection.setCursorLocation()})):((n,o)=>{const r=o.getRng();return we(Ai(n,N(r.startContainer)),Ai(n,N(r.endContainer)),(s,a)=>!1===kt(s,a)?C.some(()=>{r.deleteContents(),av(n,!0,s,a).each(i=>{o.setRng(i.toRange())})}):C.none()).getOr(C.none())})(e,t.selection);var n})(t),FE=Ln,UE=Dt,zn=(t,e,n,o,r)=>C.from(e._selectionOverrides.showCaret(t,n,o,r)),Fs=(t,e)=>t.dispatch("BeforeObjectSelected",{target:e}).isDefaultPrevented()?C.none():C.some((n=>{const o=n.ownerDocument.createRange();return o.selectNode(n),o})(e)),su=(t,e,n)=>e.collapsed?((o,r,s)=>{const a=Cd(1,o.getBody(),r),i=M.fromRangeStart(a),l=i.getNode();if(hs(l))return zn(1,o,l,!i.isAtEnd(),!1);const d=i.getNode(!0);if(hs(d))return zn(1,o,d,!1,!1);const c=o.dom.getParent(i.getNode(),u=>UE(u)||FE(u));return hs(c)?zn(1,o,c,!1,s):C.none()})(t,e,n).getOr(e):e,zE=t=>Lo(t)||As(t),jE=t=>Po(t)||Os(t),lv=(t,e,n,o,r,s)=>{var a,i;zn(o,t,s.getNode(!r),r,!0).each(a=>{if(e.collapsed){const i=e.cloneRange();r?i.setEnd(a.startContainer,a.startOffset):i.setStart(a.endContainer,a.endOffset),i.deleteContents()}else e.deleteContents();t.selection.setRng(a)}),a=t.dom,G(i=n)&&0===i.data.length&&a.remove(i)},au=(t,e)=>((n,o)=>{const r=n.selection.getRng();if(!G(r.commonAncestorContainer))return C.none();const s=o?Xt.Forwards:Xt.Backwards,a=bn(n.getBody()),i=X(xd,o?a.next:a.prev),l=o?zE:jE,d=xs(s,n.getBody(),r),c=ze(o,i(d));if(!c||!za(d,c))return C.none();if(l(c))return C.some(()=>lv(n,r,d.getNode(),s,o,c));const u=i(c);return u&&l(u)&&za(c,u)?C.some(()=>lv(n,r,d.getNode(),s,o,u)):C.none()})(t,e),je=gn([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),dv=(t,e,n)=>Ie(e,t,n).bind(o=>{return r=o.getNode(),Ca(N(r))||is(N(r))||((s,a,i,l)=>{const d=c=>zl(N(c))&&!pn(i,l,s);return fp(!a,i).fold(()=>fp(a,l).fold(Tt,d),d)})(t,e,n,o)?C.none():e&&Dt(o.getNode())||!1===e&&Dt(o.getNode(!0))?((s,a,i,l)=>{const d=l.getNode(!1===a);return Ai(N(s),N(i.getNode())).map(c=>Yt(c)?je.remove(c.dom):je.moveToElement(d)).orThunk(()=>C.some(je.moveToElement(d)))})(t,e,n,o):e&&Po(n)||!1===e&&Lo(n)?C.some(je.moveToPosition(o)):C.none();var r}),cv=(t,e)=>C.from(Bs(t.getBody(),e)),uv=t=>{const e=t.dom,n=t.selection,o=Bs(t.getBody(),n.getNode());if(Ln(o)&&e.isBlock(o)&&e.isEmpty(o)){const r=e.create("br",{"data-mce-bogus":"1"});e.setHTML(o,""),o.appendChild(r),n.setRng(M.before(r).toRange())}return!0},iu=(t,e)=>t.selection.isCollapsed()?((t,e)=>{const n=t.selection.getNode();return cv(t,n).filter(Dt).fold(()=>((o,r,s)=>{const a=Cd(r?1:-1,o,s),i=M.fromRangeStart(a),l=N(o);return!1===r&&Po(i)?C.some(je.remove(i.getNode(!0))):r&&Lo(i)?C.some(je.remove(i.getNode())):!1===r&&Lo(i)&&ic(l,i)?rS(l,i).map(d=>je.remove(d.getNode())):r&&Po(i)&&ac(l,i)?sS(l,i).map(d=>je.remove(d.getNode())):(d=o,((f,m)=>{const g=m.getNode(!1===f),b=f?"after":"before";return et(g)&&g.getAttribute("data-mce-caret")===b})(c=r,u=i)?(f=c,m=u.getNode(!1===c),f&&Dt(m.nextSibling)?C.some(je.moveToElement(m.nextSibling)):!1===f&&Dt(m.previousSibling)?C.some(je.moveToElement(m.previousSibling)):C.none()).fold(()=>dv(d,c,u),C.some):dv(d,c,u).bind(f=>((m,g,b)=>b.fold(p=>C.some(je.remove(p)),p=>C.some(je.moveToElement(p)),p=>pn(g,p,m)?C.none():C.some(je.moveToPosition(p))))(d,u,f)));var d,c,u,f,m})(t.getBody(),e,t.selection.getRng()).map(o=>()=>{return o.fold((r=t,s=e,a=>(r._selectionOverrides.hideFakeCaret(),Io(r,s,N(a)),!0)),((r,s)=>a=>{const i=s?M.before(a):M.after(a);return r.selection.setRng(i.toRange()),!0})(t,e),(r=>s=>(r.selection.setRng(s.toRange()),!0))(t));var r,s}),()=>C.some(pt))})(t,e):((n,o)=>{const r=n.selection.getNode();return Dt(r)&&!va(r)?cv(n,r.parentNode).filter(Dt).fold(()=>C.some(()=>{var s;s=N(n.getBody()),j(ke(s,".mce-offscreen-selection"),Mt),Io(n,o,N(n.selection.getNode())),ev(n)}),()=>C.some(pt)):C.none()})(t,e),lu=(t,e)=>t.selection.isCollapsed()?((n,o)=>{const r=M.fromRangeStart(n.selection.getRng());return Ie(o,n.getBody(),r).filter(s=>o?Jk(s):Zk(s)).bind(s=>C.from(yd(o?0:-1,s))).map(s=>()=>n.selection.select(s))})(t,e):C.none(),Nr=G,mv=t=>Nr(t)&&t.data[0]===re,fv=t=>Nr(t)&&t.data[t.data.length-1]===re,gv=t=>t.ownerDocument.createTextNode(re),Oi=(t,e)=>t?(n=>{if(Nr(n.previousSibling))return fv(n.previousSibling)||n.previousSibling.appendData(re),n.previousSibling;if(Nr(n))return mv(n)||n.insertData(0,re),n;{const o=gv(n);return n.parentNode.insertBefore(o,n),o}})(e):(n=>{if(Nr(n.nextSibling))return mv(n.nextSibling)||n.nextSibling.insertData(0,re),n.nextSibling;if(Nr(n))return fv(n)||n.appendData(re),n;{const o=gv(n);return n.nextSibling?n.parentNode.insertBefore(o,n.nextSibling):n.parentNode.appendChild(o),o}})(e),HE=X(Oi,!0),$E=X(Oi,!1),pv=(t,e)=>G(t.container())?Oi(e,t.container()):Oi(e,t.getNode()),hv=(t,e)=>{const n=e.get();return n&&t.container()===n&&sr(n)},du=(t,e)=>e.fold(n=>{Oo(t.get());const o=HE(n);return t.set(o),C.some(M(o,o.length-1))},n=>he(n).map(o=>{if(hv(o,t))return M(t.get(),1);{Oo(t.get());const r=pv(o,!0);return t.set(r),M(r,1)}}),n=>yn(n).map(o=>{if(hv(o,t))return M(t.get(),t.get().length-1);{Oo(t.get());const r=pv(o,!1);return t.set(r),M(r,r.length-1)}}),n=>{Oo(t.get());const o=$E(n);return t.set(o),C.some(M(o,1))}),bv=(t,e)=>{for(let n=0;n<t.length;n++){const o=t[n].apply(null,e);if(o.isSome())return o}return C.none()},le=gn([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),vv=(t,e)=>oo(e,t)||t,qE=(t,e,n)=>{const o=J0(n),r=vv(e,o.container());return io(t,r,o).fold(()=>tn(r,o).bind(X(io,t,r)).map(s=>le.before(s)),C.none)},WE=(t,e)=>null===Bo(t,e),yv=(t,e,n)=>io(t,e,n).filter(X(WE,e)),KE=(t,e,n)=>{const o=Z0(n);return yv(t,e,o).bind(r=>vn(r,o).isNone()?C.some(le.start(r)):C.none())},GE=(t,e,n)=>{const o=J0(n);return yv(t,e,o).bind(r=>tn(r,o).isNone()?C.some(le.end(r)):C.none())},YE=(t,e,n)=>{const o=Z0(n),r=vv(e,o.container());return io(t,r,o).fold(()=>vn(r,o).bind(X(io,t,r)).map(s=>le.after(s)),C.none)},Cv=t=>{return e=cu(t),!1===("rtl"===St.DOM.getStyle(e,"direction",!0)||TE.test(e.textContent));var e},En=(t,e,n)=>bv([qE,KE,GE,YE],[t,e,n]).filter(Cv),cu=t=>t.fold(me,me,me,me),xv=t=>t.fold(K("before"),K("start"),K("end"),K("after")),Ti=t=>t.fold(le.before,le.before,le.after,le.after),uu=t=>t.fold(le.start,le.start,le.end,le.end),XE=(t,e,n,o,r,s)=>we(io(e,n,o),io(e,n,r),(a,i)=>a!==i&&((l,d,c)=>{const u=oo(d,l),f=oo(c,l);return u&&u===f})(n,a,i)?le.after(t?a:i):s).getOr(s),QE=(t,e)=>t.fold(jt,n=>{return r=e,!(xv(o=n)===xv(r)&&cu(o)===cu(r));var o,r}),JE=(t,e)=>t?e.fold(mo(C.some,le.start),C.none,mo(C.some,le.after),C.none):e.fold(C.none,mo(C.some,le.before),C.none,mo(C.some,le.end)),wv=(t,e,n)=>{const o=t?1:-1;return e.setRng(M(n.container(),n.offset()+o).toRange()),e.getSel().modify("move",t?"forward":"backward","word"),!0};var _n;!function(t){t[t.Br=0]="Br",t[t.Block=1]="Block",t[t.Wrap=2]="Wrap",t[t.Eol=3]="Eol"}(_n||(_n={}));const Bi=(t,e)=>t===Xt.Backwards?$r(e):e,ZE=(t,e,n)=>t===Xt.Forwards?e.next(n):e.prev(n),t_=(t,e,n,o)=>Ut(o.getNode(e===Xt.Forwards))?_n.Br:!1===pn(n,o)?_n.Block:_n.Wrap,kv=(t,e,n,o)=>{const r=bn(n);let s=o;const a=[];for(;s;){const i=ZE(e,r,s);if(!i)break;if(Ut(i.getNode(!1)))return e===Xt.Forwards?{positions:Bi(e,a).concat([i]),breakType:_n.Br,breakAt:C.some(i)}:{positions:Bi(e,a),breakType:_n.Br,breakAt:C.some(i)};if(i.isVisible()){if(t(s,i)){const l=t_(0,e,s,i);return{positions:Bi(e,a),breakType:l,breakAt:C.some(i)}}a.push(i),s=i}else s=i}return{positions:Bi(e,a),breakType:_n.Eol,breakAt:C.none()}},Sv=(t,e,n,o)=>e(n,o).breakAt.map(r=>{const s=e(n,r).positions;return t===Xt.Backwards?s.concat(r):[r].concat(s)}).getOr([]),mu=(t,e)=>Te(t,(n,o)=>n.fold(()=>C.some(o),r=>we(Be(r.getClientRects()),Be(o.getClientRects()),(s,a)=>{const i=Math.abs(e-s.left);return Math.abs(e-a.left)<=i?o:r}).or(n)),C.none()),Ev=(t,e)=>Be(e.getClientRects()).bind(n=>mu(t,n.left)),Us=X(kv,M.isAbove,-1),zs=X(kv,M.isBelow,1),e_=X(Sv,-1,Us),n_=X(Sv,1,zs),o_=Dt,_v=(t,e)=>Math.abs(t.left-e),Nv=(t,e)=>Math.abs(t.right-e),Rv=(t,e)=>ia(t,(n,o)=>{const r=Math.min(_v(n,e),Nv(n,e)),s=Math.min(_v(o,e),Nv(o,e));return s===r&&Yo(o,"node")&&o_(o.node)||s<r?o:n}),r_=t=>{const e=n=>vt(n,o=>{const r=No(o);return r.node=t,r});if(et(t))return e(t.getClientRects());if(G(t)){const n=t.ownerDocument.createRange();return n.setStart(t,0),n.setEnd(t,t.data.length),e(n.getClientRects())}return[]},Av=t=>An(t,r_);var js;!function(t){t[t.Up=-1]="Up",t[t.Down=1]="Down"}(js||(js={}));const Ov=(t,e,n,o,r,s)=>{let a=0;const i=[],l=u=>{let f=Av([u]);-1===t&&(f=f.reverse());for(let m=0;m<f.length;m++){const g=f[m];if(!n(g,d)){if(i.length>0&&e(g,go(i))&&a++,g.line=a,r(g))return!0;i.push(g)}}},d=go(s.getClientRects());if(!d)return i;const c=s.getNode();return l(c),((u,f,m,g)=>{for(;g=vs(g,u,$f,f);)if(m(g))return})(t,o,l,c),i},s_=X(Ov,js.Up,us,ms),a_=X(Ov,js.Down,ms,us),Tv=t=>e=>e.line>t,fu=t=>e=>e.line===t,lo=(t,e)=>{t.selection.setRng(e),Ns(t,t.selection.getRng())},gu=(t,e,n)=>C.some(su(t,e,n)),Bv=(t,e,n,o,r,s)=>{const a=e===Xt.Forwards,i=bn(t.getBody()),l=X(xd,a?i.next:i.prev),d=a?o:r;if(!n.collapsed){const g=Ba(n);if(s(g))return zn(e,t,g,e===Xt.Backwards,!1)}const c=xs(e,t.getBody(),n);if(d(c))return Fs(t,c.getNode(!a));const u=ze(a,l(c)),f=jf(n);if(!u)return f?C.some(n):C.none();if(d(u))return zn(e,t,u.getNode(!a),a,!1);const m=l(u);return m&&d(m)&&za(u,m)?zn(e,t,m.getNode(!a),a,!1):f?gu(t,u.toRange(),!1):C.none()},Dv=(t,e,n,o,r,s)=>{const a=xs(e,t.getBody(),n),i=go(a.getClientRects()),l=e===js.Down;if(!i)return C.none();const d=(l?a_:s_)(t.getBody(),Tv(1),a),c=it(d,fu(1)),u=i.left,f=Rv(c,u);if(f&&s(f.node)){const g=Math.abs(u-f.left),b=Math.abs(u-f.right);return zn(e,t,f.node,g<b,!1)}let m;if(m=o(a)?a.getNode():r(a)?a.getNode(!0):Ba(n),m){const g=((p,h,v,y)=>{const x=bn(h);let w,S,k,T;const O=[];let I=0;const R=L=>go(L.getClientRects());1===p?(w=x.next,S=ms,k=us,T=M.after(y)):(w=x.prev,S=us,k=ms,T=M.before(y));const P=R(T);do{if(!T.isVisible())continue;const L=R(T);if(k(L,P))continue;O.length>0&&S(L,go(O))&&I++;const U=No(L);if(U.position=T,U.line=I,v(U))return O;O.push(U)}while(T=w(T));return O})(e,t.getBody(),Tv(1),m);let b=Rv(it(g,fu(1)),u);if(b||(b=go(it(g,fu(0))),b))return gu(t,b.position.toRange(),!1)}return 0===c.length?pu(t,l).filter(l?r:o).map(g=>su(t,g.toRange(),!1)):C.none()},pu=(t,e)=>{const n=t.selection.getRng(),o=e?M.fromRangeEnd(n):M.fromRangeStart(n),r=(s=o.container(),a=t.getBody(),er(N(s),i=>lk(i.dom),i=>i.dom===a).map(i=>i.dom).getOr(a));var s,a;if(e){const i=zs(r,o);return fo(i.positions)}{const i=Us(r,o);return Be(i.positions)}},Lv=(t,e,n)=>pu(t,e).filter(n).exists(o=>(t.selection.setRng(o.toRange()),!0)),Di=(t,e)=>{const n=t.dom.createRng();n.setStart(e.container(),e.offset()),n.setEnd(e.container(),e.offset()),t.selection.setRng(n)},Pv=(t,e)=>{t?e.setAttribute("data-mce-selected","inline-boundary"):e.removeAttribute("data-mce-selected")},Mv=(t,e,n)=>du(e,n).map(o=>(Di(t,o),n)),Iv=(t,e,n)=>!!ps(t)&&((o,r,s)=>{const a=o.getBody(),i=M.fromRangeStart(o.selection.getRng());return((l,d,c,u)=>{const f=ze(l,u),m=En(d,c,f);return En(d,c,f).bind(X(JE,l)).orThunk(()=>((g,b,p,h,v)=>{const y=ze(g,v);return Ie(g,p,y).map(X(ze,g)).fold(()=>h.map(Ti),x=>En(b,p,x).map(X(XE,g,b,p,y,x)).filter(X(QE,h))).filter(Cv)})(l,d,c,m,u))})(s,X(zo,o),a,i).bind(l=>Mv(o,r,l))})(t,e,n).isSome(),Fv=(t,e,n)=>!!ps(e)&&((o,r)=>{const s=r.selection.getRng(),a=o?M.fromRangeEnd(s):M.fromRangeStart(s);return!!xt(r.selection.getSel().modify)&&(o&&Vl(a)?wv(!0,r.selection,a):!(o||!Hl(a))&&wv(!1,r.selection,a))})(t,e),l_=X(Fv,!0),d_=X(Fv,!1),Li=(t,e,n)=>{if(ps(t)){const o=pu(t,e).getOrThunk(()=>{const r=t.selection.getRng();return e?M.fromRangeEnd(r):M.fromRangeStart(r)});return En(X(zo,t),t.getBody(),o).exists(r=>{const s=Ti(r);return du(n,s).exists(a=>(Di(t,a),!0))})}return!1},Uv=(t,e)=>n=>du(e,n).map(o=>()=>Di(t,o)),zv=(t,e,n,o)=>{const r=t.getBody(),s=X(zo,t);t.undoManager.ignore(()=>{t.selection.setRng(((a,i)=>{const l=document.createRange();return l.setStart(a.container(),a.offset()),l.setEnd(i.container(),i.offset()),l})(n,o)),eu(t),En(s,r,M.fromRangeStart(t.selection.getRng())).map(uu).bind(Uv(t,e)).each(jr)}),t.nodeChanged()},hu=(t,e,n)=>{if(t.selection.isCollapsed()&&ps(t)){const o=M.fromRangeStart(t.selection.getRng());return((r,s,a,i)=>{const l=(u=r.getBody(),f=i.container(),oo(f,u)||u),d=X(zo,r),c=En(d,l,i);var u,f;return c.bind(u=>a?u.fold(K(C.some(uu(u))),C.none,K(C.some(Ti(u))),C.none):u.fold(C.none,K(C.some(Ti(u))),C.none,K(C.some(uu(u))))).map(Uv(r,s)).getOrThunk(()=>{const u=Va(a,l,i),f=u.bind(m=>En(d,l,m));return we(c,f,()=>io(d,l,i).bind(m=>{return we(he(g=m),yn(g),(b,p)=>{const h=ze(!0,b),v=ze(!1,p);return tn(g,h).forall(y=>y.isEqual(v))}).getOr(!0)?C.some(()=>{Io(r,a,N(m))}):C.none();var g})).getOrThunk(()=>f.bind(()=>u.map(m=>()=>{a?zv(r,s,i,m):zv(r,s,m,i)})))})})(t,e,n,o)}return C.none()},c_=t=>1===ff(t),bu=(t,e)=>t.selection.isCollapsed()?((t,e)=>{const n=N(t.getBody()),o=N(t.selection.getStart()),r=it(((s,a)=>{const i=Fn(a,s);return Hr(i,fn).fold(K(i),l=>i.slice(0,l))})(n,o),c_);return fo(r).bind(s=>{const a=M.fromRangeStart(t.selection.getRng());return l=e,d=a,!we(he(c=s.dom),yn(c),(u,f)=>{const m=ze(!0,u),g=ze(!1,f),b=ze(!1,d);return l?tn(c,b).exists(p=>p.isEqual(g)&&d.isEqual(m)):vn(c,b).exists(p=>p.isEqual(m)&&d.isEqual(g))}).getOr(!0)||Cn((i=s).dom)&&Nb(i.dom)?C.none():C.some(()=>((l,d,c,u)=>{const f=X(wS,d),m=vt(it(u,f),g=>g.dom);if(0===m.length)Io(d,l,c);else{const g=((b,p)=>{const h=Oc(!1),v=Ob(p,h.dom);return Ke(N(b),h),Mt(N(b)),M(v,0)})(c.dom,m);d.selection.setRng(g.toRange())}})(e,t,s,r));var l,d,c,i})})(t,e):C.none(),vu=(t,e,n)=>C.some(()=>{t._selectionOverrides.hideFakeCaret(),Io(t,e,N(n))}),yu=(t,e)=>t.selection.isCollapsed()?((n,o)=>{const r=o?As:Os,a=xs(o?Xt.Forwards:Xt.Backwards,n.getBody(),n.selection.getRng());return r(a)?vu(n,o,a.getNode(!o)):C.from(ze(o,a)).filter(i=>r(i)&&za(a,i)).map(i=>()=>vu(n,o,i.getNode(!o)))})(t,e):((n,o)=>{const r=n.selection.getNode();return mn(r)?vu(n,o,r):C.none()})(t,e),Cu=t=>{const e=parseInt(t,10);return isNaN(e)?0:e},jv=(t,e)=>(t||"table"===Ot(e)?"margin":"padding")+("rtl"===un(e,"direction")?"-right":"-left"),Vv=t=>{const e=$v(t);return!t.mode.isReadOnly()&&(e.length>1||(n=t,Ko(e,r=>{const s=jv(Wg(n),r),a=ga(r,s).map(Cu).getOr(0);return"false"!==n.dom.getContentEditable(r.dom)&&a>0})));var n},Hv=t=>jl(t)||is(t),$v=t=>{return it((e=t.selection.getSelectedBlocks(),vt(e,N)),n=>!Hv(n)&&!We(n).exists(Hv)&&ya(n,o=>Ln(o.dom)||Dt(o.dom)).exists(o=>Ln(o.dom)));var e},qv=(t,e)=>{const{dom:n}=t,o=uw(t),r=/[a-z%]+$/i.exec(o)[0],s=parseInt(o,10),a=Wg(t);j($v(t),i=>{((l,d,c,u,f,m)=>{const g=jv(c,N(m));if("outdent"===d){const b=Math.max(0,Cu(m.style[g])-u);l.setStyle(m,g,b?b+f:"")}else{const b=Cu(m.style[g])+u+f;l.setStyle(m,g,b)}})(n,e,a,s,r,i.dom)})},Wv=t=>qv(t,"outdent"),Kv=t=>{if(t.selection.isCollapsed()&&Vv(t)){const e=t.dom,n=t.selection.getRng(),o=M.fromRangeStart(n),r=e.getParent(n.startContainer,e.isBlock);if(null!==r&&sc(N(r),o))return C.some(()=>Wv(t))}return C.none()},Gv=(t,e,n)=>Go([Kv,iu,au,(o,r)=>hu(o,e,r),ou,vc,lu,yu,ru,bu],o=>o(t,n)),Yv=t=>void 0===t.touches||1!==t.touches.length?C.none():C.some(t.touches[0]),xu=(t,e)=>ft(t,e.nodeName),f_=(t,e)=>!!G(e)||!!et(e)&&!xu(t,e)&&!Fe(e),g_=(t,e)=>!(!G(e)||0!==e.nodeValue.length&&(!/^\s+$/.test(e.nodeValue)||e.nextSibling&&!xu(t,e.nextSibling))),p_=t=>{const e=t.dom,n=t.selection,o=t.schema,r=o.getBlockElements();let s=n.getStart();const a=t.getBody();let i,l,d;const c=Se(t);if(!s||!et(s))return;const u=a.nodeName.toLowerCase();if(!o.isValidChild(u,c.toLowerCase())||(v=r,y=a,It(qh(N(s),N(y)),w=>xu(v,w.dom))))return;var v,y;const f=n.getRng(),m=f.startContainer,g=f.startOffset,b=f.endContainer,p=f.endOffset,h=Do(t);for(s=a.firstChild;s;)if(f_(r,s)){if(g_(r,s)){l=s,s=s.nextSibling,e.remove(l);continue}i||(i=e.create(c,Ao(t)),s.parentNode.insertBefore(i,s),d=!0),l=s,s=s.nextSibling,i.appendChild(l)}else i=null,s=s.nextSibling;d&&h&&(f.setStart(m,g),f.setEnd(b,p),n.setRng(f),t.nodeChanged())},Xv=t=>e=>-1!==(" "+e.attr("class")+" ").indexOf(t),h_=(t,e,n)=>function(o){const r=arguments,s=r[r.length-2],a=s>0?e.charAt(s-1):"";if('"'===a)return o;if(">"===a){const i=e.lastIndexOf("<",s);if(-1!==i&&-1!==e.substring(i,s).indexOf('contenteditable="false"'))return o}return'<span class="'+n+'" data-mce-content="'+t.dom.encode(r[0])+'">'+t.dom.encode("string"==typeof r[1]?r[1]:r[0])+"</span>"},Qv=(t,e)=>{e.hasAttribute("data-mce-caret")&&($l(e),t.selection.setRng(t.selection.getRng()),t.selection.scrollIntoView(e))},b_=(t,e)=>{const n=as(N(t.getBody()),"*[data-mce-caret]").map(r=>r.dom).getOrNull();if(n)return"compositionstart"===e.type?(e.preventDefault(),e.stopPropagation(),void Qv(t,n)):void(zf(n)&&(Qv(t,n),t.undoManager.add()))},Jv=Dt,Zv=(t,e,n)=>{const o=bn(t.getBody()),r=X(xd,1===e?o.next:o.prev);if(n.collapsed){const s=t.dom.getParent(n.startContainer,"PRE");if(!s)return;if(!r(M.fromRangeStart(n))){const a=N((i=>{const l=i.dom.create(Se(i));return l.innerHTML='<br data-mce-bogus="1">',l})(t));1===e?Kn(N(s),a):Ke(N(s),a),t.selection.select(a.dom,!0),t.selection.collapse()}}},ty=(t,e)=>((n,o)=>{const r=o?Xt.Forwards:Xt.Backwards,s=n.selection.getRng();return(a=r,i=n,l=s,Bv(i,a,l,Lo,Po,Jv)).orThunk(()=>(Zv(n,r,s),C.none()));var a,i,l})(t,e).exists(n=>(lo(t,n),!0)),ey=(t,e)=>((n,o)=>{const r=o?1:-1,s=n.selection.getRng();return(a=r,i=n,l=s,Dv(i,a,l,d=>Lo(d)||Hh(d),d=>Po(d)||$h(d),Jv)).orThunk(()=>(Zv(n,r,s),C.none()));var a,i,l})(t,e).exists(n=>(lo(t,n),!0)),ny=(t,e)=>Lv(t,e,e?Po:Lo),v_=t=>Pt(["figcaption"],Ot(t)),oy=(t,e)=>!!t.selection.isCollapsed()&&((t,e)=>{const n=N(t.getBody()),o=M.fromRangeStart(t.selection.getRng()),r=Se(t),s=Ao(t);return((a,i)=>{const l=X(kt,i);return ya(N(a.container()),fn,l).filter(v_)})(o,n).exists(()=>{if(a=n,l=o,e?zs(a.dom,l).breakAt.isNone():Us(a.dom,l).breakAt.isNone()){const a=((i,l,d,c)=>{const u=Ft(d),f=Ft("br");return cn(u,c),Vt(u,f),m=i,g=u,l?Vt(m,g):wf(m,g),(m=>{const g=document.createRange();return g.setStartBefore(m.dom),g.setEndBefore(m.dom),g})(f);var m,g})(n,e,r,s);return t.selection.setRng(a),!0}var a,l;return!1})})(t,e),ry={shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0},sy=(t,e)=>e.keyCode===t.keyCode&&e.shiftKey===t.shiftKey&&e.altKey===t.altKey&&e.ctrlKey===t.ctrlKey&&e.metaKey===t.metaKey,mt=(t,...e)=>()=>t.apply(null,e),Vs=(t,e)=>{return Kt((o=e,An(vt(t,s=>rt(Rt(rt({},ry),{action:pt}),s)),r=>sy(r,o)?[r]:[])),n=>n.action());var o},ay=(t,e)=>{return Go((o=e,An(vt(t,s=>rt(Rt(rt({},ry),{action:()=>C.none()}),s)),r=>sy(r,o)?[r]:[])),n=>n.action());var o},iy=(t,e)=>{const n=e?Xt.Forwards:Xt.Backwards,o=t.selection.getRng();return Bv(t,n,o,As,Os,mn).exists(r=>(lo(t,r),!0))},ly=(t,e)=>{const n=e?1:-1,o=t.selection.getRng();return Dv(t,n,o,As,Os,mn).exists(r=>(lo(t,r),!0))},dy=(t,e)=>Lv(t,e,e?Os:As),cy=gn([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),Hs=Rt(rt({},cy),{none:t=>cy.none(t)}),uy=(t,e,n)=>An(ne(t),o=>Bn(o,e)?n(o)?[o]:[]:uy(o,e,n)),my=(t,e)=>wo(t,"table",e),wu=(t,e,n,o,r=jt)=>{const s=1===o;if(!s&&n<=0)return Hs.first(t[0]);if(s&&n>=t.length-1)return Hs.last(t[t.length-1]);{const a=n+o,i=t[a];return r(i)?Hs.middle(e,i):wu(t,e,a,o,r)}},fy=(t,e)=>my(t,e).bind(n=>{const o=uy(n,"th,td",jt);return Hr(o,r=>kt(t,r)).map(r=>({index:r,all:o}))}),gy=(t,e=!1)=>{return Zo(t)?t.dom.isContentEditable:(n=t,wo(n,"[contenteditable]")).fold(K(e),o=>"true"===C_(o));var n},C_=t=>t.dom.contentEditable,py=(t,e,n,o,r)=>{const s=ke(N(n),"td,th,caption").map(i=>i.dom);var i;return((i,l,d)=>Te(i,(c,u)=>c.fold(()=>C.some(u),f=>{const m=Math.sqrt(Math.abs(f.x-l)+Math.abs(f.y-d)),g=Math.sqrt(Math.abs(u.x-l)+Math.abs(u.y-d));return C.some(g<m?u:f)}),C.none()))(it((i=t,An(s,d=>{const c={left:(u=No(d.getBoundingClientRect())).left- -1,top:u.top- -1,right:u.right+-2,bottom:u.bottom+-2,width:u.width+-1,height:u.height+-1};var u;return[{x:c.left,y:i(c),cell:d},{x:c.right,y:i(c),cell:d}]})),i=>e(i,r)),o,r).map(i=>i.cell)},x_=X(py,t=>t.bottom,(t,e)=>t.y<e),w_=X(py,t=>t.top,(t,e)=>t.y>e),hy=(t,e,n)=>{const o=t(e,n);return(r=o).breakType===_n.Wrap&&0===r.positions.length||!Ut(n.getNode())&&(r=>r.breakType===_n.Br&&1===r.positions.length)(o)?!((r,s,a)=>a.breakAt.exists(i=>r(s,i).breakAt.isSome()))(t,e,o):o.breakAt.isNone();var r},k_=X(hy,Us),S_=X(hy,zs),E_=(t,e,n,o)=>{const r=t.selection.getRng(),s=e?1:-1;return!(!ip()||!((a,i,l)=>{const d=M.fromRangeStart(i);return gr(!a,l).exists(c=>c.isEqual(d))})(e,r,n)||(zn(s,t,n,!e,!1).each(a=>{lo(t,a)}),0))},by=(t,e,n)=>{const o=((s,a)=>{const i=a.getNode(s);return et(i)&&"TABLE"===i.nodeName?C.some(i):C.none()})(!!e,n),r=!1===e;o.fold(()=>lo(t,n.toRange()),s=>gr(r,t.getBody()).filter(a=>a.isEqual(n)).fold(()=>lo(t,n.toRange()),a=>((i,l,d)=>{const c=Se(l);l.undoManager.transact(()=>{const u=Ft(c);cn(u,Ao(l)),Vt(u,Ft("br")),i?Kn(N(d),u):Ke(N(d),u);const f=l.dom.createRng();f.setStart(u.dom,0),f.setEnd(u.dom,0),lo(l,f)})})(e,t,s)))},__=(t,e,n,o)=>{const r=t.selection.getRng(),s=M.fromRangeStart(r),a=t.getBody();if(!e&&k_(o,s)){const i=(l=a,(u=d=n,f=c=s,Be(f.getClientRects()).bind(m=>x_(u,m.left,m.top)).bind(m=>{return Ev(yn(g=m).map(b=>Us(g,b).positions.concat(b)).getOr([]),f);var g})).orThunk(()=>Be(c.getClientRects()).bind(u=>mu(e_(l,M.before(d)),u.left))).getOr(M.before(d)));return by(t,e,i),!0}var l,d,c,u,f;if(e&&S_(o,s)){const i=((l,d,c)=>((u,f)=>fo(f.getClientRects()).bind(m=>w_(u,m.left,m.top)).bind(m=>{return Ev(he(g=m).map(b=>[b].concat(zs(g,b).positions)).getOr([]),f);var g}))(d,c).orThunk(()=>Be(c.getClientRects()).bind(u=>mu(n_(l,M.after(d)),u.left))).getOr(M.after(d)))(a,n,s);return by(t,e,i),!0}return!1},vy=(t,e,n)=>C.from(t.dom.getParent(t.selection.getNode(),"td,th")).bind(o=>C.from(t.dom.getParent(o,"table")).map(r=>n(t,e,r,o))).getOr(!1),yy=(t,e)=>vy(t,e,E_),Cy=(t,e)=>vy(t,e,__),xy=(t,e,n)=>n.fold(C.none,C.none,(o,r)=>{return(s=r,((a,i)=>{const l=d=>{for(let c=0;c<d.childNodes.length;c++){const u=N(d.childNodes[c]);if(i(u))return C.some(u);const f=l(d.childNodes[c]);if(f.isSome())return f}return C.none()};return l(a.dom)})(s,Ah)).map(a=>{return(t=>{const e=yr.getWin(t).dom,n=(r,s,a,i)=>zd(e,r,s,a,i),o=t.match({domRange:s=>{const a=N(s.startContainer),i=N(s.endContainer);return rh(a,s.startOffset,i,s.endOffset)},relative:Ek,exact:rh});return((r,s)=>{var i;return((i,l)=>{const d=l.ltr();return d.collapsed?l.rtl().filter(c=>!1===c.collapsed).map(c=>_s.rtl(N(c.endContainer),c.endOffset,N(c.startContainer),c.startOffset)).getOrThunk(()=>nh(0,_s.ltr,d)):nh(0,_s.ltr,d)})(0,(i=r,s.match({domRange:d=>({ltr:K(d),rtl:C.none}),relative:(d,c)=>({ltr:po(()=>eh(i,d,c)),rtl:po(()=>C.some(eh(i,c,d)))}),exact:(d,c,u,f)=>({ltr:po(()=>zd(i,d,c,u,f)),rtl:po(()=>C.some(zd(i,u,f,d,c)))})})))})(e,o).match({ltr:n,rtl:n})})(yr.exact(i=a,0,i,0));var i});var s},o=>(t.execCommand("mceTableInsertRowAfter"),wy(t,e,o))),wy=(t,e,n)=>{return xy(t,e,(r=gy,fy(o=n,void 0).fold(()=>Hs.none(o),s=>wu(s.all,o,s.index,1,r))));var o,r},N_=(t,e,n)=>{return xy(t,e,(r=gy,fy(o=n,void 0).fold(()=>Hs.none(),s=>wu(s.all,o,s.index,-1,r))));var o,r},ky=(t,e)=>{const n=["table","li","dl"],o=N(t.getBody()),r=a=>{const i=Ot(a);return kt(a,o)||Pt(n,i)},s=t.selection.getRng();return(a=N(e?s.endContainer:s.startContainer),i=r,((l,d,c=Tt)=>c(d)?C.none():Pt(l,Ot(d))?C.some(d):ss(d,l.join(","),u=>Bn(u,"table")||c(u)))(["td","th"],a,i)).map(a=>(my(a,r).each(i=>{t.model.table.clearSelectedCells(i.dom)}),t.selection.collapse(!e),(e?wy:N_)(t,r,a).each(i=>{t.selection.setRng(i)}),!0)).getOr(!1);var a,i},on=(t,e)=>({container:t,offset:e}),Pi=St.DOM,Mi=t=>e=>t===e?-1:0,ku=(t,e,n)=>{if(G(t)&&e>=0)return C.some(on(t,e));{const o=_o(Pi);return C.from(o.backwards(t,e,Mi(t),n)).map(r=>on(r.container,r.container.data.length))}},Su=(t,e,n)=>{if(!G(t))return C.none();if(e>=0&&e<=t.textContent.length)return C.some(on(t,e));{const r=_o(Pi);return C.from(r.backwards(t,e,Mi(t),n)).bind(s=>Su(s.container,e+s.container.data.length,n))}},Sy=(t,e,n)=>{if(!G(t))return C.none();const o=t.textContent;if(e<=o.length)return C.some(on(t,e));{const r=_o(Pi);return C.from(r.forwards(t,e,Mi(t),n)).bind(s=>Sy(s.container,e-o.length,n))}},Eu=(t,e,n,o,r)=>{const s=_o(t,(a=t,i=>a.isBlock(i)||Pt(["BR","IMG","HR","INPUT"],i.nodeName)||"false"===a.getContentEditable(i)));var a;return C.from(s.backwards(e,n,o,r))},Ey=t=>t.toString().replace(/\u00A0/g," ").replace(/\uFEFF/g,""),_y=t=>""!==t&&-1!==" \xa0\f\n\r\t\v".indexOf(t),_u=(t,e)=>t.substring(e.length),Ny=(t,e,n,o=0)=>{return(r=N(e.startContainer),wo(r,Oh)).fold(()=>((s,a,i,l=0)=>{if(!(d=a).collapsed||3!==d.startContainer.nodeType)return C.none();var d;const c=s.getParent(a.startContainer,s.isBlock)||s.getRoot();return Eu(s,a.startContainer,a.startOffset,(u,f,m)=>((g,b,p)=>{let h;for(h=b-1;h>=0;h--){const v=g.charAt(h);if(_y(v))return C.none();if(v===p)break}return C.some(h)})(m,f,i).getOr(f),c).bind(u=>{const f=a.cloneRange();if(f.setStart(u.container,u.offset),f.setEnd(a.endContainer,a.endOffset),f.collapsed)return C.none();const m=Ey(f);return 0!==m.lastIndexOf(i)||_u(m,i).length<l?C.none():C.some({text:_u(m,i),range:f,triggerChar:i})})})(t,e,n,o),s=>{const a=t.createRng();a.selectNode(s.dom);const i=Ey(a);return C.some({range:a,text:_u(i,n),triggerChar:n})});var r},Ry=t=>{if(3===t.nodeType)return on(t,t.data.length);{const e=t.childNodes;return e.length>0?Ry(e[e.length-1]):on(t,e.length)}},Ay=(t,e)=>{const n=t.childNodes;return n.length>0&&e<n.length?Ay(n[e],0):n.length>0&&1===t.nodeType&&n.length===e?Ry(n[n.length-1]):on(t,e)},Oy=(t,e,n,o={})=>{const r=e(),s=t.selection.getRng().startContainer.nodeValue,a=it(r.lookupByChar(n.triggerChar),l=>n.text.length>=l.minChars&&l.matches.getOrThunk(()=>{return d=t.dom,c=>{const u=Ay(c.startContainer,c.startOffset);return!Eu(f=d,(m=u).container,m.offset,(g,b)=>0===b?-1:b,f.getRoot()).filter(g=>{const b=g.container.data.charAt(g.offset-1);return!_y(b)}).isSome();var f,m};var d})(n.range,s,n.text));if(0===a.length)return C.none();const i=Promise.all(vt(a,l=>l.fetch(n.text,l.maxResults,o).then(d=>({matchText:n.text,items:d,columns:l.columns,onAction:l.onAction,highlightOn:l.highlightOn}))));return C.some({lookupData:i,context:n})};var Nn;!function(t){t[t.Error=0]="Error",t[t.Value=1]="Value"}(Nn||(Nn={}));const Nu=(t,e,n)=>t.stype===Nn.Error?e(t.serror):n(t.svalue),Rr=t=>({stype:Nn.Value,svalue:t}),$s=t=>({stype:Nn.Error,serror:t}),R_=Nu,Ru=t=>Ae(t)&&Xe(t).length>100?" removed due to size":JSON.stringify(t,null,2),Ii=(t,e)=>$s([{path:t,getErrorInfo:e}]),Ty=t=>(...e)=>{if(0===e.length)throw new Error("Can't merge zero objects");const n={};for(let o=0;o<e.length;o++){const r=e[o];for(const s in r)ft(r,s)&&(n[s]=t(n[s],r[s]))}return n},Au=Ty((t,e)=>hm(t)&&hm(e)?Au(t,e):e),By=(Ty((t,e)=>e),t=>({tag:"defaultedThunk",process:K(t)})),Dy=(t,e,n)=>{switch(t.tag){case"field":return e(t.key,t.newKey,t.presence,t.prop);case"custom":return n(t.newKey,t.instantiator)}},Ou=t=>({extract:(e,n)=>{return(o=t(n)).stype===Nn.Error?Ii(e,K(o.serror)):o;var o},toString:K("val")}),T_=Ou(Rr),Ly=(t,e,n,o)=>o(Nt(t,e).getOrThunk(()=>n(t))),B_=(t,e,n,o,r)=>{const s=i=>r.extract(e.concat([o]),i),a=i=>i.fold(()=>Rr(C.none()),l=>{return(c=r.extract(e.concat([o]),l)).stype===Nn.Value?{stype:Nn.Value,svalue:(0,C.some)(c.svalue)}:c;var c});switch(t.tag){case"required":return i=e,c=s,Nt(l=n,d=o).fold(()=>{return f=d,m=l,Ii(i,()=>'Could not find valid *required* value for "'+f+'" in '+Ru(m));var f,m},c);case"defaultedThunk":return Ly(n,o,t.process,s);case"option":return((i,l,d)=>d(Nt(i,l)))(n,o,a);case"defaultedOptionThunk":return((i,l,d,c)=>c(Nt(i,l).map(u=>!0===u?d(i):u)))(n,o,t.process,a);case"mergeWithThunk":return Ly(n,o,K({}),i=>{const l=Au(t.process(n),i);return s(l)})}var i,l,d,c},Tu=t=>({extract:(e,n)=>((o,r,s)=>{const a={},i=[];for(const l of s)Dy(l,(d,c,u,f)=>{const m=B_(u,o,r,d,f);R_(m,g=>{i.push(...g)},g=>{a[c]=g})},(d,c)=>{a[d]=c(r)});return i.length>0?$s(i):Rr(a)})(e,n,t),toString:()=>"obj{\n"+vt(t,n=>Dy(n,(o,r,s,a)=>o+" -> "+a.toString(),(o,r)=>"state("+o+")")).join("\n")+"}"}),Py=t=>({extract:(e,n)=>(t=>{const e=(o=>{const r=[],s=[];return j(o,a=>{Nu(a,i=>s.push(i),i=>r.push(i))}),{values:r,errors:s}})(t);return e.errors.length>0?(n=e.errors,mo($s,xm)(n)):Rr(e.values);var n})(vt(n,(r,s)=>t.extract(e.concat(["["+s+"]"]),r))),toString:()=>"array("+t.toString()+")"}),My=(t,e)=>((t,e)=>({extract:(n,o)=>Nt(o,t).fold(()=>{return s=t,Ii(n,()=>'Choice schema did not contain choice key: "'+s+'"');var s},r=>{return s=n,a=o,Nt(i=e,l=r).fold(()=>{return c=i,u=l,Ii(s,()=>'The chosen schema: "'+u+'" did not exist in branches: '+Ru(c));var c,u},d=>d.extract(s.concat(["branch: "+l]),a));var s,a,i,l}),toString:()=>"chooseOn("+t+"). Possible values: "+Xe(e)}))(t,Wr(e,Tu)),L_=K(T_),Fi=(t,e)=>Ou(n=>{const o=typeof n;return t(n)?Rr(n):$s(`Expected type: ${e} but got: ${o}`)}),P_=Fi(an,"number"),Ui=Fi(at,"string"),M_=Fi(zr,"boolean"),Bu=Fi(xt,"function"),qs=(t,e,n,o)=>({tag:"field",key:t,newKey:e,presence:n,prop:o}),Iy=(t,e)=>({tag:"custom",newKey:t,instantiator:e}),Fy=(t,e)=>qs(t,t,{tag:"required",process:{}},e),Uy=t=>Fy(t,Ui),zy=t=>Fy(t,Bu),Du=(t,e)=>qs(t,t,{tag:"option",process:{}},e),zi=t=>Du(t,Ui),Ar=(t,e,n)=>qs(t,t,By(e),n),jy=(t,e)=>Ar(t,e,P_),Vy=(t,e,n)=>{return Ar(t,e,(o=n,r=s=>Pt(o,s)?pe.value(s):pe.error(`Unsupported value: "${s}", choose one of "${o.join(", ")}".`),Ou(s=>r(s).fold($s,Rr))));var o,r},Lu=(t,e)=>Ar(t,e,M_),Pu=(t,e)=>Ar(t,e,Bu),I_=Uy("type"),F_=zy("fetch"),Mu=zy("onAction"),U_=Pu("onSetup",()=>pt),z_=zi("text"),j_=zi("icon"),V_=zi("tooltip"),H_=zi("label"),$_=Lu("active",!1),q_=Lu("enabled",!0),Hy=Lu("primary",!1),Ws=t=>Ar("type",t,Ui),W_=Tu([I_,Uy("ch"),jy("minChars",1),((t,e)=>qs(t,t,By(1),L_()))("columns"),jy("maxResults",10),Du("matches",Bu),F_,Mu,($y=Ui,Ar("highlightOn",[],Py($y)))]);var $y;const Iu=[q_,V_,j_,z_,U_],qy=[$_].concat(Iu),K_=[Pu("predicate",Tt),Vy("scope","node",["node","editor"]),Vy("position","selection",["node","selection","line"])],G_=Iu.concat([Ws("contextformbutton"),Hy,Mu,Iy("original",me)]),Y_=qy.concat([Ws("contextformbutton"),Hy,Mu,Iy("original",me)]),X_=Iu.concat([Ws("contextformbutton")]),Q_=qy.concat([Ws("contextformtogglebutton")]),J_=My("type",{contextformbutton:G_,contextformtogglebutton:Y_});Tu([Ws("contextform"),Pu("initValue",K("")),H_,((t,e)=>qs(t,t,{tag:"required",process:{}},Py(e)))("commands",J_),Du("launch",My("type",{contextformbutton:X_,contextformtogglebutton:Q_}))].concat(K_));const tN=t=>{const e=to(),n=Ht(!1),o=e.isSet,r=()=>{o()&&(Lt(t).autocompleter.removeDecoration(),t.dispatch("AutocompleterEnd"),n.set(!1),e.clear())},s=po(()=>(t=>{const e=t.ui.registry.getAll().popups,n=Wr(e,s=>{return(a=s,((t,e,n)=>{return o=(i=e.extract([t],a=n)).stype===Nn.Error?{stype:Nn.Error,serror:(i=>({input:a,errors:i}))(i.serror)}:i,Nu(o,pe.error,pe.value);var a,i,o})("Autocompleter",W_,a)).fold(i=>{throw new Error("Errors: \n"+(d=>{const c=d.length>10?d.slice(0,10).concat([{path:[],getErrorInfo:K("... (only showing first ten failures)")}]):d;return vt(c,u=>"Failed path: ("+u.path.join(" > ")+")\n"+u.getErrorInfo())})((l=i).errors).join("\n")+"\n\nInput object: "+Ru(l.input));var l},me);var a}),o=Em(wl(n,s=>s.ch)),r=Sm(n);return{dataset:n,triggerChars:o,lookupByChar:s=>it(r,a=>a.ch===s)}})(t)),a=i=>{var l;(l=i,e.get().map(d=>Ny(t.dom,t.selection.getRng(),d.triggerChar).bind(c=>Oy(t,s,c,l))).getOrThunk(()=>((d,c)=>{const u=c(),f=d.selection.getRng();return(m=d.dom,g=f,b=u,Go(b.triggerChars,p=>Ny(m,g,p))).bind(m=>Oy(d,c,m));var m,g,b})(t,s))).fold(r,l=>{var d,u;d=l.context,o()||(u=d.range,Lt(t).autocompleter.addDecoration(u),e.set({triggerChar:d.triggerChar,matchLength:d.text.length})),l.lookupData.then(d=>{e.get().map(c=>{const u=l.context;c.triggerChar===u.triggerChar&&(u.text.length-c.matchLength>=10?r():(e.set(Rt(rt({},c),{matchLength:u.text.length})),n.get()?t.dispatch("AutocompleterUpdate",{lookupData:d}):(n.set(!0),t.dispatch("AutocompleterStart",{lookupData:d}))))})})})};t.addCommand("mceAutocompleterReload",(i,l)=>{const d=Ae(l)?l.fetchOptions:{};a(d)}),t.addCommand("mceAutocompleterClose",r),((i,l)=>{const d=od(l.load,50);i.on("keypress compositionend",c=>{27!==c.which&&d.throttle()}),i.on("keydown",c=>{const u=c.which;8===u?d.throttle():27===u&&l.cancelIfNecessary()}),i.on("remove",d.cancel)})(t,{cancelIfNecessary:r,load:a})},Wy=t=>(e,n,o={})=>{const r=e.getBody(),s={bubbles:!0,composed:!0,data:null,isComposing:!1,detail:0,view:null,target:r,currentTarget:r,eventPhase:Event.AT_TARGET,originalTarget:r,explicitOriginalTarget:r,isTrusted:!1,srcElement:r,cancelable:!1,preventDefault:pt,inputType:n},a=Zf(new InputEvent(t));return e.dispatch(t,rt(rt(rt({},a),s),o))},ji=Wy("input"),Vi=Wy("beforeinput"),Ks=(t,e)=>{let n,o=e;const r=t.dom,s=t.schema.getMoveCaretBeforeOnEnterElements();if(!e)return;if(/^(LI|DT|DD)$/.test(e.nodeName)){const i=(l=>{for(;l;){if(1===l.nodeType||3===l.nodeType&&l.data&&/[\r\n\s]/.test(l.data))return l;l=l.nextSibling}})(e.firstChild);i&&/^(UL|OL|DL)$/.test(i.nodeName)&&e.insertBefore(r.doc.createTextNode(oe),e.firstChild)}const a=r.createRng();if(e.normalize(),e.hasChildNodes()){const i=new Gt(e,e);for(;n=i.current();){if(G(n)){a.setStart(n,0),a.setEnd(n,0);break}if(s[n.nodeName.toLowerCase()]){a.setStartBefore(n),a.setEndBefore(n);break}o=n,n=i.next()}n||(a.setStart(o,0),a.setEnd(o,0))}else Ut(e)?e.nextSibling&&r.isBlock(e.nextSibling)?(a.setStartBefore(e),a.setEndBefore(e)):(a.setStartAfter(e),a.setEndAfter(e)):(a.setStart(e,0),a.setEnd(e,0));t.selection.setRng(a),Ns(t,a)},Fu=t=>C.from(t.dom.getParent(t.selection.getStart(!0),t.dom.isBlock)),Ky=(t,e)=>t&&t.parentNode&&t.parentNode.nodeName===e,Gy=t=>t&&/^(OL|UL|LI)$/.test(t.nodeName),Hi=t=>{const e=t.parentNode;return/^(LI|DT|DD)$/.test(e.nodeName)?e:t},$i=(t,e,n)=>{let o=t[n?"firstChild":"lastChild"];for(;o&&!et(o);)o=o[n?"nextSibling":"previousSibling"];return o===e},eN=(t,e)=>e&&"A"===e.nodeName&&t.isEmpty(e),Uu=t=>{t.innerHTML='<br data-mce-bogus="1">'},zu=(t,e)=>t.nodeName===e||t.previousSibling&&t.previousSibling.nodeName===e,Yy=(t,e)=>e&&t.isBlock(e)&&!/^(TD|TH|CAPTION|FORM)$/.test(e.nodeName)&&!/^(fixed|absolute)/i.test(e.style.position)&&"true"!==t.getContentEditable(e),ju=(t,e,n)=>!1===G(e)?n:t?1===n&&e.data.charAt(n-1)===re?0:n:n===e.data.length-1&&e.data.charAt(n)===re?e.data.length:n,Xy=(t,e)=>{const n=t.getRoot();let o,r;for(o=e;o!==n&&"false"!==t.getContentEditable(o);)"true"===t.getContentEditable(o)&&(r=o),o=o.parentNode;return o!==n?r:n},Gs=(t,e)=>{Se(t).toLowerCase()===e.tagName.toLowerCase()&&((n,o,r)=>{const s=n.dom;C.from(r.style).map(s.parseStyle).each(c=>{const u=rt(rt({},Cf(N(o))),c);s.setStyles(o,u)});const a=C.from(r.class).map(c=>c.split(/\s+/)),i=C.from(o.className).map(c=>it(c.split(/\s+/),u=>""!==u));we(a,i,(c,u)=>{const f=it(u,g=>!Pt(c,g)),m=[...c,...f];s.setAttrib(o,"class",m.join(" "))});const l=["style","class"],d=Kr(r,(c,u)=>!Pt(l,u));s.setAttribs(o,d)})(t,e,Ao(t))},Qy=(t,e,n)=>{const o=t.dom.createRng();n?(o.setStartBefore(e),o.setEndBefore(e)):(o.setStartAfter(e),o.setEndAfter(e)),t.selection.setRng(o),Ns(t,o)},oN=(t,e)=>{const n=Ft("br");Ke(N(e),n),t.undoManager.add()},rN=(t,e)=>{sN(t.getBody(),e)||Kn(N(e),Ft("br"));const n=Ft("br");Kn(N(e),n),Qy(t,n.dom,!1),t.undoManager.add()},sN=(t,e)=>{return n=M.after(e),!!Ut(n.getNode())||tn(t,M.after(e)).map(o=>Ut(o.getNode())).getOr(!1);var n},Jy=t=>t&&"A"===t.nodeName&&"href"in t,aN=t=>t.fold(Tt,Jy,Jy,Tt),iN=(t,e)=>{e.fold(pt,X(oN,t),X(rN,t),pt)},Zy=(t,e)=>{const n=(o=>{const r=X(zo,o),s=M.fromRangeStart(o.selection.getRng());return En(r,o.getBody(),s).filter(aN)})(t);n.isSome()?n.each(X(iN,t)):((o,r)=>{const a=o.dom,i=o.selection.getRng();let l,d;Ja(a,i).each(p=>{i.setStart(p.startContainer,p.startOffset),i.setEnd(p.endContainer,p.endOffset)});let c=i.startOffset,u=i.startContainer;if(1===u.nodeType&&u.hasChildNodes()){const p=c>u.childNodes.length-1;u=u.childNodes[Math.min(c,u.childNodes.length-1)]||u,c=p&&3===u.nodeType?u.nodeValue.length:0}let f=a.getParent(u,a.isBlock);const m=f?a.getParent(f.parentNode,a.isBlock):null;"LI"!==(m?m.nodeName.toUpperCase():"")||!(!r||!r.ctrlKey)||(f=m),u&&3===u.nodeType&&c>=u.nodeValue.length&&(((p,h,v)=>{const y=new Gt(h,v);let x;const w=p.getNonEmptyElements();for(;x=y.next();)if(w[x.nodeName.toLowerCase()]||x.length>0)return!0})(o.schema,u,f)||(l=a.create("br"),i.insertNode(l),i.setStartAfter(l),i.setEndAfter(l),d=!0)),l=a.create("br"),cd(a,i,l),Qy(o,l,d),o.undoManager.add()})(t,e)},tC=(t,e)=>Fu(t).filter(n=>e.length>0&&Bn(N(n),e)).isSome(),Ye=gn([{br:[]},{block:[]},{none:[]}]),lN=(t,e)=>{return tC(n=t,tw(n));var n},eC=t=>(e,n)=>Fu(e).filter(r=>is(N(r))).isSome()===t,nC=(t,e)=>(n,o)=>Fu(n).fold(K(""),a=>a.nodeName.toUpperCase())===t.toUpperCase()===e,qi=t=>nC("pre",t),Wi=t=>(e,n)=>Jx(e)===t,dN=(t,e)=>{return tC(n=t,Zx(n));var n},Ki=(t,e)=>e,cN=t=>{const e=Se(t),n=((o,r)=>{const s=o.getRoot();let a,i;for(a=r;a!==s&&"false"!==o.getContentEditable(a);)"true"===o.getContentEditable(a)&&(i=a),a=a.parentNode;return a!==s?i:s})(t.dom,t.selection.getStart());return n&&t.schema.isValidChild(n.nodeName,e)},rn=(t,e)=>(n,o)=>Te(t,(r,s)=>r&&s(n,o),!0)?C.some(e):C.none(),Vu=(t,e)=>{var n,o;(n=t,o=e,bv([rn([lN],Ye.none()),rn([nC("summary",!0)],Ye.br()),rn([qi(!0),Wi(!1),Ki],Ye.br()),rn([qi(!0),Wi(!1)],Ye.block()),rn([qi(!0),Wi(!0),Ki],Ye.block()),rn([qi(!0),Wi(!0)],Ye.br()),rn([eC(!0),Ki],Ye.br()),rn([eC(!0)],Ye.block()),rn([dN],Ye.br()),rn([Ki],Ye.br()),rn([cN],Ye.block())],[n,!(!o||!o.shiftKey)]).getOr(Ye.none())).fold(()=>{ut(e)&&Vi(t,"insertLineBreak").isDefaultPrevented()||(Zy(t,e),ut(e)&&ji(t,"insertLineBreak"))},()=>{ut(e)&&Vi(t,"insertParagraph").isDefaultPrevented()||(((t,e)=>{let n,o,r,s,a,i,l,d,c;const u=t.dom,f=t.schema,m=f.getNonEmptyElements(),g=t.selection.getRng(),b=Se(t),p=k=>{let T,O,I,R=o;const P=f.getTextInlineElements();if(T=k||"TABLE"===d||"HR"===d?u.create(k||b):s.cloneNode(!1),I=T,!1===ew(t))u.setAttrib(T,"style",null),u.setAttrib(T,"class",null);else do{if(P[R.nodeName]){if(Cn(R)||Fe(R))continue;O=R.cloneNode(!1),u.setAttrib(O,"id",""),T.hasChildNodes()?(O.appendChild(T.firstChild),T.appendChild(O)):(I=O,T.appendChild(O))}}while((R=R.parentNode)&&R!==w);return Gs(t,T),Uu(I),T},h=k=>{let T,O;const I=ju(k,o,r);if(G(o)&&(k?I>0:I<o.nodeValue.length))return!1;if(o.parentNode===s&&c&&!k||k&&et(o)&&o===s.firstChild)return!0;if(zu(o,"TABLE")||zu(o,"HR"))return c&&!k||!c&&k;const R=new Gt(o,s);for(G(o)&&(k&&0===I?R.prev():k||I!==o.nodeValue.length||R.next());T=R.current();){if(et(T)){if(!T.getAttribute("data-mce-bogus")&&(O=T.nodeName.toLowerCase(),m[O]&&"br"!==O))return!1}else if(G(T)&&!ko(T.nodeValue))return!1;k?R.prev():R.next()}return!0},v=()=>{a=/^(H[1-6]|PRE|FIGURE)$/.test(d)&&"HGROUP"!==S?p(b):p(),nw(t)&&Yy(u,l)&&u.isEmpty(s)?a=u.split(l,s):u.insertAfter(a,s),Ks(t,a)};Ja(u,g).each(k=>{g.setStart(k.startContainer,k.startOffset),g.setEnd(k.endContainer,k.endOffset)}),o=g.startContainer,r=g.startOffset;const y=!(!e||!e.shiftKey),x=!(!e||!e.ctrlKey);et(o)&&o.hasChildNodes()&&(c=r>o.childNodes.length-1,o=o.childNodes[Math.min(r,o.childNodes.length-1)]||o,r=c&&G(o)?o.nodeValue.length:0);const w=Xy(u,o);if(!w)return;y||(o=((k,T,O,I,R)=>{let P,L,U,V,nt,ct;const lt=k.dom,bt=Xy(lt,I);if(L=lt.getParent(I,lt.isBlock),!L||!Yy(lt,L)){if(L=L||bt,ct=L===k.getBody()||(Et=L)&&/^(TD|TH|CAPTION)$/.test(Et.nodeName)?L.nodeName.toLowerCase():L.parentNode.nodeName.toLowerCase(),!L.hasChildNodes())return P=lt.create(T),Gs(k,P),L.appendChild(P),O.setStart(P,0),O.setEnd(P,0),P;for(V=I;V.parentNode!==L;)V=V.parentNode;for(;V&&!lt.isBlock(V);)U=V,V=V.previousSibling;if(U&&k.schema.isValidChild(ct,T.toLowerCase())){for(P=lt.create(T),Gs(k,P),U.parentNode.insertBefore(P,U),V=U;V&&!lt.isBlock(V);)nt=V.nextSibling,P.appendChild(V),V=nt;O.setStart(I,R),O.setEnd(I,R)}}var Et;return I})(t,b,g,o,r)),s=u.getParent(o,u.isBlock),l=s?u.getParent(s.parentNode,u.isBlock):null,d=s?s.nodeName.toUpperCase():"";const S=l?l.nodeName.toUpperCase():"";"LI"!==S||x||(s=l,l=l.parentNode,d=S),/^(LI|DT|DD)$/.test(d)&&u.isEmpty(s)?((k,T,O,I,R)=>{const P=k.dom,L=k.selection.getRng();if(O===k.getBody())return;var U;Gy(U=O)&&Gy(U.parentNode)&&(R="LI");let V=T(R);if($i(O,I,!0)&&$i(O,I,!1))if(Ky(O,"LI")){const nt=Hi(O);P.insertAfter(V,nt),(null===(lt=(ct=O).parentNode)||void 0===lt?void 0:lt.firstChild)===ct?P.remove(nt):P.remove(O)}else P.replace(V,O);else if($i(O,I,!0))Ky(O,"LI")?(P.insertAfter(V,Hi(O)),V.appendChild(P.doc.createTextNode(" ")),V.appendChild(O)):O.parentNode.insertBefore(V,O),P.remove(I);else if($i(O,I,!1))P.insertAfter(V,Hi(O)),P.remove(I);else{O=Hi(O);const nt=L.cloneRange();nt.setStartAfter(I),nt.setEndAfter(O);const ct=nt.extractContents();"LI"===R&&((lt,bt)=>lt.firstChild&&"LI"===lt.firstChild.nodeName)(ct)?(V=ct.firstChild,P.insertAfter(ct,O)):(P.insertAfter(ct,O),P.insertAfter(V,O)),P.remove(I)}var ct,lt;Ks(k,V)})(t,p,l,s,b):s!==t.getBody()&&(rr(s)?(a=$l(s),u.isEmpty(s)&&Uu(s),Gs(t,a),Ks(t,a)):h()?v():h(!0)?(a=s.parentNode.insertBefore(p(),s),Ks(t,zu(s,"HR")?a:s)):(n=(k=>{const T=k.cloneRange();return T.setStart(k.startContainer,ju(!0,k.startContainer,k.startOffset)),T.setEnd(k.endContainer,ju(!1,k.endContainer,k.endOffset)),T})(g).cloneRange(),n.setEndAfter(s),i=n.extractContents(),j(ng(N(i),Le),T=>{const O=T.dom;O.nodeValue=Xn(O.nodeValue)}),(k=>{do{G(k)&&(k.nodeValue=k.nodeValue.replace(/^[\r\n]+/,"")),k=k.firstChild}while(k)})(i),a=i.firstChild,u.insertAfter(i,s),((k,T,O)=>{let I=O;const R=[];let P;if(I){for(;I=I.firstChild;){if(k.isBlock(I))return;et(I)&&!T[I.nodeName.toLowerCase()]&&R.push(I)}for(P=R.length;P--;)I=R[P],(!I.hasChildNodes()||I.firstChild===I.lastChild&&""===I.firstChild.nodeValue||eN(k,I))&&k.remove(I)}})(u,m,a),((k,T)=>{T.normalize();const O=T.lastChild;O&&!/^(left|right)$/gi.test(k.getStyle(O,"float",!0))||k.add(T,"br")})(u,s),u.isEmpty(s)&&Uu(s),a.normalize(),u.isEmpty(a)?(u.remove(a),v()):(Gs(t,a),Ks(t,a))),u.setAttrib(a,"id",""),t.dispatch("NewBlock",{newBlock:a}))})(t,e),ut(e)&&ji(t,"insertParagraph"))},pt)},uN=qn(),oC=t=>t.stopImmediatePropagation(),rC=t=>t.keyCode===tt.PAGE_UP||t.keyCode===tt.PAGE_DOWN,sC=(t,e,n)=>{n&&!t.get()?e.on("NodeChange",oC,!0):!n&&t.get()&&e.off("NodeChange",oC),t.set(n)},aC=(t,e)=>{const n=e.container(),o=e.offset();return G(n)?(n.insertData(o,t),C.some(M(n,o+t.length))):Ua(e).map(r=>{const s=es(t);return e.isAtEnd()?Kn(r,s):Ke(r,s),M(s.dom,t.length)})},mN=X(aC,oe),fN=X(aC," "),pN=t=>{const e=M.fromRangeStart(t.selection.getRng()),n=N(t.getBody());if(t.selection.isCollapsed()){const o=X(zo,t),r=M.fromRangeStart(t.selection.getRng());return En(o,t.getBody(),r).bind((s=n,a=>a.fold(i=>vn(s.dom,M.before(i)),i=>he(i),i=>yn(i),i=>tn(s.dom,M.after(i))))).map(s=>()=>{return((t,e)=>n=>{return o=t,!lc(r=n)&&(vn((s=o).dom,a=r).isNone()||tn(s.dom,a).isNone()||sc(s,a)||Yh(s,a)||ic(s,a)||ac(s,a)||Jh(o,r)||Zh(o,r))?mN(e):fN(e);var o,r,s,a})(n,e)(s).each((a=t,i=>(a.selection.setRng(i.toRange()),a.nodeChanged(),!0)));var a})}var s;return C.none()},hN=t=>ek(t)?[{keyCode:tt.TAB,action:mt(ky,t,!0)},{keyCode:tt.TAB,shiftKey:!0,action:mt(ky,t,!1)}]:[],bN=t=>{if(t.addShortcut("Meta+P","","mcePrint"),tN(t),Un(t))return Ht(null);{const e=(t=>{const e=Ht(null),n=X(zo,t);return t.on("NodeChange",o=>{ps(t)&&(((r,s,a)=>{const i=vt(ke(N(s.getRoot()),'*[data-mce-selected="inline-boundary"]'),c=>c.dom),l=it(i,r),d=it(a,r);j(wm(l,d),X(Pv,!1)),j(wm(d,l),X(Pv,!0))})(n,t.dom,o.parents),((r,s)=>{if(r.selection.isCollapsed()&&!0!==r.composing&&s.get()){const a=M.fromRangeStart(r.selection.getRng());M.isTextPosition(a)&&!1===(Vl(i=a)||Hl(i))&&(Di(r,((t,e)=>{return M.isTextPosition(e)?(o=e,ep(n=t)&&o.container()===n?((r,s)=>{const a=op(r.data.substr(0,s.offset())),i=op(r.data.substr(s.offset()));return(a.text+i.text).length>0?(rp(r),M(r,s.offset()-a.count)):s})(n,o):sp(n,o)):((n,o)=>o.container()===n.parentNode?((r,s)=>{const a=s.container(),i=((l,d)=>{const c=vm(l,d);return-1===c?C.none():C.some(c)})(xe(a.childNodes),r).map(l=>l<s.offset()?M(a,s.offset()-1):s).getOr(s);return Oo(r),i})(n,o):sp(n,o))(t,e);var n,o})(s.get(),a)),s.set(null))}var i})(t,e),((r,s,a,i)=>{if(s.selection.isCollapsed()){const l=it(i,r);j(l,d=>{const c=M.fromRangeStart(s.selection.getRng());En(r,s.getBody(),c).bind(u=>Mv(s,a,u))})}})(n,t,e,o.parents))}),e})(t);return(n=t).on("keyup compositionstart",X(b_,n)),((n,o)=>{n.on("keydown",r=>{!1===r.isDefaultPrevented()&&((s,a,i)=>{const l=qn().os;Vs([{keyCode:tt.RIGHT,action:mt(ty,s,!0)},{keyCode:tt.LEFT,action:mt(ty,s,!1)},{keyCode:tt.UP,action:mt(ey,s,!1)},{keyCode:tt.DOWN,action:mt(ey,s,!0)},{keyCode:tt.RIGHT,action:mt(yy,s,!0)},{keyCode:tt.LEFT,action:mt(yy,s,!1)},{keyCode:tt.UP,action:mt(Cy,s,!1)},{keyCode:tt.DOWN,action:mt(Cy,s,!0)},{keyCode:tt.RIGHT,action:mt(iy,s,!0)},{keyCode:tt.LEFT,action:mt(iy,s,!1)},{keyCode:tt.UP,action:mt(ly,s,!1)},{keyCode:tt.DOWN,action:mt(ly,s,!0)},{keyCode:tt.RIGHT,action:mt(Iv,s,a,!0)},{keyCode:tt.LEFT,action:mt(Iv,s,a,!1)},{keyCode:tt.RIGHT,ctrlKey:!l.isMacOS(),altKey:l.isMacOS(),action:mt(l_,s,a)},{keyCode:tt.LEFT,ctrlKey:!l.isMacOS(),altKey:l.isMacOS(),action:mt(d_,s,a)},{keyCode:tt.UP,action:mt(oy,s,!1)},{keyCode:tt.DOWN,action:mt(oy,s,!0)}],i).each(d=>{i.preventDefault()})})(n,o,r)})})(t,e),((n,o)=>{n.on("keydown",r=>{!1===r.isDefaultPrevented()&&((s,a,i)=>{const l=i.keyCode===tt.BACKSPACE?"deleteContentBackward":"deleteContentForward";ay([{keyCode:tt.BACKSPACE,action:mt(Kv,s)},{keyCode:tt.BACKSPACE,action:mt(iu,s,!1)},{keyCode:tt.DELETE,action:mt(iu,s,!0)},{keyCode:tt.BACKSPACE,action:mt(au,s,!1)},{keyCode:tt.DELETE,action:mt(au,s,!0)},{keyCode:tt.BACKSPACE,action:mt(hu,s,a,!1)},{keyCode:tt.DELETE,action:mt(hu,s,a,!0)},{keyCode:tt.BACKSPACE,action:mt(vc,s,!1)},{keyCode:tt.DELETE,action:mt(vc,s,!0)},{keyCode:tt.BACKSPACE,action:mt(lu,s,!1)},{keyCode:tt.DELETE,action:mt(lu,s,!0)},{keyCode:tt.BACKSPACE,action:mt(yu,s,!1)},{keyCode:tt.DELETE,action:mt(yu,s,!0)},{keyCode:tt.BACKSPACE,action:mt(ru,s,!1)},{keyCode:tt.DELETE,action:mt(ru,s,!0)},{keyCode:tt.BACKSPACE,action:mt(ou,s,!1)},{keyCode:tt.DELETE,action:mt(ou,s,!0)},{keyCode:tt.BACKSPACE,action:mt(bu,s,!1)},{keyCode:tt.DELETE,action:mt(bu,s,!0)}],i).each(d=>{i.preventDefault(),Vi(s,l).isDefaultPrevented()||(d(),ji(s,l))})})(n,o,r)}),n.on("keyup",r=>{var s,a;!1===r.isDefaultPrevented()&&(a=r,Vs([{keyCode:tt.BACKSPACE,action:mt(uv,s=n)},{keyCode:tt.DELETE,action:mt(uv,s)}],a))})})(t,e),(n=>{n.on("keydown",o=>{var r,s,a;o.keyCode===tt.ENTER&&(r=n,(s=o).isDefaultPrevented()||(s.preventDefault(),(a=r.undoManager).typing&&(a.typing=!1,a.add()),r.undoManager.transact(()=>{!1===r.selection.isCollapsed()&&eu(r),Vu(r,s)})))})})(t),(n=>{n.on("keydown",o=>{var r,s;!1===o.isDefaultPrevented()&&(s=o,ay([{keyCode:tt.SPACEBAR,action:mt(pN,r=n)}],s).each(a=>{s.preventDefault(),Vi(r,"insertText",{data:" "}).isDefaultPrevented()||(a(),ji(r,"insertText",{data:" "}))}))})})(t),(n=>{n.on("input",o=>{!1===o.isComposing&&(r=>{const s=N(r.getBody());r.selection.isCollapsed()&&((t,e)=>C.some(e).filter(aS).bind(n=>{const o=n.container();return((s,a)=>{const i=a.data,l=M(a,0);return!(!eb(i,0)||tb(s,l)||(a.data=" "+i.slice(1),0))})(t,o)||(s=>{const a=s.data,i=(l=>{const d=l.split("");return vt(d,(c,u)=>Ha(c)&&u>0&&u<d.length-1&&Ed(d[u-1])&&Ed(d[u+1])?" ":c).join("")})(a);return i!==a&&(s.data=i,!0)})(o)||((s,a)=>{const i=a.data,l=M(a,i.length-1);return!(!eb(i,i.length-1)||tb(s,l)||(a.data=i.slice(0,-1)+" ",0))})(t,o)?C.some(n):C.none()}))(s,M.fromRangeStart(r.selection.getRng())).each(a=>{r.selection.setRng(a.toRange())})})(n)})})(t),(n=>{n.on("keydown",o=>{var s;!1===o.isDefaultPrevented()&&(s=o,Vs([...hN(n)],s).each(a=>{s.preventDefault()}))})})(t),((n,o)=>{n.on("keydown",r=>{var s,a,i;!1===r.isDefaultPrevented()&&(a=o,i=r,Vs([{keyCode:tt.END,action:mt(ny,s=n,!0)},{keyCode:tt.HOME,action:mt(ny,s,!1)},{keyCode:tt.END,action:mt(dy,s,!0)},{keyCode:tt.HOME,action:mt(dy,s,!1)},{keyCode:tt.END,action:mt(Li,s,!0,a)},{keyCode:tt.HOME,action:mt(Li,s,!1,a)}],i).each(l=>{i.preventDefault()}))})})(t,e),((n,o)=>{if(uN.os.isMacOS())return;const r=Ht(!1);n.on("keydown",s=>{rC(s)&&sC(r,n,!0)}),n.on("keyup",s=>{var a,i,l;!1===s.isDefaultPrevented()&&(l=s,Vs([{keyCode:tt.PAGE_UP,action:mt(Li,a=n,!1,i=o)},{keyCode:tt.PAGE_DOWN,action:mt(Li,a,!0,i)}],l)),rC(s)&&r.get()&&(sC(r,n,!1),n.nodeChanged())})})(t,e),e}var n};class vN{constructor(e){let n;this.lastPath=[],this.editor=e;const o=this;"onselectionchange"in e.getDoc()||e.on("NodeChange click mouseup keyup focus",r=>{const s=e.selection.getRng(),a={startContainer:s.startContainer,startOffset:s.startOffset,endContainer:s.endContainer,endOffset:s.endOffset};"nodechange"!==r.type&&Hd(a,n)||e.dispatch("SelectionChange"),n=a}),e.on("contextmenu",()=>{e.dispatch("SelectionChange")}),e.on("SelectionChange",()=>{const r=e.selection.getStart(!0);r&&Ya(e)&&!o.isSameElementPath(r)&&e.dom.isChildOf(r,e.getBody())&&e.nodeChanged({selectionChange:!0})}),e.on("mouseup",r=>{!r.isDefaultPrevented()&&Ya(e)&&("IMG"===e.selection.getNode().nodeName?Ue.setEditorTimeout(e,()=>{e.nodeChanged()}):e.nodeChanged())})}nodeChanged(e){const n=this.editor.selection;let o,r,s;this.editor.initialized&&n&&!Ow(this.editor)&&!this.editor.mode.isReadOnly()&&(s=this.editor.getBody(),o=n.getStart(!0)||s,o.ownerDocument===this.editor.getDoc()&&this.editor.dom.isChildOf(o,s)||(o=s),r=[],this.editor.dom.getParent(o,a=>{if(a===s)return!0;r.push(a)}),(e=e||{}).element=o,e.parents=r,this.editor.dispatch("NodeChange",e))}isSameElementPath(e){let n;const o=this.editor,r=$r(o.dom.getParents(e,jt,o.getBody()));if(r.length===this.lastPath.length){for(n=r.length;n>=0&&r[n]===this.lastPath[n];n--);if(-1===n)return this.lastPath=r,!0}return this.lastPath=r,!1}}const Gi=K("x-tinymce/html"),Hu="\x3c!-- x-tinymce/html --\x3e",yN=t=>Hu+t,iC=t=>-1!==t.indexOf(Hu),lC="%MCEPASTEBIN%",$u=t=>t.dom.get("mcepastebin"),CN=t=>t&&"mcepastebin"===t.id,dC=t=>t===lC,cC=(t,e)=>(z.each(e,n=>{t=sa(n,RegExp)?t.replace(n,""):t.replace(n[0],n[1])}),t),uC=t=>cC(t,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/gi,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,(e,n,o)=>n||o?oe:" "],/<br class="Apple-interchange-newline">/g,/<br>$/i]),mC=(t,e)=>({content:t,cancelled:e}),qu=(t,e)=>(t.insertContent(e,{merge:Gw(t),paste:!0}),!0),Wu=t=>/^https?:\/\/[\w\?\-\/+=.&%@~#]+$/i.test(t),xN=(t,e,n)=>{return!(t.selection.isCollapsed()||!Wu(e)||(o=t,r=e,s=n,o.undoManager.extra(()=>{s(o,r)},()=>{o.execCommand("mceInsertLink",!1,r)}),0));var o,r,s},wN=(t,e,n)=>{return o=t,!(!Wu(r=e)||!It(tp(o),s=>Tm(r.toLowerCase(),`.${s.toLowerCase()}`)))&&((o,r,s)=>(o.undoManager.extra(()=>{s(o,r)},()=>{o.insertContent('<img src="'+r+'">')}),!0))(t,e,n);var o,r},kN=(t=>{let e=0;return()=>"mceclip"+e++})(),fC=(t,e,n,o)=>{const r=((l,d,c)=>{const u=l.dispatch("PastePreProcess",{content:d,internal:c}),f=((m,g)=>{const b=kr({},m.schema);b.addNodeFilter("meta",h=>{z.each(h,v=>{v.remove()})});const p=b.parse(g,{forced_root_block:!1,isRootContent:!0});return ro({validate:!0},m.schema).serialize(p)})(l,u.content);return l.hasEventListeners("PastePostProcess")&&!u.isDefaultPrevented()?((m,g,b)=>{const p=m.dom.create("div",{style:"display:none"},g),h=m.dispatch("PastePostProcess",{node:p,internal:b});return mC(h.node.innerHTML,h.isDefaultPrevented())})(l,f,c):mC(f,u.isDefaultPrevented())})(t,e,n);var s,a,l,d;!1===r.cancelled&&(s=t,a=r.content,o||!Yw(s)?qu(s,a):(l=s,d=a,z.each([xN,wN,qu],c=>!0!==c(l,d,qu))))},Yi=(t,e,n)=>{const o=n||iC(e);fC(t,e.replace(Hu,""),o,!1)},Ku=(t,e)=>{const n=t.dom.encode(e).replace(/\r\n/g,"\n"),o=((r,s,a)=>{const i=r.split(/\n\n/),l=((u,f)=>{let m="<"+u;const g=wl(f,(b,p)=>p+'="'+Qn.encodeAllRaw(b)+'"');return g.length&&(m+=" "+g.join(" ")),m+">"})(s,a),d="</"+s+">",c=vt(i,u=>u.split(/\n/).join("<br />"));return 1===c.length?c[0]:vt(c,u=>l+u+d).join("")})(Wf(n,Qw(t)),Se(t),Ao(t));fC(t,o,!1,!0)},gC=t=>{const e={};if(t&&t.types)for(let n=0;n<t.types.length;n++){const o=t.types[n];try{e[o]=t.getData(o)}catch(r){e[o]=""}}return e},Or=(t,e)=>e in t&&t[e].length>0,pC=t=>Or(t,"text/html")||Or(t,"text/plain"),hC=(t,e,n)=>{const o="paste"===e.type?e.clipboardData:e.dataTransfer;var r;if(Ia(t)&&o){const s=((a,i)=>{const l=i.items?An(xe(i.items),c=>"file"===c.kind?[c.getAsFile()]:[]):[],d=i.files?xe(i.files):[];return it(l.length>0?l:d,(c=>{const u=tp(c);return f=>He(f.type,"image/")&&It(u,m=>(g=>{const b=g.toLowerCase(),p={jpg:"jpeg",jpe:"jpeg",jfi:"jpeg",jif:"jpeg",jfif:"jpeg",pjpeg:"jpeg",pjp:"jpeg",svg:"svg+xml"};return z.hasOwn(p,b)?"image/"+p[b]:"image/"+b})(m)===f.type)})(a))})(t,o);if(s.length>0)return e.preventDefault(),(r=s,Promise.all(vt(r,a=>a0(a).then(i=>({file:a,uri:i}))))).then(a=>{n&&t.selection.setRng(n),j(a,i=>{((l,d)=>{const{data:c,type:u}=yi(d.uri),f=d.file,m=l.editorUpload.blobCache,g=m.getByData(c,u),b=null!=g?g:((p,h,v,y)=>{const x=kN(),w=Hg(p)&&ut(v.name),S=w?((O,I)=>{const R=I.match(/([\s\S]+?)(?:\.[a-z0-9.]+)$/i);return ut(R)?O.dom.encode(R[1]):null})(p,v.name):x,T=h.create(x,v,y,S,w?v.name:void 0);return h.add(T),T})(l,m,f,c);Yi(l,`<img src="${b.blobUri()}">`,!1)})(t,i)})}),!0}return!1},bC=(t,e,n,o)=>{let r=uC(n);const s=Or(e,Gi())||iC(n),a=!s&&!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(r),i=Wu(r);(dC(r)||!r.length||a&&!i)&&(o=!0),(o||i)&&(r=Or(e,"text/plain")&&a?e["text/plain"]:(l=>{const d=Zn(),c=kr({},d);let u="";const f=d.getVoidElements(),m=z.makeMap("script noscript style textarea video audio iframe object"," "),g=d.getBlockElements(),b=p=>{const h=p.name,v=p;if("br"!==h){if("wbr"!==h)if(f[h]&&(u+=" "),m[h])u+=" ";else{if(3===p.type&&(u+=p.value),!(p.name in d.getVoidElements())&&(p=p.firstChild))do{b(p)}while(p=p.next);g[h]&&v.next&&(u+="\n","p"===h&&(u+="\n"))}}else u+="\n"};return l=cC(l,[/<!\[[^\]]+\]>/g]),b(c.parse(l)),u})(r)),dC(r)||(o?Ku(t,r):Yi(t,r,s))},vC=(t,e,n,o)=>{((r,s,a)=>{try{return r.clearData(),r.setData("text/html",s),r.setData("text/plain",a),r.setData(Gi(),s),!0}catch(i){return!1}})(t.clipboardData,e.html,e.text)?(t.preventDefault(),o()):n(e.html,o)},yC=t=>(e,n)=>{const{dom:o,selection:r}=t,s=o.create("div",{contenteditable:"false","data-mce-bogus":"all"}),a=o.create("div",{contenteditable:"true"},e);o.setStyles(s,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"}),s.appendChild(a),o.add(t.getBody(),s);const i=r.getRng();a.focus();const l=o.createRng();l.selectNodeContents(a),r.setRng(l),Ue.setEditorTimeout(t,()=>{r.setRng(i),o.remove(s),n()},0)},CC=t=>({html:yN(t.selection.getContent({contextual:!0})),text:t.selection.getContent({format:"text"})}),xC=t=>{return!t.selection.isCollapsed()||!!(e=t).dom.getParent(e.selection.getStart(),"td[data-mce-selected],th[data-mce-selected]",e.getBody());var e},wC=(t,e)=>{var n,o;return Cr.getCaretRangeFromPoint(null!==(n=e.clientX)&&void 0!==n?n:0,null!==(o=e.clientY)&&void 0!==o?o:0,t.getDoc())},kC=(t,e)=>{t.focus(),e&&t.selection.setRng(e)},EN=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,SC=t=>z.trim(t).replace(EN,$a).toLowerCase(),_N=(t,e,n)=>{const o=Ww(t);if(n||"all"===o||!Kw(t))return e;const r=o?o.split(/[, ]/):[];if(r&&"none"!==o){const s=t.dom,a=t.selection.getNode();e=e.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,(i,l,d,c)=>{const u=s.parseStyle(s.decode(d)),f={};for(let g=0;g<r.length;g++){const b=u[r[g]];let p=b,h=s.getStyle(a,r[g],!0);/color/.test(r[g])&&(p=SC(p),h=SC(h)),h!==p&&(f[r[g]]=b)}const m=s.serializeStyle(f,"span");return m?l+' style="'+m+'"'+c:l+c})}else e=e.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return e.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,(s,a,i,l)=>a+' style="'+i+'"'+l)},EC=t=>et(t)&&Ff(N(t));var Ys;!function(t){t.Before="before",t.After="after"}(Ys||(Ys={}));const RN=(t,e)=>Math.abs(t.left-e),AN=(t,e)=>Math.abs(t.right-e),TN=(t,e,n)=>e>t.left&&e<t.right?0:Math.min(Math.abs(t.left-e),Math.abs(t.right-e)),Gu=(t,e,n)=>{const o=d=>Qe(d.node)?C.some(d):et(d.node)?Gu(xe(d.node.childNodes),e,n):C.none(),r=(d,c)=>{const u=qr(d,(f,m)=>c(f,e,n)-c(m,e,n));return((f,m)=>{if(f.length>=2){const g=o(f[0]).getOr(f[0]),b=o(f[1]).getOr(f[1]);if(Math.abs(m(g,e,n)-m(b,e,n))<2){if(G(g.node))return C.some(g);if(G(b.node))return C.some(b)}}return C.none()})(u,c).orThunk(()=>Go(u,o))},[s,a]=((t,e)=>{return(n=it(t,n=>{return(o=e)>=(r=n).top&&o<=r.bottom;var o,r}),Te(n,(o,r)=>o.fold(()=>C.some(r),s=>{const a=Math.min(r.left,s.left),i=Math.min(r.top,s.top),l=Math.max(r.right,s.right),d=Math.max(r.bottom,s.bottom);return C.some({top:i,right:l,bottom:d,left:a,width:l-a,height:d-i})}),C.none())).fold(()=>[[],t],n=>{const{pass:o,fail:r}=Vr(t,s=>((a,i)=>{const l=(d=a,c=i,Math.max(0,Math.min(d.bottom,c.bottom)-Math.max(d.top,c.top))/Math.min(a.height,i.height));var d,c;return((d,c)=>d.top<c.bottom&&d.bottom>c.top)(a,i)&&l>.5})(s,n));return[o,r]});var n})(Av(t),n),{pass:i,fail:l}=Vr(a,d=>d.top<n);return r(s,TN).orThunk(()=>r(l,fg)).orThunk(()=>r(i,fg))},_C=t=>{const e=t.getBoundingClientRect(),n=t.ownerDocument,o=n.documentElement,r=n.defaultView;return{top:e.top+r.pageYOffset-o.clientTop,left:e.left+r.pageXOffset-o.clientLeft}},Yu=Dt,DN=Ln,LN=(t,e,n,o)=>{const r=t.dom,s=e.cloneNode(!0);r.setStyles(s,{width:n,height:o}),r.setAttrib(s,"data-mce-selected",null);const a=r.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return r.setStyles(a,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:n,height:o}),r.setStyles(s,{margin:0,boxSizing:"border-box"}),a.appendChild(s),a},NC=t=>{t&&t.parentNode&&t.parentNode.removeChild(t)},RC=t=>{t.on(e=>{NC(e.ghost)}),t.clear()},Tr=Dt,Xu=(t,e)=>Bs(t.getBody(),e),MN=t=>{const e=t.selection,n=t.dom,o=n.isBlock,r=t.getBody(),s=((t,e,n,o)=>{const r=to();let s,a;const i=Se(t),l=t.dom,d=()=>{(c=>{const u=ke(N(c),"*[contentEditable=false],video,audio,embed,object");for(let f=0;f<u.length;f++){const m=u[f].dom;let g=m.previousSibling;if(Ea(g)){const b=g.data;1===b.length?g.parentNode.removeChild(g):g.deleteData(b.length-1,1)}g=m.nextSibling,Sa(g)&&(1===g.data.length?g.parentNode.removeChild(g):g.deleteData(0,1))}})(e),a&&(Oo(a),a=null),r.on(c=>{l.remove(c.caret),r.clear()}),s&&(clearInterval(s),s=void 0)};return{show:(c,u)=>{let f;if(d(),ak(u))return null;if(!n(u))return a=((m,g)=>{const b=m.ownerDocument.createTextNode(re),p=m.parentNode;if(g){const h=m.previousSibling;if(or(h)){if(Me(h))return h;if(Ea(h))return h.splitText(h.data.length-1)}p.insertBefore(b,m)}else{const h=m.nextSibling;if(or(h)){if(Me(h))return h;if(Sa(h))return h.splitText(1),h}m.nextSibling?p.insertBefore(b,m.nextSibling):p.appendChild(b)}return b})(u,c),f=u.ownerDocument.createRange(),hs(a.nextSibling)?(f.setStart(a,0),f.setEnd(a,0)):(f.setStart(a,1),f.setEnd(a,1)),f;{a=((b,p,h)=>{const v=p.ownerDocument.createElement(b);v.setAttribute("data-mce-caret",h?"before":"after"),v.setAttribute("data-mce-bogus","all"),v.appendChild((()=>{const x=document.createElement("br");return x.setAttribute("data-mce-bogus","1"),x})());const y=p.parentNode;return h?y.insertBefore(v,p):p.nextSibling?y.insertBefore(v,p.nextSibling):y.appendChild(v),v})(i,u,c);const m=ap(e,u,c);l.setStyle(a,"top",m.top);const g=l.create("div",{class:"mce-visual-caret","data-mce-bogus":"all"});l.setStyles(g,rt({},m)),l.add(e,g),r.set({caret:g,element:u,before:c}),c&&l.addClass(g,"mce-visual-caret-before"),s=setInterval(()=>{r.on(b=>{o()?l.toggleClass(b.caret,"mce-visual-caret-hidden"):l.addClass(b.caret,"mce-visual-caret-hidden")})},500),f=u.ownerDocument.createRange(),f.setStart(a,0),f.setEnd(a,0)}return f},hide:d,getCss:()=>".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}",reposition:()=>{r.on(c=>{const u=ap(e,c.element,c.before);l.setStyles(c.caret,rt({},u))})},destroy:()=>clearInterval(s)}})(t,r,o,()=>Do(t)),a="sel-"+n.uniqueId(),i="data-mce-selected";let l;const d=h=>h!==r&&(Tr(h)||mn(h))&&n.isChildOf(h,r),c=(h,v,y,x=!0)=>t.dispatch("ShowCaret",{target:v,direction:h,before:y}).isDefaultPrevented()?null:(x&&e.scrollIntoView(v,-1===h),s.show(y,v)),u=h=>Me(h)||Sa(h)||Ea(h),f=h=>u(h.startContainer)||u(h.endContainer),g=(h,v)=>{if(!h)return null;if(h.collapsed){if(!f(h)){const S=v?1:-1,k=xs(S,r,h),T=k.getNode(!v);if(bs(T))return c(S,T,!!v&&!k.isAtEnd(),!1);const O=k.getNode(v);if(bs(O))return c(S,O,!v&&!k.isAtEnd(),!1)}return null}let y=h.startContainer,x=h.startOffset;const w=h.endOffset;if(3===y.nodeType&&0===x&&Tr(y.parentNode)&&(y=y.parentNode,x=n.nodeIndex(y),y=y.parentNode),1!==y.nodeType)return null;if(w===x+1&&y===h.endContainer){const S=y.childNodes[x];if(d(S))return(k=>{const T=k.cloneNode(!0),O=t.dispatch("ObjectSelected",{target:k,targetClone:T});if(O.isDefaultPrevented())return null;const I=((P,L)=>{const U=N(t.getBody()),V=t.getDoc(),nt=as(U,"#"+a).getOrThunk(()=>{const bt=ts('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>',V);return ge(bt,"id",a),Vt(U,bt),bt}),ct=n.createRng();os(nt),yo(nt,[es(oe,V),N(L),es(oe,V)]),ct.setStart(nt.dom.firstChild,1),ct.setEnd(nt.dom.lastChild,0),fa(nt,{top:n.getPos(P,t.getBody()).y+"px"}),vh(nt);const lt=e.getSel();return lt.removeAllRanges(),lt.addRange(ct),ct})(k,O.targetClone),R=N(k);return j(ke(N(t.getBody()),"*[data-mce-selected]"),P=>{kt(R,P)||qe(P,i)}),n.getAttrib(k,i)||k.setAttribute(i,"1"),l=k,p(),I})(S)}return null},b=()=>{l&&l.removeAttribute(i),as(N(t.getBody()),"#"+a).each(Mt),l=null},p=()=>{s.hide()};return Un(t)||(t.on("click",h=>{const v=Xu(t,h.target);v&&Tr(v)&&(h.preventDefault(),t.focus())}),t.on("blur NewBlock",b),t.on("ResizeWindow FullscreenStateChanged",s.reposition),t.on("tap",h=>{const v=h.target,y=Xu(t,v);Tr(y)?(h.preventDefault(),Fs(t,y).each(g)):d(v)&&Fs(t,v).each(g)},!0),t.on("mousedown",h=>{const v=h.target;if(v!==r&&"HTML"!==v.nodeName&&!n.isChildOf(v,r)||!1===((x,w,S)=>{const k=N(x.getBody()),T=x.inline?k:N(Wn(k).dom.documentElement),O=((I,R,P,L)=>{const U=R.dom.getBoundingClientRect();return{x:P-(I?U.left+R.dom.clientLeft+xE(R):0),y:L-(I?U.top+R.dom.clientTop+CE(R):0)}})(x.inline,T,w,S);return((I,R,P)=>{const L=vE(I),U=yE(I);return R>=0&&P>=0&&R<=L&&P<=U})(T,O.x,O.y)})(t,h.clientX,h.clientY))return;b(),p();const y=Xu(t,v);Tr(y)?(h.preventDefault(),Fs(t,y).each(g)):((t,e,n)=>((o,r,s)=>{const a=N(o),l=((t,e,n)=>C.from(t.dom.elementFromPoint(e,n)).map(Zr))(Wn(a),r,s).filter(d=>Dn(a,d)).getOr(a);return((d,c,u,f)=>{const m=(g,b)=>b.fold(()=>Gu(xe(g.dom.childNodes),u,f),p=>{const h=it(xe(g.dom.childNodes),v=>v!==p.dom);return Gu(h,u,f)}).orThunk(()=>{var p;return(kt(g,d)?C.none():(p=g,C.from(p.dom.parentElement).map(N))).bind(h=>m(h,C.some(g)))});return m(c,C.none())})(a,l,r,s)})(t,e,n).filter(o=>bs(o.node)).map(o=>{return{node:(r=o).node,position:RN(r,s=e)<AN(r,s)?Ys.Before:Ys.After};var r,s}))(r,h.clientX,h.clientY).each(x=>{var w;h.preventDefault(),(w=c(1,x.node,x.position===Ys.Before,!1))&&e.setRng(w),et(y)?y.focus():t.getBody().focus()})}),t.on("keypress",h=>{tt.modifierPressed(h)||Tr(e.getNode())&&h.preventDefault()}),t.on("GetSelectionRange",h=>{let v=h.range;if(l){if(!l.parentNode)return void(l=null);v=v.cloneRange(),v.selectNode(l),h.range=v}}),t.on("SetSelectionRange",h=>{h.range=(h=>{const v=t.schema.getVoidElements(),y=n.createRng(),x=h.startContainer,w=h.startOffset,S=h.endContainer,k=h.endOffset;return ft(v,x.nodeName.toLowerCase())?0===w?y.setStartBefore(x):y.setStartAfter(x):y.setStart(x,w),ft(v,S.nodeName.toLowerCase())?0===k?y.setEndBefore(S):y.setEndAfter(S):y.setEnd(S,k),y})(h.range);const v=g(h.range,h.forward);v&&(h.range=v)}),t.on("AfterSetSelectionRange",h=>{const v=h.range,y=v.startContainer.parentNode;f(v)||"mcepastebin"===y.id||p(),n.hasClass(y,"mce-offscreen-selection")||b()}),(t=>{const e=to(),n=St.DOM,o=document,r=(l=e,d=t,c=>{if(0===c.button){const m=Kt(d.dom.getParents(c.target),((...g)=>b=>{for(let p=0;p<g.length;p++)if(g[p](b))return!0;return!1})(Yu,DN)).getOr(null);if(u=d.getBody(),Yu(f=m)&&f!==u){const g=d.dom.getPos(m),b=d.getBody(),p=d.getDoc().documentElement;l.set({element:m,dragging:!1,screenX:c.screenX,screenY:c.screenY,maxX:(d.inline?b.scrollWidth:p.offsetWidth)-2,maxY:(d.inline?b.scrollHeight:p.offsetHeight)-2,relX:c.pageX-g.x,relY:c.pageY-g.y,width:m.offsetWidth,height:m.offsetHeight,ghost:LN(d,m,m.offsetWidth,m.offsetHeight)})}}var u,f}),s=((l,d)=>{const c=Oa((u,f)=>{d._selectionOverrides.hideFakeCaret(),d.selection.placeCaretAt(u,f)},0);return d.on("remove",c.cancel),u=>l.on(f=>{const m=Math.max(Math.abs(u.screenX-f.screenX),Math.abs(u.screenY-f.screenY));if(!f.dragging&&m>10){if(d.dispatch("dragstart",{target:f.element}).isDefaultPrevented())return;f.dragging=!0,d.focus()}if(f.dragging){const p=((h,v)=>({pageX:v.pageX-h.relX,pageY:v.pageY+5}))(f,(v=u,y=(S=h=d).inline?_C(S.getBody()):{left:0,top:0},x=(S=>{const k=S.getBody();return S.inline?{left:k.scrollLeft,top:k.scrollTop}:{left:0,top:0}})(h),w=((S,k)=>{if(k.target.ownerDocument!==S.getDoc()){const T=_C(S.getContentAreaContainer()),O=(I=>{const R=I.getBody(),P=I.getDoc().documentElement;return I.inline?{left:R.scrollLeft,top:R.scrollTop}:{left:R.scrollLeft||P.scrollLeft,top:R.scrollTop||P.scrollTop}})(S);return{left:k.pageX-T.left+O.left,top:k.pageY-T.top+O.top}}return{left:k.pageX,top:k.pageY}})(h,v),{pageX:w.left-y.left+x.left,pageY:w.top-y.top+x.top}));g=f.ghost,b=d.getBody(),g.parentNode!==b&&b.appendChild(g),((h,v,y,x,w,S)=>{let k=0,T=0;h.style.left=v.pageX+"px",h.style.top=v.pageY+"px",v.pageX+y>w&&(k=v.pageX+y-w),v.pageY+x>S&&(T=v.pageY+x-S),h.style.width=y-k+"px",h.style.height=x-T+"px"})(f.ghost,p,f.width,f.height,f.maxX,f.maxY),c.throttle(u.clientX,u.clientY)}var h,v,S,y,x,w,g,b})})(e,t),a=((l,d)=>c=>{l.on(u=>{if(u.dragging){if(f=d,m=(f=>{const m=f.getSel().getRangeAt(0).startContainer;return 3===m.nodeType?m.parentNode:m})(d.selection),m!==(g=u.element)&&!f.dom.isChildOf(m,g)&&!Yu(m)){const f=(m=>{const g=m.cloneNode(!0);return g.removeAttribute("data-mce-selected"),g})(u.element);d.dispatch("drop",{clientX:c.clientX,clientY:c.clientY}).isDefaultPrevented()||d.undoManager.transact(()=>{NC(u.element),d.insertContent(d.dom.getOuterHTML(f)),d._selectionOverrides.hideFakeCaret()})}d.dispatch("dragend")}var f,m,g}),RC(l)})(e,t),i=((l,d)=>()=>{l.on(c=>{c.dragging&&d.dispatch("dragend")}),RC(l)})(e,t);var l,d;t.on("mousedown",r),t.on("mousemove",s),t.on("mouseup",a),n.bind(o,"mousemove",s),n.bind(o,"mouseup",i),t.on("remove",()=>{n.unbind(o,"mousemove",s),n.unbind(o,"mouseup",i)}),t.on("keydown",l=>{l.keyCode===tt.ESC&&i()})})(h=t),Dw(h)&&(v=>{const y=S=>{if(!S.isDefaultPrevented()){const k=S.dataTransfer;k&&(Pt(k.types,"Files")||k.files.length>0)&&(S.preventDefault(),"drop"===S.type&&_i(v,"Dropped file type is not supported"))}},x=S=>{ei(v,S.target)&&y(S)},w=()=>{const S=St.DOM,k=v.dom,T=document,O=v.inline?v.getBody():v.getDoc(),I=["drop","dragover"];j(I,R=>{S.bind(T,R,x),k.bind(O,R,y)}),v.on("remove",()=>{j(I,R=>{S.unbind(T,R,x),k.unbind(O,R,y)})})};v.on("init",()=>{Ue.setEditorTimeout(v,w,0)})})(h),(h=>{const v=Oa(()=>{if(!h.removed&&h.getBody().contains(document.activeElement)){const y=h.selection.getRng();if(y.collapsed){const x=su(h,y,!1);h.selection.setRng(x)}}},0);h.on("focus",()=>{v.throttle()}),h.on("blur",()=>{v.cancel()})})(t),(h=>{h.on("init",()=>{h.on("focusin",v=>{const y=v.target;if(mn(y)){const x=Bs(h.getBody(),y),w=Dt(x)?x:y;h.selection.getNode()!==w&&Fs(h,w).each(S=>h.selection.setRng(S))}})})})(t)),{showCaret:c,showBlockCaretContainer:h=>{h.hasAttribute("data-mce-caret")&&($l(h),e.scrollIntoView(h))},hideFakeCaret:p,destroy:()=>{s.destroy(),l=null}};var h},AC=(t,e,n)=>{if(G(e)&&(n<0||n>e.data.length))return[];const o=[n];let r=e;for(;r!==t&&r.parentNode;){const s=r.parentNode;for(let a=0;a<s.childNodes.length;a++)if(s.childNodes[a]===r){o.push(a);break}r=s}return r===t?o.reverse():[]},Qu=(t,e,n,o,r)=>({start:AC(t,e,n),end:AC(t,o,r)}),OC=(t,e)=>{const n=e.slice(),o=n.pop();return Te(n,(r,s)=>r.bind(a=>C.from(a.childNodes[s])),C.some(t)).bind(r=>G(r)&&(o<0||o>r.data.length)?C.none():C.some({node:r,offset:o}))},TC=(t,e)=>OC(t,e.start).bind(({node:n,offset:o})=>OC(t,e.end).map(({node:r,offset:s})=>{const a=document.createRange();return a.setStart(n,o),a.setEnd(r,s),a})),Br=(t,e,n)=>{if(e&&t.isEmpty(e)&&!n(e)){const o=e.parentNode;t.remove(e),Br(t,o,n)}},Xi=(t,e,n,o=!0)=>{const r=e.startContainer.parentNode,s=e.endContainer.parentNode;e.deleteContents(),o&&!n(e.startContainer)&&(G(e.startContainer)&&0===e.startContainer.data.length&&t.remove(e.startContainer),G(e.endContainer)&&0===e.endContainer.data.length&&t.remove(e.endContainer),Br(t,r,n),r!==s&&Br(t,s,n))},Ju=(t,e)=>C.from(t.dom.getParent(e.startContainer,t.dom.isBlock)),BC=(t,e,n)=>{((o,r,s)=>{if(G(o)&&0>=o.length)return C.some(on(o,0));{const a=_o(Pi);return C.from(a.forwards(o,0,Mi(o),s)).map(i=>on(i.container,0))}})(e,0,e).each(o=>{const r=o.container;Sy(r,n.start.length,e).each(s=>{const a=t.createRng();a.setStart(r,0),a.setEnd(s.container,s.offset),Xi(t,a,i=>i===e)})})},DC=(t,e)=>t.create("span",{"data-mce-type":"bookmark",id:e}),Qi=(t,e)=>{const n=t.createRng();return n.setStartAfter(e.start),n.setEndBefore(e.end),n},LC=(t,e,n)=>{const o=TC(t.getRoot(),n).getOrDie("Unable to resolve path range"),r=o.startContainer,s=o.endContainer,a=0===o.endOffset?s:s.splitText(o.endOffset),i=0===o.startOffset?r:r.splitText(o.startOffset);return{prefix:e,end:a.parentNode.insertBefore(DC(t,e+"-end"),a),start:i.parentNode.insertBefore(DC(t,e+"-start"),i)}},PC=(t,e,n)=>{Br(t,t.get(e.prefix+"-end"),n),Br(t,t.get(e.prefix+"-start"),n)},Zu=t=>0===t.start.length,MC=(t,e,n,o)=>{const r=e.start;var s;return Eu(t,o.container,o.offset,(s=r,(a,i)=>{const l=a.data.substring(0,i),d=l.lastIndexOf(s.charAt(s.length-1)),c=l.lastIndexOf(s);return-1!==c?c+s.length:-1!==d?d+1:-1}),n).bind(a=>{if(a.offset>=r.length){const i=t.createRng();return i.setStart(a.container,a.offset-r.length),i.setEnd(a.container,a.offset),C.some(i)}return Su(a.container,a.offset-r.length,n).map(l=>{const d=t.createRng();return d.setStart(l.container,l.offset),d.setEnd(a.container,a.offset),d}).filter(l=>l.toString()===r).orThunk(()=>MC(t,e,n,on(a.container,0)))})},IN=(t,e,n)=>{const o=t.dom,r=o.getRoot(),s=n.pattern,a=n.position.container,i=n.position.offset;return Su(a,i-n.pattern.end.length,e).bind(l=>{const d=Qu(r,l.container,l.offset,a,i);if(Zu(s))return C.some({matches:[{pattern:s,startRng:d,endRng:d}],position:l});{const c=IC(t,n.remainingPatterns,l.container,l.offset,e),u=c.getOr({matches:[],position:l}),f=u.position;return((g,b,p,h,v,y=!1)=>{if(0===b.start.length&&!y){const x=g.createRng();return x.setStart(p,h),x.setEnd(p,h),C.some(x)}return ku(p,h,v).bind(x=>MC(g,b,v,x).bind(w=>y&&(w.endContainer===x.container&&w.endOffset===x.offset||0===x.offset&&w.endContainer.textContent.length===w.endOffset)?C.none():C.some(w)))})(o,s,f.container,f.offset,e,c.isNone()).map(g=>{const b=Qu(r,(h=g).startContainer,h.startOffset,h.endContainer,h.endOffset);var h;return{matches:u.matches.concat([{pattern:s,startRng:b,endRng:d}]),position:on(g.startContainer,g.startOffset)}})}})},IC=(t,e,n,o,r)=>{const s=t.dom;return ku(n,o,s.getRoot()).bind(a=>{const i=s.createRng();i.setStart(r,0),i.setEnd(n,o);const l=i.toString();for(let d=0;d<e.length;d++){const c=e[d];if(!Tm(l,c.end))continue;const u=e.slice();u.splice(d,1);const f=IN(t,r,{pattern:c,remainingPatterns:u,position:a});if(f.isSome())return f}return C.none()})},FC=(t,e,n)=>{t.selection.setRng(n),"inline-format"===e.type?j(e.format,o=>{t.formatter.apply(o)}):t.execCommand(e.cmd,!1,e.value)},UC=(t,e,n)=>{const o=t.selection.getRng();return!1===o.collapsed?[]:Ju(t,o).bind(r=>{const s=Math.max(0,o.startOffset-(n?1:0));return IC(t,e,o.startContainer,s,r)}).fold(()=>[],r=>r.matches)},zC=(t,e)=>{if(0===e.length)return;const n=t.dom,o=t.selection.getBookmark(),r=((s,a)=>{const i=ig("mce_textpattern"),l=aa(a,(d,c)=>{const u=LC(s,i+`_end${d.length}`,c.endRng);return d.concat([Rt(rt({},c),{endMarker:u})])},[]);return aa(l,(d,c)=>{const u=l.length-d.length-1,f=Zu(c.pattern)?c.endMarker:LC(s,i+`_start${u}`,c.startRng);return d.concat([Rt(rt({},c),{startMarker:f})])},[])})(n,e);j(r,s=>{const a=n.getParent(s.startMarker.start,n.isBlock),i=l=>l===a;Zu(s.pattern)?((l,d,c,u)=>{const f=Qi(l.dom,c);Xi(l.dom,f,u),FC(l,d,f)})(t,s.pattern,s.endMarker,i):((l,d,c,u,f)=>{const m=l.dom,g=Qi(m,u),b=Qi(m,c);Xi(m,b,f),Xi(m,g,f);const h=Qi(m,{prefix:c.prefix,start:c.end,end:u.start});FC(l,d,h)})(t,s.pattern,s.startMarker,s.endMarker,i),PC(n,s.endMarker,i),PC(n,s.startMarker,i)}),t.selection.moveToBookmark(o)},jC=(t,e)=>{if(e.length>0){const n=UC(t,e,!0);n.length>0&&t.undoManager.transact(()=>{zC(t,n)})}},VC=(t,e,n)=>{for(let o=0;o<t.length;o++)if(n(t[o],e))return!0;return!1},tm=St.DOM,jN=t=>t.inline?t.getElement().nodeName.toLowerCase():void 0,em=t=>Kr(t,e=>!1===Ce(e)),HC=t=>{const e=t.options.get,n=t.editorUpload.blobCache;return em({allow_conditional_comments:e("allow_conditional_comments"),allow_html_data_urls:e("allow_html_data_urls"),allow_svg_data_urls:e("allow_svg_data_urls"),allow_html_in_named_anchor:e("allow_html_in_named_anchor"),allow_script_urls:e("allow_script_urls"),allow_unsafe_link_target:e("allow_unsafe_link_target"),convert_fonts_to_spans:e("convert_fonts_to_spans"),fix_list_elements:e("fix_list_elements"),font_size_legacy_values:e("font_size_legacy_values"),forced_root_block:e("forced_root_block"),forced_root_block_attrs:e("forced_root_block_attrs"),preserve_cdata:e("preserve_cdata"),remove_trailing_brs:e("remove_trailing_brs"),inline_styles:e("inline_styles"),root_name:jN(t),validate:!0,blob_cache:n,document:t.getDoc()})},$C=t=>{const e=t.options.get;return em({custom_elements:e("custom_elements"),extended_valid_elements:e("extended_valid_elements"),invalid_elements:e("invalid_elements"),invalid_styles:e("invalid_styles"),schema:e("schema"),valid_children:e("valid_children"),valid_classes:e("valid_classes"),valid_elements:e("valid_elements"),valid_styles:e("valid_styles"),verify_html:e("verify_html")})},qC=t=>t.inline?t.ui.styleSheetLoader:t.dom.styleSheetLoader,WC=t=>{const e=qC(t),n=Kg(t),o=t.contentCSS,r=()=>{e.unloadAll(o),t.inline||t.ui.styleSheetLoader.unloadAll(n)},s=()=>{t.removed?r():t.on("remove",r)};if(t.contentStyles.length>0){let l="";z.each(t.contentStyles,d=>{l+=d+"\r\n"}),t.dom.addStyle(l)}const a=Promise.all(((l,d,c)=>{const u=[qC(l).loadAll(d)];return l.inline?u:u.concat([l.ui.styleSheetLoader.loadAll(c)])})(t,o,n)).then(s).catch(s),i=fw(t);return i&&((l,d)=>{const c=N(l.getBody()),u=Dl(vo(c)),f=Ft("style");ge(f,"type","text/css"),Vt(f,es(d)),Vt(u,f),l.on("remove",()=>{Mt(f)})})(t,i),a},nm=t=>{var e;!0!==t.removed&&(Un(e=t)||e.load({initial:!0,format:"html"}),e.startContent=e.getContent({format:"raw"}),(e=>{e.bindPendingEventDelegates(),e.initialized=!0,e.dispatch("Init"),e.focus(!0),(o=>{const r=o.dom.getRoot();o.inline||Ya(o)&&o.selection.getStart(!0)!==r||he(r).each(s=>{const a=s.getNode(),i=rs(a)?he(a).getOr(s):s;o.selection.setRng(i.toRange())})})(e),e.nodeChanged({initial:!0});const n=Fw(e);xt(n)&&n.call(e,e),(o=>{const r=zw(o);r&&Ue.setEditorTimeout(o,()=>{let s;s=!0===r?o:o.editorManager.get(r),s.destroyed||s.focus()},100)})(e)})(t))},KC=t=>{const e=t.getElement();let n=t.getDoc();t.inline&&(tm.addClass(e,"mce-content-body"),t.contentDocument=n=document,t.contentWindow=window,t.bodyElement=e,t.contentAreaContainer=e);const o=t.getBody();var a,i;o.disabled=!0,t.readonly=Xg(t),t.readonly||(t.inline&&"static"===tm.getStyle(o,"position",!0)&&(o.style.position="relative"),o.contentEditable="true"),o.disabled=!1,t.editorUpload=(t=>{const e=(()=>{let p=[];const h=x=>{if(!x.blob||!x.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");const w=x.id||"blobid"+kE+++(()=>{const O=()=>Math.round(4294967295*Math.random()).toString(36);return"s"+(new Date).getTime().toString(36)+O()+O()+O()})(),S=x.name||w,k=x.blob;var T;return{id:K(w),name:K(S),filename:K(x.filename||S+"."+(T=k.type,{"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png","image/apng":"apng","image/avif":"avif","image/svg+xml":"svg","image/webp":"webp","image/bmp":"bmp","image/tiff":"tiff"}[T.toLowerCase()]||"dat")),blob:K(k),base64:K(x.base64),blobUri:K(x.blobUri||URL.createObjectURL(k)),uri:K(x.uri)}},v=x=>Kt(p,x).getOrUndefined(),y=x=>v(w=>w.id()===x);return{create:(x,w,S,k,T)=>{if(at(x))return h({id:x,name:k,filename:T,blob:w,base64:S});if(Ae(x))return h(x);throw new Error("Unknown input type")},add:x=>{y(x.id())||p.push(x)},get:y,getByUri:x=>v(w=>w.blobUri()===x),getByData:(x,w)=>v(S=>S.base64()===x&&S.blob().type===w),findFirst:v,removeByUri:x=>{p=it(p,w=>w.blobUri()!==x||(URL.revokeObjectURL(w.blobUri()),!1))},destroy:()=>{j(p,x=>{URL.revokeObjectURL(x.blobUri())}),p=[]}}})();let n,o;const r=j0(),s=[],a=(p=>{const h=Ht(null);return p.on("change AddUndo",v=>{h.set(rt({},v.level))}),{fireIfChanged:()=>{const v=p.undoManager.data;fo(v).filter(y=>!xi(h.get(),y)).each(y=>{p.setDirty(!0),p.dispatch("change",{level:y,lastLevel:Cl(v,v.length-2).getOrNull()})})}}})(t),i=p=>h=>t.selection?p(h):[],l=(p,h,v)=>{let y=0;do{y=p.indexOf(h,y),-1!==y&&(p=p.substring(0,y)+v+p.substr(y+h.length),y+=v.length-h.length+1)}while(-1!==y);return p},d=(p,h,v)=>(p=l(p,`src="${h}"`,`src="${v}"${v===wt.transparentSrc?' data-mce-placeholder="1"':""}`),l(p,'data-mce-src="'+h+'"','data-mce-src="'+v+'"')),c=(p,h)=>{j(t.undoManager.data,v=>{"fragmented"===v.type?v.fragments=vt(v.fragments,y=>d(y,p,h)):v.content=d(v.content,p,h)})},u=()=>(n||(n=H0(t,r)),g().then(i(p=>{const h=vt(p,v=>v.blobInfo);return n.upload(h,V0(t)).then(i(v=>{const y=[],x=vt(v,(w,S)=>{const k=p[S].blobInfo,T=p[S].image;let O=!1;return w.status&&ow(t)?(e.removeByUri(T.src),Un(t)||((I,R)=>{const P=t.convertURL(R,"src");var L;c(I.src,R),cn(N(I),{src:Hg(t)?(L=R,L+(-1===L.indexOf("?")?"?":"&")+(new Date).getTime()):R,"data-mce-src":P})})(T,w.url)):w.error&&(w.error.remove&&(c(T.getAttribute("src"),wt.transparentSrc),y.push(T),O=!0),_i(t,Je.translate(["Failed to upload image: {0}",w.error.message]))),{element:T,status:w.status,uploadUri:w.url,blobInfo:k,removed:O}});return x.length>0&&a.fireIfChanged(),y.length>0&&!Un(t)&&t.undoManager.transact(()=>{j(y,w=>{t.dom.remove(w),e.removeByUri(w.src)})}),x}))}))),f=()=>Vg(t)?u():Promise.resolve([]),m=p=>Ko(s,h=>h(p)),g=()=>(o||(o=((p,h)=>{const v={};return{findAll:(y,x)=>{x||(x=jt);const w=it((k=y)?xe(k.getElementsByTagName("img")):[],k=>{const T=k.src;return!k.hasAttribute("data-mce-bogus")&&!k.hasAttribute("data-mce-placeholder")&&!(!T||T===wt.transparentSrc)&&(0===T.indexOf("blob:")?!p.isUploaded(T)&&x(k):0===T.indexOf("data:")&&x(k))}),S=vt(w,k=>{if(void 0!==v[k.src])return new Promise(O=>{v[k.src].then(I=>{if("string"==typeof I)return I;O({image:k,blobInfo:I.blobInfo})})});const T=new Promise((O,I)=>{((R,P,L,U)=>{let V,nt;if(0===P.src.indexOf("blob:"))return nt=R.getByUri(P.src),void(nt?L({image:P,blobInfo:nt}):s0(P.src).then(bt=>{a0(bt).then(Et=>{V=yi(Et).data,nt=R.create($c(),bt,V),R.add(nt),L({image:P,blobInfo:nt})})},bt=>{U(bt)}));const{data:ct,type:lt}=yi(P.src);V=ct,nt=R.getByData(V,lt),nt?L({image:P,blobInfo:nt}):s0(P.src).then(bt=>{nt=R.create($c(),bt,V),R.add(nt),L({image:P,blobInfo:nt})},bt=>{U(bt)})})(h,k,O,I)}).then(O=>(delete v[O.image.src],O)).catch(O=>(delete v[k.src],O));return v[k.src]=T,T});var k;return Promise.all(S)}}})(r,e)),o.findAll(t.getBody(),m).then(i(p=>(p=it(p,h=>"string"!=typeof h||(_i(t,h),!1)),Un(t)||j(p,h=>{c(h.image.src,h.blobInfo.blobUri()),h.image.src=h.blobInfo.blobUri(),h.image.removeAttribute("data-mce-src")}),p)))),b=p=>p.replace(/src="(blob:[^"]+)"/g,(h,v)=>{const y=r.getResultUri(v);if(y)return'src="'+y+'"';let x=e.getByUri(v);return x||(x=Te(t.editorManager.get(),(w,S)=>w||S.editorUpload&&S.editorUpload.blobCache.getByUri(v),null)),x?'src="data:'+x.blob().type+";base64,"+x.base64()+'"':h});return t.on("SetContent",()=>{Vg(t)?f():g()}),t.on("RawSaveContent",p=>{p.content=b(p.content)}),t.on("GetContent",p=>{p.source_view||"raw"===p.format||"tree"===p.format||(p.content=b(p.content))}),t.on("PostRender",()=>{t.parser.addNodeFilter("img",p=>{j(p,h=>{const v=h.attr("src");if(e.getByUri(v))return;const y=r.getResultUri(v);y&&h.attr("src",y)})})}),{blobCache:e,addFilter:p=>{s.push(p)},uploadImages:u,uploadImagesAuto:f,scanForImages:g,destroy:()=>{e.destroy(),r.destroy(),o=n=null}}})(t),t.schema=Zn($C(t)),t.dom=St(n,{keep_values:!0,url_converter:t.convertURL,url_converter_scope:t,update_styles:!0,root_element:t.inline?t.getBody():null,collect:()=>t.inline,schema:t.schema,contentCssCors:dw(t),referrerPolicy:pd(t),onSetAttrib:a=>{t.dispatch("SetAttrib",a)}}),t.parser=(a=>{const i=kr(HC(a),a.schema);return i.addAttributeFilter("src,href,style,tabindex",(l,d)=>{let c,u,f=l.length;const m=a.dom,g="data-mce-"+d;for(;f--;)if(c=l[f],u=c.attr(d),u&&!c.attr(g)){if(0===u.indexOf("data:")||0===u.indexOf("blob:"))continue;"style"===d?(u=m.serializeStyle(m.parseStyle(u),c.name),u.length||(u=null),c.attr(g,u),c.attr(d,u)):"tabindex"===d?(c.attr(g,u),c.attr(d,null)):c.attr(g,a.convertURL(u,d,c.name))}}),i.addNodeFilter("script",l=>{let d=l.length;for(;d--;){const c=l[d],u=c.attr("type")||"no/type";0!==u.indexOf("mce-")&&c.attr("type","mce-"+u)}}),a.options.get("preserve_cdata")&&i.addNodeFilter("#cdata",l=>{let d=l.length;for(;d--;){const c=l[d];c.type=8,c.name="#comment",c.value="[CDATA["+a.dom.encode(c.value)+"]]"}}),i.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",l=>{let d=l.length;const c=a.schema.getNonEmptyElements();for(;d--;){const u=l[d];u.isEmpty(c)&&0===u.getAll("br").length&&u.append(new be("br",1))}}),i})(t),t.serializer=L0((a=>{const i=a.options.get;return rt(rt(rt({},HC(a)),$C(a)),em({url_converter:i("url_converter"),url_converter_scope:i("url_converter_scope"),element_format:i("element_format"),entities:i("entities"),entity_encoding:i("entity_encoding"),indent:i("indent"),indent_after:i("indent_after"),indent_before:i("indent_before")}))})(t),t),t.selection=D0(t.dom,t.getWin(),t.serializer,t),t.annotator=Kp(t),t.formatter=W0(t),t.undoManager=G0(t),t._nodeChangeDispatcher=new vN(t),t._selectionOverrides=MN(t),(a=>{const i=to(),l=Ht(!1),d=od(c=>{a.dispatch("longpress",Rt(rt({},c),{type:"longpress"})),l.set(!0)},400);a.on("touchstart",c=>{Yv(c).each(u=>{d.cancel();const f={x:u.clientX,y:u.clientY,target:c.target};d.throttle(c),l.set(!1),i.set(f)})},!0),a.on("touchmove",c=>{d.cancel(),Yv(c).each(u=>{i.on(f=>{((m,g)=>{const b=Math.abs(m.clientX-g.x),p=Math.abs(m.clientY-g.y);return b>5||p>5})(u,f)&&(i.clear(),l.set(!1),a.dispatch("longpresscancel"))})})},!0),a.on("touchend touchcancel",c=>{d.cancel(),"touchcancel"!==c.type&&i.get().filter(u=>u.target.isEqualNode(c.target)).each(()=>{l.get()?c.preventDefault():a.dispatch("tap",Rt(rt({},c),{type:"tap"}))})},!0)})(t),(i=a=t).on("click",l=>{i.dom.getParent(l.target,"details")&&l.preventDefault()}),(i=>{i.parser.addNodeFilter("details",l=>{j(l,d=>{d.attr("data-mce-open",d.attr("open")),d.attr("open","open")})}),i.serializer.addNodeFilter("details",l=>{j(l,d=>{const c=d.attr("data-mce-open");d.attr("open",at(c)?c:null),d.attr("data-mce-open",null)})})})(a),(a=>{const i="contenteditable",l=" "+z.trim(Zw(a))+" ",d=" "+z.trim(Zg(a))+" ",c=Xv(l),u=Xv(d),f=tk(a);f.length>0&&a.on("BeforeSetContent",m=>{((g,b,p)=>{let h=b.length,v=p.content;if("raw"!==p.format){for(;h--;)v=v.replace(b[h],h_(g,v,Zg(g)));p.content=v}})(a,f,m)}),a.parser.addAttributeFilter("class",m=>{let g=m.length;for(;g--;){const b=m[g];c(b)?b.attr(i,"true"):u(b)&&b.attr(i,"false")}}),a.serializer.addAttributeFilter(i,m=>{let g=m.length;for(;g--;){const b=m[g];(c(b)||u(b))&&(f.length>0&&b.attr("data-mce-content")?(b.name="#text",b.type=3,b.raw=!0,b.value=b.attr("data-mce-content")):b.attr(i,null))}})})(t),Un(t)||((a=>{a.on("click",i=>{i.detail>=3&&(l=>{const d=l.selection.getRng(),c=M.fromRangeStart(d),u=M.fromRangeEnd(d);if(M.isElementPosition(c)){const f=c.container();EC(f)&&he(f).each(m=>d.setStart(m.container(),m.offset()))}if(M.isElementPosition(u)){const f=c.container();EC(f)&&yn(f).each(m=>d.setEnd(m.container(),m.offset()))}l.selection.setRng(wc(d))})(a)})})(t),(a=>{(t=>{const e=[",",".",";",":","!","?"],n=[32],o=()=>Ig(Jg(t));t.on("keydown",r=>{var s;13!==r.keyCode||tt.modifierPressed(r)||((t,e)=>{if(!(t.selection.isCollapsed()&&(r=e,r.inlinePatterns.length>0||r.blockPatterns.length>0)))return!1;var r;const n=UC(t,e.inlinePatterns,!1),o=((r,s)=>{const a=r.dom,i=r.selection.getRng();return Ju(r,i).filter(l=>{const d=Se(r),c=a.is(l,d);return null!==l&&c}).bind(l=>{const d=l.textContent;return((u,f)=>{const m=f.replace(oe," ");return Kt(u,g=>0===f.indexOf(g.start)||0===m.indexOf(g.start))})(s,d).map(u=>z.trim(d).length===u.start.length?[]:[{pattern:u,range:Qu(a.getRoot(),l,0,l,0)}])}).getOr([])})(t,e.blockPatterns);return(o.length>0||n.length>0)&&(t.undoManager.add(),t.undoManager.extra(()=>{t.execCommand("mceInsertNewLine")},()=>{t.insertContent("\ufeff"),zC(t,n),((a,i)=>{if(0===i.length)return;const l=a.selection.getBookmark();j(i,d=>((c,u)=>{const m=u.pattern,g=TC(c.dom.getRoot(),u.range).getOrDie("Unable to resolve path range");return Ju(c,g).each(b=>{"block-format"===m.type?((p,h)=>{const v=h.get(p);return Wt(v)&&Be(v).exists(y=>ft(y,"block"))})(m.format,c.formatter)&&c.undoManager.transact(()=>{BC(c.dom,b,m),c.formatter.apply(m.format)}):"block-command"===m.type&&c.undoManager.transact(()=>{BC(c.dom,b,m),c.execCommand(m.cmd,!1,m.value)})}),!0})(a,d)),a.selection.moveToBookmark(l)})(t,o);const r=t.selection.getRng(),s=ku(r.startContainer,r.startOffset,t.dom.getRoot());t.execCommand("mceInsertNewLine"),s.each(a=>{const i=a.container;"\ufeff"===i.data.charAt(a.offset-1)&&(i.deleteData(a.offset-1,1),Br(t.dom,i.parentNode,l=>l===t.dom.getRoot()))})}),!0)})(t,(s=Jg(t),{inlinePatterns:Ig(s),blockPatterns:$x(s)}))&&r.preventDefault()},!0),t.on("keyup",r=>{VC(n,r,(s,a)=>s===a.keyCode&&!1===tt.modifierPressed(a))&&jC(t,o())}),t.on("keypress",r=>{VC(e,r,(s,a)=>s.charCodeAt(0)===a.charCode)&&Ue.setEditorTimeout(t,()=>{jC(t,o())})})})(a)})(t));const r=bN(t);((t,e)=>{t.addCommand("delete",()=>{var n;Gv(n=t,e,!1).fold(()=>{eu(n),ev(n)},jr)}),t.addCommand("forwardDelete",()=>{var n;Gv(n=t,e,!0).fold(()=>tv(n,"ForwardDelete"),jr)})})(t,r),(a=>{a.on("NodeChange",X(p_,a))})(t),(a=>{const i=a.dom,l=Se(a),d=bw(a),c=(u,f)=>{if((b=>{if(X0(b)){const p=b.keyCode;return!Q0(b)&&(tt.metaKeyPressed(b)||b.altKey||p>=112&&p<=123||Pt(OE,p))}return!1})(u))return;const m=a.getBody(),g=!(X0(b=u)&&!(Q0(b)||"keyup"===b.type&&229===b.keyCode))&&((b,p,h)=>{if(Yt(N(p),!1)){const v=p.firstElementChild;return!v||!b.getStyle(p.firstElementChild,"padding-left")&&!b.getStyle(p.firstElementChild,"padding-right")&&h===v.nodeName.toLowerCase()}return!1})(i,m,l);var b;(""!==i.getAttrib(m,Y0)!==g||f)&&(i.setAttrib(m,Y0,g?d:null),i.setAttrib(m,"aria-placeholder",g?d:null),((b,p)=>{b.dispatch("PlaceholderToggle",{state:p})})(a,g),a.on(g?"keydown":"keyup",c),a.off(g?"keyup":"keydown",c))};d&&a.on("init",u=>{c(u,!0),a.on("change SetContent ExecCommand",c),a.on("paste",f=>Ue.setEditorTimeout(a,()=>c(f)))})})(t),(t=>{const e=Ht(!1),n=Ht(Xw(t)?"text":"html"),o=(r=>{const s=Ht(null);return{create:()=>((a,i)=>{const{dom:l,selection:d}=a,c=a.getBody();i.set(d.getRng());const u=l.add(a.getBody(),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},lC);wt.browser.isFirefox()&&l.setStyle(u,"left","rtl"===l.getStyle(c,"direction",!0)?65535:-65535),l.bind(u,"beforedeactivate focusin focusout",f=>{f.stopPropagation()}),u.focus(),d.select(u,!0)})(r,s),remove:()=>((a,i)=>{const l=a.dom;if($u(a)){let d;const c=i.get();for(;d=$u(a);)l.remove(d),l.unbind(d);c&&a.selection.setRng(c)}i.set(null)})(r,s),getEl:()=>$u(r),getHtml:()=>(a=>{const i=a.dom,l=(f,m)=>{f.appendChild(m),i.remove(m,!0)},[d,...c]=it(a.getBody().childNodes,CN);j(c,f=>{l(d,f)});const u=i.select("div[id=mcepastebin]",d);for(let f=u.length-1;f>=0;f--){const m=i.create("div");d.insertBefore(m,u[f]),l(m,u[f])}return d?d.innerHTML:""})(r),getLastRng:s.get}})(t);var r,s,a;r=t,(wt.browser.isChromium()||wt.browser.isSafari())&&(a=_N,(s=r).on("PastePreProcess",i=>{i.content=a(s,i.content,i.internal)})),((r,s)=>{r.addCommand("mceTogglePlainTextPaste",()=>{((a,i)=>{"text"===i.get()?(i.set("html"),Zp(a,!1)):(i.set("text"),Zp(a,!0)),a.focus()})(r,s)}),r.addCommand("mceInsertClipboardContent",(a,i)=>{i.html&&Yi(r,i.html,i.internal),i.text&&Ku(r,i.text)})})(t,n),(r=>{const s=l=>d=>{l(r,d)},a=$w(r);xt(a)&&r.on("PastePreProcess",s(a));const i=qw(r);xt(i)&&r.on("PastePostProcess",s(i))})(t),t.on("PreInit",()=>{(r=>{r.on("cut",(s=>a=>{!a.isDefaultPrevented()&&xC(s)&&vC(a,CC(s),yC(s),()=>{if(wt.browser.isChromium()||wt.browser.isFirefox()){const i=s.selection.getRng();Ue.setEditorTimeout(s,()=>{s.selection.setRng(i),s.execCommand("Delete")},0)}else s.execCommand("Delete")})})(r)),r.on("copy",(s=>a=>{!a.isDefaultPrevented()&&xC(s)&&vC(a,CC(s),yC(s),pt)})(r))})(t),((r,s)=>{Hw(r)&&r.on("dragend dragover draggesture dragdrop drop drag",a=>{a.preventDefault(),a.stopPropagation()}),Ia(r)||r.on("drop",a=>{const i=a.dataTransfer;i&&It(i.files,d=>/^image\//.test(d.type))&&a.preventDefault()}),r.on("drop",a=>{if(a.isDefaultPrevented()||s.get())return;const i=wC(r,a);if(Oe(i))return;const l=gC(a.dataTransfer),d=Or(l,Gi());if((!pC(l)||(f=>{const m=f["text/plain"];return!!m&&0===m.indexOf("file://")})(l))&&hC(r,a,i))return;const c=l[Gi()],u=c||l["text/html"]||l["text/plain"];u&&(a.preventDefault(),Ue.setEditorTimeout(r,()=>{r.undoManager.transact(()=>{c&&r.execCommand("Delete"),kC(r,i);const f=uC(u);l["text/html"]?Yi(r,f,d):Ku(r,f)})}))}),r.on("dragstart",a=>{s.set(!0)}),r.on("dragover dragend",a=>{Ia(r)&&!1===s.get()&&(a.preventDefault(),kC(r,wC(r,a))),"dragend"===a.type&&s.set(!1)})})(t,e),((t,e,n)=>{((o,r,s)=>{let a;o.on("keydown",i=>{var l;(tt.metaKeyPressed(l=i)&&86===l.keyCode||l.shiftKey&&45===l.keyCode)&&!i.isDefaultPrevented()&&(a=i.shiftKey&&86===i.keyCode)}),o.on("paste",i=>{if(i.isDefaultPrevented()||(c=i,wt.os.isAndroid()&&0===(null===(f=null===(u=c.clipboardData)||void 0===u?void 0:u.items)||void 0===f?void 0:f.length)))return;var c,u,f;const l="text"===s.get()||a;a=!1;const d=gC(i.clipboardData);!pC(d)&&hC(o,i,r.getLastRng()||o.selection.getRng())||(Or(d,"text/html")?(i.preventDefault(),bC(o,d,d["text/html"],l)):(r.create(),Ue.setEditorTimeout(o,()=>{const c=r.getHtml();r.remove(),bC(o,d,c,l)},0)))})})(t,e,n),(o=>{const r=a=>He(a,"webkit-fake-url"),s=a=>He(a,"data:");o.parser.addNodeFilter("img",(a,i,l)=>{if(!Ia(o)&&!0===(null===(c=l.data)||void 0===c?void 0:c.paste))for(const d of a){const c=d.attr("src");at(c)&&!d.attr("data-mce-object")&&c!==wt.transparentSrc&&(r(c)||!Jw(o)&&s(c))&&d.remove()}var c})})(t)})(t,o,n)})})(t);const s=(a=>{const i=a;return(l=a,Nt(l.plugins,"rtc").bind(d=>C.from(d.setup))).fold(()=>(i.rtcInstance=N0(a),C.none()),l=>(i.rtcInstance=(()=>{const d=K(null),c=K("");return{init:{bindEvents:pt},undoManager:{beforeChange:pt,add:d,undo:d,redo:d,clear:pt,reset:pt,hasUndo:Tt,hasRedo:Tt,transact:d,ignore:pt,extra:pt},formatter:{match:Tt,matchAll:K([]),matchNode:K(void 0),canApply:Tt,closest:c,apply:pt,remove:pt,toggle:pt,formatChanged:K({unbind:pt})},editor:{getContent:c,setContent:K({content:"",html:""}),insertContent:K(""),addVisual:pt},selection:{getContent:c},autocompleter:{addDecoration:pt,removeDecoration:pt},raw:{getModel:K(C.none())}}})(),C.some(()=>l().then(d=>(i.rtcInstance=(c=>{const u=y=>Ae(y)?y:{},{init:f,undoManager:m,formatter:g,editor:b,selection:p,autocompleter:h,raw:v}=c;return{init:{bindEvents:f.bindEvents},undoManager:{beforeChange:m.beforeChange,add:m.add,undo:m.undo,redo:m.redo,clear:m.clear,reset:m.reset,hasUndo:m.hasUndo,hasRedo:m.hasRedo,transact:(y,x,w)=>m.transact(w),ignore:(y,x)=>m.ignore(x),extra:(y,x,w,S)=>m.extra(w,S)},formatter:{match:(y,x,w,S)=>g.match(y,u(x),S),matchAll:g.matchAll,matchNode:g.matchNode,canApply:y=>g.canApply(y),closest:y=>g.closest(y),apply:(y,x,w)=>g.apply(y,u(x)),remove:(y,x,w,S)=>g.remove(y,u(x)),toggle:(y,x,w)=>g.toggle(y,u(x)),formatChanged:(y,x,w,S,k)=>g.formatChanged(x,w,S,k)},editor:{getContent:y=>b.getContent(y),setContent:(y,x)=>({content:b.setContent(y,x),html:""}),insertContent:(y,x)=>(b.insertContent(y),""),addVisual:b.addVisual},selection:{getContent:(y,x)=>p.getContent(x)},autocompleter:{addDecoration:h.addDecoration,removeDecoration:h.removeDecoration},raw:{getModel:()=>C.some(v.getRawModel())}}})(d),d.rtc.isRemote)))));var l})(t);(a=>{const i=a.getDoc(),l=a.getBody();a.dispatch("PreInit"),jw(a)||(i.body.spellcheck=!1,tm.setAttrib(l,"spellcheck","false")),a.quirks=(t=>{const e=z.each,n=tt.BACKSPACE,o=tt.DELETE,r=t.dom,s=t.selection,a=t.parser,i=wt.browser,l=i.isFirefox(),d=i.isChromium()||i.isSafari(),c=wt.deviceType.isiPhone()||wt.deviceType.isiPad(),u=wt.os.isMacOS()||wt.os.isiOS(),f=(R,P)=>{try{t.getDoc().execCommand(R,!1,P)}catch(L){}},m=R=>R.isDefaultPrevented(),g=()=>{t.shortcuts.add("meta+a",null,"SelectAll")},b=()=>{t.inline||r.bind(t.getDoc(),"mousedown mouseup",R=>{let P;if(R.target===t.getDoc().documentElement)if(P=s.getRng(),t.getBody().focus(),"mousedown"===R.type){if(Me(P.startContainer))return;s.placeCaretAt(R.clientX,R.clientY)}else s.setRng(P)})},p=()=>{Range.prototype.getClientRects||t.on("mousedown",R=>{if(!m(R)&&"HTML"===R.target.nodeName){const P=t.getBody();P.blur(),Ue.setEditorTimeout(t,()=>{P.focus()})}})},h=()=>{const R=Qg(t);t.on("click",P=>{const L=P.target;/^(IMG|HR)$/.test(L.nodeName)&&"false"!==r.getContentEditableParent(L)&&(P.preventDefault(),t.selection.select(L),t.nodeChanged()),"A"===L.nodeName&&r.hasClass(L,R)&&0===L.childNodes.length&&(P.preventDefault(),s.select(L))})},v=()=>{t.on("keydown",R=>{if(!m(R)&&R.keyCode===n&&s.isCollapsed()&&0===s.getRng().startOffset){const P=s.getNode().previousSibling;if(P&&P.nodeName&&"table"===P.nodeName.toLowerCase())return R.preventDefault(),!1}})},y=()=>{Xg(t)||t.on("BeforeExecCommand mousedown",()=>{f("StyleWithCSS",!1),f("enableInlineTableEditing",!1),Gg(t)||f("enableObjectResizing",!1)})},x=()=>{t.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")},w=()=>{t.inline||t.on("keydown",()=>{document.activeElement===document.body&&t.getWin().focus()})},S=()=>{t.inline||(t.contentStyles.push("body {min-height: 150px}"),t.on("click",R=>{let P;"HTML"===R.target.nodeName&&(P=t.selection.getRng(),t.getBody().focus(),t.selection.setRng(P),t.selection.normalize(),t.nodeChanged())}))},k=()=>{u&&t.on("keydown",R=>{!tt.metaKeyPressed(R)||R.shiftKey||37!==R.keyCode&&39!==R.keyCode||(R.preventDefault(),t.selection.getSel().modify("move",37===R.keyCode?"backward":"forward","lineboundary"))})},T=()=>{t.on("click",R=>{let P=R.target;do{if("A"===P.tagName)return void R.preventDefault()}while(P=P.parentNode)}),t.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")},O=()=>{t.on("init",()=>{t.dom.bind(t.getBody(),"submit",R=>{R.preventDefault()})})},I=pt;return Un(t)?(d&&(b(),h(),O(),g(),c&&(w(),S(),T())),l&&(p(),y(),x(),k())):(t.on("keydown",R=>{let P,L;if(m(R)||R.keyCode!==tt.BACKSPACE)return;P=s.getRng();const U=P.startContainer,V=P.startOffset,nt=r.getRoot();if(L=U,P.collapsed&&0===V){for(;L&&L.parentNode&&L.parentNode.firstChild===L&&L.parentNode!==nt;)L=L.parentNode;"BLOCKQUOTE"===L.tagName&&(t.formatter.toggle("blockquote",null,L),P=r.createRng(),P.setStart(U,0),P.setEnd(U,0),s.setRng(P))}}),(()=>{const R=P=>{const L=r.create("body"),U=P.cloneContents();return L.appendChild(U),s.serializer.serialize(L,{format:"html"})};t.on("keydown",P=>{const L=P.keyCode;let U,V;if(!m(P)&&(L===o||L===n)){if(U=t.selection.isCollapsed(),V=t.getBody(),U&&!r.isEmpty(V)||!U&&!(nt=>{const ct=R(nt),lt=r.createRng();return lt.selectNode(t.getBody()),ct===R(lt)})(t.selection.getRng()))return;P.preventDefault(),t.setContent(""),V.firstChild&&r.isBlock(V.firstChild)?t.selection.setCursorLocation(V.firstChild,0):t.selection.setCursorLocation(V,0),t.nodeChanged()}})})(),wt.windowsPhone||t.on("keyup focusin mouseup",R=>{tt.modifierPressed(R)||s.normalize()},!0),d&&(b(),h(),t.on("init",()=>{f("DefaultParagraphSeparator",Se(t))}),O(),v(),a.addNodeFilter("br",R=>{let P=R.length;for(;P--;)"Apple-interchange-newline"===R[P].attr("class")&&R[P].remove()}),c?(w(),S(),T()):g()),l&&(t.on("keydown",R=>{if(!m(R)&&R.keyCode===n){if(!t.getBody().getElementsByTagName("hr").length)return;if(s.isCollapsed()&&0===s.getRng().startOffset){const P=s.getNode(),L=P.previousSibling;if("HR"===P.nodeName)return r.remove(P),void R.preventDefault();L&&L.nodeName&&"hr"===L.nodeName.toLowerCase()&&(r.remove(L),R.preventDefault())}}}),p(),(()=>{const R=()=>{const L=r.getAttribs(s.getStart().cloneNode(!1));return()=>{const U=s.getStart();U!==t.getBody()&&(r.setAttrib(U,"style",null),e(L,V=>{U.setAttributeNode(V.cloneNode(!0))}))}},P=()=>!s.isCollapsed()&&r.getParent(s.getStart(),r.isBlock)!==r.getParent(s.getEnd(),r.isBlock);t.on("keypress",L=>{let U;if(!m(L)&&(8===L.keyCode||46===L.keyCode)&&P())return U=R(),t.getDoc().execCommand("delete",!1,null),U(),L.preventDefault(),!1}),r.bind(t.getDoc(),"cut",L=>{let U;!m(L)&&P()&&(U=R(),Ue.setEditorTimeout(t,()=>{U()}))})})(),y(),t.on("SetContent ExecCommand",R=>{"setcontent"!==R.type&&"mceInsertLink"!==R.command||e(r.select("a"),P=>{let L=P.parentNode;const U=r.getRoot();if(L.lastChild===P){for(;L&&!r.isBlock(L);){if(L.parentNode.lastChild!==L||L===U)return;L=L.parentNode}r.add(L,"br",{"data-mce-bogus":1})}})}),x(),k(),v())),{refreshContentEditable:I,isHidden:()=>{if(!l||t.removed)return!1;const R=t.selection.getSel();return!R||!R.rangeCount||0===R.rangeCount}}})(a),a.dispatch("PostRender");const d=gw(a);void 0!==d&&(l.dir=d);const c=Vw(a);c&&a.on("BeforeSetContent",u=>{z.each(c,f=>{u.content=u.content.replace(f,m=>"\x3c!--mce:protected "+escape(m)+"--\x3e")})}),a.on("SetContent",()=>{a.addVisual(a.getBody())}),a.on("compositionstart compositionend",u=>{a.composing="compositionstart"===u.type})})(t),s.fold(()=>{WC(t).then(()=>nm(t))},a=>{t.setProgressState(!0),WC(t).then(()=>{a().then(i=>{t.setProgressState(!1),nm(t),R0(t)},i=>{t.notificationManager.open({type:"error",text:String(i)}),nm(t),R0(t)})})})},GC=(t,e)=>{if(t.inline||(t.getElement().style.visibility=t.orgVisibility),e||t.inline)KC(t);else{const o=t.iframeElement,r=((t,e,n,o)=>((r,s,a,i,l)=>{const d=(c=a,u=i,f=>{c(f)&&u((m=>{const g=N(hf(m).getOr(m.target)),b=()=>m.stopPropagation(),p=()=>m.preventDefault(),h=mo(p,b);return{target:g,x:m.clientX,y:m.clientY,stop:b,prevent:p,kill:h,raw:m}})(f))});var c,u;return r.dom.addEventListener(s,d,!1),{unbind:X(ax,r,s,d,!1)}})(t,"load",n,o))(N(o),0,wE,()=>{r.unbind(),t.contentDocument=o.contentDocument,KC(t)});o.srcdoc=t.iframeHTML}},Ji=St.DOM,YC=St.DOM,XC=t=>({editorContainer:t,iframeContainer:t,api:{}}),jo=St.DOM,QC=t=>"-"===t.charAt(0),JC=(t,e,n)=>C.from(e).filter(o=>On(o)&&!Ei.has(o)).map(o=>({url:`${t.editorManager.baseURL}/icons/${o}/icons${n}.js`,name:C.some(o)})),ZC=qn().deviceType,t1=ZC.isPhone(),qN=ZC.isTablet(),Xs=t=>{if(Oe(t))return[];{const e=Wt(t)?t:t.split(/[ ,]/),n=vt(e,Qo);return it(n,On)}},om=(t,e)=>ft(t.sections(),e),KN=(t,e)=>rt({table_grid:!1,object_resizing:!1,resize:!1,toolbar_mode:Nt(t,"toolbar_mode").getOr("scrolling"),toolbar_sticky:!1},e?{menubar:!1}:{}),GN=(t,e)=>{var n;const o=null!==(n=e.external_plugins)&&void 0!==n?n:{};return t&&t.external_plugins?z.extend({},t.external_plugins,o):o},QN=(t,e)=>{const n=t.selection,o=t.dom;return/^ | $/.test(e)?((r,s,a)=>{const i=N(r.getRoot());return a=ri(i,M.fromRangeStart(s))?a.replace(/^ /,"&nbsp;"):a.replace(/^&nbsp;/," "),si(i,M.fromRangeEnd(s))?a.replace(/(&nbsp;| )(<br( \/)>)?$/,"&nbsp;"):a.replace(/&nbsp;(<br( \/)?>)?$/," ")})(o,n.getRng(),e):e},Zi=(t,e)=>{const{content:n,details:o}=(r=>{if("string"!=typeof r){const s=z.extend({paste:r.paste,data:{paste:r.paste}},r);return{content:r.content,details:s}}return{content:r,details:{}}})(e);Wc(t,{content:QN(t,n),format:"html",set:!1,selection:!0,paste:o.paste}).each(r=>{const s=(i=r.content,l=o,Zc(t).editor.insertContent(i,l));var i,l;Kc(t,s,r),t.addVisual()})},JN={"font-size":"size","font-family":"face"},e1=t=>(e,n)=>C.from(n).map(N).filter($e).bind(o=>{return(r=t,s=e,a=o.dom,_c(N(a),i=>{return ga(l=i,r).orThunk(()=>"font"===Ot(l)?Nt(JN,r).bind(d=>ca(l,d)):C.none());var l},i=>kt(N(s),i))).or(((r,s)=>C.from(St.DOM.getStyle(s,r,!0)))(t,o.dom));var r,s,a}).getOr(""),ZN=e1("font-size"),tR=mo(t=>t.replace(/[\'\"\\]/g,"").replace(/,\s+/g,","),e1("font-family")),eR=t=>he(t.getBody()).map(e=>{const n=e.container();return G(n)?n.parentNode:n}),rm=(t,e)=>{return n=t,o=bm(C.some,e),(r=n,C.from(r.selection.getRng()).bind(s=>{const a=r.getBody();return s.startContainer===a&&0===s.startOffset?C.none():C.from(r.selection.getStart(!0))})).orThunk(X(eR,n)).map(N).filter($e).bind(o);var n,o,r},n1=(t,e)=>{if(/^[0-9.]+$/.test(e)){const n=parseInt(e,10);if(n>=1&&n<=7){const o=z.explode(t.options.get("font_size_style_values")),r=z.explode(t.options.get("font_size_classes"));return r?r[n-1]||e:o[n-1]||e}return e}return e},nR=t=>{const e=t.split(/\s*,\s*/);return vt(e,n=>-1===n.indexOf(" ")||He(n,'"')||He(n,"'")?n:`'${n}'`).join(",")};class o1{constructor(e){this.commands={state:{},exec:{},value:{}},this.editor=e}execCommand(e,n,o,r){const s=this.editor,a=e.toLowerCase(),i=null==r?void 0:r.skip_focus;if(s.removed||("mcefocus"!==a&&(/^(mceAddUndoLevel|mceEndUndoLevel)$/i.test(a)||i?Xd(d=s).each(c=>d.selection.setRng(c)):s.focus()),s.dispatch("BeforeExecCommand",{command:e,ui:n,value:o}).isDefaultPrevented()))return!1;var d;const l=this.commands.exec[a];return!!xt(l)&&(l(a,n,o),s.dispatch("ExecCommand",{command:e,ui:n,value:o}),!0)}queryCommandState(e){if(this.editor.quirks.isHidden()||this.editor.removed)return!1;const n=e.toLowerCase(),o=this.commands.state[n];return!!xt(o)&&o(n)}queryCommandValue(e){if(this.editor.quirks.isHidden()||this.editor.removed)return"";const n=e.toLowerCase(),o=this.commands.value[n];return xt(o)?o(n):""}addCommands(e,n="exec"){const o=this.commands;At(e,(r,s)=>{j(s.toLowerCase().split(","),a=>{o[n][a]=r})})}addCommand(e,n,o){const r=e.toLowerCase();this.commands.exec[r]=(s,a,i)=>n.call(null!=o?o:this.editor,a,i)}queryCommandSupported(e){const n=e.toLowerCase();return!!this.commands.exec[n]}addQueryStateHandler(e,n,o){this.commands.state[e.toLowerCase()]=()=>n.call(null!=o?o:this.editor)}addQueryValueHandler(e,n,o){this.commands.value[e.toLowerCase()]=()=>n.call(null!=o?o:this.editor)}}const Dr="data-mce-contenteditable",sm=(t,e,n)=>{try{t.getDoc().execCommand(e,!1,String(n))}catch(o){}},tl=(t,e)=>{t.dom.contentEditable=e?"true":"false"},Vo=t=>t.readonly,r1=t=>{t.parser.addAttributeFilter("contenteditable",e=>{Vo(t)&&j(e,n=>{n.attr(Dr,n.attr("contenteditable")),n.attr("contenteditable","false")})}),t.serializer.addAttributeFilter(Dr,e=>{Vo(t)&&j(e,n=>{n.attr("contenteditable",n.attr(Dr))})}),t.serializer.addTempAttr(Dr)},sR=z.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel"," ");class am{constructor(e){this.bindings={},this.settings=e||{},this.scope=this.settings.scope||this,this.toggleEvent=this.settings.toggleEvent||Tt}static isNative(e){return!!sR[e.toLowerCase()]}fire(e,n){return this.dispatch(e,n)}dispatch(e,n){const o=e.toLowerCase(),r=Jl(o,null!=n?n:{},this.scope);this.settings.beforeFire&&this.settings.beforeFire(r);const s=this.bindings[o];if(s)for(let a=0,i=s.length;a<i;a++){const l=s[a];if(!l.removed){if(l.once&&this.off(o,l.func),r.isImmediatePropagationStopped())return r;if(!1===l.func.call(this.scope,r))return r.preventDefault(),r}}return r}on(e,n,o,r){if(!1===n&&(n=Tt),n){const s={func:n,removed:!1};r&&z.extend(s,r);const a=e.toLowerCase().split(" ");let i=a.length;for(;i--;){const l=a[i];let d=this.bindings[l];d||(d=[],this.toggleEvent(l,!0)),d=o?[s,...d]:[...d,s],this.bindings[l]=d}}return this}off(e,n){if(e){const o=e.toLowerCase().split(" ");let r=o.length;for(;r--;){const s=o[r];let a=this.bindings[s];if(!s)return At(this.bindings,(i,l)=>{this.toggleEvent(l,!1),delete this.bindings[l]}),this;if(a){if(n){const i=Vr(a,l=>l.func===n);a=i.fail,this.bindings[s]=a,j(i.pass,l=>{l.removed=!0})}else a.length=0;a.length||(this.toggleEvent(e,!1),delete this.bindings[s])}}}else At(this.bindings,(o,r)=>{this.toggleEvent(r,!1)}),this.bindings={};return this}once(e,n,o){return this.on(e,n,o,{once:!0})}has(e){return e=e.toLowerCase(),!(!this.bindings[e]||0===this.bindings[e].length)}}const Qs=t=>(t._eventDispatcher||(t._eventDispatcher=new am({scope:t,toggleEvent:(e,n)=>{am.isNative(e)&&t.toggleNativeEvent&&t.toggleNativeEvent(e,n)}})),t._eventDispatcher),im={fire(t,e,n){return this.dispatch(t,e,n)},dispatch(t,e,n){const o=this;if(o.removed&&"remove"!==t&&"detach"!==t)return Jl(t.toLowerCase(),null!=e?e:{},o);const r=Qs(o).dispatch(t,e);if(!1!==n&&o.parent){let s=o.parent();for(;s&&!r.isPropagationStopped();)s.dispatch(t,r,!1),s=s.parent()}return r},on(t,e,n){return Qs(this).on(t,e,n)},off(t,e){return Qs(this).off(t,e)},once(t,e){return Qs(this).once(t,e)},hasEventListeners(t){return Qs(this).has(t)}},el=St.DOM;let Ho;const nl=(t,e)=>{if("selectionchange"===e)return t.getDoc();if(!t.inline&&/^mouse|touch|click|contextmenu|drop|dragover|dragend/.test(e))return t.getDoc().documentElement;const n=Yg(t);return n?(t.eventRoot||(t.eventRoot=el.select(n)[0]),t.eventRoot):t.getBody()},s1=(t,e,n)=>{var o;(o=t).hidden||Vo(o)?Vo(t)&&((o,r)=>{if("click"===r.type&&!tt.metaKeyPressed(r)){const s=N(r.target);(a=o,i=s,wo(i,"a",l=>kt(l,N(a.getBody()))).bind(l=>ca(l,"href"))).each(a=>{if(r.preventDefault(),/^#/.test(a)){const l=o.dom.select(`${a},[name="${i=a,He(i,"#")?(d=i,d.substring(1)):i}"]`);l.length&&o.selection.scrollIntoView(l[0],!0)}else window.open(a,"_blank","rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes");var d,i})}var a,i})(t,n):t.dispatch(e,n)},a1=(t,e)=>{let n;if(t.delegates||(t.delegates={}),t.delegates[e]||t.removed)return;const o=nl(t,e);if(Yg(t)){if(Ho||(Ho={},t.editorManager.on("removeEditor",()=>{t.editorManager.activeEditor||Ho&&(At(Ho,(r,s)=>{t.dom.unbind(nl(t,s))}),Ho=null)})),Ho[e])return;n=r=>{const s=r.target,a=t.editorManager.get();let i=a.length;for(;i--;){const l=a[i].getBody();(l===s||el.isChildOf(s,l))&&s1(a[i],e,r)}},Ho[e]=n,el.bind(o,e,n)}else n=r=>{s1(t,e,r)},el.bind(o,e,n),t.delegates[e]=n},i1=Rt(rt({},im),{bindPendingEventDelegates(){const t=this;z.each(t._pendingNativeEvents,e=>{a1(t,e)})},toggleNativeEvent(t,e){const n=this;"focus"!==t&&"blur"!==t&&(n.removed||(e?n.initialized?a1(n,t):n._pendingNativeEvents?n._pendingNativeEvents.push(t):n._pendingNativeEvents=[t]:n.initialized&&(n.dom.unbind(nl(n,t),t,n.delegates[t]),delete n.delegates[t])))},unbindAllNativeEvents(){const t=this,e=t.getBody(),n=t.dom;t.delegates&&(At(t.delegates,(o,r)=>{t.dom.unbind(nl(t,r),r,o)}),delete t.delegates),!t.inline&&e&&n&&(e.onload=null,n.unbind(t.getWin()),n.unbind(t.getDoc())),n&&(n.unbind(e),n.unbind(t.getContainer()))}}),aR=t=>at(t)?{value:t.split(/[ ,]/),valid:!0}:Wo(t,at)?{value:t,valid:!0}:{valid:!1,message:"The value must be a string[] or a comma/space separated string."},l1=(t,e)=>t+(la(e.message)?"":`. ${e.message}`),d1=t=>t.valid,lm=(t,e,n="")=>{const o=e(t);return zr(o)?o?{value:t,valid:!0}:{valid:!1,message:n}:o},iR=["design","readonly"],c1=(t,e,n,o)=>{const r=n[e.get()],s=n[o];try{s.activate()}catch(a){return void console.error(`problem while activating editor mode ${o}:`,a)}var a;r.deactivate(),r.editorReadOnly!==s.editorReadOnly&&((t,e)=>{const n=N(t.getBody());var o,r,s;s=e,Tl(o=n,r="mce-content-readonly")&&!1===s?rf(o,r):s&&Qr(o,r),e?(t.selection.controlSelection.hideResizeRect(),t._selectionOverrides.hideFakeCaret(),(o=>{C.from(o.selection.getNode()).each(r=>{r.removeAttribute("data-mce-selected")})})(t),t.readonly=!0,tl(n,!1),j(ke(n,'*[contenteditable="true"]'),o=>{ge(o,Dr,"true"),tl(o,!1)})):(t.readonly=!1,tl(n,!0),j(ke(n,'*[data-mce-contenteditable="true"]'),o=>{qe(o,Dr),tl(o,!0)}),sm(t,"StyleWithCSS",!1),sm(t,"enableInlineTableEditing",!1),sm(t,"enableObjectResizing",!1),(o=>Do(o)||(r=>{const s=vo(N(r.getElement()));return Gd(s).filter(a=>!(i=>{const l=i.classList;return void 0!==l&&(l.contains("tox-edit-area")||l.contains("tox-edit-area__iframe")||l.contains("mce-content-body"))})(a.dom)&&ei(r,a.dom)).isSome()})(o))(t)&&t.focus(),(o=>{o.selection.setRng(o.selection.getRng())})(t),t.nodeChanged())})(t,s.editorReadOnly),e.set(o),(a=t).dispatch("SwitchMode",{mode:o})},dm=z.each,cm=z.explode,lR={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},u1=z.makeMap("alt,ctrl,shift,meta,access"),dR=t=>{let e;const n={},o=wt.os.isMacOS()||wt.os.isiOS();dm(cm(t.toLowerCase(),"+"),s=>{s in u1?n[s]=!0:/^[0-9]{2,}$/.test(s)?n.keyCode=parseInt(s,10):(n.charCode=s.charCodeAt(0),n.keyCode=lR[s]||s.toUpperCase().charCodeAt(0))});const r=[n.keyCode];for(e in u1)n[e]?r.push(e):n[e]=!1;return n.id=r.join(","),n.access&&(n.alt=!0,o?n.ctrl=!0:n.shift=!0),n.meta&&(o?n.meta=!0:(n.ctrl=!0,n.meta=!1)),n};class m1{constructor(e){this.shortcuts={},this.pendingPatterns=[],this.editor=e;const n=this;e.on("keyup keypress keydown",o=>{!n.hasModifier(o)&&!n.isFunctionKey(o)||o.isDefaultPrevented()||(dm(n.shortcuts,r=>{if(n.matchShortcut(o,r))return n.pendingPatterns=r.subpatterns.slice(0),"keydown"===o.type&&n.executeShortcutAction(r),!0}),n.matchShortcut(o,n.pendingPatterns[0])&&(1===n.pendingPatterns.length&&"keydown"===o.type&&n.executeShortcutAction(n.pendingPatterns[0]),n.pendingPatterns.shift()))})}add(e,n,o,r){const s=this,a=s.normalizeCommandFunc(o);return dm(cm(z.trim(e)),i=>{const l=s.createShortcut(i,n,a,r);s.shortcuts[l.id]=l}),!0}remove(e){const n=this.createShortcut(e);return!!this.shortcuts[n.id]&&(delete this.shortcuts[n.id],!0)}normalizeCommandFunc(e){const n=this,o=e;return"string"==typeof o?()=>{n.editor.execCommand(o,!1,null)}:z.isArray(o)?()=>{n.editor.execCommand(o[0],o[1],o[2])}:o}createShortcut(e,n,o,r){const s=z.map(cm(e,">"),dR);return s[s.length-1]=z.extend(s[s.length-1],{func:o,scope:r||this.editor}),z.extend(s[0],{desc:this.editor.translate(n),subpatterns:s.slice(1)})}hasModifier(e){return e.altKey||e.ctrlKey||e.metaKey}isFunctionKey(e){return"keydown"===e.type&&e.keyCode>=112&&e.keyCode<=123}matchShortcut(e,n){return!!n&&n.ctrl===e.ctrlKey&&n.meta===e.metaKey&&n.alt===e.altKey&&n.shift===e.shiftKey&&!!(e.keyCode===n.keyCode||e.charCode&&e.charCode===n.charCode)&&(e.preventDefault(),!0)}executeShortcutAction(e){return e.func?e.func.call(e.scope):null}}const cR=()=>{const t=(()=>{const e={},n={},o={},r={},s={},a={},i={},l=(d,c)=>(u,f)=>d[u.toLowerCase()]=Rt(rt({},f),{type:c});return{addButton:l(e,"button"),addGroupToolbarButton:l(e,"grouptoolbarbutton"),addToggleButton:l(e,"togglebutton"),addMenuButton:l(e,"menubutton"),addSplitButton:l(e,"splitbutton"),addMenuItem:l(n,"menuitem"),addNestedMenuItem:l(n,"nestedmenuitem"),addToggleMenuItem:l(n,"togglemenuitem"),addAutocompleter:l(o,"autocompleter"),addContextMenu:l(s,"contextmenu"),addContextToolbar:l(a,"contexttoolbar"),addContextForm:l(a,"contextform"),addSidebar:l(i,"sidebar"),addIcon:(d,c)=>r[d.toLowerCase()]=c,getAll:()=>({buttons:e,menuItems:n,icons:r,popups:o,contextMenus:s,contextToolbars:a,sidebars:i})}})();return{addAutocompleter:t.addAutocompleter,addButton:t.addButton,addContextForm:t.addContextForm,addContextMenu:t.addContextMenu,addContextToolbar:t.addContextToolbar,addIcon:t.addIcon,addMenuButton:t.addMenuButton,addMenuItem:t.addMenuItem,addNestedMenuItem:t.addNestedMenuItem,addSidebar:t.addSidebar,addSplitButton:t.addSplitButton,addToggleButton:t.addToggleButton,addGroupToolbarButton:t.addGroupToolbarButton,addToggleMenuItem:t.addToggleMenuItem,getAll:t.getAll}},$o=St.DOM,f1=z.extend,uR=z.each;class ol{constructor(e,n,o){this.plugins={},this.contentCSS=[],this.contentStyles=[],this.loadedCSS={},this.isNotDirty=!1,this.editorManager=o,this.documentBaseUrl=o.documentBaseURL,f1(this,i1);const r=this;this.id=e,this.hidden=!1;const s=((t,e,n,o,r)=>{var s;const a=t?{mobile:KN(null!==(s=r.mobile)&&void 0!==s?s:{},e)}:{},i=((t,e)=>{const n=((s,a)=>{const i={},l={};return km(s,(d,c)=>Pt(t,c),xl(i),xl(l)),{t:i,f:l}})(e);return r=n.f,{sections:K(n.t),options:K(r)};var r})(["mobile"],Au(a,r)),l=z.extend(n,o,i.options(),t&&om(i,"mobile")?((d,c,u={})=>{const f=d.sections(),m=Nt(f,c).getOr({});return z.extend({},u,m)})(i,"mobile"):{},{external_plugins:GN(o,i.options())});return((d,c,u,f)=>{const m=Xs(u.forced_plugins),g=Xs(f.plugins),b=om(v=c,"mobile")?v.sections().mobile:{},p=((v,y,x,w)=>v&&om(y,"mobile")?w:x)(d,c,g,b.plugins?Xs(b.plugins):g),h=((v,y)=>[].concat(Xs(v)).concat(Xs(y)))(m,p);var v;return z.extend(f,{forced_plugins:m,plugins:h})})(t,i,o,l)})(t1||qN,t1,m=n,o.defaultOptions,m);var m;this.options=((f,m)=>{const g={},b={},p=(v,y,x)=>{const w=lm(y,x);return d1(w)?(b[v]=w.value,!0):(console.warn(l1(`Invalid value passed for the ${v} option`,w)),!1)},h=v=>ft(g,v);return{register:(v,y)=>{const x=at(y.processor)?(S=>{const k=(()=>{switch(S){case"array":return Wt;case"boolean":return zr;case"function":return xt;case"number":return an;case"object":return Ae;case"string":return at;case"string[]":return aR;case"object[]":return T=>Wo(T,Ae);case"regexp":return T=>sa(T,RegExp)}})();return T=>lm(T,k,`The value must be a ${S}.`)})(y.processor):y.processor,w=((S,k,T)=>{if(!Ce(k)){const O=lm(k,T);if(d1(O))return O.value;console.error(l1(`Invalid default value passed for the "${S}" option`,O))}})(v,y.default,x);g[v]=Rt(rt({},y),{default:w,processor:x}),Nt(b,v).orThunk(()=>Nt(m,v)).each(S=>p(v,S,x))},isRegistered:h,get:v=>Nt(b,v).orThunk(()=>Nt(g,v).map(y=>y.default)).getOrUndefined(),set:(v,y)=>{if(h(v)){const x=g[v];return x.immutable?(console.error(`"${v}" is an immutable option and cannot be updated`),!1):p(v,y,x.processor)}return console.warn(`"${v}" is not a registered option. Ensure the option has been registered before setting a value.`),!1},unset:v=>{const y=h(v);return y&&delete b[v],y},isSet:v=>ft(b,v)}})(0,s),(f=>{const m=f.options.register;m("id",{processor:"string",default:f.id}),m("selector",{processor:"string"}),m("target",{processor:"object"}),m("suffix",{processor:"string"}),m("cache_suffix",{processor:"string"}),m("base_url",{processor:"string"}),m("referrer_policy",{processor:"string",default:""}),m("language_load",{processor:"boolean"}),m("inline",{processor:"boolean",default:!1}),m("iframe_attrs",{processor:"object",default:{}}),m("doctype",{processor:"string",default:"<!DOCTYPE html>"}),m("document_base_url",{processor:"string",default:f.documentBaseUrl}),m("body_id",{processor:Ug(f,"tinymce"),default:"tinymce"}),m("body_class",{processor:Ug(f),default:""}),m("content_security_policy",{processor:"string",default:""}),m("br_in_pre",{processor:"boolean",default:!0}),m("forced_root_block",{processor:g=>{const b=at(g)&&On(g);return b?{value:g,valid:b}:{valid:!1,message:"Must be a non-empty string."}},default:"p"}),m("forced_root_block_attrs",{processor:"object",default:{}}),m("br_newline_selector",{processor:"string",default:".mce-toc h2,figcaption,caption"}),m("no_newline_selector",{processor:"string",default:""}),m("keep_styles",{processor:"boolean",default:!0}),m("end_container_on_empty_block",{processor:"boolean",default:!1}),m("font_size_style_values",{processor:"string",default:"xx-small,x-small,small,medium,large,x-large,xx-large"}),m("font_size_legacy_values",{processor:"string",default:"xx-small,small,medium,large,x-large,xx-large,300%"}),m("font_size_classes",{processor:"string",default:""}),m("automatic_uploads",{processor:"boolean",default:!0}),m("images_reuse_filename",{processor:"boolean",default:!1}),m("images_replace_blob_uris",{processor:"boolean",default:!0}),m("icons",{processor:"string",default:""}),m("icons_url",{processor:"string",default:""}),m("images_upload_url",{processor:"string",default:""}),m("images_upload_base_path",{processor:"string",default:""}),m("images_upload_base_path",{processor:"string",default:""}),m("images_upload_credentials",{processor:"boolean",default:!1}),m("images_upload_handler",{processor:"function"}),m("language",{processor:"string",default:"en"}),m("language_url",{processor:"string",default:""}),m("entity_encoding",{processor:"string",default:"named"}),m("indent",{processor:"boolean",default:!0}),m("indent_before",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),m("indent_after",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),m("indent_use_margin",{processor:"boolean",default:!1}),m("indentation",{processor:"string",default:"40px"}),m("content_css",{processor:g=>{const b=!1===g||at(g)||Wo(g,at);return b?at(g)?{value:vt(g.split(","),Qo),valid:b}:Wt(g)?{value:g,valid:b}:!1===g?{value:[],valid:b}:{value:g,valid:b}:{valid:!1,message:"Must be false, a string or an array of strings."}},default:bd(f)?[]:["default"]}),m("content_style",{processor:"string"}),m("content_css_cors",{processor:"boolean",default:!1}),m("font_css",{processor:g=>{const b=at(g)||Wo(g,at);return b?{value:Wt(g)?g:vt(g.split(","),Qo),valid:b}:{valid:!1,message:"Must be a string or an array of strings."}},default:[]}),m("inline_boundaries",{processor:"boolean",default:!0}),m("inline_boundaries_selector",{processor:"string",default:"a[href],code,.mce-annotation"}),m("object_resizing",{processor:g=>{const b=zr(g)||at(g);return b?!1===g||fd.isiPhone()||fd.isiPad()?{value:"",valid:b}:{value:!0===g?"table,img,figure.image,div,video,iframe":g,valid:b}:{valid:!1,message:"Must be boolean or a string"}},default:!Wx}),m("resize_img_proportional",{processor:"boolean",default:!0}),m("event_root",{processor:"object"}),m("service_message",{processor:"string"}),m("theme",{processor:g=>!1===g||at(g)||xt(g),default:"silver"}),m("theme_url",{processor:"string"}),m("formats",{processor:"object"}),m("format_empty_lines",{processor:"boolean",default:!1}),m("preview_styles",{processor:g=>{const b=!1===g||at(g);return b?{value:!1===g?"":g,valid:b}:{valid:!1,message:"Must be false or a string"}},default:"font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"}),m("custom_ui_selector",{processor:"string",default:""}),m("hidden_input",{processor:"boolean",default:!0}),m("submit_patch",{processor:"boolean",default:!0}),m("encoding",{processor:"string"}),m("add_form_submit_trigger",{processor:"boolean",default:!0}),m("add_unload_trigger",{processor:"boolean",default:!0}),m("custom_undo_redo_levels",{processor:"number",default:0}),m("disable_nodechange",{processor:"boolean",default:!1}),m("readonly",{processor:"boolean",default:!1}),m("plugins",{processor:"string[]",default:[]}),m("external_plugins",{processor:"object"}),m("forced_plugins",{processor:"string[]"}),m("model",{processor:"string",default:f.hasPlugin("rtc")?"plugin":"dom"}),m("model_url",{processor:"string"}),m("block_unsupported_drop",{processor:"boolean",default:!0}),m("visual",{processor:"boolean",default:!0}),m("visual_table_class",{processor:"string",default:"mce-item-table"}),m("visual_anchor_class",{processor:"string",default:"mce-item-anchor"}),m("iframe_aria_text",{processor:"string",default:"Rich Text Area. Press ALT-0 for help."}),m("setup",{processor:"function"}),m("init_instance_callback",{processor:"function"}),m("url_converter",{processor:"function",default:f.convertURL}),m("url_converter_scope",{processor:"object",default:f}),m("urlconverter_callback",{processor:"function"}),m("allow_conditional_comments",{processor:"boolean",default:!1}),m("allow_html_data_urls",{processor:"boolean",default:!1}),m("allow_svg_data_urls",{processor:"boolean"}),m("allow_html_in_named_anchor",{processor:"boolean",default:!1}),m("allow_script_urls",{processor:"boolean",default:!1}),m("allow_unsafe_link_target",{processor:"boolean",default:!1}),m("convert_fonts_to_spans",{processor:"boolean",default:!0,deprecated:!0}),m("fix_list_elements",{processor:"boolean",default:!1}),m("preserve_cdata",{processor:"boolean",default:!1}),m("remove_trailing_brs",{processor:"boolean"}),m("inline_styles",{processor:"boolean",default:!0,deprecated:!0}),m("element_format",{processor:"string",default:"html"}),m("entities",{processor:"string"}),m("schema",{processor:"string",default:"html5"}),m("convert_urls",{processor:"boolean",default:!0}),m("relative_urls",{processor:"boolean",default:!0}),m("remove_script_host",{processor:"boolean",default:!0}),m("custom_elements",{processor:"string"}),m("extended_valid_elements",{processor:"string"}),m("invalid_elements",{processor:"string"}),m("invalid_styles",{processor:gd}),m("valid_children",{processor:"string"}),m("valid_classes",{processor:gd}),m("valid_elements",{processor:"string"}),m("valid_styles",{processor:gd}),m("verify_html",{processor:"boolean",default:!0}),m("auto_focus",{processor:g=>at(g)||!0===g}),m("browser_spellcheck",{processor:"boolean",default:!1}),m("protect",{processor:"array"}),m("images_file_types",{processor:"string",default:"jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp"}),m("deprecation_warnings",{processor:"boolean",default:!0}),m("a11y_advanced_options",{processor:"boolean",default:!1}),m("api_key",{processor:"string"}),m("paste_block_drop",{processor:"boolean",default:!1}),m("paste_data_images",{processor:"boolean",default:!0}),m("paste_preprocess",{processor:"function"}),m("paste_postprocess",{processor:"function"}),m("paste_webkit_styles",{processor:"string",default:"none"}),m("paste_remove_styles_if_webkit",{processor:"boolean",default:!0}),m("paste_merge_formats",{processor:"boolean",default:!0}),m("smart_paste",{processor:"boolean",default:!0}),m("paste_as_text",{processor:"boolean",default:!1}),m("paste_tab_spaces",{processor:"number",default:4}),m("text_patterns",{processor:g=>Wo(g,Ae)||!1===g?{value:qx(!1===g?[]:g),valid:!0}:{valid:!1,message:"Must be an array of objects or false."},default:[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"#",format:"h1"},{start:"##",format:"h2"},{start:"###",format:"h3"},{start:"####",format:"h4"},{start:"#####",format:"h5"},{start:"######",format:"h6"},{start:"1. ",cmd:"InsertOrderedList"},{start:"* ",cmd:"InsertUnorderedList"},{start:"- ",cmd:"InsertUnorderedList"}]}),m("noneditable_class",{processor:"string",default:"mceNonEditable"}),m("editable_class",{processor:"string",default:"mceEditable"}),m("noneditable_regexp",{processor:g=>Wo(g,Fg)?{value:g,valid:!0}:Fg(g)?{value:[g],valid:!0}:{valid:!1,message:"Must be a RegExp or an array of RegExp."},default:[]}),m("table_tab_navigation",{processor:"boolean",default:!0}),f.on("ScriptsLoaded",()=>{m("directionality",{processor:"string",default:Je.isRtl()?"rtl":void 0}),m("placeholder",{processor:"string",default:Kx.getAttrib(f.getElement(),"placeholder")})})})(r);const a=this.options.get;a("deprecation_warnings")&&((f,m)=>{((g,b)=>{const p=(t=>{const e=it(gE,o=>ft(t,o)),n=t.forced_root_block;return!1!==n&&""!==n||e.push("forced_root_block (false only)"),qr(e)})(g),h=(t=>{const e=z.makeMap(t.plugins," "),n=it(pE,o=>ft(e,o));return qr(n)})(b),v=h.length>0,y=p.length>0,x="mobile"===b.theme;if(v||y||x){const w="\n- ",S=x?`\n\nThemes:${w}mobile`:"",k=v?`\n\nPlugins:${w}${h.join(w)}`:"",T=y?`\n\nOptions:${w}${p.join(w)}`:"";console.warn("The following deprecated features are currently enabled and have been removed in TinyMCE 6.0. These features will no longer work and should be removed from the TinyMCE configuration. See https://www.tiny.cloud/docs/tinymce/6/migration-from-5x/ for more information."+S+k+T)}})(f,m)})(n,s);const i=a("suffix");i&&(o.suffix=i),this.suffix=o.suffix;const l=a("base_url");l&&o._setBaseUrl(l),this.baseUri=o.baseURI;const d=pd(r);d&&(Pn.ScriptLoader._setReferrerPolicy(d),St.DOM.styleSheetLoader._setReferrerPolicy(d)),ie.languageLoad=a("language_load"),ie.baseURL=o.baseURL,this.setDirty(!1),this.documentBaseURI=new nn(zg(r),{base_uri:this.baseUri}),this.baseURI=this.baseUri,this.inline=bd(r),this.shortcuts=new m1(this),this.editorCommands=new o1(this),(t=>{var e;(t=>{(e=>{const n=o=>()=>{j("left,center,right,justify".split(","),r=>{o!==r&&e.formatter.remove("align"+r)}),"none"!==o&&(e.formatter.toggle("align"+o,void 0),e.nodeChanged())};e.editorCommands.addCommands({JustifyLeft:n("left"),JustifyCenter:n("center"),JustifyRight:n("right"),JustifyFull:n("justify"),JustifyNone:n("none")})})(t),(e=>{const n=o=>()=>{const r=e.selection,s=r.isCollapsed()?[e.dom.getParent(r.getNode(),e.dom.isBlock)]:r.getSelectedBlocks();return It(s,a=>ut(e.formatter.matchNode(a,o)))};e.editorCommands.addCommands({JustifyLeft:n("alignleft"),JustifyCenter:n("aligncenter"),JustifyRight:n("alignright"),JustifyFull:n("alignjustify")},"state")})(t)})(t),(e=t).editorCommands.addCommands({"Cut,Copy,Paste":n=>{const o=e.getDoc();let r;try{o.execCommand(n)}catch(s){r=!0}if("paste"!==n||o.queryCommandEnabled(n)||(r=!0),r||!o.queryCommandSupported(n)){let s=e.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");(wt.os.isMacOS()||wt.os.isiOS())&&(s=s.replace(/Ctrl\+/g,"\u2318+")),e.notificationManager.open({text:s,type:"error"})}}}),(e=>{e.editorCommands.addCommands({mceAddUndoLevel:()=>{e.undoManager.add()},mceEndUndoLevel:()=>{e.undoManager.add()},Undo:()=>{e.undoManager.undo()},Redo:()=>{e.undoManager.redo()}})})(t),(e=>{e.editorCommands.addCommands({mceSelectNodeDepth:(n,o,r)=>{let s=0;e.dom.getParent(e.selection.getNode(),a=>{if(1===a.nodeType&&s++===r)return e.selection.select(a),!1},e.getBody())},mceSelectNode:(n,o,r)=>{e.selection.select(r)},selectAll:()=>{const n=e.dom.getParent(e.selection.getStart(),Ln);if(n){const o=e.dom.createRng();o.selectNodeContents(n),e.selection.setRng(o)}}})})(t),(e=>{e.editorCommands.addCommands({mceCleanup:()=>{const n=e.selection.getBookmark();e.setContent(e.getContent()),e.selection.moveToBookmark(n)},insertImage:(n,o,r)=>{Zi(e,e.dom.createHTML("img",{src:r}))},insertHorizontalRule:()=>{e.execCommand("mceInsertContent",!1,"<hr>")},insertText:(n,o,r)=>{Zi(e,e.dom.encode(r))},insertHTML:(n,o,r)=>{Zi(e,r)},mceInsertContent:(n,o,r)=>{Zi(e,r)},mceSetContent:(n,o,r)=>{e.setContent(r)},mceReplaceContent:(n,o,r)=>{e.execCommand("mceInsertContent",!1,r.replace(/\{\$selection\}/g,e.selection.getContent({format:"text"})))},mceNewDocument:()=>{e.setContent("")}})})(t),(e=>{const n=(o,r,s)=>{const a=at(s)?{href:s}:s,i=e.dom.getParent(e.selection.getNode(),"a");Ae(a)&&at(a.href)&&(a.href=a.href.replace(/ /g,"%20"),i&&a.href||e.formatter.remove("link"),a.href&&e.formatter.apply("link",a,i))};e.editorCommands.addCommands({unlink:()=>{if(e.selection.isCollapsed()){const o=e.dom.getParent(e.selection.getStart(),"a");o&&e.dom.remove(o,!0)}else e.formatter.remove("link")},mceInsertLink:n,createLink:n})})(t),(e=>{e.editorCommands.addCommands({Indent:()=>{qv(e,"indent")},Outdent:()=>{Wv(e)}}),e.editorCommands.addCommands({Outdent:()=>Vv(e)},"state")})(t),(e=>{e.editorCommands.addCommands({insertParagraph:()=>{Vu(e)},mceInsertNewLine:(n,o,r)=>{Vu(e,r)},InsertLineBreak:(n,o,r)=>{Zy(e,r)}})})(t),(e=>{var n;(n=e).editorCommands.addCommands({"InsertUnorderedList,InsertOrderedList":o=>{n.getDoc().execCommand(o);const r=n.dom.getParent(n.selection.getNode(),"ol,ul");if(r){const s=r.parentNode;if(/^(H[1-6]|P|ADDRESS|PRE)$/.test(s.nodeName)){const a=n.selection.getBookmark();n.dom.split(s,r),n.selection.moveToBookmark(a)}}}}),(n=>{n.editorCommands.addCommands({"InsertUnorderedList,InsertOrderedList":o=>{const r=n.dom.getParent(n.selection.getNode(),"ul,ol");return r&&("insertunorderedlist"===o&&"UL"===r.tagName||"insertorderedlist"===o&&"OL"===r.tagName)}},"state")})(e)})(t),(e=>{(n=>{const o=(r,s)=>{n.formatter.toggle(r,s),n.nodeChanged()};n.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":r=>{o(r)},"ForeColor,HiliteColor":(r,s,a)=>{o(r,{value:a})},BackColor:(r,s,a)=>{o("hilitecolor",{value:a})},FontName:(r,s,a)=>{((i,l)=>{const d=n1(i,l);i.formatter.toggle("fontname",{value:nR(d)}),i.nodeChanged()})(n,a)},FontSize:(r,s,a)=>{var i;(i=n).formatter.toggle("fontsize",{value:n1(i,a)}),i.nodeChanged()},LineHeight:(r,s,a)=>{var i;(i=n).formatter.toggle("lineheight",{value:String(a)}),i.nodeChanged()},Lang:(r,s,a)=>{o(r,{value:a.code,customValue:a.customCode})},RemoveFormat:r=>{n.formatter.remove(r)},mceBlockQuote:()=>{o("blockquote")},FormatBlock:(r,s,a)=>{o(at(a)?a:"p")},mceToggleFormat:(r,s,a)=>{o(a)}})})(e),(n=>{const o=r=>n.formatter.match(r);n.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":r=>o(r),mceBlockQuote:()=>o("blockquote")},"state"),n.editorCommands.addQueryValueHandler("FontName",()=>{return rm(r=n,s=>tR(r.getBody(),s.dom)).getOr("");var r}),n.editorCommands.addQueryValueHandler("FontSize",()=>{return rm(r=n,s=>ZN(r.getBody(),s.dom)).getOr("");var r}),n.editorCommands.addQueryValueHandler("LineHeight",()=>{return rm(r=n,s=>{const a=N(r.getBody());return _c(s,l=>ga(l,"line-height"),X(kt,a)).getOrThunk(()=>{const l=parseFloat(un(s,"line-height")),d=parseFloat(un(s,"font-size"));return String(l/d)})}).getOr("");var r})})(e)})(t),(e=>{e.editorCommands.addCommands({mceRemoveNode:(n,o,r)=>{const s=null!=r?r:e.selection.getNode();if(s!==e.getBody()){const a=e.selection.getBookmark();e.dom.remove(s,!0),e.selection.moveToBookmark(a)}},mcePrint:()=>{e.getWin().print()},mceFocus:(n,o,r)=>{var s;(s=e).removed||(r?Zd(s):(i=>{const l=i.selection,d=i.getBody();let c=l.getRng();i.quirks.refreshContentEditable(),void 0!==i.bookmark&&!1===Do(i)&&Xd(i).each(f=>{i.selection.setRng(f),c=f});const u=(f=i,m=l.getNode(),f.dom.getParent(m,g=>"true"===f.dom.getContentEditable(g)));var f,m;if(i.dom.isChildOf(u,d))return Jd(u),Sh(i,c),void Zd(i);i.inline||(wt.browser.isOpera()||Jd(d),i.getWin().focus()),(wt.browser.isFirefox()||i.inline)&&(Jd(d),Sh(i,c)),Zd(i)})(s))},mceToggleVisualAid:()=>{e.hasVisual=!e.hasVisual,e.addVisual()}})})(t)})(this);const c=a("cache_suffix");c&&(wt.cacheSuffix=c.replace(/^[\?\&]+/,"")),this.ui={registry:cR(),styleSheetLoader:void 0,show:pt,hide:pt,setEnabled:pt,isEnabled:jt},this.mode=(f=>{const m=Ht("design"),g=Ht({design:{activate:pt,deactivate:pt,editorReadOnly:!1},readonly:{activate:pt,deactivate:pt,editorReadOnly:!0}});return(b=f).serializer?r1(b):b.on("PreInit",()=>{r1(b)}),(b=>{b.on("ShowCaret",p=>{Vo(b)&&p.preventDefault()}),b.on("ObjectSelected",p=>{Vo(b)&&p.preventDefault()})})(f),{isReadOnly:()=>Vo(f),set:b=>((p,h,v,y)=>{if(y!==v.get()){if(!ft(h,y))throw new Error(`Editor mode '${y}' is invalid`);p.initialized?c1(p,v,h,y):p.on("init",()=>c1(p,v,h,y))}})(f,g.get(),m,b),get:()=>m.get(),register:(b,p)=>{g.set(((h,v,y)=>{if(Pt(iR,v))throw new Error(`Cannot override default mode ${v}`);return Rt(rt({},h),{[v]:Rt(rt({},y),{deactivate:()=>{try{y.deactivate()}catch(x){console.error(`problem while deactivating editor mode ${v}:`,x)}}})})})(g.get(),b,p))}};var b})(r),o.dispatch("SetupEditor",{editor:this});const u=Iw(r);xt(u)&&u.call(r,r)}render(){(e=>{const n=e.id;Je.setCode(qg(e));const o=()=>{jo.unbind(window,"ready",o),e.render()};if(!Eo.Event.domLoaded)return void jo.bind(window,"ready",o);if(!e.getElement())return;const r=N(e.getElement()),s=Zm(r);var l;e.on("remove",()=>{ym(r.dom.attributes,i=>qe(r,i.name)),cn(r,s)}),e.ui.styleSheetLoader=If.forElement(r,{contentCssCors:Tw(l=e),referrerPolicy:pd(l)}),bd(e)?e.inline=!0:(e.orgVisibility=e.getElement().style.visibility,e.getElement().style.visibility="hidden");const a=e.getElement().form||jo.getParent(n,"form");a&&(e.formElement=a,Ew(e)&&!Il(e.getElement())&&(jo.insertAfter(jo.create("input",{type:"hidden",name:n}),n),e.hasHiddenInput=!0),e.formEventDelegate=i=>{e.dispatch(i.type,i)},jo.bind(a,"submit reset",e.formEventDelegate),e.on("reset",()=>{e.resetContent()}),!_w(e)||a.submit.nodeType||a.submit.length||a._mceOldSubmit||(a._mceOldSubmit=a.submit,a.submit=()=>(e.editorManager.triggerSave(),e.setDirty(!1),a._mceOldSubmit(a)))),e.windowManager=F0(e),e.notificationManager=I0(e),"xml"===e.options.get("encoding")&&e.on("GetContent",i=>{i.save&&(i.content=jo.encode(i.content))}),Nw(e)&&e.on("submit",()=>{e.initialized&&e.save()}),Rw(e)&&(e._beforeUnload=()=>{!e.initialized||e.destroyed||e.isHidden()||e.save({format:"raw",no_events:!0,set_dirty:!1})},e.editorManager.on("BeforeUnload",e._beforeUnload)),e.editorManager.add(e),((t,e)=>{const n=Pn.ScriptLoader,o=()=>{!t.removed&&(r=>{const s=ur(r);return!at(s)||ut(Uo.get(s))})(t)&&(r=>{const s=hd(r);return ut(Sr.get(s))})(t)&&(t=>{t.dispatch("ScriptsLoaded"),(o=>{const r=z.trim($g(o)),s=o.ui.registry.getAll().icons,a=rt(rt({},Ei.get("default").icons),Ei.get(r).icons);At(a,(i,l)=>{ft(s,l)||o.ui.registry.addIcon(l,i)})})(t),(o=>{const r=ur(o);if(at(r)){const s=Uo.get(r);o.theme=s(o,Uo.urls[r])||{},xt(o.theme.init)&&o.theme.init(o,Uo.urls[r]||o.documentBaseUrl.replace(/\/$/,""))}else o.theme={}})(t),(o=>{const r=hd(o),s=Sr.get(r);o.model=s(o,Sr.urls[r])})(t),(o=>{const r=[];j(Ma(o),s=>{((a,i,l)=>{const d=Er.get(l),c=Er.urls[l]||a.documentBaseUrl.replace(/\/$/,"");if(l=z.trim(l),d&&-1===z.inArray(i,l)){if(a.plugins[l])return;try{const u=d(a,c)||{};a.plugins[l]=u,xt(u.init)&&(u.init(a,c),i.push(l))}catch(u){((f,m,g)=>{const b=Je.translate(["Failed to initialize plugin: {0}",m]);Yp(f,"PluginLoadError",{message:b}),Ni(b,g),_i(f,b)})(a,l,u)}}})(o,r,s.replace(/^\-/,""))})})(t);const e=(t=>{const e=t.getElement();return t.orgDisplay=e.style.display,at(ur(t))?t.theme.renderUI():xt(ur(t))?(n=>{const o=n.getElement(),r=ur(n)(n,o);return r.editorContainer.nodeType&&(r.editorContainer.id=r.editorContainer.id||n.id+"_parent"),r.iframeContainer&&r.iframeContainer.nodeType&&(r.iframeContainer.id=r.iframeContainer.id||n.id+"_iframecontainer"),r.height=r.iframeHeight?r.iframeHeight:o.offsetHeight,r})(t):(n=>{const o=n.getElement();return n.inline?XC(null):(r=>{const s=YC.create("div");return YC.insertAfter(s,r),XC(s)})(o)})(t)})(t);((o,r)=>{const s={show:C.from(r.show).getOr(pt),hide:C.from(r.hide).getOr(pt),isEnabled:C.from(r.isEnabled).getOr(jt),setEnabled:a=>{o.mode.isReadOnly()||C.from(r.setEnabled).each(i=>i(a))}};o.ui=rt(rt({},o.ui),s)})(t,C.from(e.api).getOr({}));const n={editorContainer:e.editorContainer,iframeContainer:e.iframeContainer};return t.editorContainer=n.editorContainer?n.editorContainer:null,(o=t).contentCSS=o.contentCSS.concat(z0(r=o,mw(r)),(r=>z0(r,Kg(r)))(o)),t.inline?GC(t):((o,r)=>{((s,a)=>{const i=s.translate("Rich Text Area"),l=ca(N(s.getElement()),"tabindex").bind(j1),d=((c,u,f,m)=>{const g=Ft("iframe");return m.each(b=>ge(g,"tabindex",b)),cn(g,f),cn(g,{id:c+"_ifr",frameBorder:"0",allowTransparency:"true",title:u}),Qr(g,"tox-edit-area__iframe"),g})(s.id,i,Gx(s),l).dom;d.onload=()=>{d.onload=null,s.dispatch("load")},s.contentAreaContainer=a.iframeContainer,s.iframeElement=d,s.iframeHTML=(c=>{let u=Yx(c)+"<html><head>";zg(c)!==c.documentBaseUrl&&(u+='<base href="'+c.documentBaseURI.getURI()+'" />'),u+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';const f=Xx(c),m=Qx(c),g=c.translate(Mw(c));return jg(c)&&(u+='<meta http-equiv="Content-Security-Policy" content="'+jg(c)+'" />'),u+=`</head><body id="${f}" class="mce-content-body ${m}" data-id="${c.id}" aria-label="${g}"><br></body></html>`,u})(s),Ji.add(a.iframeContainer,d)})(o,r),r.editorContainer&&(Ji.get(r.editorContainer).style.display=o.orgDisplay,o.hidden=Ji.isHidden(r.editorContainer)),o.getElement().style.display="none",Ji.setAttrib(o.id,"aria-hidden","true"),GC(o)})(t,n);var o,r})(t)};((r,s)=>{const a=ur(r);if(at(a)&&!QC(a)&&!ft(Uo.urls,a)){const i=yw(r),l=i?r.documentBaseURI.toAbsolute(i):`themes/${a}/theme${s}.js`;Uo.load(a,l).catch(()=>{Ms(r,"ThemeLoadError",Is("theme",l,a))})}})(t,e),((r,s)=>{const a=hd(r);if("plugin"!==a&&!ft(Sr.urls,a)){const i=Cw(r),l=at(i)?r.documentBaseURI.toAbsolute(i):`models/${a}/model${s}.js`;Sr.load(a,l).catch(()=>{Ms(r,"ModelLoadError",Is("model",l,a))})}})(t,e),((r,s)=>{const a=qg(s),i=cw(s);if(!1===Je.hasCode(a)&&"en"!==a){const l=On(i)?i:`${s.editorManager.baseURL}/langs/${a}.js`;r.add(l).catch(()=>{Ms(s,"LanguageLoadError",Is("language",l,a))})}})(n,t),((r,s,a)=>{const i=JC(s,"default",a),l=(d=s,C.from(rw(d)).filter(On).map(c=>({url:c,name:C.none()}))).orThunk(()=>JC(s,$g(s),""));var d;j((d=>{const c=[],u=f=>{c.push(f)};for(let f=0;f<d.length;f++)d[f].each(u);return c})([i,l]),d=>{r.add(d.url).catch(()=>{var c,u,f;c=s,u=d.url,f=d.name.getOrUndefined(),Ms(c,"IconsLoadError",Is("icons",u,f))})})})(n,t,e),((r,s)=>{const a=(i,l)=>{Er.load(i,l).catch(()=>{Ms(r,"PluginLoadError",Is("plugin",l,i))})};At(Bw(r),(i,l)=>{a(l,i),r.options.set("plugins",Ma(r).concat(l))}),j(Ma(r),i=>{!(i=z.trim(i))||Er.urls[i]||QC(i)||a(i,`plugins/${i}/plugin${s}.js`)})})(t,e),n.loadQueue().then(o,o)})(e,e.suffix)})(this)}focus(e){this.execCommand("mceFocus",!1,e)}hasFocus(){return Do(this)}translate(e){return Je.translate(e)}getParam(e,n,o){const r=this.options;return r.isRegistered(e)||(ut(o)?r.register(e,{processor:o,default:n}):r.register(e,{processor:jt,default:n})),r.isSet(e)||Ce(n)?r.get(e):n}hasPlugin(e,n){return!(!Pt(Ma(this),e)||n&&void 0===Er.get(e))}nodeChanged(e){this._nodeChangeDispatcher.nodeChanged(e)}addCommand(e,n,o){this.editorCommands.addCommand(e,n,o)}addQueryStateHandler(e,n,o){this.editorCommands.addQueryStateHandler(e,n,o)}addQueryValueHandler(e,n,o){this.editorCommands.addQueryValueHandler(e,n,o)}addShortcut(e,n,o,r){this.shortcuts.add(e,n,o,r)}execCommand(e,n,o,r){return this.editorCommands.execCommand(e,n,o,r)}queryCommandState(e){return this.editorCommands.queryCommandState(e)}queryCommandValue(e){return this.editorCommands.queryCommandValue(e)}queryCommandSupported(e){return this.editorCommands.queryCommandSupported(e)}show(){const e=this;e.hidden&&(e.hidden=!1,e.inline?e.getBody().contentEditable="true":($o.show(e.getContainer()),$o.hide(e.id)),e.load(),e.dispatch("show"))}hide(){const e=this;e.hidden||(e.save(),e.inline?(e.getBody().contentEditable="false",e===e.editorManager.focusedEditor&&(e.editorManager.focusedEditor=null)):($o.hide(e.getContainer()),$o.setStyle(e.id,"display",e.orgDisplay)),e.hidden=!0,e.dispatch("hide"))}isHidden(){return this.hidden}setProgressState(e,n){this.dispatch("ProgressState",{state:e,time:n})}load(e){const n=this;let o,r=n.getElement();if(n.removed)return"";if(r){(e=e||{}).load=!0;const s=Il(r)?r.value:r.innerHTML;return o=n.setContent(s,e),e.element=r,e.no_events||n.dispatch("LoadContent",e),e.element=r=null,o}}save(e){const n=this;let o,r,s=n.getElement();if(s&&n.initialized&&!n.removed)return(e=e||{}).save=!0,e.element=s,o=e.content=n.getContent(e),e.no_events||n.dispatch("SaveContent",e),"raw"===e.format&&n.dispatch("RawSaveContent",e),o=e.content,Il(s)?s.value=o:(!e.is_removing&&n.inline||(s.innerHTML=o),(r=$o.getParent(n.id,"form"))&&uR(r.elements,a=>{if(a.name===n.id)return a.value=o,!1})),e.element=s=null,!1!==e.set_dirty&&n.setDirty(!1),o}setContent(e,n){return tu(this,e,n)}getContent(e){return((n,o={})=>{const r=(a=o.format?o.format:"html",Rt(rt({},o),{format:a,get:!0,getInner:!0}));var a;return p0(n,r).fold(me,s=>{const a=(l=s,Zc(n).editor.getContent(l));var l;return h0(n,a,s)})})(this,e)}insertContent(e,n){n&&(e=f1({content:e},n)),this.execCommand("mceInsertContent",!1,e)}resetContent(e){void 0===e?tu(this,this.startContent,{format:"raw"}):tu(this,e),this.undoManager.reset(),this.setDirty(!1),this.nodeChanged()}isDirty(){return!this.isNotDirty}setDirty(e){const n=!this.isNotDirty;this.isNotDirty=!e,e&&e!==n&&this.dispatch("dirty")}getContainer(){const e=this;return e.container||(e.container=$o.get(e.editorContainer||e.id+"_parent")),e.container}getContentAreaContainer(){return this.contentAreaContainer}getElement(){return this.targetElm||(this.targetElm=$o.get(this.id)),this.targetElm}getWin(){const e=this;let n;return e.contentWindow||(n=e.iframeElement,n&&(e.contentWindow=n.contentWindow)),e.contentWindow}getDoc(){const e=this;let n;return e.contentDocument||(n=e.getWin(),n&&(e.contentDocument=n.document)),e.contentDocument}getBody(){const e=this.getDoc();return this.bodyElement||(e?e.body:null)}convertURL(e,n,o){const r=this,s=r.options.get,a=Uw(r);return xt(a)?a.call(r,e,o,!0,n):!s("convert_urls")||o&&"LINK"===o.nodeName||0===e.indexOf("file:")||0===e.length?e:s("relative_urls")?r.documentBaseURI.toRelative(e):e=r.documentBaseURI.toAbsolute(e,s("remove_script_host"))}addVisual(e){((n,o)=>{var s;s=o,Lt(this).editor.addVisual(s)})(0,e)}remove(){(e=>{if(!e.removed){const{_selectionOverrides:n,editorUpload:o}=e,r=e.getBody(),s=e.getElement();r&&e.save({is_removing:!0}),e.removed=!0,e.unbindAllNativeEvents(),e.hasHiddenInput&&s&&ki.remove(s.nextSibling),e.dispatch("remove"),e.editorManager.remove(e),!e.inline&&r&&ki.setStyle((a=e).id,"display",a.orgDisplay),(a=>{a.dispatch("detach")})(e),ki.remove(e.getContainer()),Si(n),Si(o),e.destroy()}var a})(this)}destroy(e){((n,o)=>{const{selection:r,dom:s}=n;var a;n.destroyed||(o||n.removed?(o||(n.editorManager.off("beforeunload",n._beforeUnload),n.theme&&n.theme.destroy&&n.theme.destroy(),Si(r),Si(s)),(a=>{const i=a.formElement;i&&(i._mceOldSubmit&&(i.submit=i._mceOldSubmit,i._mceOldSubmit=null),ki.unbind(i,"submit reset",a.formEventDelegate))})(n),(a=n).contentAreaContainer=a.formElement=a.container=a.editorContainer=null,a.bodyElement=a.contentDocument=a.contentWindow=null,a.iframeElement=a.targetElm=null,a.selection&&(a.selection=a.selection.win=a.selection.dom=a.selection.dom.doc=null),n.destroyed=!0):n.remove())})(this,e)}uploadImages(){return this.editorUpload.uploadImages()}_scanForImages(){return this.editorUpload.scanForImages()}}const Lr=St.DOM,rl=z.each;let sl,g1=!1,ve=[];const al=t=>{const e=t.type;rl(co.get(),n=>{switch(e){case"scroll":n.dispatch("ScrollWindow",t);break;case"resize":n.dispatch("ResizeWindow",t)}})},p1=t=>{if(t!==g1){const e=St.DOM;t?(e.bind(window,"resize",al),e.bind(window,"scroll",al)):(e.unbind(window,"resize",al),e.unbind(window,"scroll",al)),g1=t}},h1=t=>{const e=ve;return ve=it(ve,n=>t!==n),co.activeEditor===t&&(co.activeEditor=ve.length>0?ve[0]:null),co.focusedEditor===t&&(co.focusedEditor=null),e.length!==ve.length},mR="CSS1Compat"!==document.compatMode,co=Rt(rt({},im),{baseURI:null,baseURL:null,defaultOptions:{},documentBaseURL:null,suffix:null,majorVersion:"6",minorVersion:"0.2",releaseDate:"2022-04-27",i18n:Je,activeEditor:null,focusedEditor:null,setup(){const t=this;let e,n,o="";n=nn.getDocumentBaseUrl(document.location),/^[^:]+:\/\/\/?[^\/]+\//.test(n)&&(n=n.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(n)||(n+="/"));const r=window.tinymce||window.tinyMCEPreInit;if(r)e=r.base||r.baseURL,o=r.suffix;else{const a=document.getElementsByTagName("script");for(let i=0;i<a.length;i++){const l=a[i].src||"";if(""===l)continue;const d=l.substring(l.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(l)){-1!==d.indexOf(".min")&&(o=".min"),e=l.substring(0,l.lastIndexOf("/"));break}}if(!e&&document.currentScript){const i=document.currentScript.src;-1!==i.indexOf(".min")&&(o=".min"),e=i.substring(0,i.lastIndexOf("/"))}}var s;t.baseURL=new nn(n).toAbsolute(e),t.documentBaseURL=n,t.baseURI=new nn(t.baseURL),t.suffix=o,(s=t).on("AddEditor",X(jk,s)),s.on("RemoveEditor",X(Vk,s))},overrideDefaults(t){const e=t.base_url;e&&this._setBaseUrl(e),t.suffix&&(this.suffix=t.suffix),this.defaultOptions=t;const o=t.plugin_base_urls;void 0!==o&&At(o,(r,s)=>{ie.PluginManager.urls[s]=r})},init(t){const e=this;let n;const o=z.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu"," ");let r=a=>{n=a};const s=()=>{let a=0;const i=[];let l;var d;Lr.unbind(window,"ready",s),(d=>{const c=t.onpageload;c&&c.apply(e,[])})(),l=((d,c)=>{const u=[],f=xt(c)?m=>It(u,g=>c(g,m)):m=>Pt(u,m);for(let m=0,g=d.length;m<g;m++){const b=d[m];f(b)||u.push(b)}return u})((d=t,wt.browser.isIE()||wt.browser.isEdge()?(Ni("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tiny.cloud/docs/tinymce/6/support/#supportedwebbrowsers"),[]):mR?(Ni("Failed to initialize the editor as the document is not in standards mode. TinyMCE requires standards mode."),[]):at(d.selector)?Lr.select(d.selector):ut(d.target)?[d.target]:[])),z.each(l,d=>{var c;(c=e.get(d.id))&&c.initialized&&!(c.getContainer()||c.getBody()).parentNode&&(h1(c),c.unbindAllNativeEvents(),c.destroy(!0),c.removed=!0,c=null)}),l=z.grep(l,d=>!e.get(d.id)),0===l.length?r([]):rl(l,d=>{t.inline&&d.tagName.toLowerCase()in o?Ni("Could not initialize inline editor on invalid inline target element",d):((c,u,f)=>{const m=new ol(c,u,e);i.push(m),m.on("init",()=>{++a===l.length&&r(i)}),m.targetElm=m.targetElm||f,m.render()})((c=>{let u=c.id;return u||(u=Nt(c,"name").filter(f=>!Lr.get(f)).getOrThunk(Lr.uniqueId),c.setAttribute("id",u)),u})(d),t,d)})};return Lr.bind(window,"ready",s),new Promise(a=>{n?a(n):r=i=>{a(i)}})},get(t){return 0===arguments.length?ve.slice(0):at(t)?Kt(ve,e=>e.id===t).getOr(null):an(t)&&ve[t]?ve[t]:null},add(t){const e=this,n=e.get(t.id);return n===t||(null===n&&ve.push(t),p1(!0),e.activeEditor=t,e.dispatch("AddEditor",{editor:t}),sl||(sl=o=>{const r=e.dispatch("BeforeUnload");if(r.returnValue)return o.preventDefault(),o.returnValue=r.returnValue,r.returnValue},window.addEventListener("beforeunload",sl))),t},createEditor(t,e){return this.add(new ol(t,e,this))},remove(t){const e=this;let n,o;if(t){if(!at(t))return o=t,Ur(e.get(o.id))?null:(h1(o)&&e.dispatch("RemoveEditor",{editor:o}),0===ve.length&&window.removeEventListener("beforeunload",sl),o.remove(),p1(ve.length>0),o);rl(Lr.select(t),r=>{o=e.get(r.id),o&&e.remove(o)})}else for(n=ve.length-1;n>=0;n--)e.remove(ve[n])},execCommand(t,e,n){var o;const r=this,s=Ae(n)?null!==(o=n.id)&&void 0!==o?o:n.index:n;switch(t){case"mceAddEditor":return r.get(s)||new ol(s,n.options,r).render(),!0;case"mceRemoveEditor":{const a=r.get(s);return a&&a.remove(),!0}case"mceToggleEditor":{const a=r.get(s);return a?(a.isHidden()?a.show():a.hide(),!0):(r.execCommand("mceAddEditor",!1,n),!0)}}return!!r.activeEditor&&r.activeEditor.execCommand(t,e,n)},triggerSave:()=>{rl(ve,t=>{t.save()})},addI18n:(t,e)=>{Je.add(t,e)},translate:t=>Je.translate(t),setActive(t){const e=this.activeEditor;this.activeEditor!==t&&(e&&e.dispatch("deactivate",{relatedTarget:t}),t.dispatch("activate",{relatedTarget:e})),this.activeEditor=t},_setBaseUrl(t){this.baseURL=new nn(this.documentBaseURL).toAbsolute(t.replace(/\/+$/,"")),this.baseURI=new nn(this.baseURL)}});co.setup();const fR=(()=>{const t=to();return{FakeClipboardItem:e=>({items:e,types:Xe(e),getType:n=>Nt(e,n).getOrUndefined()}),write:e=>{t.set(e)},read:()=>t.get().getOrUndefined(),clear:t.clear}})(),b1=Math.min,Pr=Math.max,il=Math.round,v1=(t,e,n)=>{let o=e.x,r=e.y;const s=t.w,a=t.h,i=e.w,l=e.h,d=(n||"").split("");return"b"===d[0]&&(r+=l),"r"===d[1]&&(o+=i),"c"===d[0]&&(r+=il(l/2)),"c"===d[1]&&(o+=il(i/2)),"b"===d[3]&&(r-=a),"r"===d[4]&&(o-=s),"c"===d[3]&&(r-=il(a/2)),"c"===d[4]&&(o-=il(s/2)),Mr(o,r,s,a)},Mr=(t,e,n,o)=>({x:t,y:e,w:n,h:o}),gR={inflate:(t,e,n)=>Mr(t.x-e,t.y-n,t.w+2*e,t.h+2*n),relativePosition:v1,findBestRelativePosition:(t,e,n,o)=>{let r,s;for(s=0;s<o.length;s++)if(r=v1(t,e,o[s]),r.x>=n.x&&r.x+r.w<=n.w+n.x&&r.y>=n.y&&r.y+r.h<=n.h+n.y)return o[s];return null},intersect:(t,e)=>{const n=Pr(t.x,e.x),o=Pr(t.y,e.y),r=b1(t.x+t.w,e.x+e.w),s=b1(t.y+t.h,e.y+e.h);return r-n<0||s-o<0?null:Mr(n,o,r-n,s-o)},clamp:(t,e,n)=>{let o=t.x,r=t.y,s=t.x+t.w,a=t.y+t.h;const i=e.x+e.w,l=e.y+e.h,d=Pr(0,e.x-o),c=Pr(0,e.y-r),u=Pr(0,s-i),f=Pr(0,a-l);return o+=d,r+=c,n&&(s+=d,a+=c,o-=u,r-=f),s-=u,a-=f,Mr(o,r,s-o,a-r)},create:Mr,fromClientRect:t=>Mr(t.left,t.top,t.width,t.height)},pR=(()=>{const t={},e={};return{load:(n,o)=>{const r=`Script at URL "${o}" failed to load`,s=`Script at URL "${o}" did not call \`tinymce.Resource.add('${n}', data)\` within 1 second`;if(void 0!==t[n])return t[n];{const a=new Promise((i,l)=>{const d=((c,u,f=1e3)=>{let m=!1,g=null;const b=v=>(...y)=>{m||(m=!0,null!==g&&(clearTimeout(g),g=null),v.apply(null,y))},p=b(c),h=b(u);return{start:(...v)=>{m||null!==g||(g=setTimeout(()=>h.apply(null,v),f))},resolve:p,reject:h}})(i,l);e[n]=d.resolve,Pn.ScriptLoader.loadScript(o).then(()=>d.start(s),()=>d.reject(r))});return t[n]=a,a}},add:(n,o)=>{void 0!==e[n]&&(e[n](o),delete e[n]),t[n]=Promise.resolve(o)},unload:n=>{delete t[n]}}})();let Js;try{const t="__storage_test__";Js=window.localStorage,Js.setItem(t,t),Js.removeItem(t)}catch(t){Js=(()=>{let e={},n=[];const o={getItem:r=>e[r]||null,setItem:(r,s)=>{n.push(r),e[r]=String(s)},key:r=>n[r],removeItem:r=>{n=n.filter(s=>s===r),delete e[r]},clear:()=>{n=[],e={}},length:0};return Object.defineProperty(o,"length",{get:()=>n.length,configurable:!1,enumerable:!1}),o})()}const hR={geom:{Rect:gR},util:{Delay:Ue,Tools:z,VK:tt,URI:nn,EventDispatcher:am,Observable:im,I18n:Je,LocalStorage:Js,ImageUploader:t=>{const e=j0(),n=H0(t,e);return{upload:(o,r=!0)=>n.upload(o,r?V0(t):void 0)}}},dom:{EventUtils:Eo,TreeWalker:Gt,TextSeeker:_o,DOMUtils:St,ScriptLoader:Pn,RangeUtils:Cr,Serializer:L0,StyleSheetLoader:Mf,ControlSelection:th,BookmarkManager:Es,Selection:D0,Event:Eo.Event},html:{Styles:Ql,Entities:Qn,Node:be,Schema:Zn,DomParser:kr,Writer:Ih,Serializer:ro},Env:wt,AddOnManager:ie,Annotator:Kp,Formatter:W0,UndoManager:G0,EditorCommands:o1,WindowManager:F0,NotificationManager:I0,EditorObservable:i1,Shortcuts:m1,Editor:ol,FocusManager:kh,EditorManager:co,DOM:St.DOM,ScriptLoader:Pn.ScriptLoader,PluginManager:Er,ThemeManager:Uo,ModelManager:Sr,IconManager:Ei,Resource:pR,FakeClipboard:fR,trim:z.trim,isArray:z.isArray,is:z.is,toArray:z.toArray,makeMap:z.makeMap,each:z.each,map:z.map,grep:z.grep,inArray:z.inArray,extend:z.extend,walk:z.walk,resolve:z.resolve,explode:z.explode,_addCacheSuffix:z._addCacheSuffix},y1=z.extend(co,hR);(t=>{window.tinymce=t,window.tinyMCE=t})(y1),(t=>{if("object"==typeof module)try{module.exports=t}catch(e){}})(y1)}();