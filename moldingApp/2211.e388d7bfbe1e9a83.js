"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2211,6188],{6188:(T,f,r)=>{r.d(f,{o:()=>e});var _=r(4522),m=r(8260),l=r(3668),h=r(3521),s=r(5243);let e=(()=>{class g{constructor(a,c,d){this.http=a,this.requestService=c,this.alertService=d}getToolByInput(a){return new Promise((c,d)=>{switch(a.length){case 5:this.getToolByToolNumber(a).then(n=>{c(n)},n=>{this.alertService.simpleAlert("Erreur","Le serveur outillage \xe0 renvoy\xe9 une erreur :",n),d()}).catch(n=>{console.error(n)});break;case 7:break;case 8:a.startsWith("OT")&&this.getToolByToolNumber(a.substring(a.length-5)).then(n=>{c(n)},n=>{this.alertService.simpleAlert("Erreur","Le serveur outillage \xe0 renvoy\xe9 une erreur :",n),d()}).catch(n=>{console.error(n)});break;default:this.getToolByIdentification(a).then(n=>{c(n)},n=>{this.alertService.simpleAlert("Erreur","Le serveur outillage \xe0 renvoy\xe9 une erreur :",n),d()}).catch(n=>{console.error(n)})}})}getToolById(a){return this.requestService.createGetRequest(`${m.N.toolApi}tools/${a}`)}getToolByToolNumber(a){return new Promise((c,d)=>{this.requestService.createGetRequest(`${m.N.toolApi}tools?sapToolNumber=${a}`).then(n=>{1===n.length?c(n[0]):d(n.length>1?"Il y a plus d'un outillage correspondant en base de donn\xe9e":"aucun outillage trouv\xe9")},n=>{console.log(n),d("Pas de r\xe9ponse du serveur")})})}getToolByIdentification(a){return new Promise((c,d)=>{this.requestService.createGetRequest(`${m.N.toolApi}tools?identification=${a}`).then(n=>{1===n.length?c(n[0]):d(n.length>1?"Il y a plus d'un outillage correspondant en base de donn\xe9e":"aucun outillage trouv\xe9")},n=>{console.log(n),d("Pas de r\xe9ponse du serveur")})})}getAllTools(){return new Promise((a,c)=>{const d=(new _.WM).append("content-type","application/json");this.http.get(`${m.N.apiServer}molding_tools`,{headers:d}).subscribe(n=>{a(n)},n=>{console.log(n),c()})})}getIri(a){return`/api/tools/${a.id}`}createTool(a){const c=a;return c.sapToolNumber=parseInt(a.sapToolNumber.substring(2),10),this.requestService.createPostRequest(m.N.toolApi+"tools",c)}}return g.\u0275fac=function(a){return new(a||g)(l.LFG(_.eN),l.LFG(h.s),l.LFG(s.c))},g.\u0275prov=l.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"}),g})()},9542:(T,f,r)=>{r.r(f),r.d(f,{AdminMoldingPageModule:()=>B});var _=r(6019),m=r(9133),l=r(1704),h=r(4382),s=r(2899),e=r(3668),g=r(7143);function A(t,i){1&t&&e._UZ(0,"ion-spinner",10)}function a(t,i){1&t&&e._UZ(0,"th",23)}function c(t,i){if(1&t&&(e.TgZ(0,"td",24),e._UZ(1,"ion-icon",25),e.qZA()),2&t){const o=i.$implicit;e.xp6(1),e.Q6J("color",o.status?"danger":"success")}}function d(t,i){1&t&&(e.TgZ(0,"th",23),e._uU(1," ID "),e.qZA())}function n(t,i){if(1&t&&(e.TgZ(0,"td",24),e._uU(1),e.qZA()),2&t){const o=i.$implicit;e.xp6(1),e.hij(" ",o.id," ")}}function p(t,i){1&t&&(e.TgZ(0,"th",23),e._uU(1," Date du moulage "),e.qZA())}function M(t,i){if(1&t&&(e.TgZ(0,"td",24),e._uU(1),e.ALo(2,"date"),e.qZA()),2&t){const o=i.$implicit;e.xp6(1),e.hij(" ",e.xi3(2,1,o.moldingDay,"dd/MM/yyyy")," ")}}function P(t,i){1&t&&(e.TgZ(0,"th",23),e._uU(1," Cr\xe9\xe9 par "),e.qZA())}function v(t,i){if(1&t&&(e.TgZ(0,"td",24),e._uU(1),e.qZA()),2&t){const o=i.$implicit;e.xp6(1),e.hij(" ",o.createdBy.username," ")}}function y(t,i){1&t&&(e.TgZ(0,"th",23),e._uU(1," Outillage "),e.qZA())}function x(t,i){if(1&t&&(e.TgZ(0,"td",24),e._uU(1),e.qZA()),2&t){const o=i.$implicit;e.xp6(1),e.AsE(" ",o.outillage.sapToolNumber," - ",o.outillage.designation,"")}}function N(t,i){1&t&&e._UZ(0,"th",23)}function q(t,i){if(1&t&&(e.TgZ(0,"td",24),e.TgZ(1,"ion-button",26),e._uU(2," Editer "),e.qZA(),e.qZA()),2&t){const o=i.$implicit;e.xp6(1),e.Q6J("routerLink","/molding/create-molding/"+o.id)}}function U(t,i){1&t&&e._UZ(0,"tr",27)}function C(t,i){1&t&&e._UZ(0,"tr",28)}function I(t,i){if(1&t){const o=e.EpF();e.TgZ(0,"ion-card-content"),e.TgZ(1,"ion-input",11),e.NdJ("ionInput",function(Z){return e.CHM(o),e.oxw().applyFilter(Z)}),e.qZA(),e.TgZ(2,"table",12),e.ynx(3,13),e.YNc(4,a,1,0,"th",14),e.YNc(5,c,2,1,"td",15),e.BQk(),e.ynx(6,16),e.YNc(7,d,2,0,"th",14),e.YNc(8,n,2,1,"td",15),e.BQk(),e.ynx(9,17),e.YNc(10,p,2,0,"th",14),e.YNc(11,M,3,4,"td",15),e.BQk(),e.ynx(12,18),e.YNc(13,P,2,0,"th",14),e.YNc(14,v,2,1,"td",15),e.BQk(),e.ynx(15,19),e.YNc(16,y,2,0,"th",14),e.YNc(17,x,2,2,"td",15),e.BQk(),e.ynx(18,20),e.YNc(19,N,1,0,"th",14),e.YNc(20,q,3,1,"td",15),e.BQk(),e.YNc(21,U,1,0,"tr",21),e.YNc(22,C,1,0,"tr",22),e.qZA(),e.qZA()}if(2&t){const o=e.oxw();e.xp6(2),e.Q6J("dataSource",o.dataSource),e.xp6(19),e.Q6J("matHeaderRowDef",o.displayedMoldingColumns),e.xp6(1),e.Q6J("matRowDefColumns",o.displayedMoldingColumns)}}const D=[{path:"",component:(()=>{class t{constructor(o){this.moldingService=o,this.displayedMoldingColumns=["status","id","moldingDay","createdBy","outillage","commands"]}ngAfterViewChecked(){}ngOnDestroy(){}ionViewDidEnter(){this.getMoldings()}ngOnInit(){}getMoldings(){this.moldingListLoading=!0,this.moldingService.getMoldings().then(o=>{this.moldings=o,this.moldingListLoading=!1,this.moldings.forEach(u=>{u.status=!1}),this.dataSource=new s.by(this.moldings)})}applyFilter(o){this.dataSource.filter=o.target.value.trim().toLowerCase()}}return t.\u0275fac=function(o){return new(o||t)(e.Y36(g.s))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-admin-molding"]],decls:37,vars:3,consts:[["slot","start"],["color","light",3,"fullscreen"],["false",""],["size","8"],[1,"ion-no-margin"],["size","small","slot","end",3,"click"],["size","small","slot","icon-only","name","refresh"],["slot","end","name","circles",4,"ngIf"],[4,"ngIf"],["size","4"],["slot","end","name","circles"],["type","text","placeholder","Num\xe9ro d'OT",3,"ionInput"],["mat-table","","fixedLayout","true",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","status"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","id"],["matColumnDef","moldingDay"],["matColumnDef","createdBy"],["matColumnDef","outillage"],["matColumnDef","commands"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["name","ellipse",3,"color"],["size","small","expand","block","fill","solid","shape","round",3,"routerLink"],["mat-header-row",""],["mat-row",""]],template:function(o,u){1&o&&(e.TgZ(0,"ion-header"),e.TgZ(1,"ion-toolbar"),e.TgZ(2,"ion-buttons",0),e._UZ(3,"ion-back-button"),e.qZA(),e.TgZ(4,"ion-title"),e._uU(5,"Administration des moulages"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(6,"ion-content",1),e.TgZ(7,"ion-grid",2),e.TgZ(8,"ion-row"),e.TgZ(9,"ion-col",3),e.TgZ(10,"ion-card"),e.TgZ(11,"ion-card-header"),e.TgZ(12,"ion-toolbar",4),e.TgZ(13,"ion-card-title"),e._uU(14,"Liste des moulages"),e.qZA(),e.TgZ(15,"ion-button",5),e.NdJ("click",function(){return u.getMoldings()}),e._UZ(16,"ion-icon",6),e.qZA(),e.YNc(17,A,1,0,"ion-spinner",7),e.qZA(),e.qZA(),e.YNc(18,I,23,3,"ion-card-content",8),e.qZA(),e.qZA(),e.TgZ(19,"ion-col",9),e.TgZ(20,"ion-card"),e.TgZ(21,"ion-card-header"),e.TgZ(22,"ion-card-title"),e._uU(23,"Tableau de bord"),e.qZA(),e.qZA(),e.TgZ(24,"ion-card-content"),e.TgZ(25,"ion-card"),e.TgZ(26,"ion-card-header"),e.TgZ(27,"ion-card-subtitle"),e._uU(28,"Nouveaux moulages"),e.qZA(),e.qZA(),e.TgZ(29,"ion-card-content"),e._uU(30," GRAPHIQUE ICI "),e.qZA(),e.qZA(),e.TgZ(31,"ion-card"),e.TgZ(32,"ion-card-header"),e.TgZ(33,"ion-card-subtitle"),e._uU(34,"Nombre de connexions par jour"),e.qZA(),e.qZA(),e.TgZ(35,"ion-card-content"),e._uU(36," GRAPHIQUE ICI "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&o&&(e.xp6(6),e.Q6J("fullscreen",!1),e.xp6(11),e.Q6J("ngIf",u.moldingListLoading),e.xp6(1),e.Q6J("ngIf",u.moldings))},directives:[l.Gu,l.sr,l.Sm,l.oU,l.cs,l.wd,l.W2,l.jY,l.Nd,l.wI,l.PM,l.Zi,l.Dq,l.YG,l.gu,_.O5,l.FN,l.tO,l.PQ,l.pK,l.j9,s.BZ,s.w1,s.fO,s.Dz,s.as,s.nj,s.ge,s.ev,l.YI,h.rH,s.XQ,s.Gk],pipes:[_.uU],styles:["ion-toolbar[_ngcontent-%COMP%]{--min-height: 0 !important}mat-table[_ngcontent-%COMP%], table[_ngcontent-%COMP%]{width:100%}"]}),t})()},{path:"create-molding/:id",loadChildren:()=>Promise.all([r.e(3050),r.e(5440)]).then(r.bind(r,5440)).then(t=>t.CreateMoldingPageModule)}];let E=(()=>{class t{}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[h.Bz.forChild(D)],h.Bz]}),t})(),B=(()=>{class t{}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[_.ez,m.u5,l.Pc,E,s.p0]]}),t})()}}]);